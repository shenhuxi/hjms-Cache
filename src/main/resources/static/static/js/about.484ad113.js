(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"03a1":function(module,exports,__webpack_require__){(function(t,e){module.exports=e()})(0,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){var i,r=n(1),o=n(3),a=n(5),s=n(20),c=n(23),l=n(25);"undefined"!==typeof window&&(i=n(27)
/*!
	    Mock - 模拟请求 & 模拟数据
	    https://github.com/nuysoft/Mock
	    墨智 mozhi.gyy@taobao.com nuysoft@gmail.com
	*/);var u={Handler:r,Random:a,Util:o,XHR:i,RE:s,toJSONSchema:c,valid:l,heredoc:o.heredoc,setup:function(t){return i.setup(t)},_mocked:{},version:"1.0.1-beta3"};i&&(i.Mock=u),u.mock=function(t,e,n){return 1===arguments.length?r.gen(t):(2===arguments.length&&(n=e,e=void 0),i&&(window.XMLHttpRequest=i),u._mocked[t+(e||"")]={rurl:t,rtype:e,template:n},u)},t.exports=u},function(module,exports,__webpack_require__){var Constant=__webpack_require__(2),Util=__webpack_require__(3),Parser=__webpack_require__(4),Random=__webpack_require__(5),RE=__webpack_require__(20),Handler={extend:Util.extend,gen:function(t,e,n){e=void 0==e?"":e+"",n=n||{},n={path:n.path||[Constant.GUID],templatePath:n.templatePath||[Constant.GUID++],currentContext:n.currentContext,templateCurrentContext:n.templateCurrentContext||t,root:n.root||n.currentContext,templateRoot:n.templateRoot||n.templateCurrentContext||t};var i,r=Parser.parse(e),o=Util.type(t);return Handler[o]?(i=Handler[o]({type:o,template:t,name:e,parsedName:e?e.replace(Constant.RE_KEY,"$1"):e,rule:r,context:n}),n.root||(n.root=i),i):t}};Handler.extend({array:function(t){var e,n,i=[];if(0===t.template.length)return i;if(t.rule.parameters)if(1===t.rule.min&&void 0===t.rule.max)t.context.path.push(t.name),t.context.templatePath.push(t.name),i=Random.pick(Handler.gen(t.template,void 0,{path:t.context.path,templatePath:t.context.templatePath,currentContext:i,templateCurrentContext:t.template,root:t.context.root||i,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();else if(t.rule.parameters[2])t.template.__order_index=t.template.__order_index||0,t.context.path.push(t.name),t.context.templatePath.push(t.name),i=Handler.gen(t.template,void 0,{path:t.context.path,templatePath:t.context.templatePath,currentContext:i,templateCurrentContext:t.template,root:t.context.root||i,templateRoot:t.context.templateRoot||t.template})[t.template.__order_index%t.template.length],t.template.__order_index+=+t.rule.parameters[2],t.context.path.pop(),t.context.templatePath.pop();else for(e=0;e<t.rule.count;e++)for(n=0;n<t.template.length;n++)t.context.path.push(i.length),t.context.templatePath.push(n),i.push(Handler.gen(t.template[n],i.length,{path:t.context.path,templatePath:t.context.templatePath,currentContext:i,templateCurrentContext:t.template,root:t.context.root||i,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();else for(e=0;e<t.template.length;e++)t.context.path.push(e),t.context.templatePath.push(e),i.push(Handler.gen(t.template[e],e,{path:t.context.path,templatePath:t.context.templatePath,currentContext:i,templateCurrentContext:t.template,root:t.context.root||i,templateRoot:t.context.templateRoot||t.template})),t.context.path.pop(),t.context.templatePath.pop();return i},object:function(t){var e,n,i,r,o,a,s={};if(void 0!=t.rule.min)for(e=Util.keys(t.template),e=Random.shuffle(e),e=e.slice(0,t.rule.count),a=0;a<e.length;a++)i=e[a],r=i.replace(Constant.RE_KEY,"$1"),t.context.path.push(r),t.context.templatePath.push(i),s[r]=Handler.gen(t.template[i],i,{path:t.context.path,templatePath:t.context.templatePath,currentContext:s,templateCurrentContext:t.template,root:t.context.root||s,templateRoot:t.context.templateRoot||t.template}),t.context.path.pop(),t.context.templatePath.pop();else{for(i in e=[],n=[],t.template)("function"===typeof t.template[i]?n:e).push(i);for(e=e.concat(n),a=0;a<e.length;a++)i=e[a],r=i.replace(Constant.RE_KEY,"$1"),t.context.path.push(r),t.context.templatePath.push(i),s[r]=Handler.gen(t.template[i],i,{path:t.context.path,templatePath:t.context.templatePath,currentContext:s,templateCurrentContext:t.template,root:t.context.root||s,templateRoot:t.context.templateRoot||t.template}),t.context.path.pop(),t.context.templatePath.pop(),o=i.match(Constant.RE_KEY),o&&o[2]&&"number"===Util.type(t.template[i])&&(t.template[i]+=parseInt(o[2],10))}return s},number:function(t){var e,n;if(t.rule.decimal){t.template+="",n=t.template.split("."),n[0]=t.rule.range?t.rule.count:n[0],n[1]=(n[1]||"").slice(0,t.rule.dcount);while(n[1].length<t.rule.dcount)n[1]+=n[1].length<t.rule.dcount-1?Random.character("number"):Random.character("123456789");e=parseFloat(n.join("."),10)}else e=t.rule.range&&!t.rule.parameters[2]?t.rule.count:t.template;return e},boolean:function(t){var e;return e=t.rule.parameters?Random.bool(t.rule.min,t.rule.max,t.template):t.template,e},string:function(t){var e,n,i,r,o="";if(t.template.length){for(void 0==t.rule.count&&(o+=t.template),e=0;e<t.rule.count;e++)o+=t.template;for(n=o.match(Constant.RE_PLACEHOLDER)||[],e=0;e<n.length;e++)if(i=n[e],/^\\/.test(i))n.splice(e--,1);else{if(r=Handler.placeholder(i,t.context.currentContext,t.context.templateCurrentContext,t),1===n.length&&i===o&&typeof r!==typeof o){o=r;break}o=o.replace(i,r)}}else o=t.rule.range?Random.string(t.rule.count):t.template;return o},function:function(t){return t.template.call(t.context.currentContext,t)},regexp:function(t){var e="";void 0==t.rule.count&&(e+=t.template.source);for(var n=0;n<t.rule.count;n++)e+=t.template.source;return RE.Handler.gen(RE.Parser.parse(e))}}),Handler.extend({_all:function(){var t={};for(var e in Random)t[e.toLowerCase()]=e;return t},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(error){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if("/"===key.charAt(0)||pathParts.length>1)return this.getValueByKeyPath(key,options);if(templateContext&&"object"===typeof templateContext&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random)&&!(lkey in Random)&&!(okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return void 0===re&&(re=""),delete handle.options,re}},getValueByKeyPath:function(t,e){var n=t,i=this.splitPathToArray(t),r=[];"/"===t.charAt(0)?r=[e.context.path[0]].concat(this.normalizePath(i)):i.length>1&&(r=e.context.path.slice(0),r.pop(),r=this.normalizePath(r.concat(i)));try{t=i[i.length-1];for(var o=e.context.root,a=e.context.templateRoot,s=1;s<r.length-1;s++)o=o[r[s]],a=a[r[s]];if(o&&t in o)return o[t];if(a&&"object"===typeof a&&t in a&&n!==a[t])return a[t]=Handler.gen(a[t],t,{currentContext:o,templateCurrentContext:a}),a[t]}catch(c){}return"@"+i.join("/")},normalizePath:function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n]){case"..":e.pop();break;case".":break;default:e.push(t[n])}return e},splitPathToArray:function(t){var e=t.split(/\/+/);return e[e.length-1]||(e=e.slice(0,-1)),e[0]||(e=e.slice(1)),e}}),module.exports=Handler},function(t,e){t.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(t,e){var n={extend:function(){var t,e,i,r,o,a=arguments[0]||{},s=1,c=arguments.length;for(1===c&&(a=this,s=0);s<c;s++)if(t=arguments[s],t)for(e in t)i=a[e],r=t[e],a!==r&&void 0!==r&&(n.isArray(r)||n.isObject(r)?(n.isArray(r)&&(o=i&&n.isArray(i)?i:[]),n.isObject(r)&&(o=i&&n.isObject(i)?i:{}),a[e]=n.extend(o,r)):a[e]=r);return a},each:function(t,e,n){var i,r;if("number"===this.type(t))for(i=0;i<t;i++)e(i,i);else if(t.length===+t.length){for(i=0;i<t.length;i++)if(!1===e.call(n,t[i],i,t))break}else for(r in t)if(!1===e.call(n,t[r],r,t))break},type:function(t){return null===t||void 0===t?String(t):Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1].toLowerCase()}};n.each("String Object Array RegExp Function".split(" "),(function(t){n["is"+t]=function(e){return n.type(e)===t.toLowerCase()}})),n.isObjectOrArray=function(t){return n.isObject(t)||n.isArray(t)},n.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},n.values=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},n.heredoc=function(t){return t.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},n.noop=function(){},t.exports=n},function(t,e,n){var i=n(2),r=n(5);t.exports={parse:function(t){t=void 0==t?"":t+"";var e=(t||"").match(i.RE_KEY),n=e&&e[3]&&e[3].match(i.RE_RANGE),o=n&&n[1]&&parseInt(n[1],10),a=n&&n[2]&&parseInt(n[2],10),s=n?n[2]?r.integer(o,a):parseInt(n[1],10):void 0,c=e&&e[4]&&e[4].match(i.RE_RANGE),l=c&&c[1]&&parseInt(c[1],10),u=c&&c[2]&&parseInt(c[2],10),d=c?!c[2]&&parseInt(c[1],10)||r.integer(l,u):void 0,h={parameters:e,range:n,min:o,max:a,count:s,decimal:c,dmin:l,dmax:u,dcount:d};for(var f in h)if(void 0!=h[f])return h;return{}}}},function(t,e,n){var i=n(3),r={extend:i.extend};r.extend(n(6)),r.extend(n(7)),r.extend(n(8)),r.extend(n(10)),r.extend(n(13)),r.extend(n(15)),r.extend(n(16)),r.extend(n(17)),r.extend(n(14)),r.extend(n(19)),t.exports=r},function(t,e){t.exports={boolean:function(t,e,n){return void 0!==n?(t="undefined"===typeof t||isNaN(t)?1:parseInt(t,10),e="undefined"===typeof e||isNaN(e)?1:parseInt(e,10),Math.random()>1/(t+e)*t?!n:n):Math.random()>=.5},bool:function(t,e,n){return this.boolean(t,e,n)},natural:function(t,e){return t="undefined"!==typeof t?parseInt(t,10):0,e="undefined"!==typeof e?parseInt(e,10):9007199254740992,Math.round(Math.random()*(e-t))+t},integer:function(t,e){return t="undefined"!==typeof t?parseInt(t,10):-9007199254740992,e="undefined"!==typeof e?parseInt(e,10):9007199254740992,Math.round(Math.random()*(e-t))+t},int:function(t,e){return this.integer(t,e)},float:function(t,e,n,i){n=void 0===n?0:n,n=Math.max(Math.min(n,17),0),i=void 0===i?17:i,i=Math.max(Math.min(i,17),0);for(var r=this.integer(t,e)+".",o=0,a=this.natural(n,i);o<a;o++)r+=o<a-1?this.character("number"):this.character("123456789");return parseFloat(r,10)},character:function(t){var e={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return e.alpha=e.lower+e.upper,e["undefined"]=e.lower+e.upper+e.number+e.symbol,t=e[(""+t).toLowerCase()]||t,t.charAt(this.natural(0,t.length-1))},char:function(t){return this.character(t)},string:function(t,e,n){var i;switch(arguments.length){case 0:i=this.natural(3,7);break;case 1:i=t,t=void 0;break;case 2:"string"===typeof arguments[0]?i=e:(i=this.natural(t,e),t=void 0);break;case 3:i=this.natural(e,n);break}for(var r="",o=0;o<i;o++)r+=this.character(t);return r},str:function(){return this.string.apply(this,arguments)},range:function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1,t=+t,e=+e,n=+n;var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);while(r<i)o[r++]=t,t+=n;return o}}},function(t,e){var n={yyyy:"getFullYear",yy:function(t){return(""+t.getFullYear()).slice(2)},y:"yy",MM:function(t){var e=t.getMonth()+1;return e<10?"0"+e:e},M:function(t){return t.getMonth()+1},dd:function(t){var e=t.getDate();return e<10?"0"+e:e},d:"getDate",HH:function(t){var e=t.getHours();return e<10?"0"+e:e},H:"getHours",hh:function(t){var e=t.getHours()%12;return e<10?"0"+e:e},h:function(t){return t.getHours()%12},mm:function(t){var e=t.getMinutes();return e<10?"0"+e:e},m:"getMinutes",ss:function(t){var e=t.getSeconds();return e<10?"0"+e:e},s:"getSeconds",SS:function(t){var e=t.getMilliseconds();return e<10&&"00"+e||e<100&&"0"+e||e},S:"getMilliseconds",A:function(t){return t.getHours()<12?"AM":"PM"},a:function(t){return t.getHours()<12?"am":"pm"},T:"getTime"};t.exports={_patternLetters:n,_rformat:new RegExp(function(){var t=[];for(var e in n)t.push(e);return"("+t.join("|")+")"}(),"g"),_formatDate:function(t,e){return e.replace(this._rformat,(function e(i,r){return"function"===typeof n[r]?n[r](t):n[r]in n?e(i,n[r]):t[n[r]]()}))},_randomDate:function(t,e){return t=void 0===t?new Date(0):t,e=void 0===e?new Date:e,new Date(Math.random()*(e.getTime()-t.getTime()))},date:function(t){return t=t||"yyyy-MM-dd",this._formatDate(this._randomDate(),t)},time:function(t){return t=t||"HH:mm:ss",this._formatDate(this._randomDate(),t)},datetime:function(t){return t=t||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),t)},now:function(t,e){1===arguments.length&&(/year|month|day|hour|minute|second|week/.test(t)||(e=t,t="")),t=(t||"").toLowerCase(),e=e||"yyyy-MM-dd HH:mm:ss";var n=new Date;switch(t){case"year":n.setMonth(0);case"month":n.setDate(1);case"week":case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}switch(t){case"week":n.setDate(n.getDate()-n.getDay())}return this._formatDate(n,e)}}},function(t,e,n){(function(t){t.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(t,e,n,i,r){return 4===arguments.length&&(r=i,i=void 0),3===arguments.length&&(r=n,n=void 0),t||(t=this.pick(this._adSize)),e&&~e.indexOf("#")&&(e=e.slice(1)),n&&~n.indexOf("#")&&(n=n.slice(1)),"http://dummyimage.com/"+t+(e?"/"+e:"")+(n?"/"+n:"")+(i?"."+i:"")+(r?"&text="+r:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var t=[];for(var e in this._brandColors)t.push(e);return t},dataImage:function(e,n){var i;if("undefined"!==typeof document)i=document.createElement("canvas");else{var r=t.require("canvas");i=new r}var o=i&&i.getContext&&i.getContext("2d");if(!i||!o)return"";e||(e=this.pick(this._adSize)),n=void 0!==n?n:e,e=e.split("x");var a=parseInt(e[0],10),s=parseInt(e[1],10),c=this._brandColors[this.pick(this._brandNames())],l="#FFF",u=14,d="sans-serif";return i.width=a,i.height=s,o.textAlign="center",o.textBaseline="middle",o.fillStyle=c,o.fillRect(0,0,a,s),o.fillStyle=l,o.font="bold "+u+"px "+d,o.fillText(n,a/2,s/2,a),i.toDataURL("image/png")}}}).call(e,n(9)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var i=n(11),r=n(12);t.exports={color:function(t){return t||r[t]?r[t].nicer:this.hex()},hex:function(){var t=this._goldenRatioColor(),e=i.hsv2rgb(t),n=i.rgb2hex(e[0],e[1],e[2]);return n},rgb:function(){var t=this._goldenRatioColor(),e=i.hsv2rgb(t);return"rgb("+parseInt(e[0],10)+", "+parseInt(e[1],10)+", "+parseInt(e[2],10)+")"},rgba:function(){var t=this._goldenRatioColor(),e=i.hsv2rgb(t);return"rgba("+parseInt(e[0],10)+", "+parseInt(e[1],10)+", "+parseInt(e[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var t=this._goldenRatioColor(),e=i.hsv2hsl(t);return"hsl("+parseInt(e[0],10)+", "+parseInt(e[1],10)+", "+parseInt(e[2],10)+")"},_goldenRatioColor:function(t,e){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,"number"!==typeof t&&(t=.5),"number"!==typeof e&&(e=.95),[360*this._hue,100*t,100*e]}}},function(t,e){t.exports={rgb2hsl:function(t){var e,n,i,r=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.min(r,o,a),c=Math.max(r,o,a),l=c-s;return c==s?e=0:r==c?e=(o-a)/l:o==c?e=2+(a-r)/l:a==c&&(e=4+(r-o)/l),e=Math.min(60*e,360),e<0&&(e+=360),i=(s+c)/2,n=c==s?0:i<=.5?l/(c+s):l/(2-c-s),[e,100*n,100*i]},rgb2hsv:function(t){var e,n,i,r=t[0],o=t[1],a=t[2],s=Math.min(r,o,a),c=Math.max(r,o,a),l=c-s;return n=0===c?0:l/c*1e3/10,c==s?e=0:r==c?e=(o-a)/l:o==c?e=2+(a-r)/l:a==c&&(e=4+(r-o)/l),e=Math.min(60*e,360),e<0&&(e+=360),i=c/255*1e3/10,[e,n,i]},hsl2rgb:function(t){var e,n,i,r,o,a=t[0]/360,s=t[1]/100,c=t[2]/100;if(0===s)return o=255*c,[o,o,o];n=c<.5?c*(1+s):c+s-c*s,e=2*c-n,r=[0,0,0];for(var l=0;l<3;l++)i=a+1/3*-(l-1),i<0&&i++,i>1&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[l]=255*o;return r},hsl2hsv:function(t){var e,n,i=t[0],r=t[1]/100,o=t[2]/100;return o*=2,r*=o<=1?o:2-o,n=(o+r)/2,e=2*r/(o+r),[i,100*e,100*n]},hsv2rgb:function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,r=Math.floor(e)%6,o=e-Math.floor(e),a=255*i*(1-n),s=255*i*(1-n*o),c=255*i*(1-n*(1-o));switch(i*=255,r){case 0:return[i,c,a];case 1:return[s,i,a];case 2:return[a,i,c];case 3:return[a,s,i];case 4:return[c,a,i];case 5:return[i,a,s]}},hsv2hsl:function(t){var e,n,i=t[0],r=t[1]/100,o=t[2]/100;return n=(2-r)*o,e=r*o,e/=n<=1?n:2-n,n/=2,[i,100*e,100*n]},rgb2hex:function(t,e,n){return"#"+((256+t<<8|e)<<8|n).toString(16).slice(1)},hex2rgb:function(t){return t="0x"+t.slice(1).replace(t.length>4?t:/./g,"$&$&")|0,[t>>16,t>>8&255,255&t]}}},function(t,e){t.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(t,e,n){var i=n(6),r=n(14);function o(t,e,n,r){return void 0===n?i.natural(t,e):void 0===r?n:i.natural(parseInt(n,10),parseInt(r,10))}t.exports={paragraph:function(t,e){for(var n=o(3,7,t,e),i=[],r=0;r<n;r++)i.push(this.sentence());return i.join(" ")},cparagraph:function(t,e){for(var n=o(3,7,t,e),i=[],r=0;r<n;r++)i.push(this.csentence());return i.join("")},sentence:function(t,e){for(var n=o(12,18,t,e),i=[],a=0;a<n;a++)i.push(this.word());return r.capitalize(i.join(" "))+"."},csentence:function(t,e){for(var n=o(12,18,t,e),i=[],r=0;r<n;r++)i.push(this.cword());return i.join("")+"。"},word:function(t,e){for(var n=o(3,10,t,e),r="",a=0;a<n;a++)r+=i.character("lower");return r},cword:function(t,e,n){var i,r="的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进着等部度家电力里如水化高自二理起小物现实加量都两体制机当使点从业本去把性好应开它合还因由其些然前外天政四日那社义事平形相全表间样与关各重新线内数正心反你明看原又么利比或但质气第向道命此变条只没结解问意建月公无系军很情者最立代想已通并提直题党程展五果料象员革位入常文总次品式活设及管特件长求老头基资边流路级少图山统接知较将组见计别她手角期根论运农指几九区强放决西被干做必战先回则任取据处队南给色光门即保治北造百规热领七海口东导器压志世金增争济阶油思术极交受联什认六共权收证改清己美再采转更单风切打白教速花带安场身车例真务具万每目至达走积示议声报斗完类八离华名确才科张信马节话米整空元况今集温传土许步群广石记需段研界拉林律叫且究观越织装影算低持音众书布复容儿须际商非验连断深难近矿千周委素技备半办青省列习响约支般史感劳便团往酸历市克何除消构府称太准精值号率族维划选标写存候毛亲快效斯院查江型眼王按格养易置派层片始却专状育厂京识适属圆包火住调满县局照参红细引听该铁价严龙飞";switch(arguments.length){case 0:t=r,i=1;break;case 1:"string"===typeof arguments[0]?i=1:(i=t,t=r);break;case 2:"string"===typeof arguments[0]?i=e:(i=this.natural(t,e),t=r);break;case 3:i=this.natural(e,n);break}for(var o="",a=0;a<i;a++)o+=t.charAt(this.natural(0,t.length-1));return o},title:function(t,e){for(var n=o(3,7,t,e),i=[],r=0;r<n;r++)i.push(this.capitalize(this.word()));return i.join(" ")},ctitle:function(t,e){for(var n=o(3,7,t,e),i=[],r=0;r<n;r++)i.push(this.cword());return i.join("")}}},function(t,e,n){var i=n(3);t.exports={capitalize:function(t){return(t+"").charAt(0).toUpperCase()+(t+"").substr(1)},upper:function(t){return(t+"").toUpperCase()},lower:function(t){return(t+"").toLowerCase()},pick:function(t,e,n){return i.isArray(t)?(void 0===e&&(e=1),void 0===n&&(n=e)):(t=[].slice.call(arguments),e=1,n=1),1===e&&1===n?t[this.natural(0,t.length-1)]:this.shuffle(t,e,n)},shuffle:function(t,e,n){t=t||[];for(var i=t.slice(0),r=[],o=0,a=i.length,s=0;s<a;s++)o=this.natural(0,i.length-1),r.push(i[o]),i.splice(o,1);switch(arguments.length){case 0:case 1:return r;case 2:n=e;case 3:return e=parseInt(e,10),n=parseInt(n,10),r.slice(0,this.natural(e,n))}},order:function t(e){t.cache=t.cache||{},arguments.length>1&&(e=[].slice.call(arguments,0));var n=t.options,i=n.context.templatePath.join("."),r=t.cache[i]=t.cache[i]||{index:0,array:e};return r.array[r.index++%r.array.length]}}},function(t,e){t.exports={first:function(){var t=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(t)},last:function(){var t=["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"];return this.pick(t)},name:function(t){return this.first()+" "+(t?this.first()+" ":"")+this.last()},cfirst:function(){var t="王 李 张 刘 陈 杨 赵 黄 周 吴 徐 孙 胡 朱 高 林 何 郭 马 罗 梁 宋 郑 谢 韩 唐 冯 于 董 萧 程 曹 袁 邓 许 傅 沈 曾 彭 吕 苏 卢 蒋 蔡 贾 丁 魏 薛 叶 阎 余 潘 杜 戴 夏 锺 汪 田 任 姜 范 方 石 姚 谭 廖 邹 熊 金 陆 郝 孔 白 崔 康 毛 邱 秦 江 史 顾 侯 邵 孟 龙 万 段 雷 钱 汤 尹 黎 易 常 武 乔 贺 赖 龚 文".split(" ");return this.pick(t)},clast:function(){var t="伟 芳 娜 秀英 敏 静 丽 强 磊 军 洋 勇 艳 杰 娟 涛 明 超 秀兰 霞 平 刚 桂英".split(" ");return this.pick(t)},cname:function(){return this.cfirst()+this.clast()}}},function(t,e){t.exports={url:function(t,e){return(t||this.protocol())+"://"+(e||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(t){return this.word()+"."+(t||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn 中国 中国互联.公司 中国互联.网络 tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(t){return this.character("lower")+"."+this.word()+"@"+(t||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(t,e,n){var i=n(18),r=["东北","华北","华东","华中","华南","西南","西北"];t.exports={region:function(){return this.pick(r)},province:function(){return this.pick(i).name},city:function(t){var e=this.pick(i),n=this.pick(e.children);return t?[e.name,n.name].join(" "):n.name},county:function(t){var e=this.pick(i),n=this.pick(e.children),r=this.pick(n.children)||{name:"-"};return t?[e.name,n.name,r.name].join(" "):r.name},zip:function(t){for(var e="",n=0;n<(t||6);n++)e+=this.natural(0,9);return e}}},function(t,e){var n={11e4:"北京",110100:"北京市",110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110228:"密云县",110229:"延庆县",110230:"其它区",12e4:"天津",120100:"天津市",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120221:"宁河县",120223:"静海县",120225:"蓟县",120226:"其它区",13e4:"河北省",130100:"石家庄市",130102:"长安区",130103:"桥东区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130121:"井陉县",130123:"正定县",130124:"栾城县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130181:"辛集市",130182:"藁城市",130183:"晋州市",130184:"新乐市",130185:"鹿泉市",130186:"其它区",130200:"唐山市",130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130230:"曹妃甸区",130281:"遵化市",130283:"迁安市",130284:"其它区",130300:"秦皇岛市",130302:"海港区",130303:"山海关区",130304:"北戴河区",130321:"青龙满族自治县",130322:"昌黎县",130323:"抚宁县",130324:"卢龙县",130398:"其它区",130400:"邯郸市",130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市",130482:"其它区",130500:"邢台市",130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市",130583:"其它区",130600:"保定市",130602:"新市区",130603:"北市区",130604:"南市区",130621:"满城县",130622:"清苑县",130623:"涞水县",130624:"阜平县",130625:"徐水县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130682:"定州市",130683:"安国市",130684:"高碑店市",130699:"其它区",130700:"张家口市",130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130721:"宣化县",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130729:"万全县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县",130733:"崇礼县",130734:"其它区",130800:"承德市",130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县",130829:"其它区",130900:"沧州市",130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市",130985:"其它区",131e3:"廊坊市",131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市",131083:"其它区",131100:"衡水市",131102:"桃城区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131181:"冀州市",131182:"深州市",131183:"其它区",14e4:"山西省",140100:"太原市",140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市",140182:"其它区",140200:"大同市",140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县",140228:"其它区",140300:"阳泉市",140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县",140323:"其它区",140400:"长治市",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市",140482:"城区",140483:"郊区",140485:"其它区",140500:"晋城市",140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市",140582:"其它区",140600:"朔州市",140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县",140625:"其它区",140700:"晋中市",140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市",140782:"其它区",140800:"运城市",140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市",140883:"其它区",140900:"忻州市",140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市",140982:"其它区",141e3:"临汾市",141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市",141083:"其它区",141100:"吕梁市",141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市",141183:"其它区",15e4:"内蒙古自治区",150100:"呼和浩特市",150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县",150126:"其它区",150200:"包头市",150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗",150224:"其它区",150300:"乌海市",150302:"海勃湾区",150303:"海南区",150304:"乌达区",150305:"其它区",150400:"赤峰市",150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗",150431:"其它区",150500:"通辽市",150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市",150582:"其它区",150600:"鄂尔多斯市",150602:"东胜区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗",150628:"其它区",150700:"呼伦贝尔市",150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市",150786:"其它区",150800:"巴彦淖尔市",150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗",150827:"其它区",150900:"乌兰察布市",150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市",150982:"其它区",152200:"兴安盟",152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县",152225:"其它区",152500:"锡林郭勒盟",152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县",152532:"其它区",152900:"阿拉善盟",152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗",152924:"其它区",21e4:"辽宁省",210100:"沈阳市",210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"东陵区",210113:"新城子区",210114:"于洪区",210122:"辽中县",210123:"康平县",210124:"法库县",210181:"新民市",210184:"沈北新区",210185:"其它区",210200:"大连市",210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210224:"长海县",210281:"瓦房店市",210282:"普兰店市",210283:"庄河市",210298:"其它区",210300:"鞍山市",210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市",210382:"其它区",210400:"抚顺市",210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县",210424:"其它区",210500:"本溪市",210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县",210523:"其它区",210600:"丹东市",210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市",210683:"其它区",210700:"锦州市",210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市",210783:"其它区",210800:"营口市",210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市",210883:"其它区",210900:"阜新市",210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县",210923:"其它区",211e3:"辽阳市",211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市",211082:"其它区",211100:"盘锦市",211102:"双台子区",211103:"兴隆台区",211121:"大洼县",211122:"盘山县",211123:"其它区",211200:"铁岭市",211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市",211283:"其它区",211300:"朝阳市",211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市",211383:"其它区",211400:"葫芦岛市",211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市",211482:"其它区",22e4:"吉林省",220100:"长春市",220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220122:"农安县",220181:"九台市",220182:"榆树市",220183:"德惠市",220188:"其它区",220200:"吉林市",220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市",220285:"其它区",220300:"四平市",220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市",220383:"其它区",220400:"辽源市",220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县",220423:"其它区",220500:"通化市",220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市",220583:"其它区",220600:"白山市",220602:"浑江区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220625:"江源区",220681:"临江市",220682:"其它区",220700:"松原市",220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220724:"扶余市",220725:"其它区",220800:"白城市",220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市",220883:"其它区",222400:"延边朝鲜族自治州",222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县",222427:"其它区",23e4:"黑龙江省",230100:"哈尔滨市",230102:"道里区",230103:"南岗区",230104:"道外区",230106:"香坊区",230108:"平房区",230109:"松北区",230111:"呼兰区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230181:"阿城区",230182:"双城市",230183:"尚志市",230184:"五常市",230186:"其它区",230200:"齐齐哈尔市",230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市",230282:"其它区",230300:"鸡西市",230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市",230383:"其它区",230400:"鹤岗市",230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县",230423:"其它区",230500:"双鸭山市",230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县",230525:"其它区",230600:"大庆市",230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县",230625:"其它区",230700:"伊春市",230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市",230782:"其它区",230800:"佳木斯市",230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230833:"抚远县",230881:"同江市",230882:"富锦市",230883:"其它区",230900:"七台河市",230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县",230922:"其它区",231e3:"牡丹江市",231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231024:"东宁县",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"其它区",231100:"黑河市",231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市",231183:"其它区",231200:"绥化市",231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市",231284:"其它区",232700:"大兴安岭地区",232702:"松岭区",232703:"新林区",232704:"呼中区",232721:"呼玛县",232722:"塔河县",232723:"漠河县",232724:"加格达奇区",232725:"其它区",31e4:"上海",310100:"上海市",310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310108:"闸北区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310230:"崇明县",310231:"其它区",32e4:"江苏省",320100:"南京市",320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320124:"溧水区",320125:"高淳区",320126:"其它区",320200:"无锡市",320202:"崇安区",320203:"南长区",320204:"北塘区",320205:"锡山区",320206:"惠山区",320211:"滨湖区",320281:"江阴市",320282:"宜兴市",320297:"其它区",320300:"徐州市",320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320321:"丰县",320322:"沛县",320323:"铜山区",320324:"睢宁县",320381:"新沂市",320382:"邳州市",320383:"其它区",320400:"常州市",320402:"天宁区",320404:"钟楼区",320405:"戚墅堰区",320411:"新北区",320412:"武进区",320481:"溧阳市",320482:"金坛市",320483:"其它区",320500:"苏州市",320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320584:"吴江区",320585:"太仓市",320596:"其它区",320600:"南通市",320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市",320694:"其它区",320700:"连云港市",320703:"连云区",320705:"新浦区",320706:"海州区",320721:"赣榆县",320722:"东海县",320723:"灌云县",320724:"灌南县",320725:"其它区",320800:"淮安市",320802:"清河区",320803:"淮安区",320804:"淮阴区",320811:"清浦区",320826:"涟水县",320829:"洪泽县",320830:"盱眙县",320831:"金湖县",320832:"其它区",320900:"盐城市",320902:"亭湖区",320903:"盐都区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市",320982:"大丰市",320983:"其它区",321e3:"扬州市",321002:"广陵区",321003:"邗江区",321023:"宝应县",321081:"仪征市",321084:"高邮市",321088:"江都区",321093:"其它区",321100:"镇江市",321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市",321184:"其它区",321200:"泰州市",321202:"海陵区",321203:"高港区",321281:"兴化市",321282:"靖江市",321283:"泰兴市",321284:"姜堰区",321285:"其它区",321300:"宿迁市",321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县",321325:"其它区",33e4:"浙江省",330100:"杭州市",330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330183:"富阳市",330185:"临安市",330186:"其它区",330200:"宁波市",330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市",330284:"其它区",330300:"温州市",330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330322:"洞头县",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市",330383:"其它区",330400:"嘉兴市",330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市",330484:"其它区",330500:"湖州市",330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县",330524:"其它区",330600:"绍兴市",330602:"越城区",330621:"绍兴县",330624:"新昌县",330681:"诸暨市",330682:"上虞市",330683:"嵊州市",330684:"其它区",330700:"金华市",330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市",330785:"其它区",330800:"衢州市",330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市",330882:"其它区",330900:"舟山市",330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县",330923:"其它区",331e3:"台州市",331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市",331083:"其它区",331100:"丽水市",331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市",331182:"其它区",34e4:"安徽省",340100:"合肥市",340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340192:"其它区",340200:"芜湖市",340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340224:"其它区",340300:"蚌埠市",340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县",340324:"其它区",340400:"淮南市",340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"其它区",340500:"马鞍山市",340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"其它区",340600:"淮北市",340602:"杜集区",340603:"相山区",340604:"烈山区",340621:"濉溪县",340622:"其它区",340700:"铜陵市",340702:"铜官山区",340703:"狮子山区",340711:"郊区",340721:"铜陵县",340722:"其它区",340800:"安庆市",340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340823:"枞阳县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市",340882:"其它区",341e3:"黄山市",341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县",341025:"其它区",341100:"滁州市",341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市",341183:"其它区",341200:"阜阳市",341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市",341283:"其它区",341300:"宿州市",341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县",341325:"其它区",341400:"巢湖市",341421:"庐江县",341422:"无为县",341423:"含山县",341424:"和县",341500:"六安市",341502:"金安区",341503:"裕安区",341521:"寿县",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县",341526:"其它区",341600:"亳州市",341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县",341624:"其它区",341700:"池州市",341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县",341724:"其它区",341800:"宣城市",341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市",341882:"其它区",35e4:"福建省",350100:"福州市",350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市",350183:"其它区",350200:"厦门市",350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区",350214:"其它区",350300:"莆田市",350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县",350323:"其它区",350400:"三明市",350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市",350482:"其它区",350500:"泉州市",350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市",350584:"其它区",350600:"漳州市",350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市",350682:"其它区",350700:"南平市",350702:"延平区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市",350784:"建阳市",350785:"其它区",350800:"龙岩市",350802:"新罗区",350821:"长汀县",350822:"永定县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市",350882:"其它区",350900:"宁德市",350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市",350983:"其它区",36e4:"江西省",360100:"南昌市",360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360121:"南昌县",360122:"新建县",360123:"安义县",360124:"进贤县",360128:"其它区",360200:"景德镇市",360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市",360282:"其它区",360300:"萍乡市",360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县",360324:"其它区",360400:"九江市",360402:"庐山区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360427:"星子县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"其它区",360483:"共青城市",360500:"新余市",360502:"渝水区",360521:"分宜县",360522:"其它区",360600:"鹰潭市",360602:"月湖区",360622:"余江县",360681:"贵溪市",360682:"其它区",360700:"赣州市",360702:"章贡区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市",360782:"南康市",360783:"其它区",360800:"吉安市",360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市",360882:"其它区",360900:"宜春市",360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市",360984:"其它区",361e3:"抚州市",361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县",361031:"其它区",361100:"上饶市",361102:"信州区",361121:"上饶县",361122:"广丰县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市",361182:"其它区",37e4:"山东省",370100:"济南市",370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市",370182:"其它区",370200:"青岛市",370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市",370286:"其它区",370300:"淄博市",370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县",370324:"其它区",370400:"枣庄市",370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市",370482:"其它区",370500:"东营市",370502:"东营区",370503:"河口区",370521:"垦利县",370522:"利津县",370523:"广饶县",370591:"其它区",370600:"烟台市",370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市",370688:"其它区",370700:"潍坊市",370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市",370787:"其它区",370800:"济宁市",370802:"市中区",370811:"任城区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370882:"兖州市",370883:"邹城市",370884:"其它区",370900:"泰安市",370902:"泰山区",370903:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市",370984:"其它区",371e3:"威海市",371002:"环翠区",371081:"文登市",371082:"荣成市",371083:"乳山市",371084:"其它区",371100:"日照市",371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县",371123:"其它区",371200:"莱芜市",371202:"莱城区",371203:"钢城区",371204:"其它区",371300:"临沂市",371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"苍山县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县",371330:"其它区",371400:"德州市",371402:"德城区",371421:"陵县",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市",371483:"其它区",371500:"聊城市",371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市",371582:"其它区",371600:"滨州市",371602:"滨城区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371624:"沾化县",371625:"博兴县",371626:"邹平县",371627:"其它区",371700:"菏泽市",371702:"牡丹区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371727:"定陶县",371728:"东明县",371729:"其它区",41e4:"河南省",410100:"郑州市",410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市",410188:"其它区",410200:"开封市",410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410211:"金明区",410221:"杞县",410222:"通许县",410223:"尉氏县",410224:"开封县",410225:"兰考县",410226:"其它区",410300:"洛阳市",410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410307:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市",410400:"平顶山市",410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市",410483:"其它区",410500:"安阳市",410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市",410582:"其它区",410600:"鹤壁市",410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县",410623:"其它区",410700:"新乡市",410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市",410783:"其它区",410800:"焦作市",410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410881:"济源市",410882:"沁阳市",410883:"孟州市",410884:"其它区",410900:"濮阳市",410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县",410929:"其它区",411e3:"许昌市",411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市",411083:"其它区",411100:"漯河市",411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县",411123:"其它区",411200:"三门峡市",411202:"湖滨区",411221:"渑池县",411222:"陕县",411224:"卢氏县",411281:"义马市",411282:"灵宝市",411283:"其它区",411300:"南阳市",411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市",411382:"其它区",411400:"商丘市",411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市",411482:"其它区",411500:"信阳市",411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县",411529:"其它区",411600:"周口市",411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市",411682:"其它区",411700:"驻马店市",411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县",411730:"其它区",42e4:"湖北省",420100:"武汉市",420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区",420118:"其它区",420200:"黄石市",420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市",420282:"其它区",420300:"十堰市",420302:"茅箭区",420303:"张湾区",420321:"郧县",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市",420383:"其它区",420500:"宜昌市",420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市",420584:"其它区",420600:"襄阳市",420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市",420685:"其它区",420700:"鄂州市",420702:"梁子湖区",420703:"华容区",420704:"鄂城区",420705:"其它区",420800:"荆门市",420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市",420882:"其它区",420900:"孝感市",420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市",420985:"其它区",421e3:"荆州市",421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市",421088:"其它区",421100:"黄冈市",421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市",421183:"其它区",421200:"咸宁市",421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市",421283:"其它区",421300:"随州市",421302:"曾都区",421321:"随县",421381:"广水市",421382:"其它区",422800:"恩施土家族苗族自治州",422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县",422829:"其它区",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区",43e4:"湖南省",430100:"长沙市",430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430121:"长沙县",430122:"望城区",430124:"宁乡县",430181:"浏阳市",430182:"其它区",430200:"株洲市",430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市",430282:"其它区",430300:"湘潭市",430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市",430383:"其它区",430400:"衡阳市",430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市",430483:"其它区",430500:"邵阳市",430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市",430582:"其它区",430600:"岳阳市",430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市",430683:"其它区",430700:"常德市",430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市",430782:"其它区",430800:"张家界市",430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县",430823:"其它区",430900:"益阳市",430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市",430982:"其它区",431e3:"郴州市",431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市",431082:"其它区",431100:"永州市",431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县",431130:"其它区",431200:"怀化市",431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市",431282:"其它区",431300:"娄底市",431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市",431383:"其它区",433100:"湘西土家族苗族自治州",433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县",433131:"其它区",44e4:"广东省",440100:"广州市",440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440116:"萝岗区",440183:"增城市",440184:"从化市",440189:"其它区",440200:"韶关市",440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市",440283:"其它区",440300:"深圳市",440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区",440309:"其它区",440320:"光明新区",440321:"坪山新区",440322:"大鹏新区",440323:"龙华新区",440400:"珠海市",440402:"香洲区",440403:"斗门区",440404:"金湾区",440488:"其它区",440500:"汕头市",440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县",440524:"其它区",440600:"佛山市",440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区",440609:"其它区",440700:"江门市",440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市",440786:"其它区",440800:"湛江市",440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市",440884:"其它区",440900:"茂名市",440902:"茂南区",440903:"茂港区",440923:"电白县",440981:"高州市",440982:"化州市",440983:"信宜市",440984:"其它区",441200:"肇庆市",441202:"端州区",441203:"鼎湖区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441283:"高要市",441284:"四会市",441285:"其它区",441300:"惠州市",441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县",441325:"其它区",441400:"梅州市",441402:"梅江区",441421:"梅县",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市",441482:"其它区",441500:"汕尾市",441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市",441582:"其它区",441600:"河源市",441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县",441626:"其它区",441700:"阳江市",441702:"江城区",441721:"阳西县",441723:"阳东县",441781:"阳春市",441782:"其它区",441800:"清远市",441802:"清城区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441827:"清新区",441881:"英德市",441882:"连州市",441883:"其它区",441900:"东莞市",442e3:"中山市",442101:"东沙群岛",445100:"潮州市",445102:"湘桥区",445121:"潮安区",445122:"饶平县",445186:"其它区",445200:"揭阳市",445202:"榕城区",445221:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市",445285:"其它区",445300:"云浮市",445302:"云城区",445321:"新兴县",445322:"郁南县",445323:"云安县",445381:"罗定市",445382:"其它区",45e4:"广西壮族自治区",450100:"南宁市",450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450122:"武鸣县",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县",450128:"其它区",450200:"柳州市",450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450221:"柳江县",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县",450227:"其它区",450300:"桂林市",450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450321:"阳朔县",450322:"临桂区",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县",450333:"其它区",450400:"梧州市",450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市",450482:"其它区",450500:"北海市",450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县",450522:"其它区",450600:"防城港市",450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市",450682:"其它区",450700:"钦州市",450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县",450723:"其它区",450800:"贵港市",450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市",450882:"其它区",450900:"玉林市",450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市",450982:"其它区",451e3:"百色市",451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451025:"靖西县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451032:"其它区",451100:"贺州市",451102:"八步区",451119:"平桂管理区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县",451124:"其它区",451200:"河池市",451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市",451282:"其它区",451300:"来宾市",451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市",451382:"其它区",451400:"崇左市",451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市",451482:"其它区",46e4:"海南省",460100:"海口市",460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区",460109:"其它区",460200:"三亚市",460300:"三沙市",460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域",469001:"五指山市",469002:"琼海市",469003:"儋州市",469005:"文昌市",469006:"万宁市",469007:"东方市",469025:"定安县",469026:"屯昌县",469027:"澄迈县",469028:"临高县",469030:"白沙黎族自治县",469031:"昌江黎族自治县",469033:"乐东黎族自治县",469034:"陵水黎族自治县",469035:"保亭黎族苗族自治县",469036:"琼中黎族苗族自治县",471005:"其它区",5e5:"重庆",500100:"重庆市",500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"万盛区",500111:"双桥区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500222:"綦江区",500223:"潼南县",500224:"铜梁县",500225:"大足区",500226:"荣昌县",500227:"璧山县",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500234:"开县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县",500381:"江津区",500382:"合川区",500383:"永川区",500384:"南川区",500385:"其它区",51e4:"四川省",510100:"成都市",510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510121:"金堂县",510122:"双流县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市",510185:"其它区",510300:"自贡市",510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县",510323:"其它区",510400:"攀枝花市",510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县",510423:"其它区",510500:"泸州市",510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县",510526:"其它区",510600:"德阳市",510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市",510684:"其它区",510700:"绵阳市",510703:"涪城区",510704:"游仙区",510722:"三台县",510723:"盐亭县",510724:"安县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市",510782:"其它区",510800:"广元市",510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县",510825:"其它区",510900:"遂宁市",510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县",510924:"其它区",511e3:"内江市",511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县",511029:"其它区",511100:"乐山市",511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市",511182:"其它区",511300:"南充市",511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市",511382:"其它区",511400:"眉山市",511402:"东坡区",511421:"仁寿县",511422:"彭山县",511423:"洪雅县",511424:"丹棱县",511425:"青神县",511426:"其它区",511500:"宜宾市",511502:"翠屏区",511521:"宜宾县",511522:"南溪区",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县",511530:"其它区",511600:"广安市",511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市",511683:"其它区",511700:"达州市",511702:"通川区",511721:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市",511782:"其它区",511800:"雅安市",511802:"雨城区",511821:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县",511828:"其它区",511900:"巴中市",511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县",511924:"其它区",512e3:"资阳市",512002:"雁江区",512021:"安岳县",512022:"乐至县",512081:"简阳市",512082:"其它区",513200:"阿坝藏族羌族自治州",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513229:"马尔康县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县",513234:"其它区",513300:"甘孜藏族自治州",513321:"康定县",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县",513339:"其它区",513400:"凉山彝族自治州",513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县",513438:"其它区",52e4:"贵州省",520100:"贵阳市",520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520121:"开阳县",520122:"息烽县",520123:"修文县",520151:"观山湖区",520181:"清镇市",520182:"其它区",520200:"六盘水市",520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县",520223:"其它区",520300:"遵义市",520302:"红花岗区",520303:"汇川区",520321:"遵义县",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市",520383:"其它区",520400:"安顺市",520402:"西秀区",520421:"平坝县",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县",520426:"其它区",522200:"铜仁市",522201:"碧江区",522222:"江口县",522223:"玉屏侗族自治县",522224:"石阡县",522225:"思南县",522226:"印江土家族苗族自治县",522227:"德江县",522228:"沿河土家族自治县",522229:"松桃苗族自治县",522230:"万山区",522231:"其它区",522300:"黔西南布依族苗族自治州",522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县",522329:"其它区",522400:"毕节市",522401:"七星关区",522422:"大方县",522423:"黔西县",522424:"金沙县",522425:"织金县",522426:"纳雍县",522427:"威宁彝族回族苗族自治县",522428:"赫章县",522429:"其它区",522600:"黔东南苗族侗族自治州",522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县",522637:"其它区",522700:"黔南布依族苗族自治州",522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县",522733:"其它区",53e4:"云南省",530100:"昆明市",530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530121:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市",530182:"其它区",530300:"曲靖市",530302:"麒麟区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530328:"沾益县",530381:"宣威市",530382:"其它区",530400:"玉溪市",530402:"红塔区",530421:"江川县",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县",530429:"其它区",530500:"保山市",530502:"隆阳区",530521:"施甸县",530522:"腾冲县",530523:"龙陵县",530524:"昌宁县",530525:"其它区",530600:"昭通市",530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县",530631:"其它区",530700:"丽江市",530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县",530725:"其它区",530800:"普洱市",530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县",530830:"其它区",530900:"临沧市",530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县",530928:"其它区",532300:"楚雄彝族自治州",532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县",532332:"其它区",532500:"红河哈尼族彝族自治州",532501:"个旧市",532502:"开远市",532522:"蒙自市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532526:"弥勒市",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县",532533:"其它区",532600:"文山壮族苗族自治州",532621:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县",532629:"其它区",532800:"西双版纳傣族自治州",532801:"景洪市",532822:"勐海县",532823:"勐腊县",532824:"其它区",532900:"大理白族自治州",532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县",532933:"其它区",533100:"德宏傣族景颇族自治州",533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县",533125:"其它区",533300:"怒江傈僳族自治州",533321:"泸水县",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县",533326:"其它区",533400:"迪庆藏族自治州",533421:"香格里拉县",533422:"德钦县",533423:"维西傈僳族自治县",533424:"其它区",54e4:"西藏自治区",540100:"拉萨市",540102:"城关区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540125:"堆龙德庆县",540126:"达孜县",540127:"墨竹工卡县",540128:"其它区",542100:"昌都地区",542121:"昌都县",542122:"江达县",542123:"贡觉县",542124:"类乌齐县",542125:"丁青县",542126:"察雅县",542127:"八宿县",542128:"左贡县",542129:"芒康县",542132:"洛隆县",542133:"边坝县",542134:"其它区",542200:"山南地区",542221:"乃东县",542222:"扎囊县",542223:"贡嘎县",542224:"桑日县",542225:"琼结县",542226:"曲松县",542227:"措美县",542228:"洛扎县",542229:"加查县",542231:"隆子县",542232:"错那县",542233:"浪卡子县",542234:"其它区",542300:"日喀则地区",542301:"日喀则市",542322:"南木林县",542323:"江孜县",542324:"定日县",542325:"萨迦县",542326:"拉孜县",542327:"昂仁县",542328:"谢通门县",542329:"白朗县",542330:"仁布县",542331:"康马县",542332:"定结县",542333:"仲巴县",542334:"亚东县",542335:"吉隆县",542336:"聂拉木县",542337:"萨嘎县",542338:"岗巴县",542339:"其它区",542400:"那曲地区",542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"其它区",542432:"双湖县",542500:"阿里地区",542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县",542528:"其它区",542600:"林芝地区",542621:"林芝县",542622:"工布江达县",542623:"米林县",542624:"墨脱县",542625:"波密县",542626:"察隅县",542627:"朗县",542628:"其它区",61e4:"陕西省",610100:"西安市",610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610122:"蓝田县",610124:"周至县",610125:"户县",610126:"高陵县",610127:"其它区",610200:"铜川市",610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县",610223:"其它区",610300:"宝鸡市",610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县",610332:"其它区",610400:"咸阳市",610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市",610482:"其它区",610500:"渭南市",610502:"临渭区",610521:"华县",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市",610583:"其它区",610600:"延安市",610602:"宝塔区",610621:"延长县",610622:"延川县",610623:"子长县",610624:"安塞县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县",610633:"其它区",610700:"汉中市",610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县",610731:"其它区",610800:"榆林市",610802:"榆阳区",610821:"神木县",610822:"府谷县",610823:"横山县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县",610832:"其它区",610900:"安康市",610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县",610930:"其它区",611e3:"商洛市",611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县",611027:"其它区",62e4:"甘肃省",620100:"兰州市",620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县",620124:"其它区",620200:"嘉峪关市",620300:"金昌市",620302:"金川区",620321:"永昌县",620322:"其它区",620400:"白银市",620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县",620424:"其它区",620500:"天水市",620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县",620526:"其它区",620600:"武威市",620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县",620624:"其它区",620700:"张掖市",620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县",620726:"其它区",620800:"平凉市",620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县",620827:"其它区",620900:"酒泉市",620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市",620983:"其它区",621e3:"庆阳市",621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县",621028:"其它区",621100:"定西市",621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县",621127:"其它区",621200:"陇南市",621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县",621229:"其它区",622900:"临夏回族自治州",622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县",622928:"其它区",623e3:"甘南藏族自治州",623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县",623028:"其它区",63e4:"青海省",630100:"西宁市",630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县",630124:"其它区",632100:"海东市",632121:"平安县",632122:"民和回族土族自治县",632123:"乐都区",632126:"互助土族自治县",632127:"化隆回族自治县",632128:"循化撒拉族自治县",632129:"其它区",632200:"海北藏族自治州",632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县",632225:"其它区",632300:"黄南藏族自治州",632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县",632325:"其它区",632500:"海南藏族自治州",632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县",632526:"其它区",632600:"果洛藏族自治州",632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县",632627:"其它区",632700:"玉树藏族自治州",632721:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县",632727:"其它区",632800:"海西蒙古族藏族自治州",632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县",632824:"其它区",64e4:"宁夏回族自治区",640100:"银川市",640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市",640182:"其它区",640200:"石嘴山市",640202:"大武口区",640205:"惠农区",640221:"平罗县",640222:"其它区",640300:"吴忠市",640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市",640382:"其它区",640400:"固原市",640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县",640426:"其它区",640500:"中卫市",640502:"沙坡头区",640521:"中宁县",640522:"海原县",640523:"其它区",65e4:"新疆维吾尔自治区",650100:"乌鲁木齐市",650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县",650122:"其它区",650200:"克拉玛依市",650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区",650206:"其它区",652100:"吐鲁番地区",652101:"吐鲁番市",652122:"鄯善县",652123:"托克逊县",652124:"其它区",652200:"哈密地区",652201:"哈密市",652222:"巴里坤哈萨克自治县",652223:"伊吾县",652224:"其它区",652300:"昌吉回族自治州",652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县",652329:"其它区",652700:"博尔塔拉蒙古自治州",652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县",652724:"其它区",652800:"巴音郭楞蒙古自治州",652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县",652830:"其它区",652900:"阿克苏地区",652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县",652930:"其它区",653e3:"克孜勒苏柯尔克孜自治州",653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县",653025:"其它区",653100:"喀什地区",653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县",653132:"其它区",653200:"和田地区",653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县",653228:"其它区",654e3:"伊犁哈萨克自治州",654002:"伊宁市",654003:"奎屯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县",654029:"其它区",654200:"塔城地区",654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县",654227:"其它区",654300:"阿勒泰地区",654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县",654327:"其它区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",71e4:"台湾",710100:"台北市",710101:"中正区",710102:"大同区",710103:"中山区",710104:"松山区",710105:"大安区",710106:"万华区",710107:"信义区",710108:"士林区",710109:"北投区",710110:"内湖区",710111:"南港区",710112:"文山区",710113:"其它区",710200:"高雄市",710201:"新兴区",710202:"前金区",710203:"芩雅区",710204:"盐埕区",710205:"鼓山区",710206:"旗津区",710207:"前镇区",710208:"三民区",710209:"左营区",710210:"楠梓区",710211:"小港区",710212:"其它区",710241:"苓雅区",710242:"仁武区",710243:"大社区",710244:"冈山区",710245:"路竹区",710246:"阿莲区",710247:"田寮区",710248:"燕巢区",710249:"桥头区",710250:"梓官区",710251:"弥陀区",710252:"永安区",710253:"湖内区",710254:"凤山区",710255:"大寮区",710256:"林园区",710257:"鸟松区",710258:"大树区",710259:"旗山区",710260:"美浓区",710261:"六龟区",710262:"内门区",710263:"杉林区",710264:"甲仙区",710265:"桃源区",710266:"那玛夏区",710267:"茂林区",710268:"茄萣区",710300:"台南市",710301:"中西区",710302:"东区",710303:"南区",710304:"北区",710305:"安平区",710306:"安南区",710307:"其它区",710339:"永康区",710340:"归仁区",710341:"新化区",710342:"左镇区",710343:"玉井区",710344:"楠西区",710345:"南化区",710346:"仁德区",710347:"关庙区",710348:"龙崎区",710349:"官田区",710350:"麻豆区",710351:"佳里区",710352:"西港区",710353:"七股区",710354:"将军区",710355:"学甲区",710356:"北门区",710357:"新营区",710358:"后壁区",710359:"白河区",710360:"东山区",710361:"六甲区",710362:"下营区",710363:"柳营区",710364:"盐水区",710365:"善化区",710366:"大内区",710367:"山上区",710368:"新市区",710369:"安定区",710400:"台中市",710401:"中区",710402:"东区",710403:"南区",710404:"西区",710405:"北区",710406:"北屯区",710407:"西屯区",710408:"南屯区",710409:"其它区",710431:"太平区",710432:"大里区",710433:"雾峰区",710434:"乌日区",710435:"丰原区",710436:"后里区",710437:"石冈区",710438:"东势区",710439:"和平区",710440:"新社区",710441:"潭子区",710442:"大雅区",710443:"神冈区",710444:"大肚区",710445:"沙鹿区",710446:"龙井区",710447:"梧栖区",710448:"清水区",710449:"大甲区",710450:"外埔区",710451:"大安区",710500:"金门县",710507:"金沙镇",710508:"金湖镇",710509:"金宁乡",710510:"金城镇",710511:"烈屿乡",710512:"乌坵乡",710600:"南投县",710614:"南投市",710615:"中寮乡",710616:"草屯镇",710617:"国姓乡",710618:"埔里镇",710619:"仁爱乡",710620:"名间乡",710621:"集集镇",710622:"水里乡",710623:"鱼池乡",710624:"信义乡",710625:"竹山镇",710626:"鹿谷乡",710700:"基隆市",710701:"仁爱区",710702:"信义区",710703:"中正区",710704:"中山区",710705:"安乐区",710706:"暖暖区",710707:"七堵区",710708:"其它区",710800:"新竹市",710801:"东区",710802:"北区",710803:"香山区",710804:"其它区",710900:"嘉义市",710901:"东区",710902:"西区",710903:"其它区",711100:"新北市",711130:"万里区",711131:"金山区",711132:"板桥区",711133:"汐止区",711134:"深坑区",711135:"石碇区",711136:"瑞芳区",711137:"平溪区",711138:"双溪区",711139:"贡寮区",711140:"新店区",711141:"坪林区",711142:"乌来区",711143:"永和区",711144:"中和区",711145:"土城区",711146:"三峡区",711147:"树林区",711148:"莺歌区",711149:"三重区",711150:"新庄区",711151:"泰山区",711152:"林口区",711153:"芦洲区",711154:"五股区",711155:"八里区",711156:"淡水区",711157:"三芝区",711158:"石门区",711200:"宜兰县",711214:"宜兰市",711215:"头城镇",711216:"礁溪乡",711217:"壮围乡",711218:"员山乡",711219:"罗东镇",711220:"三星乡",711221:"大同乡",711222:"五结乡",711223:"冬山乡",711224:"苏澳镇",711225:"南澳乡",711226:"钓鱼台",711300:"新竹县",711314:"竹北市",711315:"湖口乡",711316:"新丰乡",711317:"新埔镇",711318:"关西镇",711319:"芎林乡",711320:"宝山乡",711321:"竹东镇",711322:"五峰乡",711323:"横山乡",711324:"尖石乡",711325:"北埔乡",711326:"峨眉乡",711400:"桃园县",711414:"中坜市",711415:"平镇市",711416:"龙潭乡",711417:"杨梅市",711418:"新屋乡",711419:"观音乡",711420:"桃园市",711421:"龟山乡",711422:"八德市",711423:"大溪镇",711424:"复兴乡",711425:"大园乡",711426:"芦竹乡",711500:"苗栗县",711519:"竹南镇",711520:"头份镇",711521:"三湾乡",711522:"南庄乡",711523:"狮潭乡",711524:"后龙镇",711525:"通霄镇",711526:"苑里镇",711527:"苗栗市",711528:"造桥乡",711529:"头屋乡",711530:"公馆乡",711531:"大湖乡",711532:"泰安乡",711533:"铜锣乡",711534:"三义乡",711535:"西湖乡",711536:"卓兰镇",711700:"彰化县",711727:"彰化市",711728:"芬园乡",711729:"花坛乡",711730:"秀水乡",711731:"鹿港镇",711732:"福兴乡",711733:"线西乡",711734:"和美镇",711735:"伸港乡",711736:"员林镇",711737:"社头乡",711738:"永靖乡",711739:"埔心乡",711740:"溪湖镇",711741:"大村乡",711742:"埔盐乡",711743:"田中镇",711744:"北斗镇",711745:"田尾乡",711746:"埤头乡",711747:"溪州乡",711748:"竹塘乡",711749:"二林镇",711750:"大城乡",711751:"芳苑乡",711752:"二水乡",711900:"嘉义县",711919:"番路乡",711920:"梅山乡",711921:"竹崎乡",711922:"阿里山乡",711923:"中埔乡",711924:"大埔乡",711925:"水上乡",711926:"鹿草乡",711927:"太保市",711928:"朴子市",711929:"东石乡",711930:"六脚乡",711931:"新港乡",711932:"民雄乡",711933:"大林镇",711934:"溪口乡",711935:"义竹乡",711936:"布袋镇",712100:"云林县",712121:"斗南镇",712122:"大埤乡",712123:"虎尾镇",712124:"土库镇",712125:"褒忠乡",712126:"东势乡",712127:"台西乡",712128:"仑背乡",712129:"麦寮乡",712130:"斗六市",712131:"林内乡",712132:"古坑乡",712133:"莿桐乡",712134:"西螺镇",712135:"二仑乡",712136:"北港镇",712137:"水林乡",712138:"口湖乡",712139:"四湖乡",712140:"元长乡",712400:"屏东县",712434:"屏东市",712435:"三地门乡",712436:"雾台乡",712437:"玛家乡",712438:"九如乡",712439:"里港乡",712440:"高树乡",712441:"盐埔乡",712442:"长治乡",712443:"麟洛乡",712444:"竹田乡",712445:"内埔乡",712446:"万丹乡",712447:"潮州镇",712448:"泰武乡",712449:"来义乡",712450:"万峦乡",712451:"崁顶乡",712452:"新埤乡",712453:"南州乡",712454:"林边乡",712455:"东港镇",712456:"琉球乡",712457:"佳冬乡",712458:"新园乡",712459:"枋寮乡",712460:"枋山乡",712461:"春日乡",712462:"狮子乡",712463:"车城乡",712464:"牡丹乡",712465:"恒春镇",712466:"满州乡",712500:"台东县",712517:"台东市",712518:"绿岛乡",712519:"兰屿乡",712520:"延平乡",712521:"卑南乡",712522:"鹿野乡",712523:"关山镇",712524:"海端乡",712525:"池上乡",712526:"东河乡",712527:"成功镇",712528:"长滨乡",712529:"金峰乡",712530:"大武乡",712531:"达仁乡",712532:"太麻里乡",712600:"花莲县",712615:"花莲市",712616:"新城乡",712617:"太鲁阁",712618:"秀林乡",712619:"吉安乡",712620:"寿丰乡",712621:"凤林镇",712622:"光复乡",712623:"丰滨乡",712624:"瑞穗乡",712625:"万荣乡",712626:"玉里镇",712627:"卓溪乡",712628:"富里乡",712700:"澎湖县",712707:"马公市",712708:"西屿乡",712709:"望安乡",712710:"七美乡",712711:"白沙乡",712712:"湖西乡",712800:"连江县",712805:"南竿乡",712806:"北竿乡",712807:"莒光乡",712808:"东引乡",81e4:"香港特别行政区",810100:"香港岛",810101:"中西区",810102:"湾仔",810103:"东区",810104:"南区",810200:"九龙",810201:"九龙城区",810202:"油尖旺区",810203:"深水埗区",810204:"黄大仙区",810205:"观塘区",810300:"新界",810301:"北区",810302:"大埔区",810303:"沙田区",810304:"西贡区",810305:"元朗区",810306:"屯门区",810307:"荃湾区",810308:"葵青区",810309:"离岛区",82e4:"澳门特别行政区",820100:"澳门半岛",820200:"离岛",99e4:"海外",990100:"海外"};function i(t){for(var e,n={},i=0;i<t.length;i++)e=t[i],e&&e.id&&(n[e.id]=e);for(var r=[],o=0;o<t.length;o++)if(e=t[o],e)if(void 0!=e.pid||void 0!=e.parentId){var a=n[e.pid]||n[e.parentId];a&&(a.children||(a.children=[]),a.children.push(e))}else r.push(e);return r}var r=function(){var t=[];for(var e in n){var r="0000"===e.slice(2,6)?void 0:"00"==e.slice(4,6)?e.slice(0,2)+"0000":e.slice(0,4)+"00";t.push({id:e,pid:r,name:n[e]})}return i(t)}();t.exports=r},function(t,e,n){var i=n(18);t.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var t="abcdefABCDEF1234567890",e=this.string(t,8)+"-"+this.string(t,4)+"-"+this.string(t,4)+"-"+this.string(t,4)+"-"+this.string(t,12);return e},uuid:function(){return this.guid()},id:function(){var t,e=0,n=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],r=["1","0","X","9","8","7","6","5","4","3","2"];t=this.pick(i).id+this.date("yyyyMMdd")+this.string("number",3);for(var o=0;o<t.length;o++)e+=t[o]*n[o];return t+=r[e%11],t},increment:function(){var t=0;return function(e){return t+=+e||1}}(),inc:function(t){return this.increment(t)}}},function(t,e,n){var i=n(21),r=n(22);t.exports={Parser:i,Handler:r}},function(t,e){function n(t){this.type=t,this.offset=n.offset(),this.text=n.text()}function i(t,e){n.call(this,"alternate"),this.left=t,this.right=e}function r(t){n.call(this,"match"),this.body=t.filter(Boolean)}function o(t,e){n.call(this,t),this.body=e}function a(t){o.call(this,"capture-group"),this.index=m[this.offset]||(m[this.offset]=_++),this.body=t}function s(t,e){n.call(this,"quantified"),this.body=t,this.quantifier=e}function c(t,e){n.call(this,"quantifier"),this.min=t,this.max=e,this.greedy=!0}function l(t,e){n.call(this,"charset"),this.invert=t,this.body=e}function u(t,e){n.call(this,"range"),this.start=t,this.end=e}function d(t){n.call(this,"literal"),this.body=t,this.escaped=this.body!=this.text}function h(t){n.call(this,"unicode"),this.code=t.toUpperCase()}function f(t){n.call(this,"hex"),this.code=t.toUpperCase()}function g(t){n.call(this,"octal"),this.code=t.toUpperCase()}function p(t){n.call(this,"back-reference"),this.code=t.toUpperCase()}function v(t){n.call(this,"control-character"),this.code=t.toUpperCase()}var y=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,i,r){function o(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+e(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+e(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+e(t)}))}var i,r;switch(t.length){case 0:i="end of input";break;case 1:i=t[0];break;default:i=t.slice(0,-1).join(", ")+" or "+t[t.length-1]}return r=e?'"'+n(e)+'"':"end of input","Expected "+i+" but "+r+" found."}this.expected=t,this.found=e,this.offset=n,this.line=i,this.column=r,this.name="SyntaxError",this.message=o(t,e)}function y(t){function y(){return t.substring(Kn,Jn)}function _(){return Kn}function m(e){function n(e,n,i){var r,o;for(r=n;i>r;r++)o=t.charAt(r),"\n"===o?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return ti!==e&&(ti>e&&(ti=0,ei={line:1,column:1,seenCR:!1}),n(ei,ti,e),ti=e),ei}function b(t){ni>Jn||(Jn>ni&&(ni=Jn,ii=[]),ii.push(t))}function x(t){var e=0;for(t.sort();e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function w(){var e,n,i,r,o;return e=Jn,n=I(),null!==n?(i=Jn,124===t.charCodeAt(Jn)?(r=Tt,Jn++):(r=null,0===ri&&b(Ct)),null!==r?(o=w(),null!==o?(r=[r,o],i=r):(Jn=i,i=It)):(Jn=i,i=It),null===i&&(i=St),null!==i?(Kn=e,n=Mt(n,i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function I(){var t,e,n,i,r;if(t=Jn,e=T(),null===e&&(e=St),null!==e)if(n=Jn,ri++,i=D(),ri--,null===i?n=St:(Jn=n,n=It),null!==n){for(i=[],r=M(),null===r&&(r=S());null!==r;)i.push(r),r=M(),null===r&&(r=S());null!==i?(r=C(),null===r&&(r=St),null!==r?(Kn=t,e=Dt(e,i,r),null===e?(Jn=t,t=e):t=e):(Jn=t,t=It)):(Jn=t,t=It)}else Jn=t,t=It;else Jn=t,t=It;return t}function S(){var t;return t=L(),null===t&&(t=H(),null===t&&(t=X())),t}function T(){var e,n;return e=Jn,94===t.charCodeAt(Jn)?(n=Et,Jn++):(n=null,0===ri&&b(Pt)),null!==n&&(Kn=e,n=Ot()),null===n?(Jn=e,e=n):e=n,e}function C(){var e,n;return e=Jn,36===t.charCodeAt(Jn)?(n=At,Jn++):(n=null,0===ri&&b(kt)),null!==n&&(Kn=e,n=Rt()),null===n?(Jn=e,e=n):e=n,e}function M(){var t,e,n;return t=Jn,e=S(),null!==e?(n=D(),null!==n?(Kn=t,e=zt(e,n),null===e?(Jn=t,t=e):t=e):(Jn=t,t=It)):(Jn=t,t=It),t}function D(){var t,e,n;return ri++,t=Jn,e=E(),null!==e?(n=N(),null===n&&(n=St),null!==n?(Kn=t,e=Vt(e,n),null===e?(Jn=t,t=e):t=e):(Jn=t,t=It)):(Jn=t,t=It),ri--,null===t&&(e=null,0===ri&&b(Nt)),t}function E(){var t;return t=P(),null===t&&(t=O(),null===t&&(t=A(),null===t&&(t=k(),null===t&&(t=R(),null===t&&(t=z()))))),t}function P(){var e,n,i,r,o,a;return e=Jn,123===t.charCodeAt(Jn)?(n=Lt,Jn++):(n=null,0===ri&&b(Bt)),null!==n?(i=V(),null!==i?(44===t.charCodeAt(Jn)?(r=Gt,Jn++):(r=null,0===ri&&b(Ft)),null!==r?(o=V(),null!==o?(125===t.charCodeAt(Jn)?(a=jt,Jn++):(a=null,0===ri&&b(Ht)),null!==a?(Kn=e,n=Ut(i,o),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It),e}function O(){var e,n,i,r;return e=Jn,123===t.charCodeAt(Jn)?(n=Lt,Jn++):(n=null,0===ri&&b(Bt)),null!==n?(i=V(),null!==i?(t.substr(Jn,2)===Zt?(r=Zt,Jn+=2):(r=null,0===ri&&b(Wt)),null!==r?(Kn=e,n=qt(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It),e}function A(){var e,n,i,r;return e=Jn,123===t.charCodeAt(Jn)?(n=Lt,Jn++):(n=null,0===ri&&b(Bt)),null!==n?(i=V(),null!==i?(125===t.charCodeAt(Jn)?(r=jt,Jn++):(r=null,0===ri&&b(Ht)),null!==r?(Kn=e,n=Xt(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It),e}function k(){var e,n;return e=Jn,43===t.charCodeAt(Jn)?(n=Yt,Jn++):(n=null,0===ri&&b($t)),null!==n&&(Kn=e,n=Qt()),null===n?(Jn=e,e=n):e=n,e}function R(){var e,n;return e=Jn,42===t.charCodeAt(Jn)?(n=Jt,Jn++):(n=null,0===ri&&b(Kt)),null!==n&&(Kn=e,n=te()),null===n?(Jn=e,e=n):e=n,e}function z(){var e,n;return e=Jn,63===t.charCodeAt(Jn)?(n=ee,Jn++):(n=null,0===ri&&b(ne)),null!==n&&(Kn=e,n=ie()),null===n?(Jn=e,e=n):e=n,e}function N(){var e;return 63===t.charCodeAt(Jn)?(e=ee,Jn++):(e=null,0===ri&&b(ne)),e}function V(){var e,n,i;if(e=Jn,n=[],re.test(t.charAt(Jn))?(i=t.charAt(Jn),Jn++):(i=null,0===ri&&b(oe)),null!==i)for(;null!==i;)n.push(i),re.test(t.charAt(Jn))?(i=t.charAt(Jn),Jn++):(i=null,0===ri&&b(oe));else n=It;return null!==n&&(Kn=e,n=ae(n)),null===n?(Jn=e,e=n):e=n,e}function L(){var e,n,i,r;return e=Jn,40===t.charCodeAt(Jn)?(n=se,Jn++):(n=null,0===ri&&b(ce)),null!==n?(i=F(),null===i&&(i=j(),null===i&&(i=G(),null===i&&(i=B()))),null!==i?(41===t.charCodeAt(Jn)?(r=le,Jn++):(r=null,0===ri&&b(ue)),null!==r?(Kn=e,n=de(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It),e}function B(){var t,e;return t=Jn,e=w(),null!==e&&(Kn=t,e=he(e)),null===e?(Jn=t,t=e):t=e,t}function G(){var e,n,i;return e=Jn,t.substr(Jn,2)===fe?(n=fe,Jn+=2):(n=null,0===ri&&b(ge)),null!==n?(i=w(),null!==i?(Kn=e,n=pe(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function F(){var e,n,i;return e=Jn,t.substr(Jn,2)===ve?(n=ve,Jn+=2):(n=null,0===ri&&b(ye)),null!==n?(i=w(),null!==i?(Kn=e,n=_e(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function j(){var e,n,i;return e=Jn,t.substr(Jn,2)===me?(n=me,Jn+=2):(n=null,0===ri&&b(be)),null!==n?(i=w(),null!==i?(Kn=e,n=xe(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function H(){var e,n,i,r,o;if(ri++,e=Jn,91===t.charCodeAt(Jn)?(n=Ie,Jn++):(n=null,0===ri&&b(Se)),null!==n)if(94===t.charCodeAt(Jn)?(i=Et,Jn++):(i=null,0===ri&&b(Pt)),null===i&&(i=St),null!==i){for(r=[],o=U(),null===o&&(o=Z());null!==o;)r.push(o),o=U(),null===o&&(o=Z());null!==r?(93===t.charCodeAt(Jn)?(o=Te,Jn++):(o=null,0===ri&&b(Ce)),null!==o?(Kn=e,n=Me(i,r),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)}else Jn=e,e=It;else Jn=e,e=It;return ri--,null===e&&(n=null,0===ri&&b(we)),e}function U(){var e,n,i,r;return ri++,e=Jn,n=Z(),null!==n?(45===t.charCodeAt(Jn)?(i=Ee,Jn++):(i=null,0===ri&&b(Pe)),null!==i?(r=Z(),null!==r?(Kn=e,n=Oe(n,r),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It)):(Jn=e,e=It),ri--,null===e&&(n=null,0===ri&&b(De)),e}function Z(){var t;return ri++,t=q(),null===t&&(t=W()),ri--,null===t&&(null,0===ri&&b(Ae)),t}function W(){var e,n;return e=Jn,ke.test(t.charAt(Jn))?(n=t.charAt(Jn),Jn++):(n=null,0===ri&&b(Re)),null!==n&&(Kn=e,n=ze(n)),null===n?(Jn=e,e=n):e=n,e}function q(){var t;return t=J(),null===t&&(t=ht(),null===t&&(t=et(),null===t&&(t=nt(),null===t&&(t=it(),null===t&&(t=rt(),null===t&&(t=ot(),null===t&&(t=at(),null===t&&(t=st(),null===t&&(t=ct(),null===t&&(t=lt(),null===t&&(t=ut(),null===t&&(t=dt(),null===t&&(t=gt(),null===t&&(t=pt(),null===t&&(t=vt(),null===t&&(t=yt(),null===t&&(t=_t()))))))))))))))))),t}function X(){var t;return t=Y(),null===t&&(t=Q(),null===t&&(t=$())),t}function Y(){var e,n;return e=Jn,46===t.charCodeAt(Jn)?(n=Ne,Jn++):(n=null,0===ri&&b(Ve)),null!==n&&(Kn=e,n=Le()),null===n?(Jn=e,e=n):e=n,e}function $(){var e,n;return ri++,e=Jn,Ge.test(t.charAt(Jn))?(n=t.charAt(Jn),Jn++):(n=null,0===ri&&b(Fe)),null!==n&&(Kn=e,n=ze(n)),null===n?(Jn=e,e=n):e=n,ri--,null===e&&(n=null,0===ri&&b(Be)),e}function Q(){var t;return t=K(),null===t&&(t=tt(),null===t&&(t=ht(),null===t&&(t=et(),null===t&&(t=nt(),null===t&&(t=it(),null===t&&(t=rt(),null===t&&(t=ot(),null===t&&(t=at(),null===t&&(t=st(),null===t&&(t=ct(),null===t&&(t=lt(),null===t&&(t=ut(),null===t&&(t=dt(),null===t&&(t=ft(),null===t&&(t=gt(),null===t&&(t=pt(),null===t&&(t=vt(),null===t&&(t=yt(),null===t&&(t=_t()))))))))))))))))))),t}function J(){var e,n;return e=Jn,t.substr(Jn,2)===je?(n=je,Jn+=2):(n=null,0===ri&&b(He)),null!==n&&(Kn=e,n=Ue()),null===n?(Jn=e,e=n):e=n,e}function K(){var e,n;return e=Jn,t.substr(Jn,2)===je?(n=je,Jn+=2):(n=null,0===ri&&b(He)),null!==n&&(Kn=e,n=Ze()),null===n?(Jn=e,e=n):e=n,e}function tt(){var e,n;return e=Jn,t.substr(Jn,2)===We?(n=We,Jn+=2):(n=null,0===ri&&b(qe)),null!==n&&(Kn=e,n=Xe()),null===n?(Jn=e,e=n):e=n,e}function et(){var e,n;return e=Jn,t.substr(Jn,2)===Ye?(n=Ye,Jn+=2):(n=null,0===ri&&b($e)),null!==n&&(Kn=e,n=Qe()),null===n?(Jn=e,e=n):e=n,e}function nt(){var e,n;return e=Jn,t.substr(Jn,2)===Je?(n=Je,Jn+=2):(n=null,0===ri&&b(Ke)),null!==n&&(Kn=e,n=tn()),null===n?(Jn=e,e=n):e=n,e}function it(){var e,n;return e=Jn,t.substr(Jn,2)===en?(n=en,Jn+=2):(n=null,0===ri&&b(nn)),null!==n&&(Kn=e,n=rn()),null===n?(Jn=e,e=n):e=n,e}function rt(){var e,n;return e=Jn,t.substr(Jn,2)===on?(n=on,Jn+=2):(n=null,0===ri&&b(an)),null!==n&&(Kn=e,n=sn()),null===n?(Jn=e,e=n):e=n,e}function ot(){var e,n;return e=Jn,t.substr(Jn,2)===cn?(n=cn,Jn+=2):(n=null,0===ri&&b(ln)),null!==n&&(Kn=e,n=un()),null===n?(Jn=e,e=n):e=n,e}function at(){var e,n;return e=Jn,t.substr(Jn,2)===dn?(n=dn,Jn+=2):(n=null,0===ri&&b(hn)),null!==n&&(Kn=e,n=fn()),null===n?(Jn=e,e=n):e=n,e}function st(){var e,n;return e=Jn,t.substr(Jn,2)===gn?(n=gn,Jn+=2):(n=null,0===ri&&b(pn)),null!==n&&(Kn=e,n=vn()),null===n?(Jn=e,e=n):e=n,e}function ct(){var e,n;return e=Jn,t.substr(Jn,2)===yn?(n=yn,Jn+=2):(n=null,0===ri&&b(_n)),null!==n&&(Kn=e,n=mn()),null===n?(Jn=e,e=n):e=n,e}function lt(){var e,n;return e=Jn,t.substr(Jn,2)===bn?(n=bn,Jn+=2):(n=null,0===ri&&b(xn)),null!==n&&(Kn=e,n=wn()),null===n?(Jn=e,e=n):e=n,e}function ut(){var e,n;return e=Jn,t.substr(Jn,2)===In?(n=In,Jn+=2):(n=null,0===ri&&b(Sn)),null!==n&&(Kn=e,n=Tn()),null===n?(Jn=e,e=n):e=n,e}function dt(){var e,n;return e=Jn,t.substr(Jn,2)===Cn?(n=Cn,Jn+=2):(n=null,0===ri&&b(Mn)),null!==n&&(Kn=e,n=Dn()),null===n?(Jn=e,e=n):e=n,e}function ht(){var e,n,i;return e=Jn,t.substr(Jn,2)===En?(n=En,Jn+=2):(n=null,0===ri&&b(Pn)),null!==n?(t.length>Jn?(i=t.charAt(Jn),Jn++):(i=null,0===ri&&b(On)),null!==i?(Kn=e,n=An(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function ft(){var e,n,i;return e=Jn,92===t.charCodeAt(Jn)?(n=kn,Jn++):(n=null,0===ri&&b(Rn)),null!==n?(zn.test(t.charAt(Jn))?(i=t.charAt(Jn),Jn++):(i=null,0===ri&&b(Nn)),null!==i?(Kn=e,n=Vn(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}function gt(){var e,n,i,r;if(e=Jn,t.substr(Jn,2)===Ln?(n=Ln,Jn+=2):(n=null,0===ri&&b(Bn)),null!==n){if(i=[],Gn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Fn)),null!==r)for(;null!==r;)i.push(r),Gn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Fn));else i=It;null!==i?(Kn=e,n=jn(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)}else Jn=e,e=It;return e}function pt(){var e,n,i,r;if(e=Jn,t.substr(Jn,2)===Hn?(n=Hn,Jn+=2):(n=null,0===ri&&b(Un)),null!==n){if(i=[],Zn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Wn)),null!==r)for(;null!==r;)i.push(r),Zn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Wn));else i=It;null!==i?(Kn=e,n=qn(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)}else Jn=e,e=It;return e}function vt(){var e,n,i,r;if(e=Jn,t.substr(Jn,2)===Xn?(n=Xn,Jn+=2):(n=null,0===ri&&b(Yn)),null!==n){if(i=[],Zn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Wn)),null!==r)for(;null!==r;)i.push(r),Zn.test(t.charAt(Jn))?(r=t.charAt(Jn),Jn++):(r=null,0===ri&&b(Wn));else i=It;null!==i?(Kn=e,n=$n(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)}else Jn=e,e=It;return e}function yt(){var e,n;return e=Jn,t.substr(Jn,2)===Ln?(n=Ln,Jn+=2):(n=null,0===ri&&b(Bn)),null!==n&&(Kn=e,n=Qn()),null===n?(Jn=e,e=n):e=n,e}function _t(){var e,n,i;return e=Jn,92===t.charCodeAt(Jn)?(n=kn,Jn++):(n=null,0===ri&&b(Rn)),null!==n?(t.length>Jn?(i=t.charAt(Jn),Jn++):(i=null,0===ri&&b(On)),null!==i?(Kn=e,n=ze(i),null===n?(Jn=e,e=n):e=n):(Jn=e,e=It)):(Jn=e,e=It),e}var mt,bt=arguments.length>1?arguments[1]:{},xt={regexp:w},wt=w,It=null,St="",Tt="|",Ct='"|"',Mt=function(t,e){return e?new i(t,e[1]):t},Dt=function(t,e,n){return new r([t].concat(e).concat([n]))},Et="^",Pt='"^"',Ot=function(){return new n("start")},At="$",kt='"$"',Rt=function(){return new n("end")},zt=function(t,e){return new s(t,e)},Nt="Quantifier",Vt=function(t,e){return e&&(t.greedy=!1),t},Lt="{",Bt='"{"',Gt=",",Ft='","',jt="}",Ht='"}"',Ut=function(t,e){return new c(t,e)},Zt=",}",Wt='",}"',qt=function(t){return new c(t,1/0)},Xt=function(t){return new c(t,t)},Yt="+",$t='"+"',Qt=function(){return new c(1,1/0)},Jt="*",Kt='"*"',te=function(){return new c(0,1/0)},ee="?",ne='"?"',ie=function(){return new c(0,1)},re=/^[0-9]/,oe="[0-9]",ae=function(t){return+t.join("")},se="(",ce='"("',le=")",ue='")"',de=function(t){return t},he=function(t){return new a(t)},fe="?:",ge='"?:"',pe=function(t){return new o("non-capture-group",t)},ve="?=",ye='"?="',_e=function(t){return new o("positive-lookahead",t)},me="?!",be='"?!"',xe=function(t){return new o("negative-lookahead",t)},we="CharacterSet",Ie="[",Se='"["',Te="]",Ce='"]"',Me=function(t,e){return new l(!!t,e)},De="CharacterRange",Ee="-",Pe='"-"',Oe=function(t,e){return new u(t,e)},Ae="Character",ke=/^[^\\\]]/,Re="[^\\\\\\]]",ze=function(t){return new d(t)},Ne=".",Ve='"."',Le=function(){return new n("any-character")},Be="Literal",Ge=/^[^|\\\/.[()?+*$\^]/,Fe="[^|\\\\\\/.[()?+*$\\^]",je="\\b",He='"\\\\b"',Ue=function(){return new n("backspace")},Ze=function(){return new n("word-boundary")},We="\\B",qe='"\\\\B"',Xe=function(){return new n("non-word-boundary")},Ye="\\d",$e='"\\\\d"',Qe=function(){return new n("digit")},Je="\\D",Ke='"\\\\D"',tn=function(){return new n("non-digit")},en="\\f",nn='"\\\\f"',rn=function(){return new n("form-feed")},on="\\n",an='"\\\\n"',sn=function(){return new n("line-feed")},cn="\\r",ln='"\\\\r"',un=function(){return new n("carriage-return")},dn="\\s",hn='"\\\\s"',fn=function(){return new n("white-space")},gn="\\S",pn='"\\\\S"',vn=function(){return new n("non-white-space")},yn="\\t",_n='"\\\\t"',mn=function(){return new n("tab")},bn="\\v",xn='"\\\\v"',wn=function(){return new n("vertical-tab")},In="\\w",Sn='"\\\\w"',Tn=function(){return new n("word")},Cn="\\W",Mn='"\\\\W"',Dn=function(){return new n("non-word")},En="\\c",Pn='"\\\\c"',On="any character",An=function(t){return new v(t)},kn="\\",Rn='"\\\\"',zn=/^[1-9]/,Nn="[1-9]",Vn=function(t){return new p(t)},Ln="\\0",Bn='"\\\\0"',Gn=/^[0-7]/,Fn="[0-7]",jn=function(t){return new g(t.join(""))},Hn="\\x",Un='"\\\\x"',Zn=/^[0-9a-fA-F]/,Wn="[0-9a-fA-F]",qn=function(t){return new f(t.join(""))},Xn="\\u",Yn='"\\\\u"',$n=function(t){return new h(t.join(""))},Qn=function(){return new n("null-character")},Jn=0,Kn=0,ti=0,ei={line:1,column:1,seenCR:!1},ni=0,ii=[],ri=0;if("startRule"in bt){if(!(bt.startRule in xt))throw new Error("Can't start parsing from rule \""+bt.startRule+'".');wt=xt[bt.startRule]}if(n.offset=_,n.text=y,mt=wt(),null!==mt&&Jn===t.length)return mt;throw x(ii),Kn=Math.max(Jn,ni),new e(ii,Kn<t.length?t.charAt(Kn):null,Kn,m(Kn).line,m(Kn).column)}return t(e,Error),{SyntaxError:e,parse:y}}(),_=1,m={};t.exports=y},function(t,e,n){var i=n(3),r=n(5),o={extend:i.extend},a=f(97,122),s=f(65,90),c=f(48,57),l=f(32,47)+f(58,64)+f(91,96)+f(123,126),u=f(32,126),d=" \f\n\r\t\v \u2028\u2029",h={"\\w":a+s+c+"_","\\W":l.replace("_",""),"\\s":d,"\\S":function(){for(var t=u,e=0;e<d.length;e++)t=t.replace(d[e],"");return t}(),"\\d":c,"\\D":a+s+l};function f(t,e){for(var n="",i=t;i<=e;i++)n+=String.fromCharCode(i);return n}o.gen=function(t,e,n){return n=n||{guid:1},o[t.type]?o[t.type](t,e,n):o.token(t,e,n)},o.extend({token:function(t,e,n){switch(t.type){case"start":case"end":return"";case"any-character":return r.character();case"backspace":return"";case"word-boundary":return"";case"non-word-boundary":break;case"digit":return r.pick(c.split(""));case"non-digit":return r.pick((a+s+l).split(""));case"form-feed":break;case"line-feed":return t.body||t.text;case"carriage-return":break;case"white-space":return r.pick(d.split(""));case"non-white-space":return r.pick((a+s+c).split(""));case"tab":break;case"vertical-tab":break;case"word":return r.pick((a+s+c).split(""));case"non-word":return r.pick(l.replace("_","").split(""));case"null-character":break}return t.body||t.text},alternate:function(t,e,n){return this.gen(r.boolean()?t.left:t.right,e,n)},match:function(t,e,n){e="";for(var i=0;i<t.body.length;i++)e+=this.gen(t.body[i],e,n);return e},"capture-group":function(t,e,n){return e=this.gen(t.body,e,n),n[n.guid++]=e,e},"non-capture-group":function(t,e,n){return this.gen(t.body,e,n)},"positive-lookahead":function(t,e,n){return this.gen(t.body,e,n)},"negative-lookahead":function(t,e,n){return""},quantified:function(t,e,n){e="";for(var i=this.quantifier(t.quantifier),r=0;r<i;r++)e+=this.gen(t.body,e,n);return e},quantifier:function(t,e,n){var i=Math.max(t.min,0),o=isFinite(t.max)?t.max:i+r.integer(3,7);return r.integer(i,o)},charset:function(t,e,n){if(t.invert)return this["invert-charset"](t,e,n);var i=r.pick(t.body);return this.gen(i,e,n)},"invert-charset":function(t,e,n){for(var i,o=u,a=0;a<t.body.length;a++)switch(i=t.body[a],i.type){case"literal":o=o.replace(i.body,"");break;case"range":for(var s=this.gen(i.start,e,n).charCodeAt(),c=this.gen(i.end,e,n).charCodeAt(),l=s;l<=c;l++)o=o.replace(String.fromCharCode(l),"");default:var d=h[i.text];if(d)for(var f=0;f<=d.length;f++)o=o.replace(d[f],"")}return r.pick(o.split(""))},range:function(t,e,n){var i=this.gen(t.start,e,n).charCodeAt(),o=this.gen(t.end,e,n).charCodeAt();return String.fromCharCode(r.integer(i,o))},literal:function(t,e,n){return t.escaped?t.body:t.text},unicode:function(t,e,n){return String.fromCharCode(parseInt(t.code,16))},hex:function(t,e,n){return String.fromCharCode(parseInt(t.code,16))},octal:function(t,e,n){return String.fromCharCode(parseInt(t.code,8))},"back-reference":function(t,e,n){return n[t.code]||""},CONTROL_CHARACTER_MAP:function(){for(var t="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),e="\0        \b \t \n \v \f \r                  ".split(" "),n={},i=0;i<t.length;i++)n[t[i]]=e[i];return n}(),"control-character":function(t,e,n){return this.CONTROL_CHARACTER_MAP[t.code]}}),t.exports=o},function(t,e,n){t.exports=n(24)},function(t,e,n){var i=n(2),r=n(3),o=n(4);function a(t,e,n){n=n||[];var s={name:"string"===typeof e?e.replace(i.RE_KEY,"$1"):e,template:t,type:r.type(t),rule:o.parse(e)};switch(s.path=n.slice(0),s.path.push(void 0===e?"ROOT":s.name),s.type){case"array":s.items=[],r.each(t,(function(t,e){s.items.push(a(t,e,s.path))}));break;case"object":s.properties=[],r.each(t,(function(t,e){s.properties.push(a(t,e,s.path))}));break}return s}t.exports=a},function(t,e,n){t.exports=n(26)},function(t,e,n){var i=n(2),r=n(3),o=n(23);function a(t,e){for(var n=o(t),i=s.diff(n,e),r=0;r<i.length;r++);return i}var s={diff:function(t,e,n){var i=[];return this.name(t,e,n,i)&&this.type(t,e,n,i)&&(this.value(t,e,n,i),this.properties(t,e,n,i),this.items(t,e,n,i)),i},name:function(t,e,n,i){var r=i.length;return c.equal("name",t.path,n+"",t.name+"",i),i.length===r},type:function(t,e,n,o){var a=o.length;switch(t.type){case"string":if(t.template.match(i.RE_PLACEHOLDER))return!0;break;case"array":if(t.rule.parameters){if(void 0!==t.rule.min&&void 0===t.rule.max&&1===t.rule.count)return!0;if(t.rule.parameters[2])return!0}break;case"function":return!0}return c.equal("type",t.path,r.type(e),t.type,o),o.length===a},value:function(t,e,n,r){var o,a=r.length,s=t.rule,l=t.type;if("object"===l||"array"===l||"function"===l)return!0;if(!s.parameters){switch(l){case"regexp":return c.match("value",t.path,e,t.template,r),r.length===a;case"string":if(t.template.match(i.RE_PLACEHOLDER))return r.length===a;break}return c.equal("value",t.path,e,t.template,r),r.length===a}switch(l){case"number":var u=(e+"").split(".");u[0]=+u[0],void 0!==s.min&&void 0!==s.max&&(c.greaterThanOrEqualTo("value",t.path,u[0],Math.min(s.min,s.max),r),c.lessThanOrEqualTo("value",t.path,u[0],Math.max(s.min,s.max),r)),void 0!==s.min&&void 0===s.max&&c.equal("value",t.path,u[0],s.min,r,"[value] "+n),s.decimal&&(void 0!==s.dmin&&void 0!==s.dmax&&(c.greaterThanOrEqualTo("value",t.path,u[1].length,s.dmin,r),c.lessThanOrEqualTo("value",t.path,u[1].length,s.dmax,r)),void 0!==s.dmin&&void 0===s.dmax&&c.equal("value",t.path,u[1].length,s.dmin,r));break;case"boolean":break;case"string":o=e.match(new RegExp(t.template,"g")),o=o?o.length:0,void 0!==s.min&&void 0!==s.max&&(c.greaterThanOrEqualTo("repeat count",t.path,o,s.min,r),c.lessThanOrEqualTo("repeat count",t.path,o,s.max,r)),void 0!==s.min&&void 0===s.max&&c.equal("repeat count",t.path,o,s.min,r);break;case"regexp":o=e.match(new RegExp(t.template.source.replace(/^\^|\$$/g,""),"g")),o=o?o.length:0,void 0!==s.min&&void 0!==s.max&&(c.greaterThanOrEqualTo("repeat count",t.path,o,s.min,r),c.lessThanOrEqualTo("repeat count",t.path,o,s.max,r)),void 0!==s.min&&void 0===s.max&&c.equal("repeat count",t.path,o,s.min,r);break}return r.length===a},properties:function(t,e,n,i){var o=i.length,a=t.rule,s=r.keys(e);if(t.properties){if(t.rule.parameters?(void 0!==a.min&&void 0!==a.max&&(c.greaterThanOrEqualTo("properties length",t.path,s.length,Math.min(a.min,a.max),i),c.lessThanOrEqualTo("properties length",t.path,s.length,Math.max(a.min,a.max),i)),void 0!==a.min&&void 0===a.max&&1!==a.count&&c.equal("properties length",t.path,s.length,a.min,i)):c.equal("properties length",t.path,s.length,t.properties.length,i),i.length!==o)return!1;for(var l=0;l<s.length;l++)i.push.apply(i,this.diff(function(){var e;return r.each(t.properties,(function(t){t.name===s[l]&&(e=t)})),e||t.properties[l]}(),e[s[l]],s[l]));return i.length===o}},items:function(t,e,n,i){var r=i.length;if(t.items){var o=t.rule;if(t.rule.parameters){if(void 0!==o.min&&void 0!==o.max&&(c.greaterThanOrEqualTo("items",t.path,e.length,Math.min(o.min,o.max)*t.items.length,i,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),c.lessThanOrEqualTo("items",t.path,e.length,Math.max(o.min,o.max)*t.items.length,i,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),void 0!==o.min&&void 0===o.max){if(1===o.count)return i.length===r;c.equal("items length",t.path,e.length,o.min*t.items.length,i)}if(o.parameters[2])return i.length===r}else c.equal("items length",t.path,e.length,t.items.length,i);if(i.length!==r)return!1;for(var a=0;a<e.length;a++)i.push.apply(i,this.diff(t.items[a%t.items.length],e[a],a%t.items.length));return i.length===r}}},c={message:function(t){return(t.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",t.type.toUpperCase()).replace("{ltype}",t.type.toLowerCase()).replace("{path}",r.isArray(t.path)&&t.path.join(".")||t.path).replace("{action}",t.action).replace("{expected}",t.expected).replace("{actual}",t.actual)},equal:function(t,e,n,i,r,o){if(n===i)return!0;switch(t){case"type":if("regexp"===i&&"string"===n)return!0;break}var a={path:e,type:t,actual:n,expected:i,action:"is equal to",message:o};return a.message=c.message(a),r.push(a),!1},match:function(t,e,n,i,r,o){if(i.test(n))return!0;var a={path:e,type:t,actual:n,expected:i,action:"matches",message:o};return a.message=c.message(a),r.push(a),!1},notEqual:function(t,e,n,i,r,o){if(n!==i)return!0;var a={path:e,type:t,actual:n,expected:i,action:"is not equal to",message:o};return a.message=c.message(a),r.push(a),!1},greaterThan:function(t,e,n,i,r,o){if(n>i)return!0;var a={path:e,type:t,actual:n,expected:i,action:"is greater than",message:o};return a.message=c.message(a),r.push(a),!1},lessThan:function(t,e,n,i,r,o){if(n<i)return!0;var a={path:e,type:t,actual:n,expected:i,action:"is less to",message:o};return a.message=c.message(a),r.push(a),!1},greaterThanOrEqualTo:function(t,e,n,i,r,o){if(n>=i)return!0;var a={path:e,type:t,actual:n,expected:i,action:"is greater than or equal to",message:o};return a.message=c.message(a),r.push(a),!1},lessThanOrEqualTo:function(t,e,n,i,r,o){if(n<=i)return!0;var a={path:e,type:t,actual:n,expected:i,action:"is less than or equal to",message:o};return a.message=c.message(a),r.push(a),!1}};a.Diff=s,a.Assert=c,t.exports=a},function(t,e,n){t.exports=n(28)},function(t,e,n){var i=n(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(f){window.Event=function(t,e,n,i){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e,n,i),r}}var r={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},o="readystatechange loadstart progress abort error load timeout loadend".split(" "),a="timeout withCredentials".split(" "),s="readyState responseURL status statusText responseType response responseText responseXML".split(" "),c={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function l(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}function u(){var t=function(){var t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,e=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,n=location.href,i=e.exec(n.toLowerCase())||[];return t.test(i[1])}();return window.ActiveXObject?!t&&e()||n():e();function e(){try{return new window._XMLHttpRequest}catch(t){}}function n(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}function d(t){for(var e in l.Mock._mocked){var n=l.Mock._mocked[e];if((!n.rurl||r(n.rurl,t.url))&&(!n.rtype||r(n.rtype,t.type.toLowerCase())))return n}function r(t,e){return"string"===i.type(t)?t===e:"regexp"===i.type(t)?t.test(e):void 0}}function h(t,e){return i.isFunction(t.template)?t.template(e):l.Mock.mock(t.template)}l._settings={timeout:"10-100"},l.setup=function(t){return i.extend(l._settings,t),l._settings},i.extend(l,r),i.extend(l.prototype,r),l.prototype.mock=!0,l.prototype.match=!1,i.extend(l.prototype,{open:function(t,e,n,r,c){var h=this;i.extend(this.custom,{method:t,url:e,async:"boolean"!==typeof n||n,username:r,password:c,options:{url:e,type:t}}),this.custom.timeout=function(t){if("number"===typeof t)return t;if("string"===typeof t&&!~t.indexOf("-"))return parseInt(t,10);if("string"===typeof t&&~t.indexOf("-")){var e=t.split("-"),n=parseInt(e[0],10),i=parseInt(e[1],10);return Math.round(Math.random()*(i-n))+n}}(l._settings.timeout);var f=d(this.custom.options);function g(t){for(var e=0;e<s.length;e++)try{h[s[e]]=p[s[e]]}catch(n){}h.dispatchEvent(new Event(t.type))}if(f)this.match=!0,this.custom.template=f,this.readyState=l.OPENED,this.dispatchEvent(new Event("readystatechange"));else{var p=u();this.custom.xhr=p;for(var v=0;v<o.length;v++)p.addEventListener(o[v],g);r?p.open(t,e,n,r,c):p.open(t,e,n);for(var y=0;y<a.length;y++)try{p[a[y]]=h[a[y]]}catch(_){}}},setRequestHeader:function(t,e){if(this.match){var n=this.custom.requestHeaders;n[t]?n[t]+=","+e:n[t]=e}else this.custom.xhr.setRequestHeader(t,e)},timeout:0,withCredentials:!1,upload:{},send:function(t){var e=this;function n(){e.readyState=l.HEADERS_RECEIVED,e.dispatchEvent(new Event("readystatechange")),e.readyState=l.LOADING,e.dispatchEvent(new Event("readystatechange")),e.status=200,e.statusText=c[200],e.response=e.responseText=JSON.stringify(h(e.custom.template,e.custom.options),null,4),e.readyState=l.DONE,e.dispatchEvent(new Event("readystatechange")),e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend"))}this.custom.options.body=t,this.match?(this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(n,this.custom.timeout):n()):this.custom.xhr.send(t)},abort:function(){this.match?(this.readyState=l.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))):this.custom.xhr.abort()}}),i.extend(l.prototype,{responseURL:"",status:l.UNSENT,statusText:"",getResponseHeader:function(t){return this.match?this.custom.responseHeaders[t.toLowerCase()]:this.custom.xhr.getResponseHeader(t)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var t=this.custom.responseHeaders,e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+": "+t[n]+"\r\n");return e},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),i.extend(l.prototype,{addEventListener:function(t,e){var n=this.custom.events;n[t]||(n[t]=[]),n[t].push(e)},removeEventListener:function(t,e){for(var n=this.custom.events[t]||[],i=0;i<n.length;i++)n[i]===e&&n.splice(i--,1)},dispatchEvent:function(t){for(var e=this.custom.events[t.type]||[],n=0;n<e.length;n++)e[n].call(this,t);var i="on"+t.type;this[i]&&this[i](t)}}),t.exports=l}])}))},"0496":function(t,e,n){var i=n("efe2");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},"053b":function(t,e,n){var i=n("1e2c"),r=n("d910").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,c="name";i&&!(c in o)&&r(o,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},"064b":function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"07a2":function(t,e,n){var i=n("8a1c");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"086d":function(t,e,n){"use strict";var i=n("1c8b"),r=n("74e7"),o=[].reverse,a=[1,2];i({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),o.call(this)}})},"08ba":function(t,e,n){var i=n("d890"),r=n("064b"),o=n("3c10"),a=n("0fc1");for(var s in r){var c=i[s],l=c&&c.prototype;if(l&&l.forEach!==o)try{a(l,"forEach",o)}catch(u){l.forEach=o}}},"08d5":function(t,e,n){"use strict";var i=n("1c8b"),r=n("0c3c"),o=n("3553"),a=n("efe2"),s=n("d7e1"),c=[],l=c.sort,u=a((function(){c.sort(void 0)})),d=a((function(){c.sort(null)})),h=s("sort"),f=u||!d||!h;i({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?l.call(o(this)):l.call(o(this),r(t))}})},"0a51":function(t,e,n){"use strict";var i=n("1c8b"),r=n("1e2c"),o=n("d890"),a=n("faa8"),s=n("a719"),c=n("d910").f,l=n("c69d"),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(h,u);var f=h.prototype=u.prototype;f.constructor=h;var g=f.toString,p="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=g.call(t);if(a(d,t))return"";var n=p?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:h})}},"0d7a":function(t,e,n){"use strict";var i=n("b2a2"),r=n("8a1c"),o=n("857c"),a=n("2732"),s=n("ef4c"),c=n("38eb"),l=n("d88d"),u=n("59da"),d=n("5139"),h=n("efe2"),f=[].push,g=Math.min,p=4294967295,v=!h((function(){return!RegExp(p,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(a(this)),o=void 0===n?p:n>>>0;if(0===o)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,o);var s,c,l,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,h+"g");while(s=d.call(v,i)){if(c=v.lastIndex,c>g&&(u.push(i.slice(g,s.index)),s.length>1&&s.index<i.length&&f.apply(u,s.slice(1)),l=s[0].length,g=c,u.length>=o))break;v.lastIndex===s.index&&v.lastIndex++}return g===i.length?!l&&v.test("")||u.push(""):u.push(i.slice(g)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(String(r),e,n)},function(t,r){var a=n(i,t,this,r,i!==e);if(a.done)return a.value;var d=o(t),h=String(this),f=s(d,RegExp),y=d.unicode,_=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),m=new f(v?d:"^(?:"+d.source+")",_),b=void 0===r?p:r>>>0;if(0===b)return[];if(0===h.length)return null===u(m,h)?[h]:[];var x=0,w=0,I=[];while(w<h.length){m.lastIndex=v?w:0;var S,T=u(m,v?h:h.slice(w));if(null===T||(S=g(l(m.lastIndex+(v?0:w)),h.length))===x)w=c(h,w,y);else{if(I.push(h.slice(x,w)),I.length===b)return I;for(var C=1;C<=T.length-1;C++)if(I.push(T[C]),I.length===b)return I;w=x=S}}return I.push(h.slice(x)),I}]}),!v)},"16e4":function(t,e,n){(function(t){n("fe59"),n("48f3"),function(t){"use strict";var e="ht",n=t[e],i=function(){return document},r=function(){return i().body},o=function(t,e,n){t.style.setProperty(e,n,null)},a=function(t){return i().createElement(t)},s=function(){return a("div")},c=function(){var t=a("canvas");return t},l=function(t,e){o(t,"-webkit-transform",e),o(t,"-ms-transform",e),o(t,"transform",e)},u=function(t,e){o(t,"-webkit-transform-origin",e),o(t,"-ms-transform-origin",e),o(t,"transform-origin",e)},d=function(t,e){t.appendChild(e)},h=function(t,e){t.removeChild(e)},f=t.parseInt,g=n.Default,p=g.eventListenerOptionsFalse,v=(g.eventListenerOptionsTrue,function(t,e,n,i){t.addEventListener(e,n,p)}),y=g.getInternal(),_=Math.PI,m="white-space",b="visibility",x="left",w="top",I="width",S="height",T="position",C="display",M="z-index",D="px",E="0 0",P="absolute",O="visible",A="hidden",k="none",R="block",z="nowrap",N="rgba(0, 0, 0, 0.005)";g.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var V=n.graph.GraphView.prototype,L=V._42;V.adjustHtmlNodeIndex=!0,V._42=function(t,e){if(L.call(this,t,e),this.adjustHtmlNodeIndex)for(var n=this.getDataModel()._datas._as,i=n.length,r=1,a=0;i>a;a++){var s=n[a];if(s instanceof G){var c=this.getDataUI(s);o(c.$2f,M,r+""),o(c.$3f,M,r+1+""),r+=2}}};var B=n.HtmlNodeUI=function(t,e){var n=this;B.superClass.constructor.call(n,t,e);var i=n.$2f=s(),r=n.$3f=c();o(i,T,P),o(i,b,A),o(i,m,z),r.draggable=!1,o(r,T,P),o(r,C,k),u(r,E),v(i,"change",(function(t){var i=t.target,r=i.bind||i.getAttribute("bind"),o=i.type&&"checkbox"===i.type?i.checked:i.value,a=e.getContext();r&&a&&(a[r]=o,n.$4f=JSON.stringify(a))})),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach((function(t){v(i,t,this.$9f.bind(this))}),n)};g.def(B,y.ui().NodeUI,{_visible:!0,$11f:function(){var t=this,e=t.$3f,n=t._data,i=n.getDraggerImageWidth(),r=n.getDraggerImageHeight(),o=n.getDraggerImage(),a=y.initContext(e);a.beginPath(),y.setCanvas(e,i,r),y.translateAndScale(a,0,0,1),a.clearRect(0,0,i,r),g.drawImage(a,g.getImage(o),0,0,i,r),a.restore()},_80o:function(t){B.superClass._80o.call(this,t);var e=this,n=e._data,i=n._padding,r=2*i,a=e.$2f,c=e.$3f,u=e.gv,h=u.getZoom(),g=u.getTranslateX(),p=u.getTranslateY(),v=u.getView(),y=e._83o,m=n._width,E=n._height,z=y.position,V=y.rotation,L=(m-r)/n.$5f*h,G=(E-r)/n.$6f*h,F=e._html,j=n._html,H=n.getHtmlType();if("html"===H){var U=n.getContext()||{},Z=e.$4f,W=n.$10f,q=JSON.stringify(U);F&&Z&&F===j&&Z===q||(e.$4f=q,e._html=j,a.innerHTML=W?W(U):j)}else if(null!=H){var X=n.getHtml();"ht"===H&&(X=X.getView()),F&&F===X&&a.contains(F)||(e._html=X,a.innerHTML="",d(a,X))}if(!a.parentNode){var Y=u.$1f;if(!Y){var $=s();o($,T,P),o($,M,"0"),Y=u.$1f=$;var Q=u._canvas.nextSibling;Q?v.insertBefore($,Q):d(v,$)}d(Y,a),d(Y,c),n.onContentInitialized&&n.onContentInitialized(a)}if(n._scalable){var J=n.$5f,K=n.$6f;l(a,"rotate("+V/_*180+"deg) scale("+L+","+G+")"),o(a,I,""),o(a,S,""),o(a,x,(z.x-J/h/2)*h+g+D),o(a,w,(z.y-K/h/2)*h+p+D)}else{var tt=f(a.style.width),et=f(a.style.height),nt=f((m-r)*h),it=f((E-r)*h),rt="100%",ot=a.children[0];o(ot,I,rt),o(ot,S,rt),(tt!==nt||et!==it)&&(o(a,I,nt+D),o(a,S,it+D),"ht"===H&&j.invalidate()),l(a,"rotate("+V/_*180+"deg)"),o(a,x,(z.x-nt/h/2)*h+g+D),o(a,w,(z.y-it/h/2)*h+p+D)}var at=e.dragRect;u.isMovable(n)&&u.isSelected(n)&&at?(t.save(),t.fillStyle=N,t.fillRect(at.x,at.y,at.width,at.height),t.restore(),o(c,x,at.x*h+g+D),o(c,w,at.y*h+p+D),l(c,"scale("+h+","+h+")"),o(c,C,R),e.$11f()):o(c,C,k),o(a,b,this._visible?O:A)},dispose:function(){var t=this.gv.$1f;this.$2f.parentNode===t&&t.removeChild(this.$2f),this.$3f.parentNode===t&&t.removeChild(this.$3f)},_84o:function(t){this._visible=t,o(this.$2f,b,t?O:A),o(this.$3f,C,t?R:k)},_3O:function(){var t=this,e=t.gv,n=t._data;B.superClass._3O.call(t);var i=n.getRect();e.isEditable(n)&&(t.dragRect={x:i.x+i.width+n._padding,y:i.y+10,width:n.getDraggerImageWidth(),height:n.getDraggerImageHeight()},t._68o(t.dragRect))},rectIntersects:function(t){var e=this._79o();return!!n.Default.intersection(e,t)||void 0},$9f:function(t){var e=this.gv,n=this._data;e.sm().contains(n)&&t.stopPropagation()}});var G=n.HtmlNode=function(){G.superClass.constructor.call(this)};n.Default.def(G,n.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:n.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(e){var n=this,i=n._html;n._html=e,"html"===n.getHtmlType()&&"Handlebars"in t&&(n.$10f=Handlebars.compile(e)),n.$13f(),n.fp("html",i,e)},setContext:function(t){var e=this,n=e._context;e._context=t,e.fp("context",n,t),e.$13f()},setScalable:function(t){var e=this,n=e._scalable;e._scalable=t,e.fp("scalable",n,t),e.$13f()},getHtmlType:function(){var t=this._html;return t?"string"==typeof t?"html":t.getView?"ht":"dom":null},$13f:function(){var t=this,e=t._html,n=t.$10f;if(e){var i=s(),a=!1,c=t.getHtmlType();if(o(i,T,P),o(i,m,z),o(i,b,A),"html"===c?(i.innerHTML=n?n(t.getContext()||{}):e,a=!0):"ht"===c?(d(i,e.getView()),a=!0):"dom"===c&&(d(i,e),a=!0),a){var l=2*t._padding;d(r(),i),t.$5f=i.scrollWidth,t.$6f=i.scrollHeight,t._width=t.$5f+l,t._height=t.$6f+l,t._originWidth=t._width,t._originHeight=t._height,h(r(),i)}}},getUIClass:function(){return n.HtmlNodeUI}})}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"))}).call(this,n("9edd"))},"17d3":function(t,e,n){(function(t){(function(t,e,n){function i(t){for(var e="",n=0;n<t.length;n++){var i=t[n].x+51;i>0&&(e+=String.fromCharCode(i));var r=t[n].y+11;r>0&&(e+=String.fromCharCode(r));var o=t[n].z+21;o>0&&(e+=String.fromCharCode(o))}return e}for(var r,o,a=function(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t},s=function(e,n){for(var i in n)e.style[i]=n[i],"position"===i&&t.document?e.style[i]=t.document.createElement("form"):"box-sizing"===i&&(e.style[i]=t.document.createElement("input"));return e},c=[[{x:64,y:93,z:96},{x:65,y:54,z:87},{x:50,y:103,z:95},{x:-2,y:-11,z:-21}],[{x:53,y:105,z:87},{x:1,y:-11,z:-21}],[{x:72,y:23,z:78},{x:-17,y:47,z:11},{x:-17,y:24180,z:24009},{x:25981,y:31174,z:20318},{x:37066,y:31174,z:25195},{x:26326,y:38469,z:20823},{x:21445,y:23,z:23},{x:-17,y:101,z:13},{x:7,y:21,z:13},{x:-3,y:22812,z:22390},{x:32457,y:21501,z:30396},{x:25460,y:31984,z:32458},{x:-3,y:23,z:23},{x:-17,y:98,z:13},{x:7,y:21,z:13},{x:-2,y:23,z:23},{x:-17,y:104,z:13},{x:7,y:21,z:13},{x:-1,y:37,z:28},{x:6,y:34,z:27},{x:4,y:34,z:29},{x:6,y:23,z:23},{x:-17,y:90,z:13},{x:7,y:21,z:13},{x:-17,y:33,z:13},{x:54,y:23,z:37},{x:-19,y:23,z:13},{x:-7,y:23,z:82},{x:-17,y:47,z:11},{x:-17,y:37,z:30},{x:6,y:45,z:32},{x:46,y:44,z:76},{x:50,y:86,z:30},{x:4,y:40,z:27},{x:51,y:37,z:33},{x:49,y:42,z:35},{x:-2,y:91,z:35},{x:-2,y:89,z:33},{x:47,y:37,z:29},{x:49,y:41,z:33},{x:48,y:45,z:77},{x:1,y:91,z:36},{x:0,y:41,z:79},{x:5,y:86,z:36},{x:46,y:42,z:80},{x:-1,y:42,z:29},{x:51,y:87,z:31},{x:-3,y:89,z:79},{x:3,y:40,z:34},{x:5,y:88,z:28},{x:3,y:87,z:28},{x:-3,y:39,z:36},{x:-2,y:86,z:31},{x:47,y:39,z:29},{x:-2,y:87,z:79},{x:47,y:44,z:27},{x:47,y:44,z:77},{x:5,y:44,z:77},{x:1,y:41,z:27},{x:-3,y:44,z:28},{x:48,y:40,z:81},{x:0,y:86,z:77},{x:5,y:86,z:81},{x:49,y:40,z:34},{x:46,y:88,z:76},{x:0,y:37,z:29},{x:1,y:42,z:31},{x:3,y:45,z:28},{x:1,y:38,z:27},{x:-3,y:88,z:36},{x:51,y:91,z:33},{x:-1,y:86,z:78},{x:51,y:43,z:34},{x:50,y:45,z:31},{x:51,y:91,z:79},{x:5,y:37,z:80},{x:46,y:91,z:33},{x:-3,y:87,z:80},{x:47,y:42,z:80},{x:-2,y:42,z:31},{x:2,y:88,z:33},{x:0,y:39,z:34},{x:-1,y:88,z:77},{x:4,y:91,z:29},{x:0,y:91,z:76},{x:48,y:45,z:35},{x:51,y:40,z:78},{x:50,y:88,z:28},{x:-2,y:91,z:30},{x:3,y:87,z:28},{x:47,y:38,z:31},{x:-3,y:87,z:81},{x:4,y:46,z:29},{x:1,y:89,z:33},{x:6,y:41,z:80},{x:3,y:91,z:29},{x:3,y:39,z:78},{x:-3,y:91,z:31},{x:47,y:37,z:31},{x:51,y:42,z:78},{x:48,y:45,z:36},{x:2,y:45,z:27},{x:-3,y:91,z:30},{x:48,y:42,z:80},{x:48,y:87,z:80},{x:-3,y:89,z:29},{x:50,y:39,z:35},{x:3,y:39,z:77},{x:-3,y:90,z:27},{x:0,y:42,z:34},{x:1,y:89,z:33},{x:0,y:40,z:77},{x:4,y:39,z:32},{x:4,y:44,z:35},{x:48,y:40,z:13},{x:74,y:-11,z:-21}]],l="",u=0;u<c.length;u++)0===u?r=i(c[u]):1===u?o=i(c[u]):l=i(c[u]);t[r]=a&&s,t[o]=l})("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this)}).call(this,n("9edd"))},"19fc":function(t,e,n){"use strict";var i=n("3553"),r=n("e1d6"),o=n("d88d"),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=i(this),s=o(n.length),c=r(t,s),l=r(e,s),u=arguments.length>2?arguments[2]:void 0,d=a((void 0===u?s:r(u,s))-l,s-c),h=1;l<c&&c<l+d&&(h=-1,l+=d-1,c+=d-1);while(d-- >0)l in n?n[c]=n[l]:delete n[c],c+=h,l+=h;return n}},"1bb1":function(t,e,n){"use strict";var i=n("d890"),r=n("5a9e"),o=n("efe2"),a=i.Int8Array,s=r.aTypedArray,c=r.exportTypedArrayMethod,l=[].toLocaleString,u=[].slice,d=!!a&&o((function(){l.call(new a(1))})),h=o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return l.apply(d?u.call(s(this)):s(this),arguments)}),h)},"1bbd":function(t,e,n){"use strict";var i=n("9f67"),r=n("d910"),o=n("38b9");t.exports=function(t,e,n){var a=i(e);a in t?r.f(t,a,o(0,n)):t[a]=n}},"1c2e":function(t,e,n){"use strict";var i=n("1944"),r=n("857c"),o=n("efe2"),a=n("99ad"),s="toString",c=RegExp.prototype,l=c[s],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=s;(u||d)&&i(RegExp.prototype,s,(function(){var t=r(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?a.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"1c2e9":function(t,e,n){"use strict";var i=n("d890"),r=n("1e2c"),o=n("d77f"),a=n("0fc1"),s=n("99ab"),c=n("efe2"),l=n("c4e4"),u=n("3da3"),d=n("d88d"),h=n("3ccd"),f=n("e026"),g=n("908e"),p=n("50fb"),v=n("b338").f,y=n("d910").f,_=n("fa41"),m=n("27b5"),b=n("b702"),x=b.get,w=b.set,I="ArrayBuffer",S="DataView",T="prototype",C="Wrong length",M="Wrong index",D=i[I],E=D,P=i[S],O=P&&P[T],A=Object.prototype,k=i.RangeError,R=f.pack,z=f.unpack,N=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},L=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},B=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},G=function(t){return R(t,23,4)},F=function(t){return R(t,52,8)},j=function(t,e){y(t[T],e,{get:function(){return x(this)[e]}})},H=function(t,e,n,i){var r=h(n),o=x(t);if(r+e>o.byteLength)throw k(M);var a=x(o.buffer).bytes,s=r+o.byteOffset,c=a.slice(s,s+e);return i?c:c.reverse()},U=function(t,e,n,i,r,o){var a=h(n),s=x(t);if(a+e>s.byteLength)throw k(M);for(var c=x(s.buffer).bytes,l=a+s.byteOffset,u=i(+r),d=0;d<e;d++)c[l+d]=u[o?d:e-d-1]};if(o){if(!c((function(){D(1)}))||!c((function(){new D(-1)}))||c((function(){return new D,new D(1.5),new D(NaN),D.name!=I}))){E=function(t){return l(this,E),new D(h(t))};for(var Z,W=E[T]=D[T],q=v(D),X=0;q.length>X;)(Z=q[X++])in E||a(E,Z,D[Z]);W.constructor=E}p&&g(O)!==A&&p(O,A);var Y=new P(new E(2)),$=O.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(O,{setInt8:function(t,e){$.call(this,t,e<<24>>24)},setUint8:function(t,e){$.call(this,t,e<<24>>24)}},{unsafe:!0})}else E=function(t){l(this,E,I);var e=h(t);w(this,{bytes:_.call(new Array(e),0),byteLength:e}),r||(this.byteLength=e)},P=function(t,e,n){l(this,P,S),l(t,E,S);var i=x(t).byteLength,o=u(e);if(o<0||o>i)throw k("Wrong offset");if(n=void 0===n?i-o:d(n),o+n>i)throw k(C);w(this,{buffer:t,byteLength:n,byteOffset:o}),r||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},r&&(j(E,"byteLength"),j(P,"buffer"),j(P,"byteLength"),j(P,"byteOffset")),s(P[T],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return B(H(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return B(H(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return z(H(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return z(H(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){U(this,1,t,N,e)},setUint8:function(t,e){U(this,1,t,N,e)},setInt16:function(t,e){U(this,2,t,V,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){U(this,2,t,V,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){U(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){U(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){U(this,4,t,G,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){U(this,8,t,F,e,arguments.length>2?arguments[2]:void 0)}});m(E,I),m(P,S),t.exports={ArrayBuffer:E,DataView:P}},"1ca1":function(t,e,n){var i=n("a719"),r=n("74e7"),o=n("90fb"),a=o("species");t.exports=function(t,e){var n;return r(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?i(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"1cc1":function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").find,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("find",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},"1e4b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container"},[n("div",{staticClass:"lineNet",attrs:{id:"lineNet"}}),t.isDevelopment?n("div",{staticClass:"top-btns"},t._l(t.topBtns,(function(e){return n("a",{key:e.id,class:{active:t.showTabs[e.id]},attrs:{href:"javascript:;"},on:{click:function(n){return t.changeTab(e.id)}}},[t._v(t._s(e.name))])})),0):t._e(),t.isDevelopment?n("div",{staticClass:"btns"},[n("button",{on:{click:t.onFullScreen}},[t._v("全屏")]),n("button",{on:{click:t.onEnlarge}},[t._v("放大")]),n("button",{on:{click:t.onShrink}},[t._v("缩小")])]):t._e(),n("station-pop",{ref:"stationPop",attrs:{dataModel:t.dataModel,graphView:t.graphView,zoomIn:t.zoomIn,zoomIncrement:t.zoomIncrement,gvZoom:t.gvZoom},on:{showLocationIcon:t.showLocationIcon}}),t.showTabs.kljk?n("passenger-flow-animation",{attrs:{activeStationNode:t.activeStationNode,dataModel:t.dataModel,graphView:t.graphView,clickEvent:t.clickEvent,isShowDoubbleLine:t.isShowDoubbleLine,wsData:t.wsData},on:{findData:t.findData,unsubscribe:t.unsubscribe}}):t._e(),t.showTabs.xcjk?n("metro-animation",{attrs:{activeCarNode:t.activeCarNode,dataModel:t.dataModel,noAccessLineList:t.noAccessLineList,clickEvent:t.clickEvent,isShowDoubbleLine:t.isShowDoubbleLine,zoomIn:t.zoomIn,zoomIncrement:t.zoomIncrement,wsData:t.wsData},on:{findData:t.findData,unsubscribe:t.unsubscribe}}):t._e(),t.showTabs.dljk?n("power-monitor",{attrs:{activeStationNode:t.activeStationNode,dataModel:t.dataModel,graphView:t.graphView,clickEvent:t.clickEvent,wsData:t.wsData}}):t._e(),t.showTabs.nhjk?n("stationEnergy",{attrs:{dataModel:t.dataModel,graphView:t.graphView,wsData:t.wsData},on:{findData:t.findData,unsubscribe:t.unsubscribe}}):t._e(),t.showTabs.spjk?n("video-monitor",{attrs:{activeStationNode:t.activeStationNode,activeSectionSon:t.activeSectionSon,isShowDoubbleLine:t.isShowDoubbleLine,zoomIn:t.zoomIn,zoomIncrement:t.zoomIncrement,dataModel:t.dataModel,clickEvent:t.clickEvent},on:{initLineNetStyle:t.resetLineNetStyle}}):t._e(),t.showTabs.kljk?n("passengerFlowMonitoring",{attrs:{activeSection:t.activeSection,dataModel:t.dataModel,graphView:t.graphView,clickEvent:t.clickEvent,zoomIn:t.zoomIn,zoomIncrement:t.zoomIncrement,noAccessLineList:t.noAccessLineList,wsData:t.wsData},on:{initLineNetStyle:t.resetLineNetStyle,findData:t.findData,unsubscribe:t.unsubscribe}}):t._e(),n("alarm-event",{attrs:{dataModel:t.dataModel,graphView:t.graphView,wsData:t.wsData,zoomIn:t.zoomIn,dataModelLoaded:t.dataModelLoaded},on:{findData:t.findData,unsubscribe:t.unsubscribe}})],1)},r=[];n("b130"),n("ecb4"),n("2eeb"),n("c1d9"),n("e35a"),n("90aa"),n("f4e3"),n("0d7a"),n("f657");function o(t){if(Array.isArray(t))return t}n("f3dd"),n("0a51"),n("9b11"),n("a133"),n("e18c"),n("96db"),n("af86");function a(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(c){r=!0,o=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(r)throw o}}return n}}n("98e0"),n("77ad"),n("e50e"),n("053b"),n("1c2e");function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return o(t)||a(t,e)||c(t,e)||l()}n("b449");var d=n("17d6"),h=(n("4f67"),n("17d3"),n("d325"),n("2217"),n("9c7c"),n("2eee"),n("f6e9"),n("16e4"),n("6ab5"),n("bfa5")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},g=[],p=(n("b4fb"),n("fe8a"),n("b92a"),"rgb(255,0,0)"),v="rgb(152,240,29)",y=[{width:20,height:20,endWidth:20,endHeight:20},{width:22,height:22,endWidth:25,endHeight:25},{width:22,height:22,endWidth:45,endHeight:45},{width:22,height:22,endWidth:65,endHeight:65}],_=[{width:10,height:10,endWidth:10,endHeight:10},{width:15,height:15,endWidth:25,endHeight:25},{width:20,height:20,endWidth:35,endHeight:35}],m={name:"stationEnergy",props:{dataModel:{type:Object},graphView:{type:Object},wsData:{type:Object},clickEvent:{type:Object}},data:function(){return{stationEnergeyBlock:null}},mounted:function(){this.stationEnergeyBlock=new ht.Block,this.dataModel.add(this.stationEnergeyBlock),this.findData()},destroyed:function(){this.removeEnergeData(),this.closeWS()},watch:{wsData:function(t){if("N23"==t.command){this.stationEnergeyBlock.isEmpty()||(this.dataModel.remove(this.stationEnergeyBlock),this.stationEnergeyBlock=new ht.Block,this.dataModel.add(this.stationEnergeyBlock));var e=t.data.energyData;e=Object.keys(e).map((function(t){return e[t]})),this.initstationEnergy(e)}}},methods:{closeWS:function(){var t={type:2,unsubscribe:[{command:"N23",param:{lineId:0,limit:.6}}]};this.$emit("unsubscribe",t)},findData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={command:"N23",param:{lineId:0,limit:.6}},t.$emit("findData",n);case 2:case"end":return e.stop()}}),e)})))()},removeEnergeData:function(){this.stationEnergeyBlock&&(this.dataModel.remove(this.stationEnergeyBlock),this.dataModel.disableAnimation())},initstationEnergy:function(t){this.dataModel.enableAnimation(),this.createStationEnergy(t)},createStationEnergy:function(t){for(var e=this,n=function(n){e.dataModel.each((function(i){var r=i.getTag();r&&r.includes("S:")&&r.split(":")[1]===t[n]["sortId"]&&(parseFloat(t[n]["percent"])<=.3?_.map((function(t,n){var o=new ht.Node;o.setStyle("shape","circle"),o.setPosition(i.getPosition()),o.setWidth(t.width),o.setHeight(t.height),0===n?(o.setStyle("shape.background",v),o.s("opacity",.8)):(o.setStyle("shape.background",null),o.setStyle("shape.border.width",2),o.setStyle("shape.border.color",v)),e.dataModel.add(o),e.stationEnergeyBlock.addChild(o),o.setTag("energy-".concat(r,"-").concat(n));var a=1500,s="Quad.easeOut",c={opacityAn:{property:"opacity",accessType:"style",from:1,to:0,repeat:!0,duration:a,easing:s},widthAn:{property:"width",from:t.width,to:t.endWidth,repeat:!0,duration:a,easing:s},heightAn:{property:"height",from:t.height,to:t.endHeight,repeat:!0,duration:a,easing:s}};c.start=0==n?["widthAn","heightAn"]:["opacityAn","widthAn","heightAn"],o.setAnimation(c)})):y.map((function(t,n){var o=new ht.Node;o.setStyle("shape","circle"),o.setPosition(i.getPosition()),o.setWidth(t.width),o.setHeight(t.height),0===n?(o.setStyle("shape.background",p),o.s("opacity",.8)):(o.setStyle("shape.background",null),o.setStyle("shape.border.width",2),o.setStyle("shape.border.color",p)),e.dataModel.add(o),e.stationEnergeyBlock.addChild(o),o.setTag("energy-".concat(r,"-").concat(n));var a=1500,s="Quad.easeOut",c={opacityAn:{property:"opacity",accessType:"style",from:1,to:0,repeat:!0,duration:a,easing:s},widthAn:{property:"width",from:t.width,to:t.endWidth,repeat:!0,duration:a,easing:s},heightAn:{property:"height",from:t.height,to:t.endHeight,repeat:!0,duration:a,easing:s}};c.start=0==n?["widthAn","heightAn"]:["opacityAn","widthAn","heightAn"],o.setAnimation(c)})))}))},i=0;i<t.length;i++)n(i)}}},b=m,x=n("e90a"),w=Object(x["a"])(b,f,g,!1,null,null,null),I=w.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},T=[];n("dbb3"),n("fe59"),n("6841"),n("98ea"),n("b73f"),n("bf84"),n("08ba");n("f1ac"),n("6266"),n("03a1");var C=h.data,M=[];C.map((function(t){t.stations.map((function(t){M.push(t)}))}));var D={5e3:2,1e4:4,5e4:6,8e4:8},E={out:{bg:"#0083FF"},in:{bg:"#FFB600"}},P={name:"passengerFlowAnimation",props:{activeStationNode:{type:Object},dataModel:{type:Object},graphView:{type:Object},clickEvent:{type:Object},isShowDoubbleLine:{type:Boolean},wsData:{type:Object}},data:function(){return{flowAnim:null,flowEdgeList:[],triangleNodeNum:10,nodeList:[],flowBlock:null,clickedStationId:"",isStopAnim:!1}},created:function(){this.flowBlock=new ht.Block,this.dataModel.add(this.flowBlock),this.isShowDoubbleLine||this.sendWsMessage()},destroyed:function(){this.removeFlowEdge(),this.unsubscribeData(this.clickedStationId)},watch:{activeStationNode:function(t,e){if(!this.isShowDoubbleLine&&t&&this.clickEvent.clickStation){this.clickedStationId=t?t.s("stationId"):"";var n=e?e.s("stationId"):"";this.unsubscribeData(n),this.sendWsMessage()}},"clickEvent.clickSection":function(t){t&&this.removeFlowEdge()},"clickEvent.clickGraphViewBg":function(t){t&&!this.isShowDoubbleLine&&(this.clickedStationId="",this.sendWsMessage())},isShowDoubbleLine:function(t){t?(this.removeFlowEdge(),this.unsubscribeData(this.clickedStationId)):(this.clickedStationId="",this.sendWsMessage())},wsData:{handler:function(t){this.wsCallback(t)},deep:!0}},methods:{sendWsMessage:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={command:"N06",param:{}},t.clickedStationId&&(n.param={stationId:t.clickedStationId}),t.$emit("findData",n);case 3:case"end":return e.stop()}}),e)})))()},wsCallback:function(t){"N06"===t.command&&this.createPassengerFlowLine(t.data)},createPassengerFlowLine:function(t){var e=this;this.removeFlowEdge();var n=t.trendData;n.map((function(t){var n,i,r=t.fromSortId,o=t.toSortId,a=t.toStationId,s=e.dataModel.getDataByTag("S:".concat(r)),c=e.dataModel.getDataByTag("S:".concat(o)),l=new ht.Edge(s,c);l.setTag("edge-".concat(r,"-").concat(o)),n=e.clickedStationId&&a===e.clickedStationId?"in":"out";for(var d=0,h=Object.entries(D);d<h.length;d++){var f=u(h[d],2),g=f[0],p=f[1];t.value>g&&(i=p)}l.s({"edge.type":"ripple","edge.ripple.elevation":-200,"edge.offset":0,"edge.dash":!0,"edge.width":i,"edge.color":"rgba(0, 0, 0, 0)","edge.cap":"round","edge.dash.pattern":[16,10],"edge.dash.color":E[n].bg,"edge.dash.flow":!0}),l.setLayer(999),e.dataModel.add(l),e.flowBlock.addChild(l);var v={tag:"edge-".concat(t.fromSortId,"-").concat(t.toSortId),path:l,triangleList:[]};e.flowEdgeList.push(v),e.createTriangleNode(v,n)})),this.graphView.enableDashFlow(),this.flowBlock.s("2d.visible",!0),this.isStopAnim=!1,this.triangleAnimation()},createTriangleNode:function(t,e){for(var n=this.triangleNodeNum,i=0;i<n;i++){var r=new ht.Node;r.setImage("assets/icon-triangle-".concat(e,".png"));var o=.6-.05*(10-i);r.setScale(o,o),r.s("opacity",0),r.setLayer(999),this.dataModel.add(r),this.flowBlock.addChild(r),t.triangleList.push(r)}},triangleAnimation:function(){var t=this;this.flowAnim=ht.Default.startAnim({duration:3e3,easing:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},action:function(e,n){t.changeTrianglePosition(100*e,n,-Math.PI/2)},finishFunc:function(){t.isStopAnim?t.flowAnim.stop(!0):t.triangleAnimation()}})},changeTrianglePosition:function(t,e,n){for(var i=this.flowEdgeList,r=(this.triangleNodeNum,0);r<i.length;r++)for(var o=i[r],a=o.path,s=0;s<o.triangleList.length;s++){var c=o.triangleList[s];if(s>t)c.setPosition(this.graphView.getPercentPosition(a,0)),c.setRotationY(this.graphView.getPercentAngle(a,0)),c.s("opacity",0);else{var l=(100-8*s)/100*t+8*s;if(0<l&&l<99){var u=this.graphView.getPercentPosition(a,l),d=this.graphView.getPercentAngle(a,l);c.setRotationY(3*Math.PI/2-d-n),u&&c.setPosition(u),c.s("opacity",1)}else c.setPosition(this.graphView.getPercentPosition(a,0)),c.setRotationY(this.graphView.getPercentAngle(a,0)),c.s("opacity",0)}}},removeFlowEdge:function(){var t=this;this.graphView.disableDashFlow(),this.isStopAnim=!0,this.flowEdgeList&&this.flowEdgeList.map((function(e){var n=t.dataModel.getDataByTag(e.tag);n.s("2d.visible",!1),t.dataModel.remove(n),e.triangleList.map((function(e){e.s("2d.visible",!1),t.dataModel.remove(e)}))})),this.flowEdgeList=[]},hideFlowEdge:function(){this.graphView.disableDashFlow(),this.flowAnim&&this.flowAnim.pause(),this.flowBlock.s("2d.visible",!1)},showFlowEdge:function(){this.graphView.enableDashFlow(),this.flowAnim&&this.flowAnim.resume(),this.flowBlock.s("2d.visible",!0)},unsubscribeData:function(t){var e={type:2,unsubscribe:[{command:"N06",param:{}}]};t&&(e.unsubscribe.param={stationId:t}),this.$emit("unsubscribe",e)}}},O=P,A=Object(x["a"])(O,S,T,!1,null,null,null),k=A.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},z=[],N=(n("086d"),n("513c"),n("bb21"),n("1fb3"),n("faa3")),V={name:"metroAnimation",props:{activeCarNode:{type:Object},dataModel:{type:Object},wsData:{type:Object},noAccessLineList:{type:Array},clickEvent:{type:Object},zoomIn:{type:Number},zoomIncrement:{type:Number},isShowDoubbleLine:{type:Boolean}},data:function(){return{metro1:null,metro2:null,metro11:null,metro22:null,stationLabel:null,animationObj:null,metroOptions:N.trainData,trainDataArr:N.trainDataArr,allCarData:{},allStationMetroNum:{},mockTimer:null}},watch:{wsData:function(t){"N110"==t.command&&(this.setStationMetroNum1(t.data.stationData),this.createLineData1(t.data.trainData))},zoomIn:function(t,e){if(this.isShowDoubbleLine){this.dataModel.each((function(t){var e=t.getTag();e&&e.startsWith("N:")&&t.s("2d.visible",!0)}));for(var n=0,i=Object.entries(this.allCarData);n<i.length;n++){var r=u(i[n],2),o=(r[0],r[1]),a=1==o.direction?this.metro11:this.metro22;o.carNode.setImage(a)}}else{this.changeStationName(!0);for(var s=0,c=Object.entries(this.allCarData);s<c.length;s++){var l=u(c[s],2),d=(l[0],l[1]),h=1==d.direction?this.metro1:this.metro2;d.carNode.setImage(h)}}},activeCarNode:function(t){t&&(this.metroSelected(t),this.$wpf.emit({command:"C02",param:{type:"metro",data:{metroId:t.a("metroNo"),lineId:t.a("lineId")}}}))},"clickEvent.clickGraphViewBg":function(t){if(t&&this.activeCarNode){for(var e=0,n=Object.entries(this.allCarData);e<n.length;e++){var i=u(n[e],2),r=(i[0],i[1]);r.carNode.s("opacity",1),r.carNode.a("showBorder",!1),r.carNode.setScale(1,1)}this.$wpf.emit({command:"C02",param:{type:"metro",data:{metroId:null,lineId:null}}})}}},mounted:function(){this.initCarAnination(),this.findData(),this.setVelocity()},destroyed:function(){this.removeData()},methods:{findData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={command:"N11",param:{lineId:0}},t.$emit("findData",n);case 2:case"end":return e.stop()}}),e)})))()},removeData:function(){window.cancelAnimationFrame(this.animationObj),clearInterval(this.mockTimer);for(var t=0,e=Object.entries(this.allStationMetroNum);t<e.length;t++){var n=u(e[t],2),i=n[0],r=n[1];i&&this.dataModel.remove(r.node)}for(var o=0,a=Object.entries(this.allCarData);o<a.length;o++){var s=u(a[o],2),c=s[0],l=s[1];c&&this.dataModel.remove(l.carNode)}this.changeStationName(!1);var d={type:2,unsubscribe:[{command:"N01",param:{lineId:0}}]};this.$emit("unsubscribe",d)},setVelocity:function(){this.getAxios("/v1/setVelocity",{velocity:.1})},initCarAnination:function(){this.metro1=this.dataModel.getDataByTag("metro1").getImage(),this.metro2=this.dataModel.getDataByTag("metro2").getImage(),this.metro11=this.dataModel.getDataByTag("metro11").getImage(),this.metro22=this.dataModel.getDataByTag("metro22").getImage(),this.stationLabel=this.dataModel.getDataByTag("station-label").getImage(),this.changeStationName(!0),this.setStationMetroNum(),this.createLineData(this.metroOptions),this.animationObj=window.requestAnimationFrame(this.taskFunc)},changeStationName:function(t){var e=this;this.dataModel.each((function(n){var i=n.getDisplayName(),r=n.getTag(),o=i&&i.indexOf("&")<0&&r&&r.startsWith("N:");t?(o&&(e.isShowDoubbleLine?n.s("2d.visible",!0):n.s("2d.visible",!1)),n.a("isStaionName")&&(n.s("2d.visible",!0),n.s("opacity",1))):(r&&r.startsWith("N:")&&n.s("2d.visible",!0),n.a("isStaionName")&&(e.isShowDoubbleLine?n.s("opacity",1):n.s("opacity",.3)))}))},setStationMetroNum1:function(t){var e=this,n=0===this.zoomIn?1:1/Math.pow(this.zoomIncrement,this.zoomIn);t&&t.forEach((function(t){var i=t.sortId.split("-")[0];if(!i||!e.noAccessLineList.includes(i)){var r=e.dataModel.getDataByTag("S:"+t.sortId);if(r){var o="S:"+t.sortId+"-label";if(e.allStationMetroNum[o]){var a=e.allStationMetroNum[o].node,s=Math.floor(5*Math.random()+1);a.s("2d.visible",s>0),a.a("stationLabel",s>=4?"4+":s)}else{var c=r.getPosition(),l=new ht.Node;l.setTag(o),l.setImage(e.stationLabel),l.setSize(16.5,16.5),l.s("2d.visible",t.inNum>0),l.s("2d.movable",!1),l.a("stationLabel",t.inNum>=4?"4+":t.inNum),l.setPosition(c.x,c.y),l.setScale({x:n,y:n}),l.setLayer(1),e.dataModel.add(l),e.allStationMetroNum[o]={node:l}}}}}))},startStationMetroMock:function(){var t=this;clearInterval(this.mockTimer),this.mockTimer=setInterval((function(){t.mockStationMetroNum()}),1e3)},mockStationMetroNum:function(){var t=this,e=N.stationData.map((function(t){return t.inNum=Math.floor(5*Math.random()+1),t}));e.forEach((function(e){var n="S:"+e.sortId+"-label",i=t.dataModel.getDataByTag(n);i&&i.a("stationLabel",e.inNum>=4?"4+":e.inNum)}))},setStationMetroNum:function(){var t=this,e=0===this.zoomIn?1:1/Math.pow(this.zoomIncrement,this.zoomIn);N.stationData.forEach((function(n){var i=n.sortId.split("-")[0];if(!i||!t.noAccessLineList.includes(i)){var r=t.dataModel.getDataByTag("S:"+n.sortId);if(r){var o=r.getPosition(),a=new ht.Node,s="S:"+n.sortId+"-label";a.setTag(s),a.setImage(t.stationLabel),a.setSize(16.5,16.5),a.s("2d.visible",!0),a.s("2d.movable",!1),a.a("stationLabel",n.inNum>=4?"4+":n.inNum),a.setPosition(o.x,o.y),a.setScale({x:e,y:e}),t.dataModel.add(a),t.allStationMetroNum[s]={node:a}}}})),this.startStationMetroMock()},createLineData1:function(t){var e=this;t&&t.forEach((function(t,n){var i="line"+t.lineNo,r="car"+t.id+"_"+i;if(e.allCarData[r])e.allCarData[r].percent=t.location;else{var o=e.createCarNode1(t,r,i);e.allCarData[r]={percent:t.location,carNode:o,reverse:t.reverse,direction:t.direction,lineId:t.lineNo,speed:t.speed}}e.setMetroPosition(e.allCarData[r],r)}))},createLineData:function(t){for(var e=this,n=function(){var t=u(r[i],2),n=t[0],o=t[1];o.carsOptions.forEach((function(t,i){var r="car"+i+"_"+n,o=e.createCarNode(i,t,r,t.reverse,n),a=0;"number"==typeof t.percent&&t.percent>0&&t.percent<=100&&(a=t.percent),e.allCarData[r]={percent:a,carNode:o,reverse:t.reverse,isStop:t.isStop}}))},i=0,r=Object.entries(t);i<r.length;i++)n()},createCarNode1:function(t,e,n){var i=new ht.Node;return 1==t.direction?(i.setImage(this.metro1),i.setAnchorY(-.3)):(i.setImage(this.metro2),i.setAnchorY(1.3)),i.setPosition(0,0),i.setSize(24,8),i.s("interactive",!0),i.s("2d.visible",!0),i.a({metroNo:t.code,carType:t.type,lineId:n.substring(4)}),i.setTag(e),this.dataModel.add(i),i},createCarNode:function(t,e,n,i,r){var o=new ht.Node;return i?(o.setImage(this.metro1),o.setAnchorY(-.3)):(o.setImage(this.metro2),o.setAnchorY(1.3)),o.setPosition(0,0),o.setSize(24,8),o.s("interactive",!0),o.s("2d.visible",!0),o.a({metroNo:e.code,carType:e.type,lineId:r.substring(4)}),o.setTag(n),this.dataModel.add(o),o},metroSelected:function(t){for(var e=t.getTag(),n=0,i=Object.entries(this.allCarData);n<i.length;n++){var r=u(i[n],2),o=r[0],a=r[1];o==e?(a.carNode.s("opacity",1),a.carNode.a("showBorder",!0),a.carNode.setScale(1.5,1.5)):(a.carNode.s("opacity",.6),a.carNode.a("showBorder",!1),a.carNode.setScale(1,1))}},setMetroPosition:function(t,e){if("car2101_line21"==e&&console.log(e,t.percent),this.noAccessLineList.includes(t.lineId))t.carNode.s("2d.visible",!1);else{var n=t.percent,i=-Math.PI/2,r=this.dataModel.getDataByTag("line"+t.lineId),o=0,a=0;2==t.direction?(o=ht.Default.getPercentPositionOnPoints(r.getPoints(),r.getSegments(),100-n),a=ht.Default.getPercentAngle(r.getPoints(),r.getSegments(),100-n),t.carNode.setRotationY(3*Math.PI/2-a-i)):(o=ht.Default.getPercentPositionOnPoints(r.getPoints(),r.getSegments(),n),a=ht.Default.getPercentAngle(r.getPoints(),r.getSegments(),n),t.carNode.setRotationY(3*Math.PI/2-a-i)),t.carNode.setPosition(o.x,o.y);var s=this.metro1;this.isShowDoubbleLine?(s=1==t.direction?this.metro11:this.metro22,t.carNode.setImage(s)):(s=1==t.direction?this.metro1:this.metro2,t.carNode.setImage(s))}},taskFunc:function(t){for(var e=this,n=function(){var t=u(r[i],2),n=t[0],o=t[1];if(0==o.carsOptions.length)return"continue";o.carsOptions.forEach((function(t,i){var r=e.allCarData["car"+i+"_"+n];if(r)if(e.noAccessLineList.includes(n.substring(4)))r.carNode.s("2d.visible",!1);else{var o=r.percent,a=-Math.PI/2,s=e.dataModel.getDataByTag(n),c=0,l=0;r.reverse?(c=ht.Default.getPercentPositionOnPoints(s.getPoints(),s.getSegments(),o),l=ht.Default.getPercentAngle(s.getPoints(),s.getSegments(),o),r.percent=r.percent>100?0:r.percent+t.speed,r.carNode.setRotationY(3*Math.PI/2-l-a)):(c=ht.Default.getPercentPositionOnPoints(s.getPoints(),s.getSegments(),100-o),l=ht.Default.getPercentAngle(s.getPoints(),s.getSegments(),100-o),r.percent=r.percent>100?0:r.percent+t.speed,r.carNode.setRotationY(3*Math.PI/2-l-a)),r.carNode.setPosition(c.x,c.y);var u=e.metro1;e.isShowDoubbleLine?(u=r.reverse?e.metro11:e.metro22,r.carNode.setImage(u)):(u=r.reverse?e.metro1:e.metro2,r.carNode.setImage(u))}}))},i=0,r=Object.entries(this.metroOptions);i<r.length;i++)n();this.animationObj=window.requestAnimationFrame(this.taskFunc)}}},L=V,B=Object(x["a"])(L,R,z,!1,null,null,null),G=B.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},j=[],H={向西主变:{x:1340,y:100},香雪主变:{x:1560,y:400},象岭主变:{x:1600,y:160}},U={name:"powerMonitor",props:{activeStationNode:{type:Object},dataModel:{type:Object},graphView:{type:Object},clickEvent:{type:Object}},data:function(){return{substationBlock:null,stationPowerSupplyBlock:null}},mounted:function(){this.stationPowerSupplyBlock=new ht.Block,this.substationBlock=new ht.Block,this.dataModel.add(this.substationBlock),this.getSubstationList()},destroyed:function(){this.graphView.disableDashFlow(),this.removeSubstation(),this.removeStationPowerSupply()},watch:{activeStationNode:function(t){if(t&&this.clickEvent.clickStation){var e=t.s("stationId"),n=t.getTag().split("S:")[1];this.createStationPowerSupply(e,n)}}},methods:{getSubstationList:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAxios("v1/substation/supply");case 2:n=e.sent,n.map((function(e){t.createSubstation(e)}));case 4:case"end":return e.stop()}}),e)})))()},createSubstation:function(t){var e=this,n=t.stationList;if(0!==n.length){var i="symbols/substation.json",r=new ht.Node;r.setImage(i),r.a("name",t.name),this.dataModel.add(r),this.substationBlock.addChild(r),r.setAnimation({opacityDec:{property:"opacity",accessType:"style",from:1,to:.5,next:"opacityAdd"},opacityAdd:{property:"opacity",accessType:"style",from:.5,to:1,next:"opacityDec"},start:["opacityDec"]});var o=H[t.name];r.setPosition(o),n.map((function(t){var n=e.dataModel.getDataByTag("S:".concat(t.sortId)),i=new ht.Edge(r,n);i.s({"edge.type":"boundary","edge.dash":!0,"edge.width":3,"edge.color":"rgba(0, 0, 0, 0)","edge.cap":"round","edge.dash.pattern":[16,10],"edge.dash.color":"#B9DAF0","edge.dash.flow":!0,shadow:!0,"shadow.blur":10,"shadow.color":"#B9DAF0"}),e.dataModel.add(i),e.substationBlock.addChild(i),e.graphView.enableDashFlow()}))}},createStationPowerSupply:function(t,e){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){var r,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.removeStationPowerSupply(),i.next=3,n.getAxios("v1/substation/nearbysites",{stationId:t});case 3:r=i.sent,console.log(r),o=n.dataModel.getDataByTag("S:".concat(e)),a=o.getPosition(),r.map((function(t){var i=n.dataModel.getDataByTag("S:".concat(t.sortId)),r=i.getPosition(),o=n.dataModel.getDataByTag("merge:".concat(t.sortId,",").concat(e))||n.dataModel.getDataByTag("merge:".concat(e,",").concat(t.sortId)),a=o.getPoints(),s=o.getSegments(),c=new ht.Shape;if(c.setPoints(a),c.setSegments(s),"异常"===t.situation){c.s({"shape.dash":!0,"shape.border.width":2,"shape.border.color":"rgba(0, 0, 0, 0)","shape.border.cap":"round","shape.border.pattern":[16,10],"shape.background":null,"shape.dash.color":"#f43850"}),n.createTroubleIcon(r);var l=n.graphView.getPercentPosition(o,50),u=n.graphView.getPercentAngle(o,50);n.createXIcon(l,u)}else c.s({"shape.dash":!0,"shape.border.width":2,"shape.border.color":"rgba(0, 0, 0, 0)","shape.border.cap":"round","shape.border.pattern":[16,10],"shape.background":null,"shape.dash.color":"#B9DAF0","shape.dash.flow":!0,shadow:!0,"shadow.blur":10,"shadow.color":"#B9DAF0"}),n.createCircleNode(r);n.dataModel.add(c),n.stationPowerSupplyBlock.addChild(c)})),n.createCircleNode(a),n.dataModel.add(n.stationPowerSupplyBlock);case 10:case"end":return i.stop()}}),i)})))()},createCircleNode:function(t){var e=new ht.Node;e.setPosition(t),e.setSize(14,14),e.s({shape:"circle","shape.background":"#14B0F2"}),this.dataModel.add(e),this.stationPowerSupplyBlock.addChild(e),console.log("stationPowerSupplyBlock",this.stationPowerSupplyBlock)},createTroubleIcon:function(t){var e=new ht.Node;e.setImage("symbols/icon-trouble.json"),e.setPosition(t),this.dataModel.add(e),this.stationPowerSupplyBlock.addChild(e)},createXIcon:function(t,e){var n=new ht.Node;n.setImage("symbols/icon-x.json"),n.setPosition(t),n.setRotationY(2*Math.PI-e),this.dataModel.add(n),this.stationPowerSupplyBlock.addChild(n),n.setAnimation({opacityDec:{duration:300,property:"opacity",accessType:"style",from:1,to:0,next:"opacityAdd"},opacityAdd:{duration:300,property:"opacity",accessType:"style",from:0,to:1,next:"opacityDec"},start:["opacityDec"]})},removeSubstation:function(){var t=this;this.substationBlock.eachChild((function(e){t.dataModel.remove(e)})),this.dataModel.remove(this.substationBlock)},removeStationPowerSupply:function(){var t=this;this.stationPowerSupplyBlock.eachChild((function(e){t.dataModel.remove(e)})),this.dataModel.remove(this.stationPowerSupplyBlock)}}},Z=U,W=Object(x["a"])(Z,F,j,!1,null,null,null),q=W.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"stationPop",staticStyle:{width:"493px",color:"#fff",border:"1px solid #277eec","font-size":"14px",background:"rgba(8, 14, 50, 0.8)"},attrs:{width:"493"}},[i("section",{staticClass:"pop-header",staticStyle:{width:"100%",height:"36px","line-height":"36px",display:"flex","justify-content":"space-around","text-align":"center",background:"#277eec"}},[i("span",{staticStyle:{"flex-basis":"15%"}}),i("span",{staticStyle:{"flex-basis":"70%"}},[t._v(t._s(t.stationData.stationName))]),i("span",{staticStyle:{"flex-basis":"15%"},on:{click:t.goStationDetail}},[t._v("详情 >")])]),i("section",{staticStyle:{width:"100%",padding:"0 10px","box-sizing":"border-box"}},[t.stationData.eventsData?i("div",[i("p",{staticClass:"item-header",staticStyle:{margin:"10px 0 10px"}},[t._v("事件显示")]),t._l(t.stationData.eventsData,(function(e,r){return i("div",{key:r,staticClass:"event",class:"event-"+r,staticStyle:{position:"relative",display:"flex","align-items":"center",height:"60px","margin-top":"10px","font-size":"12px"},style:"color: "+t.alarmColors[r]},[i("div",{staticStyle:{"flex-basis":"20%","text-align":"center"}},[i("img",{attrs:{src:n("f80d"),width:"24",height:"24"}}),i("p",[t._v(t._s(e.eventType))])]),i("div",{staticStyle:{"flex-basis":"20%"}},[t._v(t._s(e.handler))]),i("div",{staticStyle:{"flex-basis":"60%"}},[t._v(t._s(e.note))]),i("div",{staticClass:"duration",staticStyle:{position:"absolute",top:"5px",right:"10px",color:"#fff"}},[t._v(" "+t._s(e.duration)+" ")])])}))],2):t._e(),i("div",[i("p",{staticClass:"item-header",staticStyle:{margin:"10px 0 15px"}},[t._v("客流概况")]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{"flex-basis":"25%"}},[i("p",[t._v("当日累计客流")]),i("p",{staticStyle:{"margin-top":"10px",color:"#2989ff"}},[t._v(" "+t._s(t.stationData.flowView&&t.stationData.flowView.today)+" ")])]),i("div",{staticStyle:{"flex-basis":"25%"}},[i("p",[t._v("近五分钟进站客流")]),i("p",{staticStyle:{"margin-top":"10px",color:"#2989ff"}},[t._v(" "+t._s(t.stationData.flowView&&t.stationData.flowView.recentIn)+" ")])]),i("div",{staticStyle:{"flex-basis":"25%"}},[i("p",[t._v("累计进站客流")]),i("p",{staticStyle:{"margin-top":"10px",color:"#2989ff"}},[t._v(" "+t._s(t.stationData.flowView&&t.stationData.flowView.totalIn)+" ")])]),i("div",{staticStyle:{"flex-basis":"25%"}},[i("p",[t._v("累计出站客流")]),i("p",{staticStyle:{"margin-top":"10px",color:"#2989ff"}},[t._v(" "+t._s(t.stationData.flowView&&t.stationData.flowView.totalOut)+" ")])])])]),i("div",[i("p",{staticClass:"item-header",staticStyle:{margin:"20px 0"}},[t._v("能耗统计")]),i("div",{staticStyle:{"text-align":"center",color:"#2989ff","margin-bottom":"10px"}},[t._v(" "+t._s(t.stationData.energyData&&t.stationData.energyData.percent)+"% ")]),i("div",{staticStyle:{width:"100%",height:"12px",border:"1px solid #277eec","border-radius":"6px"}},[i("div",{staticStyle:{width:"99%",height:"8px",margin:"2px 0.5%"}},[i("div",{staticStyle:{height:"100%",background:"#277eec","border-radius":"4px"},style:"width:"+(t.stationData.energyData&&t.stationData.energyData.percent)+"%"})])]),i("div",{staticStyle:{display:"flex",color:"#b3b3b3",margin:"10px 0 20px"}},[i("div",[t._v(" 今日能耗： "),i("span",{staticStyle:{color:"#2989ff"}},[t._v(" "+t._s(t.stationData.energyData&&t.stationData.energyData.today)+"kw·h ")])]),i("div",{staticStyle:{"margin-left":"40px"}},[t._v(" 日均能耗： "),i("span",{staticStyle:{color:"#2989ff"}},[t._v(" "+t._s(t.stationData.energyData&&t.stationData.energyData.average)+"kw·h ")])])])])])])},Y=[],$=n("03a1");function Q(){return $.mock({"eventsData|0-3":[{eventType:"火灾事件",handler:"值班班长",note:"啊设计的那点撒",duration:"12:00:00"}],"flowView|4":{"today|0-10000":12e3,"recentIn|0-1000":12,"totalIn|0-10000":13131,"totalOut|0-10000":123131},"energyData|4":{"today|0-10000":12312,"average|0-10000":123,"percent|0-100":10}})}console.log(Q());var J=Q,K={name:"popup",props:{dataModel:{type:Object},graphView:{type:Object},zoomIn:{type:Number},zoomIncrement:{type:Number},gvZoom:{type:Number}},data:function(){return{alarmColors:["#ff5a5a","#ffb243","#3f94fd"],stationData:{}}},methods:{showStationOverview:function(t,e){var n=this;this.stationData=J(),this.stationData.stationName="".concat(e.s("lineName"),"-").concat(e.s("stationName")),this.stationData.stationId=e.s("stationId"),this.hideStationOverview(),this.$nextTick((function(){var i=n.$el,r=new ht.HtmlNode;r.setHtml(i),r.setTag("stationPop"),r.s("interactive",!0),r.setPadding(0),n.dataModel.add(r),n.adjustStationOverview(t,e),n.$emit("showLocationIcon",e)}))},adjustStationOverview:function(t,e){var n=this.dataModel.getDataByTag("stationPop");if(n){var i,r=n.getWidth(),o=n.getHeight();this.zoomIn>=0?(i=1/Math.pow(this.zoomIncrement,this.zoomIn),i<.1&&(i=.1)):i=this.gvZoom;var a=r*i,s=o*i;n.setWidth(a),n.setHeight(s);var c=a*this.gvZoom,l=s*this.gvZoom,u=this.graphView.getWidth(),d=this.graphView.getHeight(),h=e.getPosition(),f=t.pageX,g=t.pageY,p=h.x+a/2+10,v=h.y+s/4;f+c>=u&&(p=h.x-a/2-10),g-l/2<0&&(v=h.y+s/2),g+l/2>=d&&(v=h.y-s/2),g+l/2<d&&g+l/4*3>=d&&(v=h.y),n.setPosition({x:p,y:v})}},hideStationOverview:function(){var t=this.dataModel.getDataByTag("stationPop");t&&this.dataModel.remove(t);var e=this.dataModel.getDataByTag("locationIcon");e&&this.dataModel.remove(e)},goStationDetail:function(){console.log("去车站详情"),this.hideStationOverview(),this.$wpf.emit({command:"C02",param:{type:"stationDetail",data:{stationId:this.stationData.stationId}}})}}},tt=K,et=(n("f28e"),Object(x["a"])(tt,X,Y,!1,null,null,null)),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},rt=[],ot=(n("5e9f"),{name:"videoMonitor",props:{activeStationNode:{type:Object},activeSectionSon:{type:Object},dataModel:{type:Object},clickEvent:{type:Object},zoomIn:{type:Number},zoomIncrement:{type:Number},isShowDoubbleLine:{type:Boolean}},data:function(){return{activeSectionSonTag:null}},watch:{activeStationNode:function(t,e){t&&this.clickEvent.clickStation&&(this.showVideoSign(t),this.$wpf.emit({command:"C02",param:{type:"stationVideoMonitor",data:{stationId:t.s("stationId")}}}))},zoomIn:function(t,e){if(this.activeStationNode){var n=0===this.zoomIn?1:1/Math.pow(this.zoomIncrement,this.zoomIn),i=this.dataModel.getDataByTag("videoSign-circle");i.setScale({x:n,y:n})}},"clickEvent.clickGraphViewBg":function(t){t&&this.$wpf.emit({command:"C02",param:{type:"stationVideoMonitor",data:{stationId:null}}})}},mounted:function(){this.creatVideoSign()},destroyed:function(){this.removeData()},methods:{selectSectionLine:function(t,e){this.dataModel.each((function(t){t.s("opacity",.3)})),this.setOpacity([e,"videoSign","videoSign-circle"])},setOpacity:function(t){var e=this;t.forEach((function(t){var n=e.dataModel.getDataByTag(t);n&&n.s("opacity",1)}))},showMergeLine:function(){var t=this;this.dataModel.each((function(e){var n=e.getDisplayName();if(n&&e instanceof ht.Block&&n.indexOf("merge")>=0){var i=e.getTag(),r=t.dataModel.getDataByTag("line"+i).getStyle("shape.border.color");e.s("2d.visible",!0),e.getChildren()._as.forEach((function(t){t.s("shape.border.color",r)}))}}))},removeData:function(){this.dataModel.getDataByTag("videoSign").s("2d.visible",!1),this.dataModel.remove(this.dataModel.getDataByTag("videoSign-circle")),this.$emit("initLineNetStyle")},creatVideoSign:function(){var t=this.dataModel.getDataByTag("videoSign");t.s("2d.visible",!1),t.setSize(18,25),t.setAnchorY(1),t.setLayer(1);var e=new ht.Node;e.setStyle("shape","circle"),e.setTag("videoSign-circle"),e.setSize(12,12),e.s("2d.visible",!1),e.setStyle("shape.background","#8F0D44"),e.setStyle("shape.border.width",1),e.setStyle("shape.border.color","#8F0D44"),this.dataModel.add(e)},showVideoSign:function(t){var e=0===this.zoomIn?1:1/Math.pow(this.zoomIncrement,this.zoomIn),n=t.getTag(),i=n&&n.replace(/S/g,"N");this.dataModel.each((function(t){t.s("opacity",.3)})),this.dataModel.getDataByTag(i).s("opacity",1);var r=this.dataModel.getDataByTag("videoSign");r.s("2d.visible",!0),r.s("opacity",1);var o=t.getPosition();r.setPosition(o.x,o.y);var a=this.dataModel.getDataByTag("videoSign-circle");a.s("2d.visible",!0),a.s("opacity",1),a.setPosition(o.x,o.y),a.setScale({x:e,y:e})}}}),at=ot,st=Object(x["a"])(at,it,rt,!1,null,null,null),ct=st.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},ut=[],dt=(n("33a2"),["red","yellow","green"]),ft="rgb(255,0,0)",gt=[{width:12,height:12,endWidth:14,endHeight:14},{width:16,height:16,endWidth:20,endHeight:20}],pt={name:"passengerFlowMonitoring",props:{activeSection:{type:Object},dataModel:{type:Object},graphView:{type:Object},clickEvent:{type:Object},zoomIn:{type:Number},zoomIncrement:{type:Number},wsData:{type:Object}},data:function(){return{isClick:!1,zoomInTarget:3,passengerFlowBlock:null}},mounted:function(){this.passengerFlowBlock=new ht.Block,this.dataModel.add(this.passengerFlowBlock),this.dataModel.enableAnimation();var t=this.zoomIn,e=this.zoomInTarget;t>=e?(this.hideMergeLine(),this.isClick=!0):(this.showMergeLine(),this.isClick=!0),this.dataModel.each((function(t){var e=t.getTag();e&&e.includes("up")&&t.a("linestyle",t.getStyle("shape.border.color")),e&&e.includes("down")&&t.a("linestyle",t.getStyle("shape.border.color"))})),this.findData()},destroyed:function(){this.close(),this.closeWS()},watch:{wsData:function(t){if("N05"==t.command){this.passengerFlowBlock.isEmpty()||(this.dataModel.remove(this.passengerFlowBlock),this.dataModel.add(this.passengerFlowBlock));var e=t.data.sectionData,n=t.data.stationData;this.createLineCrowding(e),this.createStationCrowding(n)}},activeSection:function(t){t&&this.clickline(this.activeSection)},"clickEvent.clickSection":function(t){t&&this.clickline(this.activeSection)},"clickEvent.clickGraphViewBg":function(t){t&&this.hideLineClick()},zoomIn:function(t,e){if(this.isClick){var n=5,i=this.zoomIn,r=this.zoomInTarget,o=this.zoomIncrement;if(i>=0&&i<=r){var a=0===i?1:1/i/o,s=0===i?1:1/Math.pow(o,i);this.dataModel.each((function(t){var e=t.getTag();t.getDisplayName();e&&e.includes("merge")?t.s("shape.border.width",n/Math.pow(o,i)):e&&e.includes("crowdingStation-")&&(t.setScale({x:s,y:s}),t.s("scale",a))}))}i>=r?this.hideMergeLine():this.showMergeLine()}else this.dataModel.each((function(t){var e=t.getTag();e&&e.includes("up")&&t.setStyle("shape.border.color",t.a("linestyle")),e&&e.includes("down")&&t.setStyle("shape.border.color",t.a("linestyle"))}))}},methods:{close:function(){this.$emit("initLineNetStyle"),this.dataModel.each((function(t){var e=t.getTag();e&&e.includes("up")&&(t.a("noData")?t.s("2d.selectable",!1):t.setStyle("shape.border.color",t.a("linestyle"))),e&&e.includes("down")&&(t.a("noData")?t.s("2d.selectable",!1):t.setStyle("shape.border.color",t.a("linestyle")))})),this.hideMergeLine(),this.hideStationCrowding(),this.isClick=!1},closeWS:function(){var t={type:2,unsubscribe:[{command:"N05",param:{lineId:0}}]};this.$emit("unsubscribe",t)},findData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={command:"N05",param:{lineId:0}},t.$emit("findData",n);case 2:case"end":return e.stop()}}),e)})))()},createLineCrowding:function(t){for(var e=this,n=function(n){e.dataModel.each((function(e){var i=e.getTag();if(i&&(i.includes("down")||i.includes("up")||i.includes("merge")))if(e.a("noData"))e.s("2d.selectable",!1);else if(i.split(":")[1].includes(t[n].sortId1+","+t[n].sortId2)||i.split(":")[1].includes(t[n].sortId2+","+t[n].sortId1))for(var r=t[n].sectionCongestion,o=0;o<r.length-1;o++)if(2===r[o].direction){var a=parseInt(r[o].congestion)-1;e.setStyle("shape.border.color",dt[a]),e.s("opacity","1")}else if(1===r[o].direction){var s=parseInt(r[o].congestion)-1;e.setStyle("shape.border.color",dt[s]),e.s("opacity","1")}else{var c=parseInt(r[o].congestion)-1;e.setStyle("shape.border.color",dt[c]),e.s("opacity","1")}}))},i=0;i<t.length;i++)n(i)},showMergeLine:function(){this.dataModel.each((function(t){var e=t.getDisplayName();e&&t instanceof ht.Block&&e.indexOf("merge")>=0&&t.s("2d.visible",!0)}))},hideMergeLine:function(){this.dataModel.each((function(t){var e=t.getDisplayName();e&&t instanceof ht.Block&&e.indexOf("merge")>=0&&t.s("2d.visible",!1)}))},hideStationCrowding:function(){this.passengerFlowBlock&&this.dataModel.remove(this.passengerFlowBlock)},createStationCrowding:function(t){var e=this;this.dataModel.each((function(t){var n=t.getTag(),i=t.getDisplayName();if(n&&n.includes("S:")&&!t.a("noData")){var r=new ht.Node;r.setImage("symbols/basic/fromArrow2.json"),r.setDisplayName("crowdingStation-"+i),r.setWidth(13),r.setHeight(13);var o=t.getPosition().x,a=t.getPosition().y;r.setPosition({x:o,y:a}),e.dataModel.add(r),e.passengerFlowBlock.addChild(r),r.s("2d.movable",!1),r.a("bgcolor","green")}})),this.dataModel.each((function(n){var i=n.getTag(),r=n.getDisplayName();if(i&&i.includes("S:")&&!n.a("noData"))for(var o=0;o<t.length;o++)if(i.split(":")[1]==t[o].sortId)if(2===parseInt(t[o].congestion)){var a=new ht.Node;a.setImage("symbols/basic/fromArrow2.json"),a.setDisplayName("crowdingStation-"+r),a.s("2d.movable",!1),a.setWidth(14),a.setHeight(14);var s=n.getPosition().x,c=n.getPosition().y;a.setPosition({x:s,y:c}),e.dataModel.add(a),e.passengerFlowBlock.addChild(a),a.a("bgcolor","yellow")}else 1===parseInt(t[o].congestion)&&gt.map((function(t,i){var o=new ht.Node;o.setStyle("shape","circle"),o.setPosition(n.getPosition()),o.setWidth(t.width),o.setHeight(t.height),0===i?(o.setStyle("shape.background",ft),o.s("opacity",1)):(o.setStyle("shape.background",null),o.setStyle("shape.border.width",2),o.setStyle("shape.border.color",ft)),e.dataModel.add(o),o.setDisplayName("crowdingStation-".concat(r,"-").concat(i));var a=1500,s="Quad.easeOut",c={opacityAn:{property:"opacity",accessType:"style",from:1,to:0,repeat:!0,duration:a,easing:s},widthAn:{property:"width",from:t.width,to:t.endWidth,repeat:!0,duration:a,easing:s},heightAn:{property:"height",from:t.height,to:t.endHeight,repeat:!0,duration:a,easing:s}};c.start=0==i?["widthAn","heightAn"]:["opacityAn","widthAn","heightAn"],o.setAnimation(c),e.passengerFlowBlock.addChild(o)}))}))},clickline:function(t){if(this.isClick){var e,n=t.getDisplayName(),i=t.getTag();n&&n.includes("merge")&&(this.dataModel.each((function(t){var n=t.getDisplayName(),r=n&&n.indexOf("&")>0&&n.split("&").includes(i);n&&n.includes("crowdingStation-")&&(e=n.split("-")[1]===i||n.split("-")[1]&&n.split("-")[1].indexOf("&")>0&&n.split("-")[1].split("&").includes(i)),n===i||r||e?t.s("opacity",1):t.s("opacity",.2)})),t.eachChild((function(t){t.s("opacity",1)})),this.$wpf.emit({command:"C02",param:{type:"line",data:{lineId:i}}})),n&&n.includes("up")&&(this.dataModel.each((function(t){var n=t.getDisplayName(),r=t.getTag(),o=n&&n.indexOf("&")>0&&n.split("&").includes(i);n&&n.includes("crowdingStation-")&&(e=n.split("-")[1]===i||n.split("-")[1]&&n.split("-")[1].indexOf("&")>0&&n.split("-")[1].split("&").includes(i)),r&&!r.includes("line")&&n===i||o||e?t.s("opacity",1):t.s("opacity",.2)})),t.eachChild((function(t){t.s("opacity",1)})),this.dataModel.each((function(t){var e=t.getDisplayName();e&&e.split("-")[0]===n.split("-")[0]&&"down"===e.split("-")[1]&&t.eachChild((function(t){t.s("opacity",1)}))}))),n&&n.includes("down")&&(this.dataModel.each((function(t){var r=t.getDisplayName(),o=t.getTag(),a=r&&r.indexOf("&")>0&&r.split("&").includes(i);r&&r.includes("crowdingStation-")&&(e=r.split("-")[1]===i||r.split("-")[1]&&r.split("-")[1].indexOf("&")>0&&r.split("-")[1].split("&").includes(i)),o&&!o.includes("line")&&r===i||a||e?t.s("opacity",1):t.s("opacity",.2),r&&r.split("-")[0]===n.split("-")[0]&&"up"===r.split("-")[1]&&t.eachChild((function(t){t.s("opacity",1)}))})),t.eachChild((function(t){t.s("opacity",1)})),this.dataModel.each((function(t){var e=t.getDisplayName();e&&e.split("-")[0]===n.split("-")[0]&&"up"===e.split("-")[1]&&t.eachChild((function(t){t.s("opacity",1)}))})))}},hideLineClick:function(){this.isClick&&(this.$emit("initLineNetStyle"),this.$wpf.emit({command:"C02",param:{type:"line",data:{lineId:null}}}))}}},vt=pt,yt=Object(x["a"])(vt,lt,ut,!1,null,null,null),_t=yt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},bt=[],xt=n("391c"),wt=n.n(xt),It={name:"alarmEvent",props:{dataModel:{type:Object},graphView:{type:Object},zoomIn:{type:Number},wsData:{type:Object},dataModelLoaded:{type:Boolean}},data:function(){return{command:"N43",resData:null,blockList:[],iconsBlock:null}},created:function(){this.getAlarmData()},destroyed:function(){this.$emit("unsubscribeData",{command:this.command})},watch:{wsData:{handler:function(t){t.command===this.command&&(this.resData=t.data),t.command===this.command&&this.dataModelLoaded&&(this.blockList.length>0&&this.blockList.map((function(t){t.s("2d.visible",!1)})),this.debounceShowAlarmData(),this.removeNode())},deep:!0},dataModelLoaded:function(t){t&&this.showAlarmIcon()},zoomIn:function(){var t=this;this.iconsBlock.eachChild((function(e){t.adjustAlarmIcon(e)}))}},methods:{getAlarmData:function(){this.$emit("findData",{command:this.command})},debounceShowAlarmData:wt.a.debounce((function(){this.showAlarmIcon()}),500),showAlarmIcon:function(){var t=this,e=this.resData;e&&(e.map((function(e){var n=t.dataModel.getDataByTag("alarm-icon"),i=(n.getHeight(),new ht.Node);i.setImage(n.getImage()),i.setDisplayName("alarm-icon"),i.setTag("alarm-icon-".concat(e.sortId)),i.setLayer(999),t.dataModel.add(i),t.iconsBlock=new ht.Block;var r=t.iconsBlock;t.dataModel.add(r),r.addChild(i),t.blockList.push(r),i.s("2d.visible",!0),i.setAnchorY(1),i.setAnimation({opacityDec:{property:"opacity",accessType:"style",from:1,to:.5,duration:500,next:"opacityAdd"},opacityAdd:{property:"opacity",accessType:"style",from:.5,to:1,duration:500,next:"opacityDec"},start:["opacityDec"]}),t.adjustAlarmIcon(i)})),this.dataModel.enableAnimation())},adjustAlarmIcon:function(t){var e=t.getTag().split("alarm-icon-")[1],n=this.dataModel.getDataByTag("S:".concat(e));if(n){var i=n.getPosition(),r=(n.getHeight(),n.s("scale"),t.getHeight(),1/Math.pow(this.zoomIncrement,this.zoomIn));t.setScale({x:r,y:r}),t.setPosition(i)}},removeNode:function(){var t=this;this.blockList.map((function(e){e.eachChild((function(e){t.dataModel.remove(e)})),t.dataModel.remove(e),wt.a.remove(t.blockList,e)}))}}},St=It,Tt=Object(x["a"])(St,mt,bt,!1,null,null,null),Ct=Tt.exports,Mt=n("579c"),Dt=function(t){var e=this;this.socket=null;var n=Mt["a"].baseHOST,i=window.mosToken;this.url="ws://".concat(n,":").concat(Mt["a"].baseWSPORT,"/webimserverzp/websocket/").concat(i),this.onopen=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("连接成功");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.send=function(t){e.socket.send(JSON.stringify(t))},this.onmessage=function(e){"连接成功"===e.data?console.log("ws-res",e.data):t&&t(JSON.parse(e.data))},this.onerror=function(t){console.error(t)},this.onclose=function(t){console.log("关闭成功",t)},this.initWs()};Dt.prototype.initWs=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){t.next=4;break}return console.error("错误: 浏览器不支持websocket"),t.abrupt("return");case 4:return e=this,this.socket=new WebSocket(this.url),this.socket.onopen=function(t){e.onopen(t)},this.socket.onmessage=function(t){e.onmessage(t)},this.socket.onclose=function(t){e.onclose(t),e.socket=null},this.socket.onerror=function(t){e.onerror(t)},t.abrupt("return",this);case 11:case"end":return t.stop()}}),t,this)}))),Dt.prototype.closeWs=function(){this.socket&&this.socket.close()};var Et=Dt,Pt={name:"lineNet",props:{},data:function(){return{dataModel:null,graphView:null,WS:null,zoomIn:0,zoomInTarget:3,zoomIncrement:0,gvZoom:0,showTabs:{kljk:!1,xcjk:!1,dljk:!1,nhjk:!1,spjk:!1},topBtns:[{id:"kljk",name:"客流监控"},{id:"xcjk",name:"行车监控"},{id:"dljk",name:"电力监控"},{id:"nhjk",name:"能耗监控"},{id:"spjk",name:"视频监控"}],clickEvent:{clickStation:!1,clickGraphViewBg:!1,clickLine:!1,clickCar:!1,clickSection:!1},activeStationNode:null,activeCarNode:null,activeLineNode:"",activeSection:null,activeSectionSon:null,noAccessLineList:[],wsData:{},isShowDoubbleLine:!1,isDevelopment:!1,dataModelLoaded:!1}},mounted:function(){this.initHT(),this.initWS()},destroyed:function(){this.WS.closeWs()},methods:{initHT:function(){var t=this,e=document.querySelector("#lineNet");this.dataModel=new ht.DataModel,this.graphView=new ht.graph.GraphView(this.dataModel),this.graphView.addToDOM(e),this.graphView.setLayers(["0",1,999]),ht.Default.xhrLoad("displays/guangzhou-subway.json",(function(e){t.graphView.deserialize(ht.Default.parse(e)),t.graphView.fitContent(!0,0,!1),t.zoomIncrement=ht.Default.zoomIncrement,t.graphView.setScrollBarVisible(!1),t.graphView.setMovableFunc((function(t){t.s("2d.movable",!1)})),t.dataModel.each((function(t){t.setLayer("0")})),t.graphView.mi(t.onViewEvent),t.renderMetroLines(),t.hideDoubleLine(),t.dataModelLoaded=!0})),this.handleWindowSizeChange(),this.$nextTick((function(){t.gvZoom=t.graphView.getZoom()}))},findData:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.postAxios("/net-command/findData",t);case 2:i=n.sent,console.log("restFul里面返回的websocketdata",i),i.command&&i.data&&(e.wsData=i);case 5:case"end":return n.stop()}}),n)})))()},unsubscribe:function(t){this.postAxios("/net-command/unsubscribe",t)},initWS:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.WS=new Et(t.wsCallback);case 1:case"end":return e.stop()}}),e)})))()},wsCallback:function(t){t.command&&t.data&&(this.wsData=t)},renderMetroLines:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAxios("/v1/station/list",{lineId:0});case 2:n=e.sent,n.map((function(e){var n=t.dataModel.getDataByTag("N:".concat(e.sortId));n&&n.s({text:e.stationName}),n&&n.s({position:n.getPosition()});var i=t.dataModel.getDataByTag("S:".concat(e.sortId));i&&i.s({stationId:e.stationId,stationName:e.stationName,lineName:e.lineNo,interactive:!0});var r=t.dataModel.getDataByTag("C:".concat(e.sortId)),o=r&&r.getDisplayName();if(o&&o.indexOf("&")<0){r.s("2d.visible",!1);var a=r.s("shape.border.color");i.s("shape.background",a)}})),t.getLineDataAccess();case 5:case"end":return e.stop()}}),e)})))()},getLineDataAccess:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAxios("v1/line/list");case 2:n=e.sent,n.map((function(e){var n=e.lineNo,i=e.lineId,r=e.access,o=t.dataModel.getDataByTag("line".concat(n));o.a("lineId",i),r||t.noAccessLineList.push(n)})),t.dataModel.each((function(e){var n=e.getDisplayName();n&&0===n.indexOf("section")&&(n=n.split("section")[1]),t.noAccessLineList.includes(n)&&(e.a("noData",!0),e.s("2d.selectable",!1),e.s("2d.editable",!1))})),t.initLineNetStyle(),t.showTabs.kljk=!0;case 7:case"end":return e.stop()}}),e)})))()},initLineNetStyle:function(){var t="#6D7278",e=this.dataModel,n=this.isTarget;this.noAccessLineList;e.each((function(e){e.getTag();var i=e.getDisplayName();if(e.a("noData")){var r=e.getTag();n("line",r)||n("outsideCircle",r)||n("section",i)?e.s("shape.border.color",t):n("station",r)?e.s("shape.background",t):n("name",r)&&e.s("text.color",t)}})),this.resetLineNetStyle()},resetLineNetStyle:function(){var t=this,e=this.dataModel,n=this.isShowDoubbleLine;e.each((function(e){var i=e.getDisplayName(),r=e.getTag(),o=i&&i.indexOf("&")<0&&t.isTarget("name",r);o?e.s("opacity",n?1:.3):t.isTarget("line",r)?e.s("opacity",n?.4:1):e.s("opacity",1)}))},showDoubleLine:function(){this.dataModel.each((function(t){var e=t.getDisplayName(),n=(t.getTag(),e&&e.indexOf("up")>=0),i=e&&e.indexOf("down")>=0;(t instanceof ht.Block&&n||i)&&t.s("2d.visible",!0)}))},hideDoubleLine:function(){this.dataModel.each((function(t){var e=t.getDisplayName(),n=(t.getTag(),e&&e.indexOf("up")>=0),i=e&&e.indexOf("down")>=0;(t instanceof ht.Block&&n||i)&&t.s("2d.visible",!1)}))},isTarget:function(t,e){if(!e)return!1;var n=!1;return"line"===t?e.match(/^line/):"station"===t?e.match(/^S:/):"name"===t?e.match(/^N:/):"outsideCircle"===t?e.match(/^C:/):"transferIcon"===t?e.match(/^transfer-icon:/):"section"===t?e.match(/^section/):n},showLocationIcon:function(t){var e="symbols/icon-location.json",n=new ht.Node;n.setImage(e),n.setPosition(t.getPosition()),n.setTag("locationIcon"),n.setAnchorY(1),this.dataModel.add(n),this.adjustLocationIcon()},adjustLocationIcon:function(){var t,e=this.dataModel.getDataByTag("locationIcon");e&&(this.zoomIn>0?(t=1/Math.pow(this.zoomIncrement,this.zoomIn),console.log("scaleResolution",t),t<.1&&(t=.1)):t=this.gvZoom,e.setScale({x:t,y:t}))},onViewEvent:function(t){var e=t.event,n=t.kind,i=t.data;switch(n){case"clickData":i.s("select.color","rgba(0,0,0,0)");break;case"onClick":this.onNodeClick(i);break;case"onEnter":i&&i.getTag()&&i.getTag().indexOf("S:")>=0&&this.$refs.stationPop.showStationOverview(e,i);break;case"clickBackground":this.$refs.stationPop.hideStationOverview(),this.setCurrentClickEvent("clickGraphViewBg");break}},setCurrentClickEvent:function(t){for(var e=this.clickEvent,n=0,i=Object.entries(this.clickEvent);n<i.length;n++){var r=u(i[n],2),o=r[0];r[1];e[o]=o===t}},onNodeClick:function(t){t.s("select.color","rgba(0,0,0,0)");var e=t.getTag(),n=t.getDisplayName();if(!e||"stationPop"!==e)return this.$refs.stationPop.hideStationOverview(),this.isTarget("line",e)?(this.setCurrentClickEvent("clickLine"),void(this.activeLineNode=n)):this.isTarget("station",e)?(this.setCurrentClickEvent("clickStation"),void(this.activeStationNode=t)):e&&e.indexOf("car")>=0?(this.setCurrentClickEvent("clickCar"),void(this.activeCarNode=t)):this.isTarget("section",n)?(this.setCurrentClickEvent("clickSection"),this.activeSection=t._parent,this.activeSectionSon=t,void(this.activeLineNode=t._parent.getDisplayName().split("section")[1])):void 0},onSectionClick:function(t){t.s("select.color","rgba(0,0,0,0)");t.getTag();var e=t.getDisplayName();this.isTarget("section",e)&&(this.setCurrentClickEvent("clickSection"),this.activeSection=t,this.activeLineNode=e.split("section")[1])},onFullScreen:function(){this.$refs.stationPop.hideStationOverview()},onEnlarge:function(){var t=this;this.graphView.zoomIn(),this.zoomIn+=1,this.$refs.stationPop.hideStationOverview(),this.$nextTick((function(){t.gvZoom=t.graphView.getZoom()}))},onShrink:function(){var t=this;this.graphView.zoomOut(),this.zoomIn--,this.$refs.stationPop.hideStationOverview(),this.$nextTick((function(){t.gvZoom=t.graphView.getZoom()}))},onWPF:function(t){if(console.log("wpf返回给前端的内容",t),t.command){var e=t.param.type;switch(e){case"fullScroll":console.log("全屏-退出全屏"),this.onFullScreen();break;case"enlarge":this.onEnlarge();break;case"shrink":this.onShrink();break;default:this.changeTab(e)}}},changeTab:function(t){for(var e in this.showTabs)this.showTabs[e]=e==t;this.$refs.stationPop.hideStationOverview()},handleWindowSizeChange:function(){var t=this;window.addEventListener("resize",(function(){if(0===t.zoomIn)t.graphView.fitContent(!0,0);else{var e=t.graphView.getWidth(),n=t.graphView.getHeight(),i=window.innerWidth,r=window.innerHeight;e*t.gvZoom<i&&n*t.gvZoom<r&&t.graphView.fitContent(!0,0,!1)}}))}},watch:{zoomIn:function(t,e){var n=4.65696,i=this.zoomIn,r=this.zoomInTarget,o=this.zoomIncrement,a=this.isTarget;if(i>=0&&i<=r){var s=0===i?1:1/i/o,c=0===i?1:1/Math.pow(o,i);this.dataModel.each((function(t){var e=t.getTag();t.getDisplayName();a("line",e)?(t.s("shape.border.width",n/Math.pow(o,i)),console.log("width",n/Math.pow(o,i))):a("name",e)?t.s("text.font","".concat(10/Math.pow(o,i),'px PingFangSC-Medium, "PingFang SC"')):(a("outsideCircle",e)||a("station",e)||a("transferIcon",e))&&(t.setScale({x:c,y:c}),t.s("scale",s))})),this.adjustLocationIcon()}i>=r?(this.isShowDoubbleLine=!0,this.showDoubleLine()):(this.isShowDoubbleLine=!1,this.hideDoubleLine())},isShowDoubbleLine:function(t,e){this.resetLineNetStyle()}},components:{stationPop:nt,passengerFlowAnimation:k,passengerFlowMonitoring:_t,metroAnimation:G,powerMonitor:q,stationEnergy:I,videoMonitor:ct,alarmEvent:Ct},directives:{},mixins:[]},Ot=Pt,At=(n("706f"),Object(x["a"])(Ot,i,r,!1,null,"6034b482",null));e["default"]=At.exports},"1ea7":function(t,e,n){var i=n("efe2"),r=n("90fb"),o=n("f594"),a=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1fb3":function(t,e,n){var i=n("1c8b"),r=n("d890"),o=n("4fda"),a=[].slice,s=/MSIE .\./.test(o),c=function(t){return function(e,n){var i=arguments.length>2,r=i?a.call(arguments,2):void 0;return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};i({global:!0,bind:!0,forced:s},{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},"20a5":function(t,e,n){"use strict";var i=n("1c8b"),r=n("3da3"),o=n("e1d9"),a=n("c7e6"),s=n("efe2"),c=1..toFixed,l=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},d=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},h=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));i({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,n,i,s,c=o(this),h=r(t),f=[0,0,0,0,0,0],g="",p="0",v=function(t,e){var n=-1,i=e;while(++n<6)i+=t*f[n],f[n]=i%1e7,i=l(i/1e7)},y=function(t){var e=6,n=0;while(--e>=0)n+=f[e],f[e]=l(n/t),n=n%t*1e7},_=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var n=String(f[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,n=e<0?c*u(2,-e,1):c/u(2,e,1),n*=4503599627370496,e=52-e,e>0){v(0,n),i=h;while(i>=7)v(1e7,0),i-=7;v(u(10,i,1),0),i=e-1;while(i>=23)y(1<<23),i-=23;y(1<<i),v(1,1),y(2),p=_()}else v(0,n),v(1<<-e,0),p=_()+a.call("0",h);return h>0?(s=p.length,p=g+(s<=h?"0."+a.call("0",h-s)+p:p.slice(0,s-h)+"."+p.slice(s-h))):p=g+p,p}})},2217:function(t,e,n){(function(t){n("983d"),n("e50e"),function(t,e,n){function i(t){for(var e="",n=0;n<t.length;n++){var i=t[n].x+51;i>0&&(e+=String.fromCharCode(i));var r=t[n].y+11;r>0&&(e+=String.fromCharCode(r));var o=t[n].z+21;o>0&&(e+=String.fromCharCode(o))}return e}for(var r,o=[[{x:22772,y:22400,z:32487},{x:21461,y:30406,z:25490},{x:31944,y:32468,z:-21}]],a=Math.random()+Date.now(),s=0;s<o.length;s++)0===s&&(r=i(o[s]));t.ht&&(t[r]=a)}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this)}).call(this,n("9edd"))},"26a2":function(t,e,n){"use strict";var i=n("1c8b"),r=n("d890"),o=n("1e2c"),a=n("a4c7"),s=n("5a9e"),c=n("1c2e9"),l=n("c4e4"),u=n("38b9"),d=n("0fc1"),h=n("d88d"),f=n("3ccd"),g=n("7aeb"),p=n("9f67"),v=n("faa8"),y=n("2a91"),_=n("a719"),m=n("6d60"),b=n("50fb"),x=n("b338").f,w=n("6f82"),I=n("5dfd").forEach,S=n("403f"),T=n("d910"),C=n("aa6b"),M=n("b702"),D=n("7063"),E=M.get,P=M.set,O=T.f,A=C.f,k=Math.round,R=r.RangeError,z=c.ArrayBuffer,N=c.DataView,V=s.NATIVE_ARRAY_BUFFER_VIEWS,L=s.TYPED_ARRAY_TAG,B=s.TypedArray,G=s.TypedArrayPrototype,F=s.aTypedArrayConstructor,j=s.isTypedArray,H="BYTES_PER_ELEMENT",U="Wrong length",Z=function(t,e){var n=0,i=e.length,r=new(F(t))(i);while(i>n)r[n]=e[n++];return r},W=function(t,e){O(t,e,{get:function(){return E(this)[e]}})},q=function(t){var e;return t instanceof z||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},X=function(t,e){return j(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Y=function(t,e){return X(t,e=p(e,!0))?u(2,t[e]):A(t,e)},$=function(t,e,n){return!(X(t,e=p(e,!0))&&_(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?O(t,e,n):(t[e]=n.value,t)};o?(V||(C.f=Y,T.f=$,W(G,"buffer"),W(G,"byteOffset"),W(G,"byteLength"),W(G,"length")),i({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:Y,defineProperty:$}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",c="get"+t,u="set"+t,p=r[s],v=p,y=v&&v.prototype,T={},C=function(t,e){var n=E(t);return n.view[c](e*o+n.byteOffset,!0)},M=function(t,e,i){var r=E(t);n&&(i=(i=k(i))<0?0:i>255?255:255&i),r.view[u](e*o+r.byteOffset,i,!0)},A=function(t,e){O(t,e,{get:function(){return C(this,e)},set:function(t){return M(this,e,t)},enumerable:!0})};V?a&&(v=e((function(t,e,n,i){return l(t,v,s),D(function(){return _(e)?q(e)?void 0!==i?new p(e,g(n,o),i):void 0!==n?new p(e,g(n,o)):new p(e):j(e)?Z(v,e):w.call(v,e):new p(f(e))}(),t,v)})),b&&b(v,B),I(x(p),(function(t){t in v||d(v,t,p[t])})),v.prototype=y):(v=e((function(t,e,n,i){l(t,v,s);var r,a,c,u=0,d=0;if(_(e)){if(!q(e))return j(e)?Z(v,e):w.call(v,e);r=e,d=g(n,o);var p=e.byteLength;if(void 0===i){if(p%o)throw R(U);if(a=p-d,a<0)throw R(U)}else if(a=h(i)*o,a+d>p)throw R(U);c=a/o}else c=f(e),a=c*o,r=new z(a);P(t,{buffer:r,byteOffset:d,byteLength:a,length:c,view:new N(r)});while(u<c)A(t,u++)})),b&&b(v,B),y=v.prototype=m(G)),y.constructor!==v&&d(y,"constructor",v),L&&d(y,L,s),T[s]=v,i({global:!0,forced:v!=p,sham:!V},T),H in v||d(v,H,o),H in y||d(y,H,o),S(s)}):t.exports=function(){}},2909:function(t,e,n){"use strict";var i=n("5a9e"),r=n("58d8").left,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("reduce",(function(t){return r(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"2bbe":function(t,e,n){var i=n("1c8b"),r=n("c7e6");i({target:"String",proto:!0},{repeat:r})},"2eeb":function(t,e,n){"use strict";var i=n("1c8b"),r=n("5dfd").map,o=n("1ea7"),a=n("ff9c"),s=o("map"),c=a("map");i({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"2eee":function(t,e,n){(function(t){n("56ea"),n("fe59"),n("ecb4"),n("f657"),n("086d"),n("ea69"),n("08ba"),n("1fb3"),function(t){"use strict";var e=t.ht,n=e.Default,i=n.getInternal(),r=i.ui(),o=null,a="__segmentLengths",s="__lineTotalLength",c="__linePoints",l="__distance0",u="flow.count",d="flow.step",h="flow.element.max",f="flow.element.count",g="flow.element.min",p="flow.element.space",v="flow.element.autorotate",y="flow.element.background",_="flow.element.shadow.max",m="flow.element.shadow.min",b="flow.element.shadow.begincolor",x="flow.element.shadow.endcolor",w="flow.element.shadow.visible",I="flow.element.image",S="flow",T=e.Math.Vector2,C=new T;new T,new T,e.List;var M=e.Default._edgeProtectMethod,D=M.getStraightLinePoints,E=function(t,e){var n=[],i=t.length;for(c=0;i>c;c++){var r=t[c];r._as&&(r=r._as);for(var o=r[0],a=1;a<r.length;a++)n.push([o,r[a]]),o=r[a]}for(var s=[],c=0;c<n.length;c++){var l=O(n[c][0],n[c][1],e);s.push(l)}return{distance:s,segments:n}},P=function(t,e,i){if(t){for(var r,o=E(t,e),a=o.distance,s=o.segments,c=1/0,l=null,u=0,d=a.length;d>u;u++){var h=a[u];h.z<c&&(r=u,c=h.z,l=h)}if(null==i&&(i=.1),l.z<i){for(var f=0,g=0;r>=g;g++)f+=n.getDistance(s[g][0],r>g?s[g][1]:l);return f}}},O=function(t,e,n){var i=t.x,r=t.y,o=e.x,a=e.y,s=n.x,c=n.y,l=o-i,u=a-r,d=Math.sqrt(l*l+u*u),h=l/d,f=u/d,g=(-i+s)*h+(-r+c)*f,p={x:i+g*h,y:r+g*f};return p.x>=Math.min(t.x,e.x)&&p.x<=Math.max(t.x,e.x)&&p.y>=Math.min(t.y,e.y)&&p.y<=Math.max(t.y,e.y)||(p.x=Math.abs(p.x-t.x)<Math.abs(p.x-e.x)?t.x:e.x,p.y=Math.abs(p.y-t.y)<Math.abs(p.y-e.y)?t.y:e.y),l=s-p.x,u=c-p.y,p.z=Math.sqrt(l*l+u*u),p},A=function(t,e){if(t){var n=E(t,e).distance,i=1/0,r=null;return n.forEach((function(t){t.z<i&&(i=t.z,r=t)})),r}},k=M.calculateLineLength,R=M.calcSegmentIndexByDistance,z=M.calculatePointAlongLine,N=function(t,e,n){if(!t)return n;if(0===e){var i=t[0][0],r=t[0][1];return n+Math.atan2(r.y-i.y,r.x-i.x)}if(100===e){t=t[t.length-1];i=t[t.length-2],r=t[t.length-1];return n+Math.atan2(r.y-i.y,r.x-i.x)}for(var o=0,a=[],s=t.length,c=0;s>c;c++){var l=t[c],u=k(l);o+=u,a.push(u)}for(var d=o*e/100,h=R(d,a),f=0,g=0;h>g;g++)f+=a[g];d-=f;for(var p=z(t[h],d),v=t[h],y=0,_=0,m=0;m<v.length-1;m++){var b=v[m],x=v[m+1],w=x.x-b.x,I=x.y-b.y,S=Math.sqrt(w*w+I*I);if(y+=S,y>d){_=m;break}}var T=v[_];return n+Math.atan2(p.y-T.y,p.x-T.x)},V=function(t){var e=0;if(t)if(Array.isArray(t[0]))for(var n=t.length,i=0;n>i;i++){var r=t[i],o=k(r);e+=o}else e=k(t);return e},L=function(t,e,n,i){return C.set(e,n).rotateAround(null,i),t?{x:t.x+C.x,y:t.y+C.y}:{x:C.x,y:C.y}},B=function(t){var i=t._data,r=D(t);if(r){i.s("flow.reverse")&&(r.reverse(),r.forEach((function(t){t.reverse()})));for(var o=0,l=[],u=r.length,d=0;u>d;d++){var h=r[d],f=k(h);o+=f,l.push(f)}if(i[a]=l,i[s]=o,i[c]=r,i instanceof e.Edge){var g=n.unionPoint(r),p=g.x+g.width/2,v=g.y+g.height/2;i.$10e={x:p,y:v}}F(t,!0)}},G=M.getPercentPosition,F=function(t,e){var n=t._data,i=n[s],r=n.s(u),o=n.s(d),c=0,p=n[a],v=n.s(h),y=n.s(g),_=n.s(f),m=(v-y)/(_-1),b=[];if(p){if(1===_)b.push(v);else if(2===_)b.push(v),b.push(y);else{if(!(_>2))return;b.push(v);for(var x=_-2;x>0;x--)b.push(y+m*x);b.push(y)}var w=0,I=0;b.forEach((function(t){_-1>w&&(I+=n.getFlowElementSpace(t)),w++})),I+=(v+y)/2,c=(i-r*I+I)/r;var S=t[l];for(null==S&&(S=0),e||(S+=o);S>i+I;){var T=t._overCount;T?T++:T=1,T>=r&&(T=null),t._overCount=T,n.s("flow.autoreverse")?T?S-=c+I:(S=0,n.s("flow.reverse",!n.s("flow.reverse"))):S-=c+I}t[l]=S}},j="prototype",H=e.graph.GraphView[j],U=e.Data[j],Z=r.DataUI[j],W=r.ShapeUI[j],q=r.EdgeUI[j],X=e.DataModel[j],Y=e.Style;Y[h]==o&&(Y[h]=7),Y[g]==o&&(Y[g]=0),Y[u]==o&&(Y[u]=1),Y[d]==o&&(Y[d]=3),Y[f]==o&&(Y[f]=10),Y[p]==o&&(Y[p]=3.5),Y[v]==o&&(Y[v]=!1),Y[y]==o&&(Y[y]="rgba(255, 255, 114, 0.4)"),Y[b]==o&&(Y[b]="rgba(255, 255, 0, 0.3)"),Y[x]==o&&(Y[x]="rgba(255, 255, 0, 0)"),Y[w]==o&&(Y[w]=1),Y[_]==o&&(Y[_]=22),Y[m]==o&&(Y[m]=4),H.calculatePointLength=function(t,e,n){var i=this.getDataUI(t),r=D(i);return P(r,e,n)},n.calculatePointLength=function(t,e,n,i){var r=D(o,t,e);return P(r,n,i)},n.calculateClosestPointOnLine=O,H.calculateClosestPoint=function(t,e){var n=this.getDataUI(t),i=D(n);return A(i,e)},n.calculateClosestPoint=function(t,e,n){var i=D(o,t,e);return A(i,n)},H.getPercentAngle=function(t,e){var n=this.getDataUI(t),i=D(n);return t.getRotation&&t.getRotation(),N(i,e,t.getRotation?t.getRotation():0)},n.getPercentAngle=function(t,e,n){var i=D(o,t,e);return N(i,n,0)},H.calculateLength=function(t){var e=this.getDataUI(t),n=D(e);return V(n)},n.calculateLength=function(t,e){var n=D(o,t,e);return V(n)},H.getPercentPosition=function(t,e){var n=this.getDataUI(t),i=D(n);return G(i,e)},n.getPercentPositionOnPoints=function(t,e,n){var i=D(o,t,e);return G(i,n)};var $=function(t){var e=t.data,n=this.dm();if(e&&"add"===t.kind){var i=n.$3e;i&&e.s(S)&&i.indexOf(e)<0&&i.push(e)}"clear"===t.kind&&(n.$3e=[])},Q=function(t){var e=t.property,n=t.data,i=t.newValue,r=this.dm().$3e;if(r&&"s:flow"===e)if(i)r.indexOf(n)<0&&r.push(n);else for(var o=r.length,a=0;o>a;a++)if(r[a]===n){r.splice(a,1);break}},J=H.setDataModel;H.setDataModel=function(t){var e=this,n=e._dataModel;if(n!==t){n&&(n.umm($,e),n.umd(Q,e),n.$3e=[]),t.mm($,e),t.md(Q,e);var i=t.$3e=[];t.each((function(t){t.s(S)&&i.indexOf(t)<0&&i.push(t)})),J.call(e,t)}},U.getFlowElementSpace=function(){return this.s(p)};var K=function(t){var e=this,n=e._data,i=n[s],r=n[a],d=n[c],p=n.s(u),y=0,b=e[l],x=n.s(h),w=n.s(g),I=n.s(f),S=n.s(m),T=n.s(_),C=n.s(v),M=(T-S)/(I-1),D=(x-w)/(I-1),E=n.getRotation?n.getRotation():0,P=n.getPosition?n.p():n.$10e,O=[],A=[];if(b!=o){if(1===I)O.push(x);else if(2===I)O.push(x),O.push(w);else{if(!(I>2))return;O.push(x);for(var k=I-2;k>0;k--)O.push(w+D*k);O.push(w)}if(1===I)A.push(T);else if(2===I)A.push(T),A.push(S);else{if(!(I>2))return;A.push(T);for(k=I-2;k>0;k--)A.push(S+M*k);A.push(S)}var N=0,V=0;O.forEach((function(t){I-1>N&&(V+=n.getFlowElementSpace(t)),N++})),V+=(x+w)/2,y=(i-p*V+V)/p,t.save();for(k=0;p>k;k++){var B=b,G=0,F=e._overCount,j=0;n.s("flow.autoreverse")&&F&&F>p-(k+1)||(B-=k*(y+V),N=0,O.forEach((function(o){var a=B-G;if(a>=0&&i>a){var s=!0,c=R(a,r);j=0;for(var l=0;c>l;l++)j+=r[l];if(a-=j,s){var u=z(d[c],a),h=E;if(C){for(var f=d[c],g=0,p=0,v=0;v<f.length-1;v++){var y=f[v],_=f[v+1],m=_.x-y.x,b=_.y-y.y,x=Math.sqrt(m*m+b*b);if(g+=x,g>a){p=v;break}}var w=f[p];h+=Math.atan2(u.y-w.y,u.x-w.x)}E&&(u=L(P,u.x-P.x,u.y-P.y,E)),e.$5e(t,u,o,A[N],h)}}G+=n.getFlowElementSpace(O[N]),N++})))}t.restore()}},tt=q._80o;q._80o=function(t){tt.call(this,t);var e=this,n=e._data,i=e.gv;n.s(S)&&i.$7e!=o&&K.call(e,t)};var et=W._80o;W._80o=function(t){et.call(this,t);var e=this,n=e._data,i=e.gv;n.s(S)&&i.$7e!=o&&K.call(e,t)};var nt=q._79o,it=W._79o,rt=function(){var t=this,i=t._data,r=i.s(h),u=!1,d=o;if(t._6I||(u=!0),d=i instanceof e.Edge?nt.call(t):it.call(t),i.s(S)&&u){var f=i.s(_),g=i.s(w);g&&f>r&&(r=f),r>0&&n.grow(d,Math.ceil(r/2)),B(t)}return!i.s(S)&&u&&(i[a]=i[s]=i[c]=t[l]=o),d};W._79o=rt,q._79o=rt,Z.$5e=function(t,e,r,a,s){var c=this,l=c._data,u=c.gv,d=l.s(y),h=l.s(b),f=l.s(x),g=l.s(w),p=u.$8e,v=l.s(I);if(p==o&&(p=u.$8e={}),t.beginPath(),v!=o){var _=n.getImage(v),m=r/2;t.translate(e.x,e.y),t.rotate(s),t.translate(-e.x,-e.y),n.drawImage(t,_,e.x-m,e.y-m,r,r,l),t.translate(e.x,e.y),t.rotate(-s),t.translate(-e.x,-e.y)}else if(u.__flowBatch){var S=u.__flowBatchGroup;S||(S=u.__flowBatchGroup={});var T=[e.x,e.y,r/2];S[d]?S[d].push(T):S[d]=[T]}else t.fillStyle=d,t.arc(e.x,e.y,r/2,0,2*Math.PI,!0),t.fill();if(g){var C=22,M=C+"_"+h+"_"+f,D=p[M];if(D==o){var E=document.createElement("canvas");i.setCanvas(E,C,C);var P=E.getContext("2d"),O=C/2,A=O,k=O;i.translateAndScale(P,0,0,1),P.beginPath();var R=P.createRadialGradient(A,k,0,A,A,O);R.addColorStop(0,h),R.addColorStop(1,f),P.fillStyle=R,P.arc(A,k,O,0,2*Math.PI,!0),P.fill(),D=p[M]=E}m=a/2;n.drawImage(t,D,e.x-m,e.y-m,a,a,l)}},H.$9e=function(){var t=this,e=t.dm().$3e;t._24I,e.forEach((function(e){t._24I[e._id]=e})),t.iv()};var ot=X.prepareRemove;X.prepareRemove=function(t){ot.call(this,t);var e=t._dataModel,n=e.$3e;if(n)for(var i=n.length,r=0;i>r;r++)if(n[r]===t){n.splice(r,1);break}},H.setFlowInterval=function(t){var e=this,n=e.$11e;e.$11e=t,e.fp("flowInterval",n,t),e.$7e!=o&&(clearInterval(e.$7e),delete e.$7e,e.enableFlow(t))},H.getFlowInterval=function(){return this.$11e},H.enableFlow=function(t){var e=this,n=e.dm(),i=n.$3e;e.$7e==o&&(i.forEach((function(t){var n=e.getDataUI(t);B(n)})),e.$7e=setInterval((function(){n.$3e.forEach((function(t){F(e.getDataUI(t))})),e.$9e()}),t||e.$11e||50))},H.disableFlow=function(){var t=this;clearInterval(t.$7e),delete t.$7e;var e=t.dm().$3e;e&&t.$9e()};var at=function(){this.__flowBatchGroup={}},st=function(t){var e=this.__flowBatchGroup;if(e){for(var n in t.save(),e){t.fillStyle=n,t.beginPath();var i=e[n];i.forEach((function(e){t.moveTo(e[0],e[1]),t.arc(e[0],e[1],e[2],0,2*Math.PI,!0)})),t.fill()}t.restore()}};H.setFlowBatch=function(t){var e=this;!!e.__flowBatch!=!!t&&(e.__flowBatch=t,t?(e.addBottomPainter(at),e.addTopPainter(st)):(e.removeBottomPainter(at),e.removeTopPainter(st)))}}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"))}).call(this,n("9edd"))},"33a2":function(t,e,n){var i=n("1c8b"),r=n("b747");i({global:!0,forced:parseInt!=r},{parseInt:r})},3587:function(t,e,n){"use strict";var i=n("0c3c"),r=n("a719"),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("C,a","return new C("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),a=function(){var i=n.concat(o.call(arguments));return this instanceof a?s(e,i.length,i):e.apply(t,i)};return r(e.prototype)&&(a.prototype=e.prototype),a}},3598:function(t,e,n){"use strict";var i=n("5a9e"),r=n("8d7b"),o=i.aTypedArray,a=i.exportTypedArrayMethod;a("lastIndexOf",(function(t){return r.apply(o(this),arguments)}))},"391c":function(t,e,n){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,a="4.17.15",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,g=2,p=4,v=1,y=2,_=1,m=2,b=4,x=8,w=16,I=32,S=64,T=128,C=256,M=512,D=30,E="...",P=800,O=16,A=1,k=2,R=3,z=1/0,N=9007199254740991,V=17976931348623157e292,L=NaN,B=4294967295,G=B-1,F=B>>>1,j=[["ary",T],["bind",_],["bindKey",m],["curry",x],["curryRight",w],["flip",M],["partial",I],["partialRight",S],["rearg",C]],H="[object Arguments]",U="[object Array]",Z="[object AsyncFunction]",W="[object Boolean]",q="[object Date]",X="[object DOMException]",Y="[object Error]",$="[object Function]",Q="[object GeneratorFunction]",J="[object Map]",K="[object Number]",tt="[object Null]",et="[object Object]",nt="[object Promise]",it="[object Proxy]",rt="[object RegExp]",ot="[object Set]",at="[object String]",st="[object Symbol]",ct="[object Undefined]",lt="[object WeakMap]",ut="[object WeakSet]",dt="[object ArrayBuffer]",ht="[object DataView]",ft="[object Float32Array]",gt="[object Float64Array]",pt="[object Int8Array]",vt="[object Int16Array]",yt="[object Int32Array]",_t="[object Uint8Array]",mt="[object Uint8ClampedArray]",bt="[object Uint16Array]",xt="[object Uint32Array]",wt=/\b__p \+= '';/g,It=/\b(__p \+=) '' \+/g,St=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tt=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,Mt=RegExp(Tt.source),Dt=RegExp(Ct.source),Et=/<%-([\s\S]+?)%>/g,Pt=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zt=/[\\^$.*+?()[\]{}|]/g,Nt=RegExp(zt.source),Vt=/^\s+|\s+$/g,Lt=/^\s+/,Bt=/\s+$/,Gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ut=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Xt=/^0b[01]+$/i,Yt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,te=/['\n\r\u2028\u2029\\]/g,ee="\\ud800-\\udfff",ne="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",re="\\u20d0-\\u20ff",oe=ne+ie+re,ae="\\u2700-\\u27bf",se="a-z\\xdf-\\xf6\\xf8-\\xff",ce="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ue="\\u2000-\\u206f",de=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="A-Z\\xc0-\\xd6\\xd8-\\xde",fe="\\ufe0e\\ufe0f",ge=ce+le+ue+de,pe="['’]",ve="["+ee+"]",ye="["+ge+"]",_e="["+oe+"]",me="\\d+",be="["+ae+"]",xe="["+se+"]",we="[^"+ee+ge+me+ae+se+he+"]",Ie="\\ud83c[\\udffb-\\udfff]",Se="(?:"+_e+"|"+Ie+")",Te="[^"+ee+"]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",De="["+he+"]",Ee="\\u200d",Pe="(?:"+xe+"|"+we+")",Oe="(?:"+De+"|"+we+")",Ae="(?:"+pe+"(?:d|ll|m|re|s|t|ve))?",ke="(?:"+pe+"(?:D|LL|M|RE|S|T|VE))?",Re=Se+"?",ze="["+fe+"]?",Ne="(?:"+Ee+"(?:"+[Te,Ce,Me].join("|")+")"+ze+Re+")*",Ve="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Be=ze+Re+Ne,Ge="(?:"+[be,Ce,Me].join("|")+")"+Be,Fe="(?:"+[Te+_e+"?",_e,Ce,Me,ve].join("|")+")",je=RegExp(pe,"g"),He=RegExp(_e,"g"),Ue=RegExp(Ie+"(?="+Ie+")|"+Fe+Be,"g"),Ze=RegExp([De+"?"+xe+"+"+Ae+"(?="+[ye,De,"$"].join("|")+")",Oe+"+"+ke+"(?="+[ye,De+Pe,"$"].join("|")+")",De+"?"+Pe+"+"+Ae,De+"+"+ke,Le,Ve,me,Ge].join("|"),"g"),We=RegExp("["+Ee+ee+oe+fe+"]"),qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ye=-1,$e={};$e[ft]=$e[gt]=$e[pt]=$e[vt]=$e[yt]=$e[_t]=$e[mt]=$e[bt]=$e[xt]=!0,$e[H]=$e[U]=$e[dt]=$e[W]=$e[ht]=$e[q]=$e[Y]=$e[$]=$e[J]=$e[K]=$e[et]=$e[rt]=$e[ot]=$e[at]=$e[lt]=!1;var Qe={};Qe[H]=Qe[U]=Qe[dt]=Qe[ht]=Qe[W]=Qe[q]=Qe[ft]=Qe[gt]=Qe[pt]=Qe[vt]=Qe[yt]=Qe[J]=Qe[K]=Qe[et]=Qe[rt]=Qe[ot]=Qe[at]=Qe[st]=Qe[_t]=Qe[mt]=Qe[bt]=Qe[xt]=!0,Qe[Y]=Qe[$]=Qe[lt]=!1;var Je={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},en={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,on="object"==typeof t&&t&&t.Object===Object&&t,an="object"==typeof self&&self&&self.Object===Object&&self,sn=on||an||Function("return this")(),cn=e&&!e.nodeType&&e,ln=cn&&"object"==typeof i&&i&&!i.nodeType&&i,un=ln&&ln.exports===cn,dn=un&&on.process,hn=function(){try{var t=ln&&ln.require&&ln.require("util").types;return t||dn&&dn.binding&&dn.binding("util")}catch(e){}}(),fn=hn&&hn.isArrayBuffer,gn=hn&&hn.isDate,pn=hn&&hn.isMap,vn=hn&&hn.isRegExp,yn=hn&&hn.isSet,_n=hn&&hn.isTypedArray;function mn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function bn(t,e,n,i){var r=-1,o=null==t?0:t.length;while(++r<o){var a=t[r];e(i,a,n(a),t)}return i}function xn(t,e){var n=-1,i=null==t?0:t.length;while(++n<i)if(!1===e(t[n],n,t))break;return t}function wn(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function In(t,e){var n=-1,i=null==t?0:t.length;while(++n<i)if(!e(t[n],n,t))return!1;return!0}function Sn(t,e){var n=-1,i=null==t?0:t.length,r=0,o=[];while(++n<i){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Tn(t,e){var n=null==t?0:t.length;return!!n&&Vn(t,e,0)>-1}function Cn(t,e,n){var i=-1,r=null==t?0:t.length;while(++i<r)if(n(e,t[i]))return!0;return!1}function Mn(t,e){var n=-1,i=null==t?0:t.length,r=Array(i);while(++n<i)r[n]=e(t[n],n,t);return r}function Dn(t,e){var n=-1,i=e.length,r=t.length;while(++n<i)t[r+n]=e[n];return t}function En(t,e,n,i){var r=-1,o=null==t?0:t.length;i&&o&&(n=t[++r]);while(++r<o)n=e(n,t[r],r,t);return n}function Pn(t,e,n,i){var r=null==t?0:t.length;i&&r&&(n=t[--r]);while(r--)n=e(n,t[r],r,t);return n}function On(t,e){var n=-1,i=null==t?0:t.length;while(++n<i)if(e(t[n],n,t))return!0;return!1}var An=Fn("length");function kn(t){return t.split("")}function Rn(t){return t.match(Ht)||[]}function zn(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Nn(t,e,n,i){var r=t.length,o=n+(i?1:-1);while(i?o--:++o<r)if(e(t[o],o,t))return o;return-1}function Vn(t,e,n){return e===e?hi(t,e,n):Nn(t,Bn,n)}function Ln(t,e,n,i){var r=n-1,o=t.length;while(++r<o)if(i(t[r],e))return r;return-1}function Bn(t){return t!==t}function Gn(t,e){var n=null==t?0:t.length;return n?Zn(t,e)/n:L}function Fn(t){return function(e){return null==e?o:e[t]}}function jn(t){return function(e){return null==t?o:t[e]}}function Hn(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Un(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Zn(t,e){var n,i=-1,r=t.length;while(++i<r){var a=e(t[i]);a!==o&&(n=n===o?a:n+a)}return n}function Wn(t,e){var n=-1,i=Array(t);while(++n<t)i[n]=e(n);return i}function qn(t,e){return Mn(e,(function(e){return[e,t[e]]}))}function Xn(t){return function(e){return t(e)}}function Yn(t,e){return Mn(e,(function(e){return t[e]}))}function $n(t,e){return t.has(e)}function Qn(t,e){var n=-1,i=t.length;while(++n<i&&Vn(e,t[n],0)>-1);return n}function Jn(t,e){var n=t.length;while(n--&&Vn(e,t[n],0)>-1);return n}function Kn(t,e){var n=t.length,i=0;while(n--)t[n]===e&&++i;return i}var ti=jn(Je),ei=jn(Ke);function ni(t){return"\\"+en[t]}function ii(t,e){return null==t?o:t[e]}function ri(t){return We.test(t)}function oi(t){return qe.test(t)}function ai(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function si(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function ci(t,e){return function(n){return t(e(n))}}function li(t,e){var n=-1,i=t.length,r=0,o=[];while(++n<i){var a=t[n];a!==e&&a!==h||(t[n]=h,o[r++]=n)}return o}function ui(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function di(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function hi(t,e,n){var i=n-1,r=t.length;while(++i<r)if(t[i]===e)return i;return-1}function fi(t,e,n){var i=n+1;while(i--)if(t[i]===e)return i;return i}function gi(t){return ri(t)?yi(t):An(t)}function pi(t){return ri(t)?_i(t):kn(t)}var vi=jn(tn);function yi(t){var e=Ue.lastIndex=0;while(Ue.test(t))++e;return e}function _i(t){return t.match(Ue)||[]}function mi(t){return t.match(Ze)||[]}var bi=function t(e){e=null==e?sn:xi.defaults(sn.Object(),e,xi.pick(sn,Xe));var n=e.Array,i=e.Date,r=e.Error,Ht=e.Function,ee=e.Math,ne=e.Object,ie=e.RegExp,re=e.String,oe=e.TypeError,ae=n.prototype,se=Ht.prototype,ce=ne.prototype,le=e["__core-js_shared__"],ue=se.toString,de=ce.hasOwnProperty,he=0,fe=function(){var t=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ge=ce.toString,pe=ue.call(ne),ve=sn._,ye=ie("^"+ue.call(de).replace(zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=un?e.Buffer:o,me=e.Symbol,be=e.Uint8Array,xe=_e?_e.allocUnsafe:o,we=ci(ne.getPrototypeOf,ne),Ie=ne.create,Se=ce.propertyIsEnumerable,Te=ae.splice,Ce=me?me.isConcatSpreadable:o,Me=me?me.iterator:o,De=me?me.toStringTag:o,Ee=function(){try{var t=Za(ne,"defineProperty");return t({},"",{}),t}catch(e){}}(),Pe=e.clearTimeout!==sn.clearTimeout&&e.clearTimeout,Oe=i&&i.now!==sn.Date.now&&i.now,Ae=e.setTimeout!==sn.setTimeout&&e.setTimeout,ke=ee.ceil,Re=ee.floor,ze=ne.getOwnPropertySymbols,Ne=_e?_e.isBuffer:o,Ve=e.isFinite,Le=ae.join,Be=ci(ne.keys,ne),Ge=ee.max,Fe=ee.min,Ue=i.now,Ze=e.parseInt,We=ee.random,qe=ae.reverse,Je=Za(e,"DataView"),Ke=Za(e,"Map"),tn=Za(e,"Promise"),en=Za(e,"Set"),on=Za(e,"WeakMap"),an=Za(ne,"create"),cn=on&&new on,ln={},dn=Ps(Je),hn=Ps(Ke),An=Ps(tn),kn=Ps(en),jn=Ps(on),hi=me?me.prototype:o,yi=hi?hi.valueOf:o,_i=hi?hi.toString:o;function bi(t){if(Iu(t)&&!au(t)&&!(t instanceof Ti)){if(t instanceof Si)return t;if(de.call(t,"__wrapped__"))return As(t)}return new Si(t)}var wi=function(){function t(){}return function(e){if(!wu(e))return{};if(Ie)return Ie(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Ii(){}function Si(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Ti(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Ci(){var t=new Ti(this.__wrapped__);return t.__actions__=na(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=na(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=na(this.__views__),t}function Mi(){if(this.__filtered__){var t=new Ti(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Di(){var t=this.__wrapped__.value(),e=this.__dir__,n=au(t),i=e<0,r=n?t.length:0,o=$a(0,r,this.__views__),a=o.start,s=o.end,c=s-a,l=i?s:a-1,u=this.__iteratees__,d=u.length,h=0,f=Fe(c,this.__takeCount__);if(!n||!i&&r==c&&f==c)return Vo(t,this.__actions__);var g=[];t:while(c--&&h<f){l+=e;var p=-1,v=t[l];while(++p<d){var y=u[p],_=y.iteratee,m=y.type,b=_(v);if(m==k)v=b;else if(!b){if(m==A)continue t;break t}}g[h++]=v}return g}function Ei(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}function Pi(){this.__data__=an?an(null):{},this.size=0}function Oi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ai(t){var e=this.__data__;if(an){var n=e[t];return n===u?o:n}return de.call(e,t)?e[t]:o}function ki(t){var e=this.__data__;return an?e[t]!==o:de.call(e,t)}function Ri(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=an&&e===o?u:e,this}function zi(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}function Ni(){this.__data__=[],this.size=0}function Vi(t){var e=this.__data__,n=cr(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Te.call(e,n,1),--this.size,!0}function Li(t){var e=this.__data__,n=cr(e,t);return n<0?o:e[n][1]}function Bi(t){return cr(this.__data__,t)>-1}function Gi(t,e){var n=this.__data__,i=cr(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function Fi(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}function ji(){this.size=0,this.__data__={hash:new Ei,map:new(Ke||zi),string:new Ei}}function Hi(t){var e=Ha(this,t)["delete"](t);return this.size-=e?1:0,e}function Ui(t){return Ha(this,t).get(t)}function Zi(t){return Ha(this,t).has(t)}function Wi(t,e){var n=Ha(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function qi(t){var e=-1,n=null==t?0:t.length;this.__data__=new Fi;while(++e<n)this.add(t[e])}function Xi(t){return this.__data__.set(t,u),this}function Yi(t){return this.__data__.has(t)}function $i(t){var e=this.__data__=new zi(t);this.size=e.size}function Qi(){this.__data__=new zi,this.size=0}function Ji(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function Ki(t){return this.__data__.get(t)}function tr(t){return this.__data__.has(t)}function er(t,e){var n=this.__data__;if(n instanceof zi){var i=n.__data__;if(!Ke||i.length<s-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fi(i)}return n.set(t,e),this.size=n.size,this}function nr(t,e){var n=au(t),i=!n&&ou(t),r=!n&&!i&&du(t),o=!n&&!i&&!r&&Lu(t),a=n||i||r||o,s=a?Wn(t.length,re):[],c=s.length;for(var l in t)!e&&!de.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||rs(l,c))||s.push(l);return s}function ir(t){var e=t.length;return e?t[vo(0,e-1)]:o}function rr(t,e){return Ms(na(t),gr(e,0,t.length))}function or(t){return Ms(na(t))}function ar(t,e,n){(n!==o&&!nu(t[e],n)||n===o&&!(e in t))&&hr(t,e,n)}function sr(t,e,n){var i=t[e];de.call(t,e)&&nu(i,n)&&(n!==o||e in t)||hr(t,e,n)}function cr(t,e){var n=t.length;while(n--)if(nu(t[n][0],e))return n;return-1}function lr(t,e,n,i){return br(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ur(t,e){return t&&ia(e,bd(e),t)}function dr(t,e){return t&&ia(e,xd(e),t)}function hr(t,e,n){"__proto__"==e&&Ee?Ee(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function fr(t,e){var i=-1,r=e.length,a=n(r),s=null==t;while(++i<r)a[i]=s?o:gd(t,e[i]);return a}function gr(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function pr(t,e,n,i,r,a){var s,c=e&f,l=e&g,u=e&p;if(n&&(s=r?n(t,i,r,a):n(t)),s!==o)return s;if(!wu(t))return t;var d=au(t);if(d){if(s=Ka(t),!c)return na(t,s)}else{var h=Ya(t),v=h==$||h==Q;if(du(t))return Wo(t,c);if(h==et||h==H||v&&!r){if(s=l||v?{}:ts(t),!c)return l?oa(t,dr(s,t)):ra(t,ur(s,t))}else{if(!Qe[h])return r?t:{};s=es(t,h,c)}}a||(a=new $i);var y=a.get(t);if(y)return y;a.set(t,s),zu(t)?t.forEach((function(i){s.add(pr(i,e,n,i,t,a))})):Su(t)&&t.forEach((function(i,r){s.set(r,pr(i,e,n,r,t,a))}));var _=u?l?La:Va:l?xd:bd,m=d?o:_(t);return xn(m||t,(function(i,r){m&&(r=i,i=t[r]),sr(s,r,pr(i,e,n,r,t,a))})),s}function vr(t){var e=bd(t);return function(n){return yr(n,t,e)}}function yr(t,e,n){var i=n.length;if(null==t)return!i;t=ne(t);while(i--){var r=n[i],a=e[r],s=t[r];if(s===o&&!(r in t)||!a(s))return!1}return!0}function _r(t,e,n){if("function"!=typeof t)throw new oe(l);return Is((function(){t.apply(o,n)}),e)}function mr(t,e,n,i){var r=-1,o=Tn,a=!0,c=t.length,l=[],u=e.length;if(!c)return l;n&&(e=Mn(e,Xn(n))),i?(o=Cn,a=!1):e.length>=s&&(o=$n,a=!1,e=new qi(e));t:while(++r<c){var d=t[r],h=null==n?d:n(d);if(d=i||0!==d?d:0,a&&h===h){var f=u;while(f--)if(e[f]===h)continue t;l.push(d)}else o(e,h,i)||l.push(d)}return l}bi.templateSettings={escape:Et,evaluate:Pt,interpolate:Ot,variable:"",imports:{_:bi}},bi.prototype=Ii.prototype,bi.prototype.constructor=bi,Si.prototype=wi(Ii.prototype),Si.prototype.constructor=Si,Ti.prototype=wi(Ii.prototype),Ti.prototype.constructor=Ti,Ei.prototype.clear=Pi,Ei.prototype["delete"]=Oi,Ei.prototype.get=Ai,Ei.prototype.has=ki,Ei.prototype.set=Ri,zi.prototype.clear=Ni,zi.prototype["delete"]=Vi,zi.prototype.get=Li,zi.prototype.has=Bi,zi.prototype.set=Gi,Fi.prototype.clear=ji,Fi.prototype["delete"]=Hi,Fi.prototype.get=Ui,Fi.prototype.has=Zi,Fi.prototype.set=Wi,qi.prototype.add=qi.prototype.push=Xi,qi.prototype.has=Yi,$i.prototype.clear=Qi,$i.prototype["delete"]=Ji,$i.prototype.get=Ki,$i.prototype.has=tr,$i.prototype.set=er;var br=ca(Er),xr=ca(Pr,!0);function wr(t,e){var n=!0;return br(t,(function(t,i,r){return n=!!e(t,i,r),n})),n}function Ir(t,e,n){var i=-1,r=t.length;while(++i<r){var a=t[i],s=e(a);if(null!=s&&(c===o?s===s&&!Vu(s):n(s,c)))var c=s,l=a}return l}function Sr(t,e,n,i){var r=t.length;n=Wu(n),n<0&&(n=-n>r?0:r+n),i=i===o||i>r?r:Wu(i),i<0&&(i+=r),i=n>i?0:qu(i);while(n<i)t[n++]=e;return t}function Tr(t,e){var n=[];return br(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Cr(t,e,n,i,r){var o=-1,a=t.length;n||(n=is),r||(r=[]);while(++o<a){var s=t[o];e>0&&n(s)?e>1?Cr(s,e-1,n,i,r):Dn(r,s):i||(r[r.length]=s)}return r}var Mr=la(),Dr=la(!0);function Er(t,e){return t&&Mr(t,e,bd)}function Pr(t,e){return t&&Dr(t,e,bd)}function Or(t,e){return Sn(e,(function(e){return mu(t[e])}))}function Ar(t,e){e=jo(e,t);var n=0,i=e.length;while(null!=t&&n<i)t=t[Es(e[n++])];return n&&n==i?t:o}function kr(t,e,n){var i=e(t);return au(t)?i:Dn(i,n(t))}function Rr(t){return null==t?t===o?ct:tt:De&&De in ne(t)?Wa(t):ys(t)}function zr(t,e){return t>e}function Nr(t,e){return null!=t&&de.call(t,e)}function Vr(t,e){return null!=t&&e in ne(t)}function Lr(t,e,n){return t>=Fe(e,n)&&t<Ge(e,n)}function Br(t,e,i){var r=i?Cn:Tn,a=t[0].length,s=t.length,c=s,l=n(s),u=1/0,d=[];while(c--){var h=t[c];c&&e&&(h=Mn(h,Xn(e))),u=Fe(h.length,u),l[c]=!i&&(e||a>=120&&h.length>=120)?new qi(c&&h):o}h=t[0];var f=-1,g=l[0];t:while(++f<a&&d.length<u){var p=h[f],v=e?e(p):p;if(p=i||0!==p?p:0,!(g?$n(g,v):r(d,v,i))){c=s;while(--c){var y=l[c];if(!(y?$n(y,v):r(t[c],v,i)))continue t}g&&g.push(v),d.push(p)}}return d}function Gr(t,e,n,i){return Er(t,(function(t,r,o){e(i,n(t),r,o)})),i}function Fr(t,e,n){e=jo(e,t),t=ms(t,e);var i=null==t?t:t[Es(ic(e))];return null==i?o:mn(i,t,n)}function jr(t){return Iu(t)&&Rr(t)==H}function Hr(t){return Iu(t)&&Rr(t)==dt}function Ur(t){return Iu(t)&&Rr(t)==q}function Zr(t,e,n,i,r){return t===e||(null==t||null==e||!Iu(t)&&!Iu(e)?t!==t&&e!==e:Wr(t,e,n,i,Zr,r))}function Wr(t,e,n,i,r,o){var a=au(t),s=au(e),c=a?U:Ya(t),l=s?U:Ya(e);c=c==H?et:c,l=l==H?et:l;var u=c==et,d=l==et,h=c==l;if(h&&du(t)){if(!du(e))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new $i),a||Lu(t)?ka(t,e,n,i,r,o):Ra(t,e,c,n,i,r,o);if(!(n&v)){var f=u&&de.call(t,"__wrapped__"),g=d&&de.call(e,"__wrapped__");if(f||g){var p=f?t.value():t,y=g?e.value():e;return o||(o=new $i),r(p,y,n,i,o)}}return!!h&&(o||(o=new $i),za(t,e,n,i,r,o))}function qr(t){return Iu(t)&&Ya(t)==J}function Xr(t,e,n,i){var r=n.length,a=r,s=!i;if(null==t)return!a;t=ne(t);while(r--){var c=n[r];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}while(++r<a){c=n[r];var l=c[0],u=t[l],d=c[1];if(s&&c[2]){if(u===o&&!(l in t))return!1}else{var h=new $i;if(i)var f=i(u,d,l,t,e,h);if(!(f===o?Zr(d,u,v|y,i,h):f))return!1}}return!0}function Yr(t){if(!wu(t)||ls(t))return!1;var e=mu(t)?ye:Yt;return e.test(Ps(t))}function $r(t){return Iu(t)&&Rr(t)==rt}function Qr(t){return Iu(t)&&Ya(t)==ot}function Jr(t){return Iu(t)&&xu(t.length)&&!!$e[Rr(t)]}function Kr(t){return"function"==typeof t?t:null==t?Dh:"object"==typeof t?au(t)?oo(t[0],t[1]):ro(t):Fh(t)}function to(t){if(!ds(t))return Be(t);var e=[];for(var n in ne(t))de.call(t,n)&&"constructor"!=n&&e.push(n);return e}function eo(t){if(!wu(t))return vs(t);var e=ds(t),n=[];for(var i in t)("constructor"!=i||!e&&de.call(t,i))&&n.push(i);return n}function no(t,e){return t<e}function io(t,e){var i=-1,r=cu(t)?n(t.length):[];return br(t,(function(t,n,o){r[++i]=e(t,n,o)})),r}function ro(t){var e=Ua(t);return 1==e.length&&e[0][2]?fs(e[0][0],e[0][1]):function(n){return n===t||Xr(n,t,e)}}function oo(t,e){return as(t)&&hs(e)?fs(Es(t),e):function(n){var i=gd(n,t);return i===o&&i===e?vd(n,t):Zr(e,i,v|y)}}function ao(t,e,n,i,r){t!==e&&Mr(e,(function(a,s){if(r||(r=new $i),wu(a))so(t,e,s,n,ao,i,r);else{var c=i?i(xs(t,s),a,s+"",t,e,r):o;c===o&&(c=a),ar(t,s,c)}}),xd)}function so(t,e,n,i,r,a,s){var c=xs(t,n),l=xs(e,n),u=s.get(l);if(u)ar(t,n,u);else{var d=a?a(c,l,n+"",t,e,s):o,h=d===o;if(h){var f=au(l),g=!f&&du(l),p=!f&&!g&&Lu(l);d=l,f||g||p?au(c)?d=c:lu(c)?d=na(c):g?(h=!1,d=Wo(l,!0)):p?(h=!1,d=Qo(l,!0)):d=[]:Au(l)||ou(l)?(d=c,ou(c)?d=Yu(c):wu(c)&&!mu(c)||(d=ts(l))):h=!1}h&&(s.set(l,d),r(d,l,i,a,s),s["delete"](l)),ar(t,n,d)}}function co(t,e){var n=t.length;if(n)return e+=e<0?n:0,rs(e,n)?t[e]:o}function lo(t,e,n){var i=-1;e=Mn(e.length?e:[Dh],Xn(ja()));var r=io(t,(function(t,n,r){var o=Mn(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return Un(r,(function(t,e){return Ko(t,e,n)}))}function uo(t,e){return ho(t,e,(function(e,n){return vd(t,n)}))}function ho(t,e,n){var i=-1,r=e.length,o={};while(++i<r){var a=e[i],s=Ar(t,a);n(s,a)&&wo(o,jo(a,t),s)}return o}function fo(t){return function(e){return Ar(e,t)}}function go(t,e,n,i){var r=i?Ln:Vn,o=-1,a=e.length,s=t;t===e&&(e=na(e)),n&&(s=Mn(t,Xn(n)));while(++o<a){var c=0,l=e[o],u=n?n(l):l;while((c=r(s,u,c,i))>-1)s!==t&&Te.call(s,c,1),Te.call(t,c,1)}return t}function po(t,e){var n=t?e.length:0,i=n-1;while(n--){var r=e[n];if(n==i||r!==o){var o=r;rs(r)?Te.call(t,r,1):Ro(t,r)}}return t}function vo(t,e){return t+Re(We()*(e-t+1))}function yo(t,e,i,r){var o=-1,a=Ge(ke((e-t)/(i||1)),0),s=n(a);while(a--)s[r?a:++o]=t,t+=i;return s}function _o(t,e){var n="";if(!t||e<1||e>N)return n;do{e%2&&(n+=t),e=Re(e/2),e&&(t+=t)}while(e);return n}function mo(t,e){return Ss(_s(t,e,Dh),t+"")}function bo(t){return ir(Bd(t))}function xo(t,e){var n=Bd(t);return Ms(n,gr(e,0,n.length))}function wo(t,e,n,i){if(!wu(t))return t;e=jo(e,t);var r=-1,a=e.length,s=a-1,c=t;while(null!=c&&++r<a){var l=Es(e[r]),u=n;if(r!=s){var d=c[l];u=i?i(d,l,c):o,u===o&&(u=wu(d)?d:rs(e[r+1])?[]:{})}sr(c,l,u),c=c[l]}return t}var Io=cn?function(t,e){return cn.set(t,e),t}:Dh,So=Ee?function(t,e){return Ee(t,"toString",{configurable:!0,enumerable:!1,value:Sh(e),writable:!0})}:Dh;function To(t){return Ms(Bd(t))}function Co(t,e,i){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),i=i>o?o:i,i<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;var a=n(o);while(++r<o)a[r]=t[r+e];return a}function Mo(t,e){var n;return br(t,(function(t,i,r){return n=e(t,i,r),!n})),!!n}function Do(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=F){while(i<r){var o=i+r>>>1,a=t[o];null!==a&&!Vu(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return Eo(t,e,Dh,n)}function Eo(t,e,n,i){e=n(e);var r=0,a=null==t?0:t.length,s=e!==e,c=null===e,l=Vu(e),u=e===o;while(r<a){var d=Re((r+a)/2),h=n(t[d]),f=h!==o,g=null===h,p=h===h,v=Vu(h);if(s)var y=i||p;else y=u?p&&(i||f):c?p&&f&&(i||!g):l?p&&f&&!g&&(i||!v):!g&&!v&&(i?h<=e:h<e);y?r=d+1:a=d}return Fe(a,G)}function Po(t,e){var n=-1,i=t.length,r=0,o=[];while(++n<i){var a=t[n],s=e?e(a):a;if(!n||!nu(s,c)){var c=s;o[r++]=0===a?0:a}}return o}function Oo(t){return"number"==typeof t?t:Vu(t)?L:+t}function Ao(t){if("string"==typeof t)return t;if(au(t))return Mn(t,Ao)+"";if(Vu(t))return _i?_i.call(t):"";var e=t+"";return"0"==e&&1/t==-z?"-0":e}function ko(t,e,n){var i=-1,r=Tn,o=t.length,a=!0,c=[],l=c;if(n)a=!1,r=Cn;else if(o>=s){var u=e?null:Ma(t);if(u)return ui(u);a=!1,r=$n,l=new qi}else l=e?[]:c;t:while(++i<o){var d=t[i],h=e?e(d):d;if(d=n||0!==d?d:0,a&&h===h){var f=l.length;while(f--)if(l[f]===h)continue t;e&&l.push(h),c.push(d)}else r(l,h,n)||(l!==c&&l.push(h),c.push(d))}return c}function Ro(t,e){return e=jo(e,t),t=ms(t,e),null==t||delete t[Es(ic(e))]}function zo(t,e,n,i){return wo(t,e,n(Ar(t,e)),i)}function No(t,e,n,i){var r=t.length,o=i?r:-1;while((i?o--:++o<r)&&e(t[o],o,t));return n?Co(t,i?0:o,i?o+1:r):Co(t,i?o+1:0,i?r:o)}function Vo(t,e){var n=t;return n instanceof Ti&&(n=n.value()),En(e,(function(t,e){return e.func.apply(e.thisArg,Dn([t],e.args))}),n)}function Lo(t,e,i){var r=t.length;if(r<2)return r?ko(t[0]):[];var o=-1,a=n(r);while(++o<r){var s=t[o],c=-1;while(++c<r)c!=o&&(a[o]=mr(a[o]||s,t[c],e,i))}return ko(Cr(a,1),e,i)}function Bo(t,e,n){var i=-1,r=t.length,a=e.length,s={};while(++i<r){var c=i<a?e[i]:o;n(s,t[i],c)}return s}function Go(t){return lu(t)?t:[]}function Fo(t){return"function"==typeof t?t:Dh}function jo(t,e){return au(t)?t:as(t,e)?[t]:Ds(Qu(t))}var Ho=mo;function Uo(t,e,n){var i=t.length;return n=n===o?i:n,!e&&n>=i?t:Co(t,e,n)}var Zo=Pe||function(t){return sn.clearTimeout(t)};function Wo(t,e){if(e)return t.slice();var n=t.length,i=xe?xe(n):new t.constructor(n);return t.copy(i),i}function qo(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Xo(t,e){var n=e?qo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Yo(t){var e=new t.constructor(t.source,Wt.exec(t));return e.lastIndex=t.lastIndex,e}function $o(t){return yi?ne(yi.call(t)):{}}function Qo(t,e){var n=e?qo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Jo(t,e){if(t!==e){var n=t!==o,i=null===t,r=t===t,a=Vu(t),s=e!==o,c=null===e,l=e===e,u=Vu(e);if(!c&&!u&&!a&&t>e||a&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||c&&n&&r||!s&&r||!l)return-1}return 0}function Ko(t,e,n){var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;while(++i<a){var c=Jo(r[i],o[i]);if(c){if(i>=s)return c;var l=n[i];return c*("desc"==l?-1:1)}}return t.index-e.index}function ta(t,e,i,r){var o=-1,a=t.length,s=i.length,c=-1,l=e.length,u=Ge(a-s,0),d=n(l+u),h=!r;while(++c<l)d[c]=e[c];while(++o<s)(h||o<a)&&(d[i[o]]=t[o]);while(u--)d[c++]=t[o++];return d}function ea(t,e,i,r){var o=-1,a=t.length,s=-1,c=i.length,l=-1,u=e.length,d=Ge(a-c,0),h=n(d+u),f=!r;while(++o<d)h[o]=t[o];var g=o;while(++l<u)h[g+l]=e[l];while(++s<c)(f||o<a)&&(h[g+i[s]]=t[o++]);return h}function na(t,e){var i=-1,r=t.length;e||(e=n(r));while(++i<r)e[i]=t[i];return e}function ia(t,e,n,i){var r=!n;n||(n={});var a=-1,s=e.length;while(++a<s){var c=e[a],l=i?i(n[c],t[c],c,n,t):o;l===o&&(l=t[c]),r?hr(n,c,l):sr(n,c,l)}return n}function ra(t,e){return ia(t,qa(t),e)}function oa(t,e){return ia(t,Xa(t),e)}function aa(t,e){return function(n,i){var r=au(n)?bn:lr,o=e?e():{};return r(n,t,ja(i,2),o)}}function sa(t){return mo((function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:o,s=r>2?n[2]:o;a=t.length>3&&"function"==typeof a?(r--,a):o,s&&os(n[0],n[1],s)&&(a=r<3?o:a,r=1),e=ne(e);while(++i<r){var c=n[i];c&&t(e,c,i,a)}return e}))}function ca(t,e){return function(n,i){if(null==n)return n;if(!cu(n))return t(n,i);var r=n.length,o=e?r:-1,a=ne(n);while(e?o--:++o<r)if(!1===i(a[o],o,a))break;return n}}function la(t){return function(e,n,i){var r=-1,o=ne(e),a=i(e),s=a.length;while(s--){var c=a[t?s:++r];if(!1===n(o[c],c,o))break}return e}}function ua(t,e,n){var i=e&_,r=fa(t);function o(){var e=this&&this!==sn&&this instanceof o?r:t;return e.apply(i?n:this,arguments)}return o}function da(t){return function(e){e=Qu(e);var n=ri(e)?pi(e):o,i=n?n[0]:e.charAt(0),r=n?Uo(n,1).join(""):e.slice(1);return i[t]()+r}}function ha(t){return function(e){return En(mh(Wd(e).replace(je,"")),t,"")}}function fa(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=wi(t.prototype),i=t.apply(n,e);return wu(i)?i:n}}function ga(t,e,i){var r=fa(t);function a(){var s=arguments.length,c=n(s),l=s,u=Fa(a);while(l--)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:li(c,u);if(s-=d.length,s<i)return Ta(t,e,ya,a.placeholder,o,c,d,o,o,i-s);var h=this&&this!==sn&&this instanceof a?r:t;return mn(h,this,c)}return a}function pa(t){return function(e,n,i){var r=ne(e);if(!cu(e)){var a=ja(n,3);e=bd(e),n=function(t){return a(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[a?e[s]:s]:o}}function va(t){return Na((function(e){var n=e.length,i=n,r=Si.prototype.thru;t&&e.reverse();while(i--){var a=e[i];if("function"!=typeof a)throw new oe(l);if(r&&!s&&"wrapper"==Ga(a))var s=new Si([],!0)}i=s?i:n;while(++i<n){a=e[i];var c=Ga(a),u="wrapper"==c?Ba(a):o;s=u&&cs(u[0])&&u[1]==(T|x|I|C)&&!u[4].length&&1==u[9]?s[Ga(u[0])].apply(s,u[3]):1==a.length&&cs(a)?s[c]():s.thru(a)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&au(i))return s.plant(i).value();var r=0,o=n?e[r].apply(this,t):i;while(++r<n)o=e[r].call(this,o);return o}}))}function ya(t,e,i,r,a,s,c,l,u,d){var h=e&T,f=e&_,g=e&m,p=e&(x|w),v=e&M,y=g?o:fa(t);function b(){var o=arguments.length,_=n(o),m=o;while(m--)_[m]=arguments[m];if(p)var x=Fa(b),w=Kn(_,x);if(r&&(_=ta(_,r,a,p)),s&&(_=ea(_,s,c,p)),o-=w,p&&o<d){var I=li(_,x);return Ta(t,e,ya,b.placeholder,i,_,I,l,u,d-o)}var S=f?i:this,T=g?S[t]:t;return o=_.length,l?_=bs(_,l):v&&o>1&&_.reverse(),h&&u<o&&(_.length=u),this&&this!==sn&&this instanceof b&&(T=y||fa(T)),T.apply(S,_)}return b}function _a(t,e){return function(n,i){return Gr(n,t,e(i),{})}}function ma(t,e){return function(n,i){var r;if(n===o&&i===o)return e;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=Ao(n),i=Ao(i)):(n=Oo(n),i=Oo(i)),r=t(n,i)}return r}}function ba(t){return Na((function(e){return e=Mn(e,Xn(ja())),mo((function(n){var i=this;return t(e,(function(t){return mn(t,i,n)}))}))}))}function xa(t,e){e=e===o?" ":Ao(e);var n=e.length;if(n<2)return n?_o(e,t):e;var i=_o(e,ke(t/gi(e)));return ri(e)?Uo(pi(i),0,t).join(""):i.slice(0,t)}function wa(t,e,i,r){var o=e&_,a=fa(t);function s(){var e=-1,c=arguments.length,l=-1,u=r.length,d=n(u+c),h=this&&this!==sn&&this instanceof s?a:t;while(++l<u)d[l]=r[l];while(c--)d[l++]=arguments[++e];return mn(h,o?i:this,d)}return s}function Ia(t){return function(e,n,i){return i&&"number"!=typeof i&&os(e,n,i)&&(n=i=o),e=Zu(e),n===o?(n=e,e=0):n=Zu(n),i=i===o?e<n?1:-1:Zu(i),yo(e,n,i,t)}}function Sa(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Xu(e),n=Xu(n)),t(e,n)}}function Ta(t,e,n,i,r,a,s,c,l,u){var d=e&x,h=d?s:o,f=d?o:s,g=d?a:o,p=d?o:a;e|=d?I:S,e&=~(d?S:I),e&b||(e&=~(_|m));var v=[t,e,r,g,h,p,f,c,l,u],y=n.apply(o,v);return cs(t)&&ws(y,v),y.placeholder=i,Ts(y,t,e)}function Ca(t){var e=ee[t];return function(t,n){if(t=Xu(t),n=null==n?0:Fe(Wu(n),292),n&&Ve(t)){var i=(Qu(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Qu(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}var Ma=en&&1/ui(new en([,-0]))[1]==z?function(t){return new en(t)}:Nh;function Da(t){return function(e){var n=Ya(e);return n==J?si(e):n==ot?di(e):qn(e,t(e))}}function Ea(t,e,n,i,r,a,s,c){var u=e&m;if(!u&&"function"!=typeof t)throw new oe(l);var d=i?i.length:0;if(d||(e&=~(I|S),i=r=o),s=s===o?s:Ge(Wu(s),0),c=c===o?c:Wu(c),d-=r?r.length:0,e&S){var h=i,f=r;i=r=o}var g=u?o:Ba(t),p=[t,e,n,i,r,h,f,a,s,c];if(g&&ps(p,g),t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],c=p[9]=p[9]===o?u?0:t.length:Ge(p[9]-d,0),!c&&e&(x|w)&&(e&=~(x|w)),e&&e!=_)v=e==x||e==w?ga(t,e,c):e!=I&&e!=(_|I)||r.length?ya.apply(o,p):wa(t,e,n,i);else var v=ua(t,e,n);var y=g?Io:ws;return Ts(y(v,p),t,e)}function Pa(t,e,n,i){return t===o||nu(t,ce[n])&&!de.call(i,n)?e:t}function Oa(t,e,n,i,r,a){return wu(t)&&wu(e)&&(a.set(e,t),ao(t,e,o,Oa,a),a["delete"](e)),t}function Aa(t){return Au(t)?o:t}function ka(t,e,n,i,r,a){var s=n&v,c=t.length,l=e.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var d=-1,h=!0,f=n&y?new qi:o;a.set(t,e),a.set(e,t);while(++d<c){var g=t[d],p=e[d];if(i)var _=s?i(p,g,d,e,t,a):i(g,p,d,t,e,a);if(_!==o){if(_)continue;h=!1;break}if(f){if(!On(e,(function(t,e){if(!$n(f,e)&&(g===t||r(g,t,n,i,a)))return f.push(e)}))){h=!1;break}}else if(g!==p&&!r(g,p,n,i,a)){h=!1;break}}return a["delete"](t),a["delete"](e),h}function Ra(t,e,n,i,r,o,a){switch(n){case ht:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case dt:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case W:case q:case K:return nu(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case rt:case at:return t==e+"";case J:var s=si;case ot:var c=i&v;if(s||(s=ui),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;i|=y,a.set(t,e);var u=ka(s(t),s(e),i,r,o,a);return a["delete"](t),u;case st:if(yi)return yi.call(t)==yi.call(e)}return!1}function za(t,e,n,i,r,a){var s=n&v,c=Va(t),l=c.length,u=Va(e),d=u.length;if(l!=d&&!s)return!1;var h=l;while(h--){var f=c[h];if(!(s?f in e:de.call(e,f)))return!1}var g=a.get(t);if(g&&a.get(e))return g==e;var p=!0;a.set(t,e),a.set(e,t);var y=s;while(++h<l){f=c[h];var _=t[f],m=e[f];if(i)var b=s?i(m,_,f,e,t,a):i(_,m,f,t,e,a);if(!(b===o?_===m||r(_,m,n,i,a):b)){p=!1;break}y||(y="constructor"==f)}if(p&&!y){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(p=!1)}return a["delete"](t),a["delete"](e),p}function Na(t){return Ss(_s(t,o,Ws),t+"")}function Va(t){return kr(t,bd,qa)}function La(t){return kr(t,xd,Xa)}var Ba=cn?function(t){return cn.get(t)}:Nh;function Ga(t){var e=t.name+"",n=ln[e],i=de.call(ln,e)?n.length:0;while(i--){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Fa(t){var e=de.call(bi,"placeholder")?bi:t;return e.placeholder}function ja(){var t=bi.iteratee||Eh;return t=t===Eh?Kr:t,arguments.length?t(arguments[0],arguments[1]):t}function Ha(t,e){var n=t.__data__;return ss(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ua(t){var e=bd(t),n=e.length;while(n--){var i=e[n],r=t[i];e[n]=[i,r,hs(r)]}return e}function Za(t,e){var n=ii(t,e);return Yr(n)?n:o}function Wa(t){var e=de.call(t,De),n=t[De];try{t[De]=o;var i=!0}catch(a){}var r=ge.call(t);return i&&(e?t[De]=n:delete t[De]),r}var qa=ze?function(t){return null==t?[]:(t=ne(t),Sn(ze(t),(function(e){return Se.call(t,e)})))}:Zh,Xa=ze?function(t){var e=[];while(t)Dn(e,qa(t)),t=we(t);return e}:Zh,Ya=Rr;function $a(t,e,n){var i=-1,r=n.length;while(++i<r){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Fe(e,t+a);break;case"takeRight":t=Ge(t,e-a);break}}return{start:t,end:e}}function Qa(t){var e=t.match(Ft);return e?e[1].split(jt):[]}function Ja(t,e,n){e=jo(e,t);var i=-1,r=e.length,o=!1;while(++i<r){var a=Es(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:(r=null==t?0:t.length,!!r&&xu(r)&&rs(a,r)&&(au(t)||ou(t)))}function Ka(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&de.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ts(t){return"function"!=typeof t.constructor||ds(t)?{}:wi(we(t))}function es(t,e,n){var i=t.constructor;switch(e){case dt:return qo(t);case W:case q:return new i(+t);case ht:return Xo(t,n);case ft:case gt:case pt:case vt:case yt:case _t:case mt:case bt:case xt:return Qo(t,n);case J:return new i;case K:case at:return new i(t);case rt:return Yo(t);case ot:return new i;case st:return $o(t)}}function ns(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Gt,"{\n/* [wrapped with "+e+"] */\n")}function is(t){return au(t)||ou(t)||!!(Ce&&t&&t[Ce])}function rs(t,e){var n=typeof t;return e=null==e?N:e,!!e&&("number"==n||"symbol"!=n&&Qt.test(t))&&t>-1&&t%1==0&&t<e}function os(t,e,n){if(!wu(n))return!1;var i=typeof e;return!!("number"==i?cu(n)&&rs(e,n.length):"string"==i&&e in n)&&nu(n[e],t)}function as(t,e){if(au(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Vu(t))||(kt.test(t)||!At.test(t)||null!=e&&t in ne(e))}function ss(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function cs(t){var e=Ga(t),n=bi[e];if("function"!=typeof n||!(e in Ti.prototype))return!1;if(t===n)return!0;var i=Ba(n);return!!i&&t===i[0]}function ls(t){return!!fe&&fe in t}(Je&&Ya(new Je(new ArrayBuffer(1)))!=ht||Ke&&Ya(new Ke)!=J||tn&&Ya(tn.resolve())!=nt||en&&Ya(new en)!=ot||on&&Ya(new on)!=lt)&&(Ya=function(t){var e=Rr(t),n=e==et?t.constructor:o,i=n?Ps(n):"";if(i)switch(i){case dn:return ht;case hn:return J;case An:return nt;case kn:return ot;case jn:return lt}return e});var us=le?mu:Wh;function ds(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ce;return t===n}function hs(t){return t===t&&!wu(t)}function fs(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in ne(n)))}}function gs(t){var e=Ll(t,(function(t){return n.size===d&&n.clear(),t})),n=e.cache;return e}function ps(t,e){var n=t[1],i=e[1],r=n|i,o=r<(_|m|T),a=i==T&&n==x||i==T&&n==C&&t[7].length<=e[8]||i==(T|C)&&e[7].length<=e[8]&&n==x;if(!o&&!a)return t;i&_&&(t[2]=e[2],r|=n&_?0:b);var s=e[3];if(s){var c=t[3];t[3]=c?ta(c,s,e[4]):s,t[4]=c?li(t[3],h):e[4]}return s=e[5],s&&(c=t[5],t[5]=c?ea(c,s,e[6]):s,t[6]=c?li(t[5],h):e[6]),s=e[7],s&&(t[7]=s),i&T&&(t[8]=null==t[8]?e[8]:Fe(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function vs(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}function ys(t){return ge.call(t)}function _s(t,e,i){return e=Ge(e===o?t.length-1:e,0),function(){var r=arguments,o=-1,a=Ge(r.length-e,0),s=n(a);while(++o<a)s[o]=r[e+o];o=-1;var c=n(e+1);while(++o<e)c[o]=r[o];return c[e]=i(s),mn(t,this,c)}}function ms(t,e){return e.length<2?t:Ar(t,Co(e,0,-1))}function bs(t,e){var n=t.length,i=Fe(e.length,n),r=na(t);while(i--){var a=e[i];t[i]=rs(a,n)?r[a]:o}return t}function xs(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var ws=Cs(Io),Is=Ae||function(t,e){return sn.setTimeout(t,e)},Ss=Cs(So);function Ts(t,e,n){var i=e+"";return Ss(t,ns(i,Os(Qa(i),n)))}function Cs(t){var e=0,n=0;return function(){var i=Ue(),r=O-(i-n);if(n=i,r>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ms(t,e){var n=-1,i=t.length,r=i-1;e=e===o?i:e;while(++n<e){var a=vo(n,r),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ds=gs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Rt,(function(t,n,i,r){e.push(i?r.replace(Ut,"$1"):n||t)})),e}));function Es(t){if("string"==typeof t||Vu(t))return t;var e=t+"";return"0"==e&&1/t==-z?"-0":e}function Ps(t){if(null!=t){try{return ue.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Os(t,e){return xn(j,(function(n){var i="_."+n[0];e&n[1]&&!Tn(t,i)&&t.push(i)})),t.sort()}function As(t){if(t instanceof Ti)return t.clone();var e=new Si(t.__wrapped__,t.__chain__);return e.__actions__=na(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ks(t,e,i){e=(i?os(t,e,i):e===o)?1:Ge(Wu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];var a=0,s=0,c=n(ke(r/e));while(a<r)c[s++]=Co(t,a,a+=e);return c}function Rs(t){var e=-1,n=null==t?0:t.length,i=0,r=[];while(++e<n){var o=t[e];o&&(r[i++]=o)}return r}function zs(){var t=arguments.length;if(!t)return[];var e=n(t-1),i=arguments[0],r=t;while(r--)e[r-1]=arguments[r];return Dn(au(i)?na(i):[i],Cr(e,1))}var Ns=mo((function(t,e){return lu(t)?mr(t,Cr(e,1,lu,!0)):[]})),Vs=mo((function(t,e){var n=ic(e);return lu(n)&&(n=o),lu(t)?mr(t,Cr(e,1,lu,!0),ja(n,2)):[]})),Ls=mo((function(t,e){var n=ic(e);return lu(n)&&(n=o),lu(t)?mr(t,Cr(e,1,lu,!0),o,n):[]}));function Bs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===o?1:Wu(e),Co(t,e<0?0:e,i)):[]}function Gs(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===o?1:Wu(e),e=i-e,Co(t,0,e<0?0:e)):[]}function Fs(t,e){return t&&t.length?No(t,ja(e,3),!0,!0):[]}function js(t,e){return t&&t.length?No(t,ja(e,3),!0):[]}function Hs(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&os(t,e,n)&&(n=0,i=r),Sr(t,e,n,i)):[]}function Us(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Wu(n);return r<0&&(r=Ge(i+r,0)),Nn(t,ja(e,3),r)}function Zs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==o&&(r=Wu(n),r=n<0?Ge(i+r,0):Fe(r,i-1)),Nn(t,ja(e,3),r,!0)}function Ws(t){var e=null==t?0:t.length;return e?Cr(t,1):[]}function qs(t){var e=null==t?0:t.length;return e?Cr(t,z):[]}function Xs(t,e){var n=null==t?0:t.length;return n?(e=e===o?1:Wu(e),Cr(t,e)):[]}function Ys(t){var e=-1,n=null==t?0:t.length,i={};while(++e<n){var r=t[e];i[r[0]]=r[1]}return i}function $s(t){return t&&t.length?t[0]:o}function Qs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Wu(n);return r<0&&(r=Ge(i+r,0)),Vn(t,e,r)}function Js(t){var e=null==t?0:t.length;return e?Co(t,0,-1):[]}var Ks=mo((function(t){var e=Mn(t,Go);return e.length&&e[0]===t[0]?Br(e):[]})),tc=mo((function(t){var e=ic(t),n=Mn(t,Go);return e===ic(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Br(n,ja(e,2)):[]})),ec=mo((function(t){var e=ic(t),n=Mn(t,Go);return e="function"==typeof e?e:o,e&&n.pop(),n.length&&n[0]===t[0]?Br(n,o,e):[]}));function nc(t,e){return null==t?"":Le.call(t,e)}function ic(t){var e=null==t?0:t.length;return e?t[e-1]:o}function rc(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==o&&(r=Wu(n),r=r<0?Ge(i+r,0):Fe(r,i-1)),e===e?fi(t,e,r):Nn(t,Bn,r,!0)}function oc(t,e){return t&&t.length?co(t,Wu(e)):o}var ac=mo(sc);function sc(t,e){return t&&t.length&&e&&e.length?go(t,e):t}function cc(t,e,n){return t&&t.length&&e&&e.length?go(t,e,ja(n,2)):t}function lc(t,e,n){return t&&t.length&&e&&e.length?go(t,e,o,n):t}var uc=Na((function(t,e){var n=null==t?0:t.length,i=fr(t,e);return po(t,Mn(e,(function(t){return rs(t,n)?+t:t})).sort(Jo)),i}));function dc(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;e=ja(e,3);while(++i<o){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return po(t,r),n}function hc(t){return null==t?t:qe.call(t)}function fc(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&os(t,e,n)?(e=0,n=i):(e=null==e?0:Wu(e),n=n===o?i:Wu(n)),Co(t,e,n)):[]}function gc(t,e){return Do(t,e)}function pc(t,e,n){return Eo(t,e,ja(n,2))}function vc(t,e){var n=null==t?0:t.length;if(n){var i=Do(t,e);if(i<n&&nu(t[i],e))return i}return-1}function yc(t,e){return Do(t,e,!0)}function _c(t,e,n){return Eo(t,e,ja(n,2),!0)}function mc(t,e){var n=null==t?0:t.length;if(n){var i=Do(t,e,!0)-1;if(nu(t[i],e))return i}return-1}function bc(t){return t&&t.length?Po(t):[]}function xc(t,e){return t&&t.length?Po(t,ja(e,2)):[]}function wc(t){var e=null==t?0:t.length;return e?Co(t,1,e):[]}function Ic(t,e,n){return t&&t.length?(e=n||e===o?1:Wu(e),Co(t,0,e<0?0:e)):[]}function Sc(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===o?1:Wu(e),e=i-e,Co(t,e<0?0:e,i)):[]}function Tc(t,e){return t&&t.length?No(t,ja(e,3),!1,!0):[]}function Cc(t,e){return t&&t.length?No(t,ja(e,3)):[]}var Mc=mo((function(t){return ko(Cr(t,1,lu,!0))})),Dc=mo((function(t){var e=ic(t);return lu(e)&&(e=o),ko(Cr(t,1,lu,!0),ja(e,2))})),Ec=mo((function(t){var e=ic(t);return e="function"==typeof e?e:o,ko(Cr(t,1,lu,!0),o,e)}));function Pc(t){return t&&t.length?ko(t):[]}function Oc(t,e){return t&&t.length?ko(t,ja(e,2)):[]}function Ac(t,e){return e="function"==typeof e?e:o,t&&t.length?ko(t,o,e):[]}function kc(t){if(!t||!t.length)return[];var e=0;return t=Sn(t,(function(t){if(lu(t))return e=Ge(t.length,e),!0})),Wn(e,(function(e){return Mn(t,Fn(e))}))}function Rc(t,e){if(!t||!t.length)return[];var n=kc(t);return null==e?n:Mn(n,(function(t){return mn(e,o,t)}))}var zc=mo((function(t,e){return lu(t)?mr(t,e):[]})),Nc=mo((function(t){return Lo(Sn(t,lu))})),Vc=mo((function(t){var e=ic(t);return lu(e)&&(e=o),Lo(Sn(t,lu),ja(e,2))})),Lc=mo((function(t){var e=ic(t);return e="function"==typeof e?e:o,Lo(Sn(t,lu),o,e)})),Bc=mo(kc);function Gc(t,e){return Bo(t||[],e||[],sr)}function Fc(t,e){return Bo(t||[],e||[],wo)}var jc=mo((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,Rc(t,n)}));function Hc(t){var e=bi(t);return e.__chain__=!0,e}function Uc(t,e){return e(t),t}function Zc(t,e){return e(t)}var Wc=Na((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return fr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Ti&&rs(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Zc,args:[r],thisArg:o}),new Si(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(r)}));function qc(){return Hc(this)}function Xc(){return new Si(this.value(),this.__chain__)}function Yc(){this.__values__===o&&(this.__values__=Uu(this.value()));var t=this.__index__>=this.__values__.length,e=t?o:this.__values__[this.__index__++];return{done:t,value:e}}function $c(){return this}function Qc(t){var e,n=this;while(n instanceof Ii){var i=As(n);i.__index__=0,i.__values__=o,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e}function Jc(){var t=this.__wrapped__;if(t instanceof Ti){var e=t;return this.__actions__.length&&(e=new Ti(this)),e=e.reverse(),e.__actions__.push({func:Zc,args:[hc],thisArg:o}),new Si(e,this.__chain__)}return this.thru(hc)}function Kc(){return Vo(this.__wrapped__,this.__actions__)}var tl=aa((function(t,e,n){de.call(t,n)?++t[n]:hr(t,n,1)}));function el(t,e,n){var i=au(t)?In:wr;return n&&os(t,e,n)&&(e=o),i(t,ja(e,3))}function nl(t,e){var n=au(t)?Sn:Tr;return n(t,ja(e,3))}var il=pa(Us),rl=pa(Zs);function ol(t,e){return Cr(gl(t,e),1)}function al(t,e){return Cr(gl(t,e),z)}function sl(t,e,n){return n=n===o?1:Wu(n),Cr(gl(t,e),n)}function cl(t,e){var n=au(t)?xn:br;return n(t,ja(e,3))}function ll(t,e){var n=au(t)?wn:xr;return n(t,ja(e,3))}var ul=aa((function(t,e,n){de.call(t,n)?t[n].push(e):hr(t,n,[e])}));function dl(t,e,n,i){t=cu(t)?t:Bd(t),n=n&&!i?Wu(n):0;var r=t.length;return n<0&&(n=Ge(r+n,0)),Nu(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Vn(t,e,n)>-1}var hl=mo((function(t,e,i){var r=-1,o="function"==typeof e,a=cu(t)?n(t.length):[];return br(t,(function(t){a[++r]=o?mn(e,t,i):Fr(t,e,i)})),a})),fl=aa((function(t,e,n){hr(t,n,e)}));function gl(t,e){var n=au(t)?Mn:io;return n(t,ja(e,3))}function pl(t,e,n,i){return null==t?[]:(au(e)||(e=null==e?[]:[e]),n=i?o:n,au(n)||(n=null==n?[]:[n]),lo(t,e,n))}var vl=aa((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function yl(t,e,n){var i=au(t)?En:Hn,r=arguments.length<3;return i(t,ja(e,4),n,r,br)}function _l(t,e,n){var i=au(t)?Pn:Hn,r=arguments.length<3;return i(t,ja(e,4),n,r,xr)}function ml(t,e){var n=au(t)?Sn:Tr;return n(t,Bl(ja(e,3)))}function bl(t){var e=au(t)?ir:bo;return e(t)}function xl(t,e,n){e=(n?os(t,e,n):e===o)?1:Wu(e);var i=au(t)?rr:xo;return i(t,e)}function wl(t){var e=au(t)?or:To;return e(t)}function Il(t){if(null==t)return 0;if(cu(t))return Nu(t)?gi(t):t.length;var e=Ya(t);return e==J||e==ot?t.size:to(t).length}function Sl(t,e,n){var i=au(t)?On:Mo;return n&&os(t,e,n)&&(e=o),i(t,ja(e,3))}var Tl=mo((function(t,e){if(null==t)return[];var n=e.length;return n>1&&os(t,e[0],e[1])?e=[]:n>2&&os(e[0],e[1],e[2])&&(e=[e[0]]),lo(t,Cr(e,1),[])})),Cl=Oe||function(){return sn.Date.now()};function Ml(t,e){if("function"!=typeof e)throw new oe(l);return t=Wu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Dl(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Ea(t,T,o,o,o,o,e)}function El(t,e){var n;if("function"!=typeof e)throw new oe(l);return t=Wu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Pl=mo((function(t,e,n){var i=_;if(n.length){var r=li(n,Fa(Pl));i|=I}return Ea(t,i,e,n,r)})),Ol=mo((function(t,e,n){var i=_|m;if(n.length){var r=li(n,Fa(Ol));i|=I}return Ea(e,i,t,n,r)}));function Al(t,e,n){e=n?o:e;var i=Ea(t,x,o,o,o,o,o,e);return i.placeholder=Al.placeholder,i}function kl(t,e,n){e=n?o:e;var i=Ea(t,w,o,o,o,o,o,e);return i.placeholder=kl.placeholder,i}function Rl(t,e,n){var i,r,a,s,c,u,d=0,h=!1,f=!1,g=!0;if("function"!=typeof t)throw new oe(l);function p(e){var n=i,a=r;return i=r=o,d=e,s=t.apply(a,n),s}function v(t){return d=t,c=Is(m,e),h?p(t):s}function y(t){var n=t-u,i=t-d,r=e-n;return f?Fe(r,a-i):r}function _(t){var n=t-u,i=t-d;return u===o||n>=e||n<0||f&&i>=a}function m(){var t=Cl();if(_(t))return b(t);c=Is(m,y(t))}function b(t){return c=o,g&&i?p(t):(i=r=o,s)}function x(){c!==o&&Zo(c),d=0,i=u=r=c=o}function w(){return c===o?s:b(Cl())}function I(){var t=Cl(),n=_(t);if(i=arguments,r=this,u=t,n){if(c===o)return v(u);if(f)return Zo(c),c=Is(m,e),p(u)}return c===o&&(c=Is(m,e)),s}return e=Xu(e)||0,wu(n)&&(h=!!n.leading,f="maxWait"in n,a=f?Ge(Xu(n.maxWait)||0,e):a,g="trailing"in n?!!n.trailing:g),I.cancel=x,I.flush=w,I}var zl=mo((function(t,e){return _r(t,1,e)})),Nl=mo((function(t,e,n){return _r(t,Xu(e)||0,n)}));function Vl(t){return Ea(t,M)}function Ll(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(l);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Ll.Cache||Fi),n}function Bl(t){if("function"!=typeof t)throw new oe(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Gl(t){return El(2,t)}Ll.Cache=Fi;var Fl=Ho((function(t,e){e=1==e.length&&au(e[0])?Mn(e[0],Xn(ja())):Mn(Cr(e,1),Xn(ja()));var n=e.length;return mo((function(i){var r=-1,o=Fe(i.length,n);while(++r<o)i[r]=e[r].call(this,i[r]);return mn(t,this,i)}))})),jl=mo((function(t,e){var n=li(e,Fa(jl));return Ea(t,I,o,e,n)})),Hl=mo((function(t,e){var n=li(e,Fa(Hl));return Ea(t,S,o,e,n)})),Ul=Na((function(t,e){return Ea(t,C,o,o,o,e)}));function Zl(t,e){if("function"!=typeof t)throw new oe(l);return e=e===o?e:Wu(e),mo(t,e)}function Wl(t,e){if("function"!=typeof t)throw new oe(l);return e=null==e?0:Ge(Wu(e),0),mo((function(n){var i=n[e],r=Uo(n,0,e);return i&&Dn(r,i),mn(t,this,r)}))}function ql(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new oe(l);return wu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Rl(t,e,{leading:i,maxWait:e,trailing:r})}function Xl(t){return Dl(t,1)}function Yl(t,e){return jl(Fo(e),t)}function $l(){if(!arguments.length)return[];var t=arguments[0];return au(t)?t:[t]}function Ql(t){return pr(t,p)}function Jl(t,e){return e="function"==typeof e?e:o,pr(t,p,e)}function Kl(t){return pr(t,f|p)}function tu(t,e){return e="function"==typeof e?e:o,pr(t,f|p,e)}function eu(t,e){return null==e||yr(t,e,bd(e))}function nu(t,e){return t===e||t!==t&&e!==e}var iu=Sa(zr),ru=Sa((function(t,e){return t>=e})),ou=jr(function(){return arguments}())?jr:function(t){return Iu(t)&&de.call(t,"callee")&&!Se.call(t,"callee")},au=n.isArray,su=fn?Xn(fn):Hr;function cu(t){return null!=t&&xu(t.length)&&!mu(t)}function lu(t){return Iu(t)&&cu(t)}function uu(t){return!0===t||!1===t||Iu(t)&&Rr(t)==W}var du=Ne||Wh,hu=gn?Xn(gn):Ur;function fu(t){return Iu(t)&&1===t.nodeType&&!Au(t)}function gu(t){if(null==t)return!0;if(cu(t)&&(au(t)||"string"==typeof t||"function"==typeof t.splice||du(t)||Lu(t)||ou(t)))return!t.length;var e=Ya(t);if(e==J||e==ot)return!t.size;if(ds(t))return!to(t).length;for(var n in t)if(de.call(t,n))return!1;return!0}function pu(t,e){return Zr(t,e)}function vu(t,e,n){n="function"==typeof n?n:o;var i=n?n(t,e):o;return i===o?Zr(t,e,o,n):!!i}function yu(t){if(!Iu(t))return!1;var e=Rr(t);return e==Y||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Au(t)}function _u(t){return"number"==typeof t&&Ve(t)}function mu(t){if(!wu(t))return!1;var e=Rr(t);return e==$||e==Q||e==Z||e==it}function bu(t){return"number"==typeof t&&t==Wu(t)}function xu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function wu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Iu(t){return null!=t&&"object"==typeof t}var Su=pn?Xn(pn):qr;function Tu(t,e){return t===e||Xr(t,e,Ua(e))}function Cu(t,e,n){return n="function"==typeof n?n:o,Xr(t,e,Ua(e),n)}function Mu(t){return Ou(t)&&t!=+t}function Du(t){if(us(t))throw new r(c);return Yr(t)}function Eu(t){return null===t}function Pu(t){return null==t}function Ou(t){return"number"==typeof t||Iu(t)&&Rr(t)==K}function Au(t){if(!Iu(t)||Rr(t)!=et)return!1;var e=we(t);if(null===e)return!0;var n=de.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==pe}var ku=vn?Xn(vn):$r;function Ru(t){return bu(t)&&t>=-N&&t<=N}var zu=yn?Xn(yn):Qr;function Nu(t){return"string"==typeof t||!au(t)&&Iu(t)&&Rr(t)==at}function Vu(t){return"symbol"==typeof t||Iu(t)&&Rr(t)==st}var Lu=_n?Xn(_n):Jr;function Bu(t){return t===o}function Gu(t){return Iu(t)&&Ya(t)==lt}function Fu(t){return Iu(t)&&Rr(t)==ut}var ju=Sa(no),Hu=Sa((function(t,e){return t<=e}));function Uu(t){if(!t)return[];if(cu(t))return Nu(t)?pi(t):na(t);if(Me&&t[Me])return ai(t[Me]());var e=Ya(t),n=e==J?si:e==ot?ui:Bd;return n(t)}function Zu(t){if(!t)return 0===t?t:0;if(t=Xu(t),t===z||t===-z){var e=t<0?-1:1;return e*V}return t===t?t:0}function Wu(t){var e=Zu(t),n=e%1;return e===e?n?e-n:e:0}function qu(t){return t?gr(Wu(t),0,B):0}function Xu(t){if("number"==typeof t)return t;if(Vu(t))return L;if(wu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=wu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Vt,"");var n=Xt.test(t);return n||$t.test(t)?rn(t.slice(2),n?2:8):qt.test(t)?L:+t}function Yu(t){return ia(t,xd(t))}function $u(t){return t?gr(Wu(t),-N,N):0===t?t:0}function Qu(t){return null==t?"":Ao(t)}var Ju=sa((function(t,e){if(ds(e)||cu(e))ia(e,bd(e),t);else for(var n in e)de.call(e,n)&&sr(t,n,e[n])})),Ku=sa((function(t,e){ia(e,xd(e),t)})),td=sa((function(t,e,n,i){ia(e,xd(e),t,i)})),ed=sa((function(t,e,n,i){ia(e,bd(e),t,i)})),nd=Na(fr);function id(t,e){var n=wi(t);return null==e?n:ur(n,e)}var rd=mo((function(t,e){t=ne(t);var n=-1,i=e.length,r=i>2?e[2]:o;r&&os(e[0],e[1],r)&&(i=1);while(++n<i){var a=e[n],s=xd(a),c=-1,l=s.length;while(++c<l){var u=s[c],d=t[u];(d===o||nu(d,ce[u])&&!de.call(t,u))&&(t[u]=a[u])}}return t})),od=mo((function(t){return t.push(o,Oa),mn(Td,o,t)}));function ad(t,e){return zn(t,ja(e,3),Er)}function sd(t,e){return zn(t,ja(e,3),Pr)}function cd(t,e){return null==t?t:Mr(t,ja(e,3),xd)}function ld(t,e){return null==t?t:Dr(t,ja(e,3),xd)}function ud(t,e){return t&&Er(t,ja(e,3))}function dd(t,e){return t&&Pr(t,ja(e,3))}function hd(t){return null==t?[]:Or(t,bd(t))}function fd(t){return null==t?[]:Or(t,xd(t))}function gd(t,e,n){var i=null==t?o:Ar(t,e);return i===o?n:i}function pd(t,e){return null!=t&&Ja(t,e,Nr)}function vd(t,e){return null!=t&&Ja(t,e,Vr)}var yd=_a((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ge.call(e)),t[e]=n}),Sh(Dh)),_d=_a((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ge.call(e)),de.call(t,e)?t[e].push(n):t[e]=[n]}),ja),md=mo(Fr);function bd(t){return cu(t)?nr(t):to(t)}function xd(t){return cu(t)?nr(t,!0):eo(t)}function wd(t,e){var n={};return e=ja(e,3),Er(t,(function(t,i,r){hr(n,e(t,i,r),t)})),n}function Id(t,e){var n={};return e=ja(e,3),Er(t,(function(t,i,r){hr(n,i,e(t,i,r))})),n}var Sd=sa((function(t,e,n){ao(t,e,n)})),Td=sa((function(t,e,n,i){ao(t,e,n,i)})),Cd=Na((function(t,e){var n={};if(null==t)return n;var i=!1;e=Mn(e,(function(e){return e=jo(e,t),i||(i=e.length>1),e})),ia(t,La(t),n),i&&(n=pr(n,f|g|p,Aa));var r=e.length;while(r--)Ro(n,e[r]);return n}));function Md(t,e){return Ed(t,Bl(ja(e)))}var Dd=Na((function(t,e){return null==t?{}:uo(t,e)}));function Ed(t,e){if(null==t)return{};var n=Mn(La(t),(function(t){return[t]}));return e=ja(e),ho(t,n,(function(t,n){return e(t,n[0])}))}function Pd(t,e,n){e=jo(e,t);var i=-1,r=e.length;r||(r=1,t=o);while(++i<r){var a=null==t?o:t[Es(e[i])];a===o&&(i=r,a=n),t=mu(a)?a.call(t):a}return t}function Od(t,e,n){return null==t?t:wo(t,e,n)}function Ad(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:wo(t,e,n,i)}var kd=Da(bd),Rd=Da(xd);function zd(t,e,n){var i=au(t),r=i||du(t)||Lu(t);if(e=ja(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:wu(t)&&mu(o)?wi(we(t)):{}}return(r?xn:Er)(t,(function(t,i,r){return e(n,t,i,r)})),n}function Nd(t,e){return null==t||Ro(t,e)}function Vd(t,e,n){return null==t?t:zo(t,e,Fo(n))}function Ld(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:zo(t,e,Fo(n),i)}function Bd(t){return null==t?[]:Yn(t,bd(t))}function Gd(t){return null==t?[]:Yn(t,xd(t))}function Fd(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=Xu(n),n=n===n?n:0),e!==o&&(e=Xu(e),e=e===e?e:0),gr(Xu(t),e,n)}function jd(t,e,n){return e=Zu(e),n===o?(n=e,e=0):n=Zu(n),t=Xu(t),Lr(t,e,n)}function Hd(t,e,n){if(n&&"boolean"!=typeof n&&os(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Zu(t),e===o?(e=t,t=0):e=Zu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=We();return Fe(t+r*(e-t+nn("1e-"+((r+"").length-1))),e)}return vo(t,e)}var Ud=ha((function(t,e,n){return e=e.toLowerCase(),t+(n?Zd(e):e)}));function Zd(t){return _h(Qu(t).toLowerCase())}function Wd(t){return t=Qu(t),t&&t.replace(Jt,ti).replace(He,"")}function qd(t,e,n){t=Qu(t),e=Ao(e);var i=t.length;n=n===o?i:gr(Wu(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function Xd(t){return t=Qu(t),t&&Dt.test(t)?t.replace(Ct,ei):t}function Yd(t){return t=Qu(t),t&&Nt.test(t)?t.replace(zt,"\\$&"):t}var $d=ha((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Qd=ha((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Jd=da("toLowerCase");function Kd(t,e,n){t=Qu(t),e=Wu(e);var i=e?gi(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return xa(Re(r),n)+t+xa(ke(r),n)}function th(t,e,n){t=Qu(t),e=Wu(e);var i=e?gi(t):0;return e&&i<e?t+xa(e-i,n):t}function eh(t,e,n){t=Qu(t),e=Wu(e);var i=e?gi(t):0;return e&&i<e?xa(e-i,n)+t:t}function nh(t,e,n){return n||null==e?e=0:e&&(e=+e),Ze(Qu(t).replace(Lt,""),e||0)}function ih(t,e,n){return e=(n?os(t,e,n):e===o)?1:Wu(e),_o(Qu(t),e)}function rh(){var t=arguments,e=Qu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var oh=ha((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function ah(t,e,n){return n&&"number"!=typeof n&&os(t,e,n)&&(e=n=o),n=n===o?B:n>>>0,n?(t=Qu(t),t&&("string"==typeof e||null!=e&&!ku(e))&&(e=Ao(e),!e&&ri(t))?Uo(pi(t),0,n):t.split(e,n)):[]}var sh=ha((function(t,e,n){return t+(n?" ":"")+_h(e)}));function ch(t,e,n){return t=Qu(t),n=null==n?0:gr(Wu(n),0,t.length),e=Ao(e),t.slice(n,n+e.length)==e}function lh(t,e,n){var i=bi.templateSettings;n&&os(t,e,n)&&(e=o),t=Qu(t),e=td({},e,i,Pa);var r,a,s=td({},e.imports,i.imports,Pa),c=bd(s),l=Yn(s,c),u=0,d=e.interpolate||Kt,h="__p += '",f=ie((e.escape||Kt).source+"|"+d.source+"|"+(d===Ot?Zt:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),g="//# sourceURL="+(de.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ye+"]")+"\n";t.replace(f,(function(e,n,i,o,s,c){return i||(i=o),h+=t.slice(u,c).replace(te,ni),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),h+="';\n";var p=de.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(wt,""):h).replace(It,"$1").replace(St,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=bh((function(){return Ht(c,g+"return "+h).apply(o,l)}));if(v.source=h,yu(v))throw v;return v}function uh(t){return Qu(t).toLowerCase()}function dh(t){return Qu(t).toUpperCase()}function hh(t,e,n){if(t=Qu(t),t&&(n||e===o))return t.replace(Vt,"");if(!t||!(e=Ao(e)))return t;var i=pi(t),r=pi(e),a=Qn(i,r),s=Jn(i,r)+1;return Uo(i,a,s).join("")}function fh(t,e,n){if(t=Qu(t),t&&(n||e===o))return t.replace(Bt,"");if(!t||!(e=Ao(e)))return t;var i=pi(t),r=Jn(i,pi(e))+1;return Uo(i,0,r).join("")}function gh(t,e,n){if(t=Qu(t),t&&(n||e===o))return t.replace(Lt,"");if(!t||!(e=Ao(e)))return t;var i=pi(t),r=Qn(i,pi(e));return Uo(i,r).join("")}function ph(t,e){var n=D,i=E;if(wu(e)){var r="separator"in e?e.separator:r;n="length"in e?Wu(e.length):n,i="omission"in e?Ao(e.omission):i}t=Qu(t);var a=t.length;if(ri(t)){var s=pi(t);a=s.length}if(n>=a)return t;var c=n-gi(i);if(c<1)return i;var l=s?Uo(s,0,c).join(""):t.slice(0,c);if(r===o)return l+i;if(s&&(c+=l.length-c),ku(r)){if(t.slice(c).search(r)){var u,d=l;r.global||(r=ie(r.source,Qu(Wt.exec(r))+"g")),r.lastIndex=0;while(u=r.exec(d))var h=u.index;l=l.slice(0,h===o?c:h)}}else if(t.indexOf(Ao(r),c)!=c){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i}function vh(t){return t=Qu(t),t&&Mt.test(t)?t.replace(Tt,vi):t}var yh=ha((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),_h=da("toUpperCase");function mh(t,e,n){return t=Qu(t),e=n?o:e,e===o?oi(t)?mi(t):Rn(t):t.match(e)||[]}var bh=mo((function(t,e){try{return mn(t,o,e)}catch(n){return yu(n)?n:new r(n)}})),xh=Na((function(t,e){return xn(e,(function(e){e=Es(e),hr(t,e,Pl(t[e],t))})),t}));function wh(t){var e=null==t?0:t.length,n=ja();return t=e?Mn(t,(function(t){if("function"!=typeof t[1])throw new oe(l);return[n(t[0]),t[1]]})):[],mo((function(n){var i=-1;while(++i<e){var r=t[i];if(mn(r[0],this,n))return mn(r[1],this,n)}}))}function Ih(t){return vr(pr(t,f))}function Sh(t){return function(){return t}}function Th(t,e){return null==t||t!==t?e:t}var Ch=va(),Mh=va(!0);function Dh(t){return t}function Eh(t){return Kr("function"==typeof t?t:pr(t,f))}function Ph(t){return ro(pr(t,f))}function Oh(t,e){return oo(t,pr(e,f))}var Ah=mo((function(t,e){return function(n){return Fr(n,t,e)}})),kh=mo((function(t,e){return function(n){return Fr(t,n,e)}}));function Rh(t,e,n){var i=bd(e),r=Or(e,i);null!=n||wu(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Or(e,bd(e)));var o=!(wu(n)&&"chain"in n)||!!n.chain,a=mu(t);return xn(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=na(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Dn([this.value()],arguments))})})),t}function zh(){return sn._===this&&(sn._=ve),this}function Nh(){}function Vh(t){return t=Wu(t),mo((function(e){return co(e,t)}))}var Lh=ba(Mn),Bh=ba(In),Gh=ba(On);function Fh(t){return as(t)?Fn(Es(t)):fo(t)}function jh(t){return function(e){return null==t?o:Ar(t,e)}}var Hh=Ia(),Uh=Ia(!0);function Zh(){return[]}function Wh(){return!1}function qh(){return{}}function Xh(){return""}function Yh(){return!0}function $h(t,e){if(t=Wu(t),t<1||t>N)return[];var n=B,i=Fe(t,B);e=ja(e),t-=B;var r=Wn(i,e);while(++n<t)e(n);return r}function Qh(t){return au(t)?Mn(t,Es):Vu(t)?[t]:na(Ds(Qu(t)))}function Jh(t){var e=++he;return Qu(t)+e}var Kh=ma((function(t,e){return t+e}),0),tf=Ca("ceil"),ef=ma((function(t,e){return t/e}),1),nf=Ca("floor");function rf(t){return t&&t.length?Ir(t,Dh,zr):o}function of(t,e){return t&&t.length?Ir(t,ja(e,2),zr):o}function af(t){return Gn(t,Dh)}function sf(t,e){return Gn(t,ja(e,2))}function cf(t){return t&&t.length?Ir(t,Dh,no):o}function lf(t,e){return t&&t.length?Ir(t,ja(e,2),no):o}var uf=ma((function(t,e){return t*e}),1),df=Ca("round"),hf=ma((function(t,e){return t-e}),0);function ff(t){return t&&t.length?Zn(t,Dh):0}function gf(t,e){return t&&t.length?Zn(t,ja(e,2)):0}return bi.after=Ml,bi.ary=Dl,bi.assign=Ju,bi.assignIn=Ku,bi.assignInWith=td,bi.assignWith=ed,bi.at=nd,bi.before=El,bi.bind=Pl,bi.bindAll=xh,bi.bindKey=Ol,bi.castArray=$l,bi.chain=Hc,bi.chunk=ks,bi.compact=Rs,bi.concat=zs,bi.cond=wh,bi.conforms=Ih,bi.constant=Sh,bi.countBy=tl,bi.create=id,bi.curry=Al,bi.curryRight=kl,bi.debounce=Rl,bi.defaults=rd,bi.defaultsDeep=od,bi.defer=zl,bi.delay=Nl,bi.difference=Ns,bi.differenceBy=Vs,bi.differenceWith=Ls,bi.drop=Bs,bi.dropRight=Gs,bi.dropRightWhile=Fs,bi.dropWhile=js,bi.fill=Hs,bi.filter=nl,bi.flatMap=ol,bi.flatMapDeep=al,bi.flatMapDepth=sl,bi.flatten=Ws,bi.flattenDeep=qs,bi.flattenDepth=Xs,bi.flip=Vl,bi.flow=Ch,bi.flowRight=Mh,bi.fromPairs=Ys,bi.functions=hd,bi.functionsIn=fd,bi.groupBy=ul,bi.initial=Js,bi.intersection=Ks,bi.intersectionBy=tc,bi.intersectionWith=ec,bi.invert=yd,bi.invertBy=_d,bi.invokeMap=hl,bi.iteratee=Eh,bi.keyBy=fl,bi.keys=bd,bi.keysIn=xd,bi.map=gl,bi.mapKeys=wd,bi.mapValues=Id,bi.matches=Ph,bi.matchesProperty=Oh,bi.memoize=Ll,bi.merge=Sd,bi.mergeWith=Td,bi.method=Ah,bi.methodOf=kh,bi.mixin=Rh,bi.negate=Bl,bi.nthArg=Vh,bi.omit=Cd,bi.omitBy=Md,bi.once=Gl,bi.orderBy=pl,bi.over=Lh,bi.overArgs=Fl,bi.overEvery=Bh,bi.overSome=Gh,bi.partial=jl,bi.partialRight=Hl,bi.partition=vl,bi.pick=Dd,bi.pickBy=Ed,bi.property=Fh,bi.propertyOf=jh,bi.pull=ac,bi.pullAll=sc,bi.pullAllBy=cc,bi.pullAllWith=lc,bi.pullAt=uc,bi.range=Hh,bi.rangeRight=Uh,bi.rearg=Ul,bi.reject=ml,bi.remove=dc,bi.rest=Zl,bi.reverse=hc,bi.sampleSize=xl,bi.set=Od,bi.setWith=Ad,bi.shuffle=wl,bi.slice=fc,bi.sortBy=Tl,bi.sortedUniq=bc,bi.sortedUniqBy=xc,bi.split=ah,bi.spread=Wl,bi.tail=wc,bi.take=Ic,bi.takeRight=Sc,bi.takeRightWhile=Tc,bi.takeWhile=Cc,bi.tap=Uc,bi.throttle=ql,bi.thru=Zc,bi.toArray=Uu,bi.toPairs=kd,bi.toPairsIn=Rd,bi.toPath=Qh,bi.toPlainObject=Yu,bi.transform=zd,bi.unary=Xl,bi.union=Mc,bi.unionBy=Dc,bi.unionWith=Ec,bi.uniq=Pc,bi.uniqBy=Oc,bi.uniqWith=Ac,bi.unset=Nd,bi.unzip=kc,bi.unzipWith=Rc,bi.update=Vd,bi.updateWith=Ld,bi.values=Bd,bi.valuesIn=Gd,bi.without=zc,bi.words=mh,bi.wrap=Yl,bi.xor=Nc,bi.xorBy=Vc,bi.xorWith=Lc,bi.zip=Bc,bi.zipObject=Gc,bi.zipObjectDeep=Fc,bi.zipWith=jc,bi.entries=kd,bi.entriesIn=Rd,bi.extend=Ku,bi.extendWith=td,Rh(bi,bi),bi.add=Kh,bi.attempt=bh,bi.camelCase=Ud,bi.capitalize=Zd,bi.ceil=tf,bi.clamp=Fd,bi.clone=Ql,bi.cloneDeep=Kl,bi.cloneDeepWith=tu,bi.cloneWith=Jl,bi.conformsTo=eu,bi.deburr=Wd,bi.defaultTo=Th,bi.divide=ef,bi.endsWith=qd,bi.eq=nu,bi.escape=Xd,bi.escapeRegExp=Yd,bi.every=el,bi.find=il,bi.findIndex=Us,bi.findKey=ad,bi.findLast=rl,bi.findLastIndex=Zs,bi.findLastKey=sd,bi.floor=nf,bi.forEach=cl,bi.forEachRight=ll,bi.forIn=cd,bi.forInRight=ld,bi.forOwn=ud,bi.forOwnRight=dd,bi.get=gd,bi.gt=iu,bi.gte=ru,bi.has=pd,bi.hasIn=vd,bi.head=$s,bi.identity=Dh,bi.includes=dl,bi.indexOf=Qs,bi.inRange=jd,bi.invoke=md,bi.isArguments=ou,bi.isArray=au,bi.isArrayBuffer=su,bi.isArrayLike=cu,bi.isArrayLikeObject=lu,bi.isBoolean=uu,bi.isBuffer=du,bi.isDate=hu,bi.isElement=fu,bi.isEmpty=gu,bi.isEqual=pu,bi.isEqualWith=vu,bi.isError=yu,bi.isFinite=_u,bi.isFunction=mu,bi.isInteger=bu,bi.isLength=xu,bi.isMap=Su,bi.isMatch=Tu,bi.isMatchWith=Cu,bi.isNaN=Mu,bi.isNative=Du,bi.isNil=Pu,bi.isNull=Eu,bi.isNumber=Ou,bi.isObject=wu,bi.isObjectLike=Iu,bi.isPlainObject=Au,bi.isRegExp=ku,bi.isSafeInteger=Ru,bi.isSet=zu,bi.isString=Nu,bi.isSymbol=Vu,bi.isTypedArray=Lu,bi.isUndefined=Bu,bi.isWeakMap=Gu,bi.isWeakSet=Fu,bi.join=nc,bi.kebabCase=$d,bi.last=ic,bi.lastIndexOf=rc,bi.lowerCase=Qd,bi.lowerFirst=Jd,bi.lt=ju,bi.lte=Hu,bi.max=rf,bi.maxBy=of,bi.mean=af,bi.meanBy=sf,bi.min=cf,bi.minBy=lf,bi.stubArray=Zh,bi.stubFalse=Wh,bi.stubObject=qh,bi.stubString=Xh,bi.stubTrue=Yh,bi.multiply=uf,bi.nth=oc,bi.noConflict=zh,bi.noop=Nh,bi.now=Cl,bi.pad=Kd,bi.padEnd=th,bi.padStart=eh,bi.parseInt=nh,bi.random=Hd,bi.reduce=yl,bi.reduceRight=_l,bi.repeat=ih,bi.replace=rh,bi.result=Pd,bi.round=df,bi.runInContext=t,bi.sample=bl,bi.size=Il,bi.snakeCase=oh,bi.some=Sl,bi.sortedIndex=gc,bi.sortedIndexBy=pc,bi.sortedIndexOf=vc,bi.sortedLastIndex=yc,bi.sortedLastIndexBy=_c,bi.sortedLastIndexOf=mc,bi.startCase=sh,bi.startsWith=ch,bi.subtract=hf,bi.sum=ff,bi.sumBy=gf,bi.template=lh,bi.times=$h,bi.toFinite=Zu,bi.toInteger=Wu,bi.toLength=qu,bi.toLower=uh,bi.toNumber=Xu,bi.toSafeInteger=$u,bi.toString=Qu,bi.toUpper=dh,bi.trim=hh,bi.trimEnd=fh,bi.trimStart=gh,bi.truncate=ph,bi.unescape=vh,bi.uniqueId=Jh,bi.upperCase=yh,bi.upperFirst=_h,bi.each=cl,bi.eachRight=ll,bi.first=$s,Rh(bi,function(){var t={};return Er(bi,(function(e,n){de.call(bi.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),bi.VERSION=a,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){bi[t].placeholder=bi})),xn(["drop","take"],(function(t,e){Ti.prototype[t]=function(n){n=n===o?1:Ge(Wu(n),0);var i=this.__filtered__&&!e?new Ti(this):this.clone();return i.__filtered__?i.__takeCount__=Fe(n,i.__takeCount__):i.__views__.push({size:Fe(n,B),type:t+(i.__dir__<0?"Right":"")}),i},Ti.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),xn(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=n==A||n==R;Ti.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ja(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),xn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Ti.prototype[t]=function(){return this[n](1).value()[0]}})),xn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Ti.prototype[t]=function(){return this.__filtered__?new Ti(this):this[n](1)}})),Ti.prototype.compact=function(){return this.filter(Dh)},Ti.prototype.find=function(t){return this.filter(t).head()},Ti.prototype.findLast=function(t){return this.reverse().find(t)},Ti.prototype.invokeMap=mo((function(t,e){return"function"==typeof t?new Ti(this):this.map((function(n){return Fr(n,t,e)}))})),Ti.prototype.reject=function(t){return this.filter(Bl(ja(t)))},Ti.prototype.slice=function(t,e){t=Wu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Ti(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(e=Wu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Ti.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ti.prototype.toArray=function(){return this.take(B)},Er(Ti.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=bi[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);r&&(bi.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,c=e instanceof Ti,l=s[0],u=c||au(e),d=function(t){var e=r.apply(bi,Dn([t],s));return i&&h?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var h=this.__chain__,f=!!this.__actions__.length,g=a&&!h,p=c&&!f;if(!a&&u){e=p?e:new Ti(this);var v=t.apply(e,s);return v.__actions__.push({func:Zc,args:[d],thisArg:o}),new Si(v,h)}return g&&p?t.apply(this,s):(v=this.thru(d),g?i?v.value()[0]:v.value():v)})})),xn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);bi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(au(r)?r:[],t)}return this[n]((function(n){return e.apply(au(n)?n:[],t)}))}})),Er(Ti.prototype,(function(t,e){var n=bi[e];if(n){var i=n.name+"";de.call(ln,i)||(ln[i]=[]),ln[i].push({name:e,func:n})}})),ln[ya(o,m).name]=[{name:"wrapper",func:o}],Ti.prototype.clone=Ci,Ti.prototype.reverse=Mi,Ti.prototype.value=Di,bi.prototype.at=Wc,bi.prototype.chain=qc,bi.prototype.commit=Xc,bi.prototype.next=Yc,bi.prototype.plant=Qc,bi.prototype.reverse=Jc,bi.prototype.toJSON=bi.prototype.valueOf=bi.prototype.value=Kc,bi.prototype.first=bi.prototype.head,Me&&(bi.prototype[Me]=$c),bi},xi=bi();sn._=xi,r=function(){return xi}.call(e,n,e,i),r===o||(i.exports=r)}).call(this)}).call(this,n("9edd"),n("47b3")(t))},"39a8":function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},"3c10":function(t,e,n){"use strict";var i=n("5dfd").forEach,r=n("d7e1"),o=n("ff9c"),a=r("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"3c51":function(t,e,n){"use strict";var i=n("5a9e"),r=n("fa41"),o=i.aTypedArray,a=i.exportTypedArrayMethod;a("fill",(function(t){return r.apply(o(this),arguments)}))},"3ccd":function(t,e,n){var i=n("3da3"),r=n("d88d");t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length or index");return n}},"3e54":function(t,e,n){"use strict";var i=n("1c8b"),r=n("efe2"),o=n("1c2e9"),a=n("857c"),s=n("e1d6"),c=n("d88d"),l=n("ef4c"),u=o.ArrayBuffer,d=o.DataView,h=u.prototype.slice,f=r((function(){return!new u(2).slice(1,void 0).byteLength}));i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:f},{slice:function(t,e){if(void 0!==h&&void 0===e)return h.call(a(this),t);var n=a(this).byteLength,i=s(t,n),r=s(void 0===e?n:e,n),o=new(l(this,u))(c(r-i)),f=new d(this),g=new d(o),p=0;while(i<r)g.setUint8(p++,f.getUint8(i++));return o}})},"3efa":function(t,e,n){"use strict";var i=n("1c8b"),r=n("5197"),o=n("0496");i({target:"String",proto:!0,forced:o("anchor")},{anchor:function(t){return r(this,"a","name",t)}})},4140:function(t,e,n){"use strict";var i=n("5a9e"),r=n("ef4c"),o=n("efe2"),a=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod,l=[].slice,u=o((function(){new Int8Array(1).slice()}));c("slice",(function(t,e){var n=l.call(a(this),t,e),i=r(this,this.constructor),o=0,c=n.length,u=new(s(i))(c);while(c>o)u[o]=n[o++];return u}),u)},"41ff":function(t,e,n){var i=n("26a2");i("Int32",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},4350:function(t,e,n){var i=n("90fb");e.f=i},4548:function(t,e,n){var i=n("1e2c"),r=n("cbab"),o=n("da10"),a=n("ef71").f,s=function(t){return function(e){var n,s=o(e),c=r(s),l=c.length,u=0,d=[];while(l>u)n=c[u++],i&&!a.call(s,n)||d.push(t?[n,s[n]]:s[n]);return d}};t.exports={entries:s(!0),values:s(!1)}},"47b3":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"48f3":function(t,e,n){var i=n("1c8b"),r=n("3587");i({target:"Function",proto:!0},{bind:r})},"4db3":function(t,e,n){},"4f67":function(t,e,n){(function(t){n("fe59"),n("08ba"),function(t){var e=function(t,e){for(var n,i=0,r=t.length;i<r;i++)if(n=t[i],this._equal(n.x,e.x)&&this._equal(n.y,e.y))return!0;return'{"type":"FeatureCollection","features":[{"geometry":{"type":"Polygon","coordinates":'},n=function(t,e,n,i){var r=[],o=[],a=null;e.forEach((function(t,e){a=formatPoints(t,n,i),r.push.apply(r,a.points),o.push.apply(o,a.segments)})),t.points||(t.points=[]),Array.prototype.push.apply(t.points,r),t.segments||(t.segments=[]),Array.prototype.push.apply(t.segments,o)},i=[[[43,94],[47,29]],[[62,12],[38,12],[-3,10],[-27,24169],[23969,26010],[31124,20317],[37056,31163],[25155,26355],[38419,20822],[21435,12],[-17,12],[42,12],[-3,10],[-27,34],[-12,79],[-12,28],[36,80],[-8,28],[38,79],[-6,34],[36,77],[-5,33],[-10,76],[-6,34],[38,30],[41,27],[37,78],[-9,33],[-13,35],[-11,76],[38,26],[-8,28],[40,79],[-7,35],[40,33],[-5,79],[41,80],[41,30],[-5,79],[39,32],[-9,27],[-6,27],[39,31],[-5,27],[37,79],[-12,76],[-6,32],[-4,76],[38,76],[-9,29],[-11,29],[36,76],[-11,27],[-9,29],[-10,76],[-4,35],[36,26],[39,79],[-7,28],[-12,79],[38,76],[38,79],[-8,27],[36,31],[-8,34],[37,35],[-8,26],[-6,75],[38,35],[-7,30],[-4,28],[-8,34],[-6,26],[-12,80],[41,30],[37,35],[-4,34],[-4,32],[-13,35],[-9,35],[-5,35],[-10,28],[41,29],[40,34],[38,80],[-4,28],[39,76],[-9,29],[-13,33],[38,75],[36,26],[-13,78],[-7,33],[37,76],[39,34],[-10,31],[-5,26],[-5,80],[-12,26],[36,79],[-5,26],[-4,80],[-8,35],[38,31],[41,80],[-13,79],[-5,78],[39,76],[-5,26],[38,80],[-7,80],[40,29],[-8,78],[-11,35],[-8,79],[38,35],[-4,32],[-13,35],[-6,77],[-9,31],[-10,33],[37,28],[-7,27],[40,76],[-8,27],[37,28],[-13,77],[41,34],[-6,26],[-8,75],[-8,32],[39,34],[38,31],[-4,26],[-8,27],[-13,80],[40,76],[-7,35],[40,76],[-12,77],[-5,79],[40,12],[64,-22]]];function r(t){if(n&&e){for(var i="",r=0;r<t.length;r++){var o=t[r][0]+61;0<o&&(i+=String.fromCharCode(o));var a=t[r][1]+22;0<a&&(i+=String.fromCharCode(a))}return i}}for(var o,a="",s=0;s<i.length;s++)0===s?o=r(i[s]):a=r(i[s]);t[o]=a}("undefined"!=typeof t?t:window)}).call(this,n("9edd"))},"513c":function(t,e,n){"use strict";var i=n("1e2c"),r=n("d890"),o=n("e8d6"),a=n("1944"),s=n("faa8"),c=n("2118"),l=n("7063"),u=n("9f67"),d=n("efe2"),h=n("6d60"),f=n("b338").f,g=n("aa6b").f,p=n("d910").f,v=n("c10f").trim,y="Number",_=r[y],m=_.prototype,b=c(h(m))==y,x=function(t){var e,n,i,r,o,a,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(o=l.slice(2),a=o.length,s=0;s<a;s++)if(c=o.charCodeAt(s),c<48||c>r)return NaN;return parseInt(o,i)}return+l};if(o(y,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var w,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(b?d((function(){m.valueOf.call(n)})):c(n)!=y)?l(new _(x(e)),n,I):x(e)},S=i?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;S.length>T;T++)s(_,w=S[T])&&!s(I,w)&&p(I,w,g(_,w));I.prototype=m,m.constructor=I,a(r,y,I)}},5197:function(t,e,n){var i=n("2732"),r=/"/g;t.exports=function(t,e,n,o){var a=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(r,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"56ea":function(t,e,n){var i=n("1c8b"),r=n("fa41"),o=n("258f");i({target:"Array",proto:!0},{fill:r}),o("fill")},"58d8":function(t,e,n){var i=n("0c3c"),r=n("3553"),o=n("692f"),a=n("d88d"),s=function(t){return function(e,n,s,c){i(n);var l=r(e),u=o(l),d=a(l.length),h=t?d-1:0,f=t?-1:1;if(s<2)while(1){if(h in u){c=u[h],h+=f;break}if(h+=f,t?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:d>h;h+=f)h in u&&(c=n(c,u[h],h,l));return c}};t.exports={left:s(!1),right:s(!0)}},"5a9e":function(t,e,n){"use strict";var i,r=n("d77f"),o=n("1e2c"),a=n("d890"),s=n("a719"),c=n("faa8"),l=n("2a91"),u=n("0fc1"),d=n("1944"),h=n("d910").f,f=n("908e"),g=n("50fb"),p=n("90fb"),v=n("7e8b"),y=a.Int8Array,_=y&&y.prototype,m=a.Uint8ClampedArray,b=m&&m.prototype,x=y&&f(y),w=_&&f(_),I=Object.prototype,S=I.isPrototypeOf,T=p("toStringTag"),C=v("TYPED_ARRAY_TAG"),M=r&&!!g&&"Opera"!==l(a.opera),D=!1,E={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P=function(t){var e=l(t);return"DataView"===e||c(E,e)},O=function(t){return s(t)&&c(E,l(t))},A=function(t){if(O(t))return t;throw TypeError("Target is not a typed array")},k=function(t){if(g){if(S.call(x,t))return t}else for(var e in E)if(c(E,i)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},R=function(t,e,n){if(o){if(n)for(var i in E){var r=a[i];r&&c(r.prototype,t)&&delete r.prototype[t]}w[t]&&!n||d(w,t,n?e:M&&_[t]||e)}},z=function(t,e,n){var i,r;if(o){if(g){if(n)for(i in E)r=a[i],r&&c(r,t)&&delete r[t];if(x[t]&&!n)return;try{return d(x,t,n?e:M&&y[t]||e)}catch(s){}}for(i in E)r=a[i],!r||r[t]&&!n||d(r,t,e)}};for(i in E)a[i]||(M=!1);if((!M||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},M))for(i in E)a[i]&&g(a[i],x);if((!M||!w||w===I)&&(w=x.prototype,M))for(i in E)a[i]&&g(a[i].prototype,w);if(M&&f(b)!==w&&g(b,w),o&&!c(w,T))for(i in D=!0,h(w,T,{get:function(){return s(this)?this[C]:void 0}}),E)a[i]&&u(a[i],C,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:D&&C,aTypedArray:A,aTypedArrayConstructor:k,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:z,isView:P,isTypedArray:O,TypedArray:x,TypedArrayPrototype:w}},"5dfd":function(t,e,n){var i=n("e349"),r=n("692f"),o=n("3553"),a=n("d88d"),s=n("1ca1"),c=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,u=4==t,d=6==t,h=5==t||d;return function(f,g,p,v){for(var y,_,m=o(f),b=r(m),x=i(g,p,3),w=a(b.length),I=0,S=v||s,T=e?S(f,w):n?S(f,0):void 0;w>I;I++)if((h||I in b)&&(y=b[I],_=x(y,I,m),t))if(e)T[I]=_;else if(_)switch(t){case 3:return!0;case 5:return y;case 6:return I;case 2:c.call(T,y)}else if(u)return!1;return d?-1:l||u?u:T}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},"5e9f":function(t,e,n){"use strict";var i=n("b2a2"),r=n("857c"),o=n("3553"),a=n("d88d"),s=n("3da3"),c=n("2732"),l=n("38eb"),u=n("59da"),d=Math.max,h=Math.min,f=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var y=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=i.REPLACE_KEEPS_$0,m=y?"$":"$0";return[function(n,i){var r=c(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!y&&_||"string"===typeof i&&-1===i.indexOf(m)){var o=n(e,t,this,i);if(o.done)return o.value}var c=r(t),f=String(this),g="function"===typeof i;g||(i=String(i));var p=c.global;if(p){var x=c.unicode;c.lastIndex=0}var w=[];while(1){var I=u(c,f);if(null===I)break;if(w.push(I),!p)break;var S=String(I[0]);""===S&&(c.lastIndex=l(f,a(c.lastIndex),x))}for(var T="",C=0,M=0;M<w.length;M++){I=w[M];for(var D=String(I[0]),E=d(h(s(I.index),f.length),0),P=[],O=1;O<I.length;O++)P.push(v(I[O]));var A=I.groups;if(g){var k=[D].concat(P,E,f);void 0!==A&&k.push(A);var R=String(i.apply(void 0,k))}else R=b(D,f,E,P,A,i);E>=C&&(T+=f.slice(C,E)+R,C=E+D.length)}return T+f.slice(C)}];function b(t,n,i,r,a,s){var c=i+t.length,l=r.length,u=p;return void 0!==a&&(a=o(a),u=g),e.call(s,u,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var u=+o;if(0===u)return e;if(u>l){var d=f(u/10);return 0===d?e:d<=l?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):e}s=r[u-1]}return void 0===s?"":s}))}}))},6176:function(t,e,n){var i=n("3da3");t.exports=function(t){var e=i(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},"61a4":function(t,e,n){var i=n("1c8b"),r=n("39a8");i({target:"Math",stat:!0},{sign:r})},6841:function(t,e,n){var i=n("1c8b"),r=n("1e2c"),o=n("dbe8");i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:o})},"6ab5":function(t,e,n){(function(t){n("fe59"),n("ecb4"),n("ea69"),n("08ba"),function(t){"use strict";var e="ht",n=t[e],i=n.Default,r=Math,o=(r.PI,r.sin,r.cos,r.atan2,r.sqrt,r.max),a=r.floor,s=(r.round,r.ceil),c=n.Shape,l=(n.Edge,n.List),u=n.Style,d=n.graph,h=i.getInternal(),f=h.ui(),g=null,p="prototype",v=t.clearInterval,y=t.setInterval,_=function(t){var e=t.data,n=this.dm();if(e&&"add"===t.kind){var i=n.$1c,r=e instanceof c?"shape.":"edge.";i&&e.s(r+"dash.flow")&&i.indexOf(e)<0&&i.push(e)}"clear"===t.kind&&(n.$1c=[])},m=function(t){var e=t.property,n=t.data,i=t.newValue,r=this.dm().$1c,o=n instanceof c?"s:shape.dash.flow":"s:edge.dash.flow";if(r&&e===o)if(i)r.indexOf(n)<0&&r.push(n);else for(var a=r.length,s=0;a>s;s++)if(r[s]===n){r.splice(s,1);break}},b=d.GraphView[p],x=f.EdgeUI[p],w=f.ShapeUI[p],I=w._80o,S=x._80o,T=n.DataModel[p],C=T.prepareRemove,M=b.setDataModel;u["edge.dash.flow.step"]==g&&(u["edge.dash.flow.step"]=3),u["shape.dash.flow.step"]==g&&(u["shape.dash.flow.step"]=3),T.prepareRemove=function(t){C.call(this,t);var e=t._dataModel,n=e.$1c;if(n)for(var i=n.length,r=0;i>r;r++)if(n[r]===t){n.splice(r,1);break}},b.setDataModel=function(t){var e=this,n=e._dataModel;if(n!==t){n&&(n.umm(_,e),n.umd(m,e),n.$1c=[]),t.mm(_,e),t.md(m,e);var i=t.$1c=[];t.each((function(t){var e=t instanceof c?"shape.":"edge.";t.s(e+"dash.flow")&&i.indexOf(t)<0&&i.push(t)})),M.call(e,t)}},b.setDashFlowInterval=function(t){var e=this,n=e.$2c;e.$2c=t,e.fp("dashFlowInterval",n,t),e.$3c!=g&&(v(e.$3c),delete e.$3c,e.enableDashFlow(t))},b.getDashFlowInterval=function(){return this.$2c},b.$4c=function(){var t,e,n,r=this,c=r.tx(),u=r.ty(),d=r._zoom,f=r.getWidth(),g=r.getHeight(),p={x:-c/d,y:-u/d,width:f/d,height:g/d},v=r.dm().$1c,y=r._56I,_=new l;if(v.forEach((function(e){y[e.getId()]&&(t=r.getDataUI(e),t&&(n=t._79o(),n&&_.add(n)))})),0!==_.size()&&(_.each((function(t){i.intersectsRect(p,t)&&(e=i.unionRect(e,t))})),e&&(e&&(i.grow(e,o(1,1/d)),e.x=a(e.x*d)/d,e.y=a(e.y*d)/d,e.width=s(e.width*d)/d,e.height=s(e.height*d)/d,e=i.intersection(p,e)),e))){var m=r._canvas.getContext("2d");m.save(),m.lineCap=i.lineCap,m.lineJoin=i.lineJoin,h.translateAndScale(m,c,u,d),m.beginPath(),m.rect(e.x,e.y,e.width,e.height),m.clip(),m.clearRect(e.x,e.y,e.width,e.height),r.$5c(m,e),m.restore()}},b.$5c=function(t,e){var n,r,o=this;o._93db(t),o.each((function(a){o._56I[a._id]&&(n=o.getDataUI(a),n&&(r=n._79o(),(!e||i.intersectsRect(e,r))&&(n.$7c=!0,n._42(t),delete n.$7c)))})),o._92db(t)},b.enableDashFlow=function(t){var e=this;e.$3c==g&&(e.$3c=y((function(){e.$4c()}),t||e.$2c||50))},b.disableDashFlow=function(){var t=this;v(t.$3c),delete t.$3c};var D=function(){var t=this,e=t._data,n=e instanceof c?"shape.":"edge.",i=e.s(n+"dash.pattern"),r=e.s(n+"dash.flow.reverse");if(i&&e.s(n+"dash")&&e.s(n+"dash.flow")&&t.$7c){var o=t.s(n+"dash.offset")||0,a=e.s(n+"dash.flow.step"),s=e.getStyleMap(),l=0;i.forEach((function(t){l+=t})),r&&(a=-a),o-=a,o%=l,s||(e._styleMap=s={}),s[n+"dash.offset"]=o}};x._80o=function(t){S.call(this,t),D.call(this)},w._80o=function(t){I.call(this,t),D.call(this)}}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"))}).call(this,n("9edd"))},"6ae3":function(t,e,n){var i=n("1c8b"),r=n("8d7b");i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},"6d51":function(t,e,n){var i=n("1b99"),r=n("faa8"),o=n("4350"),a=n("d910").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||a(e,t,{value:o.f(t)})}},"6db4":function(t,e,n){"use strict";var i=n("1c8b"),r=n("c10f").trim,o=n("f221");i({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},"6f82":function(t,e,n){var i=n("3553"),r=n("d88d"),o=n("b60f"),a=n("98a9"),s=n("e349"),c=n("5a9e").aTypedArrayConstructor;t.exports=function(t){var e,n,l,u,d,h,f=i(t),g=arguments.length,p=g>1?arguments[1]:void 0,v=void 0!==p,y=o(f);if(void 0!=y&&!a(y)){d=y.call(f),h=d.next,f=[];while(!(u=h.call(d)).done)f.push(u.value)}for(v&&g>2&&(p=s(p,arguments[2],2)),n=r(f.length),l=new(c(this))(n),e=0;n>e;e++)l[e]=v?p(f[e],e):f[e];return l}},7063:function(t,e,n){var i=n("a719"),r=n("50fb");t.exports=function(t,e,n){var o,a;return r&&"function"==typeof(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&r(t,a),t}},"706f":function(t,e,n){"use strict";var i=n("4db3"),r=n.n(i);r.a},"74e7":function(t,e,n){var i=n("2118");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"77ad":function(t,e,n){"use strict";var i=n("1c8b"),r=n("a719"),o=n("74e7"),a=n("e1d6"),s=n("d88d"),c=n("da10"),l=n("1bbd"),u=n("90fb"),d=n("1ea7"),h=n("ff9c"),f=d("slice"),g=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),v=[].slice,y=Math.max;i({target:"Array",proto:!0,forced:!f||!g},{slice:function(t,e){var n,i,u,d=c(this),h=s(d.length),f=a(t,h),g=a(void 0===e?h:e,h);if(o(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,f,g);for(i=new(void 0===n?Array:n)(y(g-f,0)),u=0;f<g;f++,u++)f in d&&l(i,u,d[f]);return i.length=u,i}})},"783d":function(t,e,n){var i=n("90fb"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},"7aeb":function(t,e,n){var i=n("6176");t.exports=function(t,e){var n=i(t);if(n%e)throw RangeError("Wrong offset");return n}},8256:function(t,e,n){var i=n("26a2");i("Uint8",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},"829d":function(t,e,n){"use strict";var i=n("5a9e"),r=i.aTypedArray,o=i.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(r(this),t)}))},"83db":function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").some,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("some",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},"84b3":function(t,e,n){var i=n("d890"),r=n("c10f").trim,o=n("fc8c"),a=i.parseFloat,s=1/a(o+"-0")!==-1/0;t.exports=s?function(t){var e=r(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},"84c2":function(t,e,n){var i=n("1e2c"),r=n("d890"),o=n("e8d6"),a=n("7063"),s=n("d910").f,c=n("b338").f,l=n("8a1c"),u=n("99ad"),d=n("22ef"),h=n("1944"),f=n("efe2"),g=n("b702").set,p=n("403f"),v=n("90fb"),y=v("match"),_=r.RegExp,m=_.prototype,b=/a/g,x=/a/g,w=new _(b)!==b,I=d.UNSUPPORTED_Y,S=i&&o("RegExp",!w||I||f((function(){return x[y]=!1,_(b)!=b||_(x)==x||"/a/i"!=_(b,"i")})));if(S){var T=function(t,e){var n,i=this instanceof T,r=l(t),o=void 0===e;if(!i&&r&&t.constructor===T&&o)return t;w?r&&!o&&(t=t.source):t instanceof T&&(o&&(e=u.call(t)),t=t.source),I&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var s=a(w?new _(t,e):_(t,e),i?this:m,T);return I&&n&&g(s,{sticky:n}),s},C=function(t){t in T||s(T,t,{configurable:!0,get:function(){return _[t]},set:function(e){_[t]=e}})},M=c(_),D=0;while(M.length>D)C(M[D++]);m.constructor=T,T.prototype=m,h(r,"RegExp",T)}p("RegExp")},"8a1c":function(t,e,n){var i=n("a719"),r=n("2118"),o=n("90fb"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},"8d7b":function(t,e,n){"use strict";var i=n("da10"),r=n("3da3"),o=n("d88d"),a=n("d7e1"),s=n("ff9c"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!h;t.exports=f?function(t){if(u)return l.apply(this,arguments)||0;var e=i(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=c(a,r(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:l},"90aa":function(t,e,n){"use strict";var i=n("1c8b"),r=n("07a2"),o=n("2732"),a=n("783d");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},9119:function(t,e,n){var i=n("26a2");i("Uint16",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},"927c":function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").every,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("every",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},9302:function(t,e,n){"use strict";var i=n("1c8b"),r=n("692f"),o=n("da10"),a=n("d7e1"),s=[].join,c=r!=Object,l=a("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},"939f":function(t,e,n){"use strict";var i=n("5a9e"),r=n("d88d"),o=n("e1d6"),a=n("ef4c"),s=i.aTypedArray,c=i.exportTypedArrayMethod;c("subarray",(function(t,e){var n=s(this),i=n.length,c=o(t,i);return new(a(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,r((void 0===e?i:o(e,i))-c))}))},"96db":function(t,e,n){"use strict";var i=n("f62c").charAt,r=n("b702"),o=n("99ee"),a="String Iterator",s=r.set,c=r.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=i(n,r),e.index+=t.length,{value:t,done:!1})}))},"98e0":function(t,e,n){var i=n("1c8b"),r=n("e62b"),o=n("f471"),a=!o((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:r})},"9b11":function(t,e,n){var i=n("6d51");i("iterator")},"9c7c":function(t,e,n){(function(t){n("ecb4"),n("77ad"),n("983d"),n("e50e"),n("e35a"),n("2bbe"),n("0d7a"),function(t){"use strict";var e="ht",n=t[e],i=n.Default,r="prototype",o=n.DataModel[r],a=n.Data[r],s=null,c=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)};i.getEasing=function(t){var e=s;return t.indexOf(".")>=0?(t=t.split("."),e=d[t[0]][t[1]]):e=d[t],function(t){return e(t,0,1,1)}},i.getCommonEasing=function(t){var e=s;return t.indexOf(".")>=0?(t=t.split("."),e=d[t[0]][t[1]]):e=d[t],e},a.setAnimation=function(t){var e=this._animation;this._animation=t,this.fp("animation",e,t)},a.getAnimation=function(){return this._animation},a.pauseAnimation=function(){this._pauseAnimation=!0,this._pauseTime=Date.now()},a.resumeAnimation=function(){delete this._pauseAnimation},t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}();var l=t.requestAnimFrame,u=t.setInterval;o.setAnimationInterval=function(t){var e=this;e.$2a=t,e.$1a!=s&&(clearInterval(e.$1a),delete e.$1a,e.enableAnimation(t))},o.getAnimationInterval=function(){return this.$2a||"animationFrame"},o.getDataAnimation=function(t){return t.getAnimation()},o.enableAnimation=function(t){var e=this,n=e.getDatas();if(e.$1a==s){t&&e.setAnimationInterval(t),t=e.getAnimationInterval();var r=function t(){var r=e.getAnimationInterval();n.each((function(t){var n=e.getDataAnimation(t);if(t.setAnimation(n),n&&!t._pauseAnimation){var o=n.start;t._animationstatus=t._animationstatus||{},t._animationprocess=t._animationprocess||o.slice(0);for(var a=t._animationstatus,l=t._animationprocess,u=0;u<l.length;u++){var d;d=a[u]?a[u]:a[u]={$5a:0,$6a:0,$7a:0,$8a:0};var h=n[l[u]],f=h.property,g=h.accessType,p=h.from,v=h.to,y=h.easing||"Quad.easeOut",_=d.$5a,m=h.frames||60,b=h.repeat||0,x=h.duration,w=h.delay||0,I=h.interval,S=d.$6a,T=h.onUpdate,C=h.onComplete,M=!1,D=function(){var e;e=x!=s?i.getCommonEasing(y)(Date.now()-d._startTime,p,v-p,x):i.getCommonEasing(y)(_,p,v-p,m),T?T.call(t,e):g?"style"===g?t.s(f,e):"attr"===g?t.a(f,e):"field"===g&&(t[f]=e):t[c(f)](e),M=!0},E=function(){d._startTime==s&&(d._startTime=Date.now());var e=t._pauseTime;e!=s&&(d._startTime+=Date.now()-e),u==l.length-1&&delete t._pauseTime,I!=s?d.$7a>=I?(d.$7a=0,D()):d.$7a+=isNaN(r)?16.6666:r:D()};w?d.$8a>=w?E():d.$8a+=isNaN(r)?16.6666:r:E(),M&&(x!=s?Date.now()-d._startTime>x&&(!0===b?d._startTime=Date.now():(S=d.$6a=S+1,S>b&&(C&&C.call(t),h.next?(a[u]=s,l[u]=h.next):(t.setAnimation(s),t._animationstatus=s,t._animationprocess=s,t._pauseTime=s)))):(_=d.$5a=_+1,_>m&&(!0===b?_=d.$5a=0:(S=d.$6a=S+1,S>b&&(C&&C.call(t),h.next?(a[u]=s,l[u]=h.next):(t.setAnimation(s),t._animationstatus=s,t._animationprocess=s))))))}}})),"animationFrame"===r&&e.$1a!=s&&(e.$1a=l(t))};e.$1a="animationFrame"===t?l(r):u(r,t)}},o.disableAnimation=function(){var t=this,e=t.getAnimationInterval();"animationFrame"===e||clearInterval(t.$1a),delete t.$1a};var d={Linear:function(t,e,n,i){return n*t/i+e},Quad:{easeIn:function(t,e,n,i){return n*(t/=i)*t+e},easeOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOut:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOut:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOut:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOut:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e}},Expo:{easeIn:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOut:function(t,e,n,i){return t==i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOut:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e}},Circ:{easeIn:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOut:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,n,i,r,o){var a;return 0==t?e:1==(t/=i)?e+n:("undefined"==typeof o&&(o=.3*i),!r||r<Math.abs(n)?(a=o/4,r=n):a=o/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/o)+e)},easeOut:function(t,e,n,i,r,o){var a;return 0==t?e:1==(t/=i)?e+n:("undefined"==typeof o&&(o=.3*i),!r||r<Math.abs(n)?(r=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*i-a)*Math.PI/o)+n+e)},easeInOut:function(t,e,n,i,r,o){var a;return 0==t?e:2==(t/=i/2)?e+n:("undefined"==typeof o&&(o=.3*i*1.5),!r||r<Math.abs(n)?(r=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/o)+e:.5*r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/o)+n+e)}},Back:{easeIn:function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOut:function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOut:function(t,e,n,i,r){return"undefined"==typeof r&&(r=1.70158),(t/=i/2)<1?n/2*t*t*((1+(r*=1.525))*t-r)+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}},Bounce:{easeIn:function(t,e,n,i){return n-d.Bounce.easeOut(i-t,0,n,i)+e},easeOut:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,n,i){return i/2>t?.5*d.Bounce.easeIn(2*t,0,n,i)+e:.5*d.Bounce.easeOut(2*t-i,0,n,i)+.5*n+e}}}}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"))}).call(this,n("9edd"))},a4c7:function(t,e,n){var i=n("d890"),r=n("efe2"),o=n("f471"),a=n("5a9e").NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,c=i.Int8Array;t.exports=!a||!r((function(){c(1)}))||!r((function(){new c(-1)}))||!o((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||r((function(){return 1!==new c(new s(2),1,void 0).length}))},a7ef:function(t,e,n){"use strict";var i=n("5a9e"),r=n("58d8").right,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("reduceRight",(function(t){return r(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},a9af:function(t,e,n){"use strict";var i=n("1c8b");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},aafd:function(t,e,n){"use strict";var i=n("1c8b"),r=n("5197"),o=n("0496");i({target:"String",proto:!0,forced:o("sub")},{sub:function(){return r(this,"sub","","")}})},ab0f:function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").findIndex,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("findIndex",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},ab6e:function(t,e,n){"use strict";var i=n("5a9e"),r=n("19fc"),o=i.aTypedArray,a=i.exportTypedArrayMethod;a("copyWithin",(function(t,e){return r.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},af86:function(t,e,n){var i=n("d890"),r=n("064b"),o=n("a133"),a=n("0fc1"),s=n("90fb"),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var d in r){var h=i[d],f=h&&h.prototype;if(f){if(f[c]!==u)try{a(f,c,u)}catch(p){f[c]=u}if(f[l]||a(f,l,d),r[d])for(var g in o)if(f[g]!==o[g])try{a(f,g,o[g])}catch(p){f[g]=o[g]}}}},b130:function(t,e,n){"use strict";var i=n("1c8b"),r=n("45af").includes,o=n("258f"),a=n("ff9c"),s=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!s},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},b497:function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").map,o=n("ef4c"),a=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod;c("map",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},b4fb:function(t,e,n){"use strict";var i=n("1c8b"),r=n("efe2"),o=n("74e7"),a=n("a719"),s=n("3553"),c=n("d88d"),l=n("1bbd"),u=n("1ca1"),d=n("1ea7"),h=n("90fb"),f=n("f594"),g=h("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",y=f>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),_=d("concat"),m=function(t){if(!a(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)},b=!y||!_;i({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,i,r,o,a=s(this),d=u(a,0),h=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?a:arguments[e],m(o)){if(r=c(o.length),h+r>p)throw TypeError(v);for(n=0;n<r;n++,h++)n in o&&l(d,h,o[n])}else{if(h>=p)throw TypeError(v);l(d,h++,o)}return d.length=h,d}})},b523:function(t,e,n){"use strict";var i=n("5a9e"),r=i.aTypedArray,o=i.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){var t,e=this,n=r(e).length,i=a(n/2),o=0;while(o<i)t=e[o],e[o++]=e[--n],e[n]=t;return e}))},b6bc:function(t,e,n){var i=n("26a2");i("Float32",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},b73f:function(t,e,n){var i=n("1c8b"),r=n("efe2"),o=n("da10"),a=n("aa6b").f,s=n("1e2c"),c=r((function(){a(1)})),l=!s||c;i({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},b747:function(t,e,n){var i=n("d890"),r=n("c10f").trim,o=n("fc8c"),a=i.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(o+"08")||22!==a(o+"0x16");t.exports=c?function(t,e){var n=r(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},b92a:function(t,e,n){var i=n("1c8b"),r=n("84b3");i({global:!0,forced:parseFloat!=r},{parseFloat:r})},bb21:function(t,e,n){"use strict";var i=n("1c8b"),r=n("aa6b").f,o=n("d88d"),a=n("07a2"),s=n("2732"),c=n("783d"),l=n("9b9d"),u="".startsWith,d=Math.min,h=c("startsWith"),f=!l&&!h&&!!function(){var t=r(String.prototype,"startsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!f&&!h},{startsWith:function(t){var e=String(s(this));a(t);var n=o(d(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return u?u.call(e,i,n):e.slice(n,n+i.length)===i}})},bf84:function(t,e,n){var i=n("1c8b"),r=n("1e2c"),o=n("8d44"),a=n("da10"),s=n("aa6b"),c=n("1bbd");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,n,i=a(t),r=s.f,l=o(i),u={},d=0;while(l.length>d)n=r(i,e=l[d++]),void 0!==n&&c(u,e,n);return u}})},bfa5:function(t){t.exports=JSON.parse('{"code":0,"data":[{"lineId":1,"lineName":"一号线","lineNo":"1","stations":[{"stationId":1,"stationName":"西塱","sortId":"1-01","focused":false,"gates":null},{"stationId":2,"stationName":"坑口","sortId":"1-02","focused":false,"gates":null},{"stationId":3,"stationName":"花地湾","sortId":"1-03","focused":false,"gates":null},{"stationId":4,"stationName":"芳村","sortId":"1-04","focused":false,"gates":null},{"stationId":5,"stationName":"黄沙","sortId":"1-05","focused":false,"gates":null},{"stationId":6,"stationName":"长寿路","sortId":"1-06","focused":false,"gates":null},{"stationId":7,"stationName":"陈家祠","sortId":"1-07","focused":false,"gates":null},{"stationId":8,"stationName":"西门口","sortId":"1-08","focused":false,"gates":null},{"stationId":9,"stationName":"公园前","sortId":"1-09","focused":false,"gates":null},{"stationId":10,"stationName":"农讲所","sortId":"1-10","focused":false,"gates":null},{"stationId":11,"stationName":"烈士陵园","sortId":"1-11","focused":false,"gates":null},{"stationId":12,"stationName":"东山口","sortId":"1-12","focused":false,"gates":null},{"stationId":13,"stationName":"杨箕","sortId":"1-13","focused":false,"gates":null},{"stationId":14,"stationName":"体育西路","sortId":"1-14","focused":false,"gates":null},{"stationId":15,"stationName":"体育中心","sortId":"1-15","focused":false,"gates":null},{"stationId":16,"stationName":"广州东站","sortId":"1-16","focused":false,"gates":null}]},{"lineId":2,"lineName":"二号线","lineNo":"2","stations":[{"stationId":17,"stationName":"广州南站","sortId":"2-01","focused":false,"gates":null},{"stationId":18,"stationName":"石壁","sortId":"2-02","focused":false,"gates":null},{"stationId":19,"stationName":"会江","sortId":"2-03","focused":false,"gates":null},{"stationId":20,"stationName":"南浦","sortId":"2-04","focused":false,"gates":null},{"stationId":21,"stationName":"洛溪","sortId":"2-05","focused":false,"gates":null},{"stationId":22,"stationName":"南洲","sortId":"2-06","focused":false,"gates":null},{"stationId":23,"stationName":"东晓南","sortId":"2-07","focused":false,"gates":null},{"stationId":24,"stationName":"江泰路","sortId":"2-08","focused":false,"gates":null},{"stationId":25,"stationName":"昌岗","sortId":"2-09","focused":false,"gates":null},{"stationId":26,"stationName":"江南西","sortId":"2-10","focused":false,"gates":null},{"stationId":27,"stationName":"市二宫","sortId":"2-11","focused":false,"gates":null},{"stationId":28,"stationName":"海珠广场","sortId":"2-12","focused":false,"gates":null},{"stationId":29,"stationName":"公园前","sortId":"1-09","focused":false,"gates":null},{"stationId":30,"stationName":"纪念堂","sortId":"2-14","focused":false,"gates":null},{"stationId":31,"stationName":"越秀公园","sortId":"2-15","focused":false,"gates":null},{"stationId":32,"stationName":"广州火车站","sortId":"2-16","focused":false,"gates":null},{"stationId":33,"stationName":"三元里","sortId":"2-17","focused":false,"gates":null},{"stationId":34,"stationName":"飞翔公园","sortId":"2-18","focused":false,"gates":null},{"stationId":35,"stationName":"白云公园","sortId":"2-19","focused":false,"gates":null},{"stationId":36,"stationName":"白云文化广场","sortId":"2-20","focused":false,"gates":null},{"stationId":37,"stationName":"萧岗","sortId":"2-21","focused":false,"gates":null},{"stationId":38,"stationName":"江夏","sortId":"2-22","focused":false,"gates":null},{"stationId":39,"stationName":"黄边","sortId":"2-23","focused":false,"gates":null},{"stationId":40,"stationName":"嘉禾望岗","sortId":"2-24","focused":false,"gates":null}]},{"lineId":3,"lineName":"三号线","lineNo":"3","stations":[{"stationId":41,"stationName":"番禺广场","sortId":"3-01","focused":false,"gates":null},{"stationId":42,"stationName":"市桥","sortId":"3-02","focused":false,"gates":null},{"stationId":43,"stationName":"汉溪长隆","sortId":"3-03","focused":false,"gates":null},{"stationId":44,"stationName":"大石","sortId":"3-04","focused":false,"gates":null},{"stationId":45,"stationName":"厦滘","sortId":"3-05","focused":false,"gates":null},{"stationId":46,"stationName":"沥滘","sortId":"3-06","focused":false,"gates":null},{"stationId":47,"stationName":"大塘","sortId":"3-07","focused":false,"gates":null},{"stationId":48,"stationName":"客村","sortId":"3-08","focused":false,"gates":null},{"stationId":49,"stationName":"广州塔","sortId":"3-09","focused":false,"gates":null},{"stationId":50,"stationName":"珠江新城","sortId":"3-10","focused":false,"gates":null},{"stationId":51,"stationName":"体育西路","sortId":"1-14","focused":false,"gates":null},{"stationId":52,"stationName":"石牌桥","sortId":"3-12","focused":false,"gates":null},{"stationId":53,"stationName":"岗顶","sortId":"3-13","focused":false,"gates":null},{"stationId":54,"stationName":"华师","sortId":"3-14","focused":false,"gates":null},{"stationId":55,"stationName":"五山","sortId":"3-15","focused":false,"gates":null},{"stationId":56,"stationName":"天河客运站","sortId":"3-16","focused":false,"gates":null}]},{"lineId":4,"lineName":"三北线","lineNo":"3B","stations":[{"stationId":57,"stationName":"体育西路","sortId":"1-14","focused":false,"gates":null},{"stationId":58,"stationName":"林和西","sortId":"3-17","focused":false,"gates":null},{"stationId":59,"stationName":"广州东站","sortId":"1-16","focused":false,"gates":null},{"stationId":60,"stationName":"燕塘","sortId":"3-19","focused":false,"gates":null},{"stationId":61,"stationName":"梅花园","sortId":"3-20","focused":false,"gates":null},{"stationId":62,"stationName":"京溪南方医院","sortId":"3-21","focused":false,"gates":null},{"stationId":63,"stationName":"同和","sortId":"3-22","focused":false,"gates":null},{"stationId":64,"stationName":"永泰","sortId":"3-23","focused":false,"gates":null},{"stationId":65,"stationName":"白云大道北","sortId":"3-24","focused":false,"gates":null},{"stationId":66,"stationName":"嘉禾望岗","sortId":"2-24","focused":false,"gates":null},{"stationId":67,"stationName":"龙归","sortId":"3-26","focused":false,"gates":null},{"stationId":68,"stationName":"人和","sortId":"3-27","focused":false,"gates":null},{"stationId":69,"stationName":"高增","sortId":"3-28","focused":false,"gates":null},{"stationId":70,"stationName":"机场南（1号航站楼）","sortId":"3-29","focused":false,"gates":null},{"stationId":71,"stationName":"机场北（2号航站楼）","sortId":"3-30","focused":false,"gates":null}]},{"lineId":5,"lineName":"四号线","lineNo":"4","stations":[{"stationId":72,"stationName":"南沙客运港","sortId":"4-01","focused":false,"gates":null},{"stationId":73,"stationName":"南横","sortId":"4-02","focused":false,"gates":null},{"stationId":74,"stationName":"塘坑","sortId":"4-03","focused":false,"gates":null},{"stationId":75,"stationName":"大涌","sortId":"4-04","focused":false,"gates":null},{"stationId":76,"stationName":"广隆","sortId":"4-05","focused":false,"gates":null},{"stationId":77,"stationName":"飞沙角","sortId":"4-06","focused":false,"gates":null},{"stationId":78,"stationName":"金洲","sortId":"4-07","focused":false,"gates":null},{"stationId":79,"stationName":"蕉门","sortId":"4-08","focused":false,"gates":null},{"stationId":80,"stationName":"黄阁","sortId":"4-09","focused":false,"gates":null},{"stationId":81,"stationName":"黄阁汽车城","sortId":"4-10","focused":false,"gates":null},{"stationId":82,"stationName":"庆盛","sortId":"4-11","focused":false,"gates":null},{"stationId":83,"stationName":"东涌","sortId":"4-12","focused":false,"gates":null},{"stationId":84,"stationName":"低涌","sortId":"4-13","focused":false,"gates":null},{"stationId":86,"stationName":"石碁","sortId":"4-15","focused":false,"gates":null},{"stationId":87,"stationName":"官桥","sortId":"4-16","focused":false,"gates":null},{"stationId":88,"stationName":"新造","sortId":"4-17","focused":false,"gates":null},{"stationId":89,"stationName":"大学城南","sortId":"4-18","focused":false,"gates":null},{"stationId":90,"stationName":"大学城北","sortId":"4-19","focused":false,"gates":null},{"stationId":91,"stationName":"官洲","sortId":"4-20","focused":false,"gates":null},{"stationId":92,"stationName":"万胜围","sortId":"4-21","focused":false,"gates":null},{"stationId":93,"stationName":"车陂南","sortId":"4-22","focused":false,"gates":null},{"stationId":94,"stationName":"车陂","sortId":"4-23","focused":false,"gates":null},{"stationId":95,"stationName":"黄村","sortId":"4-24","focused":false,"gates":null},{"stationId":289,"stationName":"海傍","sortId":"4-14","focused":false,"gates":null}]},{"lineId":6,"lineName":"五号线","lineNo":"5","stations":[{"stationId":96,"stationName":"滘口","sortId":"5-01","focused":false,"gates":null},{"stationId":97,"stationName":"坦尾","sortId":"5-02","focused":false,"gates":null},{"stationId":98,"stationName":"中山八","sortId":"5-03","focused":false,"gates":null},{"stationId":99,"stationName":"西场","sortId":"5-04","focused":false,"gates":null},{"stationId":100,"stationName":"西村","sortId":"5-05","focused":false,"gates":null},{"stationId":101,"stationName":"广州火车站","sortId":"2-16","focused":false,"gates":null},{"stationId":102,"stationName":"小北","sortId":"5-07","focused":false,"gates":null},{"stationId":103,"stationName":"淘金","sortId":"5-08","focused":false,"gates":null},{"stationId":104,"stationName":"区庄","sortId":"5-09","focused":false,"gates":null},{"stationId":105,"stationName":"动物园","sortId":"5-10","focused":false,"gates":null},{"stationId":106,"stationName":"杨箕","sortId":"1-13","focused":false,"gates":null},{"stationId":107,"stationName":"五羊邨","sortId":"5-12","focused":false,"gates":null},{"stationId":108,"stationName":"珠江新城","sortId":"3-10","focused":false,"gates":null},{"stationId":109,"stationName":"猎德","sortId":"5-14","focused":false,"gates":null},{"stationId":110,"stationName":"潭村","sortId":"5-15","focused":false,"gates":null},{"stationId":111,"stationName":"员村","sortId":"5-16","focused":false,"gates":null},{"stationId":112,"stationName":"科韵路","sortId":"5-17","focused":false,"gates":null},{"stationId":113,"stationName":"车陂南","sortId":"4-22","focused":false,"gates":null},{"stationId":114,"stationName":"东圃","sortId":"5-19","focused":false,"gates":null},{"stationId":115,"stationName":"三溪","sortId":"5-20","focused":false,"gates":null},{"stationId":116,"stationName":"鱼珠","sortId":"5-21","focused":false,"gates":null},{"stationId":117,"stationName":"大沙地","sortId":"5-22","focused":false,"gates":null},{"stationId":118,"stationName":"大沙东","sortId":"5-23","focused":false,"gates":null},{"stationId":119,"stationName":"文冲","sortId":"5-24","focused":false,"gates":null}]},{"lineId":7,"lineName":"六号线","lineNo":"6","stations":[{"stationId":120,"stationName":"浔峰岗","sortId":"6-01","focused":false,"gates":null},{"stationId":121,"stationName":"横沙","sortId":"6-02","focused":false,"gates":null},{"stationId":122,"stationName":"沙贝","sortId":"6-03","focused":false,"gates":null},{"stationId":123,"stationName":"河沙","sortId":"6-04","focused":false,"gates":null},{"stationId":124,"stationName":"坦尾","sortId":"5-02","focused":false,"gates":null},{"stationId":125,"stationName":"如意坊","sortId":"6-06","focused":false,"gates":null},{"stationId":126,"stationName":"黄沙","sortId":"1-05","focused":false,"gates":null},{"stationId":127,"stationName":"文化公园","sortId":"6-08","focused":false,"gates":null},{"stationId":128,"stationName":"一德路","sortId":"6-09","focused":false,"gates":null},{"stationId":129,"stationName":"海珠广场","sortId":"2-12","focused":false,"gates":null},{"stationId":130,"stationName":"北京路","sortId":"6-11","focused":false,"gates":null},{"stationId":131,"stationName":"团一大广场","sortId":"6-12","focused":false,"gates":null},{"stationId":132,"stationName":"东湖","sortId":"6-13","focused":false,"gates":null},{"stationId":133,"stationName":"东山口","sortId":"1-12","focused":false,"gates":null},{"stationId":134,"stationName":"区庄","sortId":"5-09","focused":false,"gates":null},{"stationId":135,"stationName":"黄花岗","sortId":"6-16","focused":false,"gates":null},{"stationId":136,"stationName":"沙河顶","sortId":"6-17","focused":false,"gates":null},{"stationId":137,"stationName":"沙河","sortId":"6-18","focused":false,"gates":null},{"stationId":138,"stationName":"天平架","sortId":"6-19","focused":false,"gates":null},{"stationId":139,"stationName":"燕塘","sortId":"3-19","focused":false,"gates":null},{"stationId":140,"stationName":"天河客运站","sortId":"3-16","focused":false,"gates":null},{"stationId":141,"stationName":"长湴","sortId":"6-22","focused":false,"gates":null},{"stationId":142,"stationName":"植物园","sortId":"6-23","focused":false,"gates":null},{"stationId":143,"stationName":"龙洞","sortId":"6-24","focused":false,"gates":null},{"stationId":144,"stationName":"柯木塱","sortId":"6-25","focused":false,"gates":null},{"stationId":145,"stationName":"高塘石","sortId":"6-26","focused":false,"gates":null},{"stationId":146,"stationName":"黄陂","sortId":"6-27","focused":false,"gates":null},{"stationId":147,"stationName":"金峰","sortId":"6-28","focused":false,"gates":null},{"stationId":148,"stationName":"暹岗","sortId":"6-29","focused":false,"gates":null},{"stationId":149,"stationName":"苏元","sortId":"6-30","focused":false,"gates":null},{"stationId":150,"stationName":"萝岗","sortId":"6-31","focused":false,"gates":null},{"stationId":151,"stationName":"香雪","sortId":"6-32","focused":false,"gates":null}]},{"lineId":8,"lineName":"七号线","lineNo":"7","stations":[{"stationId":152,"stationName":"广州南站","sortId":"2-01","focused":false,"gates":null},{"stationId":153,"stationName":"石壁","sortId":"2-02","focused":false,"gates":null},{"stationId":154,"stationName":"谢村","sortId":"7-03","focused":false,"gates":null},{"stationId":155,"stationName":"钟村","sortId":"7-04","focused":false,"gates":null},{"stationId":156,"stationName":"汉溪长隆","sortId":"3-03","focused":false,"gates":null},{"stationId":157,"stationName":"南村万博","sortId":"7-06","focused":false,"gates":null},{"stationId":158,"stationName":"员岗","sortId":"7-07","focused":false,"gates":null},{"stationId":159,"stationName":"板桥","sortId":"7-08","focused":false,"gates":null},{"stationId":160,"stationName":"大学城南","sortId":"4-18","focused":false,"gates":null}]},{"lineId":9,"lineName":"八号线","lineNo":"8","stations":[{"stationId":161,"stationName":"文化公园","sortId":"6-08","focused":false,"gates":null},{"stationId":162,"stationName":"同福西","sortId":"8-15","focused":false,"gates":null},{"stationId":163,"stationName":"凤凰新村","sortId":"8-16","focused":false,"gates":null},{"stationId":164,"stationName":"沙园","sortId":"8-17","focused":false,"gates":null},{"stationId":165,"stationName":"宝岗大道","sortId":"8-18","focused":false,"gates":null},{"stationId":166,"stationName":"昌岗","sortId":"2-09","focused":false,"gates":null},{"stationId":167,"stationName":"晓港","sortId":"8-20","focused":false,"gates":null},{"stationId":168,"stationName":"中大","sortId":"8-21","focused":false,"gates":null},{"stationId":169,"stationName":"鹭江","sortId":"8-22","focused":false,"gates":null},{"stationId":170,"stationName":"客村","sortId":"3-08","focused":false,"gates":null},{"stationId":171,"stationName":"赤岗","sortId":"8-24","focused":false,"gates":null},{"stationId":172,"stationName":"磨碟沙","sortId":"8-25","focused":false,"gates":null},{"stationId":173,"stationName":"新港东","sortId":"8-26","focused":false,"gates":null},{"stationId":174,"stationName":"琶洲","sortId":"8-27","focused":false,"gates":null},{"stationId":175,"stationName":"万胜围","sortId":"4-21","focused":false,"gates":null}]},{"lineId":10,"lineName":"九号线","lineNo":"9","stations":[{"stationId":176,"stationName":"飞鹅岭","sortId":"9-01","focused":false,"gates":null},{"stationId":177,"stationName":"花都汽车城","sortId":"9-02","focused":false,"gates":null},{"stationId":178,"stationName":"广州北站","sortId":"9-03","focused":false,"gates":null},{"stationId":179,"stationName":"花城路","sortId":"9-04","focused":false,"gates":null},{"stationId":180,"stationName":"花果山公园","sortId":"9-05","focused":false,"gates":null},{"stationId":181,"stationName":"花都广场","sortId":"9-06","focused":false,"gates":null},{"stationId":182,"stationName":"马鞍山公园","sortId":"9-07","focused":false,"gates":null},{"stationId":183,"stationName":"莲塘","sortId":"9-08","focused":false,"gates":null},{"stationId":184,"stationName":"清㘵","sortId":"9-09","focused":false,"gates":null},{"stationId":185,"stationName":"清塘","sortId":"9-10","focused":false,"gates":null},{"stationId":186,"stationName":"高增","sortId":"3-28","focused":false,"gates":null}]},{"lineId":11,"lineName":"十三号线","lineNo":"13","stations":[{"stationId":187,"stationName":"鱼珠","sortId":"5-21","focused":false,"gates":null},{"stationId":188,"stationName":"裕丰围","sortId":"13-02","focused":false,"gates":null},{"stationId":189,"stationName":"双岗","sortId":"13-03","focused":false,"gates":null},{"stationId":190,"stationName":"南海神庙","sortId":"13-04","focused":false,"gates":null},{"stationId":191,"stationName":"夏园","sortId":"13-05","focused":false,"gates":null},{"stationId":192,"stationName":"南岗","sortId":"13-06","focused":false,"gates":null},{"stationId":193,"stationName":"沙村","sortId":"13-07","focused":false,"gates":null},{"stationId":194,"stationName":"白江","sortId":"13-08","focused":false,"gates":null},{"stationId":195,"stationName":"新塘","sortId":"13-09","focused":false,"gates":null},{"stationId":196,"stationName":"官湖","sortId":"13-10","focused":false,"gates":null},{"stationId":197,"stationName":"新沙","sortId":"13-11","focused":false,"gates":null}]},{"lineId":12,"lineName":"十四号线","lineNo":"14","stations":[{"stationId":198,"stationName":"嘉禾望岗","sortId":"2-24","focused":false,"gates":null},{"stationId":199,"stationName":"白云东平","sortId":"14-02","focused":false,"gates":null},{"stationId":200,"stationName":"夏良","sortId":"14-03","focused":false,"gates":null},{"stationId":201,"stationName":"太和","sortId":"14-04","focused":false,"gates":null},{"stationId":202,"stationName":"竹料","sortId":"14-05","focused":false,"gates":null},{"stationId":203,"stationName":"钟落潭","sortId":"14-06","focused":false,"gates":null},{"stationId":204,"stationName":"马沥","sortId":"14-07","focused":false,"gates":null},{"stationId":205,"stationName":"新和","sortId":"14-08","focused":false,"gates":null},{"stationId":206,"stationName":"太平","sortId":"14-09","focused":false,"gates":null},{"stationId":207,"stationName":"神岗","sortId":"14-10","focused":false,"gates":null},{"stationId":208,"stationName":"赤草","sortId":"14-11","focused":false,"gates":null},{"stationId":209,"stationName":"从化客运站","sortId":"14-12","focused":false,"gates":null},{"stationId":210,"stationName":"东风","sortId":"14-13","focused":false,"gates":null}]},{"lineId":13,"lineName":"十四号线(知识城)","lineNo":"ZSC","stations":[{"stationId":211,"stationName":"新和","sortId":"14-08","focused":false,"gates":null},{"stationId":212,"stationName":"红卫","sortId":"14-14","focused":false,"gates":null},{"stationId":213,"stationName":"新南","sortId":"14-15","focused":false,"gates":null},{"stationId":214,"stationName":"枫下","sortId":"14-16","focused":false,"gates":null},{"stationId":215,"stationName":"知识城","sortId":"14-17","focused":false,"gates":null},{"stationId":216,"stationName":"何棠下","sortId":"14-18","focused":false,"gates":null},{"stationId":217,"stationName":"旺村","sortId":"14-19","focused":false,"gates":null},{"stationId":218,"stationName":"汤村","sortId":"14-20","focused":false,"gates":null},{"stationId":219,"stationName":"镇龙北","sortId":"14-21","focused":false,"gates":null},{"stationId":220,"stationName":"镇龙","sortId":"14-22","focused":false,"gates":null}]},{"lineId":15,"lineName":"APM","lineNo":"APM","stations":[{"stationId":242,"stationName":"广州塔","sortId":"3-09","focused":false,"gates":null},{"stationId":243,"stationName":"海心沙","sortId":"APM-02","focused":false,"gates":null},{"stationId":244,"stationName":"大剧院","sortId":"APM-03","focused":false,"gates":null},{"stationId":245,"stationName":"花城大道","sortId":"APM-04","focused":false,"gates":null},{"stationId":246,"stationName":"妇儿中心","sortId":"APM-05","focused":false,"gates":null},{"stationId":247,"stationName":"黄埔大道","sortId":"APM-06","focused":false,"gates":null},{"stationId":248,"stationName":"天河南","sortId":"APM-07","focused":false,"gates":null},{"stationId":249,"stationName":"体育中心南","sortId":"APM-08","focused":false,"gates":null},{"stationId":250,"stationName":"林和西","sortId":"3-17","focused":false,"gates":null}]},{"lineId":16,"lineName":"广佛线","lineNo":"GF","stations":[{"stationId":251,"stationName":"新城东","sortId":"GF-01","focused":false,"gates":null},{"stationId":252,"stationName":"东平","sortId":"GF-02","focused":false,"gates":null},{"stationId":253,"stationName":"世纪莲","sortId":"GF-03","focused":false,"gates":null},{"stationId":254,"stationName":"澜石","sortId":"GF-04","focused":false,"gates":null},{"stationId":255,"stationName":"魁奇路","sortId":"GF-05","focused":false,"gates":null},{"stationId":256,"stationName":"季华园","sortId":"GF-06","focused":false,"gates":null},{"stationId":257,"stationName":"同济路","sortId":"GF-07","focused":false,"gates":null},{"stationId":258,"stationName":"祖庙","sortId":"GF-08","focused":false,"gates":null},{"stationId":259,"stationName":"普君北路","sortId":"GF-09","focused":false,"gates":null},{"stationId":260,"stationName":"朝安","sortId":"GF-10","focused":false,"gates":null},{"stationId":261,"stationName":"桂城","sortId":"GF-11","focused":false,"gates":null},{"stationId":262,"stationName":"南桂路","sortId":"GF-12","focused":false,"gates":null},{"stationId":263,"stationName":"虫雷 岗","sortId":"GF-13","focused":false,"gates":null},{"stationId":264,"stationName":"千灯湖","sortId":"GF-14","focused":false,"gates":null},{"stationId":265,"stationName":"金融高新区","sortId":"GF-15","focused":false,"gates":null},{"stationId":266,"stationName":"龙溪","sortId":"GF-16","focused":false,"gates":null},{"stationId":267,"stationName":"菊树","sortId":"GF-17","focused":false,"gates":null},{"stationId":268,"stationName":"西塱","sortId":"1-01","focused":false,"gates":null},{"stationId":269,"stationName":"鹤洞","sortId":"GF-19","focused":false,"gates":null},{"stationId":270,"stationName":"沙涌","sortId":"GF-20","focused":false,"gates":null},{"stationId":271,"stationName":"沙园","sortId":"8-17","focused":false,"gates":null},{"stationId":272,"stationName":"燕岗","sortId":"GF-22","focused":false,"gates":null},{"stationId":273,"stationName":"石溪","sortId":"GF-23","focused":false,"gates":null},{"stationId":274,"stationName":"南洲","sortId":"2-06","focused":false,"gates":null},{"stationId":275,"stationName":"沥滘","sortId":"3-06","focused":false,"gates":null}]},{"lineId":21,"lineName":"二十一号线","lineNo":"21","stations":[{"stationId":85,"stationName":"天河智慧城","sortId":"21-06","focused":true,"gates":null},{"stationId":221,"stationName":"员村","sortId":"5-16","focused":false,"gates":null},{"stationId":222,"stationName":"天河公园","sortId":"21-02","focused":false,"gates":null},{"stationId":223,"stationName":"棠东","sortId":"21-03","focused":false,"gates":null},{"stationId":224,"stationName":"黄村","sortId":"4-24","focused":false,"gates":null},{"stationId":225,"stationName":"大观南路","sortId":"21-05","focused":false,"gates":null},{"stationId":227,"stationName":"神舟路","sortId":"21-07","focused":false,"gates":null},{"stationId":228,"stationName":"科学城","sortId":"21-08","focused":false,"gates":null},{"stationId":229,"stationName":"苏元","sortId":"6-30","focused":false,"gates":null},{"stationId":230,"stationName":"水西","sortId":"21-10","focused":false,"gates":null},{"stationId":231,"stationName":"长平","sortId":"21-11","focused":false,"gates":null},{"stationId":232,"stationName":"金坑","sortId":"21-12","focused":false,"gates":null},{"stationId":233,"stationName":"镇龙西","sortId":"21-13","focused":false,"gates":null},{"stationId":234,"stationName":"镇龙","sortId":"14-22","focused":false,"gates":null},{"stationId":235,"stationName":"中新","sortId":"21-15","focused":false,"gates":null},{"stationId":236,"stationName":"坑贝","sortId":"21-16","focused":false,"gates":null},{"stationId":237,"stationName":"凤岗","sortId":"21-17","focused":false,"gates":null},{"stationId":238,"stationName":"朱村","sortId":"21-18","focused":false,"gates":null},{"stationId":239,"stationName":"山田","sortId":"21-19","focused":false,"gates":null},{"stationId":240,"stationName":"钟岗","sortId":"21-20","focused":false,"gates":null},{"stationId":241,"stationName":"增城广场","sortId":"21-21","focused":false,"gates":null}]}],"msg":"执行成功"}')},c051:function(t,e,n){var i=n("da10"),r=n("b338").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},c10f:function(t,e,n){var i=n("2732"),r=n("fc8c"),o="["+r+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(t){return function(e){var n=String(i(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},c1d9:function(t,e,n){var i=n("1c8b"),r=n("4548").entries;i({target:"Object",stat:!0},{entries:function(t){return r(t)}})},c3ba:function(t,e,n){"use strict";var i=n("5a9e").exportTypedArrayMethod,r=n("efe2"),o=n("d890"),a=o.Uint8Array,s=a&&a.prototype||{},c=[].toString,l=[].join;r((function(){c.call({})}))&&(c=function(){return l.call(this)});var u=s.toString!=c;i("toString",c,u)},c7e6:function(t,e,n){"use strict";var i=n("3da3"),r=n("2732");t.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},cfd1:function(t,e,n){"use strict";var i=n("5a9e"),r=n("45af").indexOf,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("indexOf",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},d104:function(t,e,n){"use strict";var i=n("d890"),r=n("5a9e"),o=n("a133"),a=n("90fb"),s=a("iterator"),c=i.Uint8Array,l=o.values,u=o.keys,d=o.entries,h=r.aTypedArray,f=r.exportTypedArrayMethod,g=c&&c.prototype[s],p=!!g&&("values"==g.name||void 0==g.name),v=function(){return l.call(h(this))};f("entries",(function(){return d.call(h(this))})),f("keys",(function(){return u.call(h(this))})),f("values",v,!p),f(s,v,!p)},d325:function(t,e,n){(function(t){n("b4fb"),n("56ea"),n("dbb3"),n("fe59"),n("ecb4"),n("f657"),n("9302"),n("6ae3"),n("2eeb"),n("086d"),n("77ad"),n("08d5"),n("ea69"),n("3e54"),n("983d"),n("de6c"),n("e50e"),n("48f3"),n("053b"),n("61a4"),n("513c"),n("20a5"),n("e18c"),n("b92a"),n("33a2"),n("84c2"),n("e35a"),n("1c2e"),n("5e9f"),n("0d7a"),n("6db4"),n("3efa"),n("aafd"),n("b6bc"),n("41ff"),n("8256"),n("9119"),n("ab6e"),n("927c"),n("3c51"),n("db0a"),n("1cc1"),n("ab0f"),n("fc6e"),n("f30b"),n("cfd1"),n("d104"),n("f74a"),n("3598"),n("b497"),n("2909"),n("a7ef"),n("b523"),n("e671"),n("4140"),n("83db"),n("829d"),n("939f"),n("1bb1"),n("c3ba"),n("08ba"),n("af86"),n("1fb3"),n("a9af");var e=n("db23");!function(n,i,r){"use strict";function o(){this.el=[1,0,0,0,1,0,0,0,1]}function a(t){var e={};return{get:function(n){if(e[n]!==r)return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return e[n]=i,i}}}function s(t,e,n){function i(){if(a!==r)return a;var n=e.get("EXT_texture_filter_anisotropic");return a=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a;n=n||{};var s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,c=n.precision!==r?n.precision:"highp",l=o(c);l!==c&&(console.warn("WebGL:",c,"not supported, using",l,"instead."),c=l);var u=!0===n.logarithmicDepthBuffer,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),y=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),m=h>0,b=s||!!e.get("OES_texture_float"),x=m&&b,w=s?t.getParameter(t.MAX_SAMPLES):0;return{getMaxAnisotropy:i,getMaxPrecision:o,precision:c,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:m,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}var c="ht";if(!n[c]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),n.performance&&n.performance.now||function(){var t=Date.now();n.performance||(n.performance={}),n.performance.now=function(){return Date.now()-t}}();for(var t=Date.now(),e=16,o=["ms","moz","webkit","o"],a=0;a<o.length&&!n.requestAnimationFrame;++a)n.requestAnimationFrame=n[o[a]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[o[a]+"CancelAnimationFrame"]||n[o[a]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(i){var r=Date.now(),o=e+t-r;return 0>o&&(o=0),t=r,n.setTimeout((function(){t=Date.now(),i(performance.now())}),o)}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){return n.clearTimeout(t)}),i.assign===r&&(i.assign=function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=i(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==r&&null!==o)for(var a in o)i.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e})}();var l=n.document,u=null,d=n[c]={},h=n[c+"config"],f=d.Default=h&&h.Default||{},g=d.Style=h&&h.Style||{},p=d.Attr=h&&h.Attr||{},v=d.Color=h&&h.Color||{},y=d.IsGetter=h&&h.IsGetter||{};!function(){var t=!1;try{var e=i.defineProperty({},"passive",{get:function(){t=!0}});n.addEventListener("test",e,e),n.removeEventListener("test",e,e)}catch(r){t=!1}f.passiveSupported=t}();var _,m,b,x=f.passiveSupported,w=f.eventListenerOptionsFalse=!!x&&{passive:!1,capture:!1},I=f.eventListenerOptionsTrue=!x||{passive:!1,capture:!0},S=function(t,e,n,i){t.addEventListener(e,n,i?I:w)},T=function(t,e,n,i){t.removeEventListener(e,n,i?I:w)},C=Math,M=C.round,D=C.floor,E=C.ceil,P=C.sqrt,O=C.max,A=C.min,k=C.abs,R=C.cos,z=C.acos,N=C.sin,V=C.pow,L=C.asin,B=C.PI,G=2*B,F=B/2,j=C.tan,H=C.atan2,U=C.random,Z=C.log,W=!1,q=!1,X=n.parseInt||t.parseInt,Y="2019-12-25",$=!!n.navigator&&n.navigator.platform.indexOf("Win")>-1,Q=function(t){return t*t},J=n.setTimeout,K=n.clearTimeout,tt=n.location,et=n.navigator?n.navigator.userAgent.toLowerCase():"",nt=function(t){return t.test(et)},it=nt(/msie/),rt=nt(/msie/)||nt(/trident/),ot=nt(/msie 10/),at=nt(/edge/),st=nt(/firefox/),ct=nt(/mac/),lt=f.isTouchable===r?!$&&(!!l&&"ontouchend"in l):f.isTouchable,ut="default",dt="single",ht="multiple",ft="front",gt="back",pt="left",vt="right",yt="top",_t="bottom",mt="center",bt="eye",xt="middle",wt="east",It="west",St="north",Tt="none",Ct="px",Mt="absolute",Dt="border",Et="triangle",Pt="rect",Ot="circle",At="cylinder",kt="shape",Rt="items",zt="normal",Nt="remove",Vt="clear",Lt="width",Bt="height",Gt="ingroup",Ft="check",jt="uncheck",Ht="radio",Ut="radioOn",Zt="radioOff",Wt="points",qt="values",Xt="series",Yt="body",$t="label",Qt="label2",Jt="note",Kt="note2",te="icons",ee="labelFont",ne="labelColor",ie="labelSelectColor",re="note.expanded",oe="note2.expanded",ae="edge.expanded",se="edge.points",ce="edge.type",le="rotation",ue="hidden",de="visible",he="tuv",fe="no",ge="draw",pe="select",ve="currentSubGraph",ye="selectBackground",_e="autoMakeVisible",me="autoHideScrollBar",be="scrollBarColor",xe="scrollBarSize",we="indent",Ie="rowHeight",Se="columnLineColor",Te="rowLineColor",Ce="columnLineVisible",Me="rowLineVisible",De="visibleFunc",Ee="expandIcon",Pe="collapseIcon",Oe="checkMode",Ae="sortFunc",ke="editable",Re="batchEditable",ze="tristate",Ne="asc",Ve="desc",Le="position",Be="elevation",Ge="children",Fe="translateX",je="translateY",He="dataModel",Ue="maxSize",Ze="state",We="shape3d",qe="shape3d.resolution",Xe="shape3d.visible",Ye="shape3d.from.visible",$e="shape3d.to.visible",Qe="shape3d.top.visible",Je="shape3d.bottom.visible",Ke="repeat.uv.length",tn="serializeValue",en="deserializeValue",nn="centerUniform",rn="uniform",on="rgba(255,255,255,0)",an="style",sn="attr",cn="field",ln="string",un="boolean",dn="color",hn="int",fn="number",gn="ew-resize",pn="ns-resize",vn="pointer",yn="auto",_n="mousedown",mn="mousemove",bn="mouseup",xn="mouseout",wn="touchstart",In="touchmove",Sn="touchend",Tn="keydown",Cn="keyup",Mn=["DOMMouseScroll","mousewheel"],Dn=st?Mn[0]:Mn[1],En=lt?[wn,In,Sn,Tn,Cn,"keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"]:[Tn,Cn,"keypress","input",_n,mn,bn,xn,Dn,"wheel","contextmenu","mouseenter","mouseleave","mouseover","compositionstart","compositionupdate","compositionend"],Pn=u,On=u,An=u,kn=bn.length,Rn=function(){An&&(K(An.timeout),An=u)},zn=function(){An&&Ka(An.e,An.info)};n.addEventListener&&(lt||(S(n,xn,(function(){Rn()})),S(n,Dn,(function(){ts()}))),S(n,Cn,(function(t){91===t.keyCode?Yn={}:delete Yn[t.keyCode]}),!0),S(n,Tn,(function(t){Yn[t.keyCode]=!0}),!0),S(n,"blur",(function(){Yn={}})));var Nn,Vn,Ln,Bn=0,Gn=u,Fn=function(t,e){var n=J((function(){delete Gn[n],$i(Gn)&&(Gn=u),t()}),e);return n},jn=u,Hn=u,Un={},Zn={},Wn={},qn={},Xn={},Yn={},$n={},Qn={},Jn={},Kn={},ti=/.json$/,ei=/^data:image\/svg\+xml/,ni={},ii=[],ri={},oi=function(){},ai=function(){throw"Oops!"},si=[0,0,0],ci={x:0,y:0,width:0,height:0},li=u,ui=u,di=u,hi=function(t,e){Zn[t]=e,e&&e.comps&&!e.uuid&&(e.uuid=d.Math.generateUUID()),Ll[t]&&(e.cacheRule=Ll[t],delete Ll[t])},fi=function(t){ui&&!t._72O&&(di||(di={}),di[t._72O=Ds()]=t),Nn!=u?er()<.05&&b&&!Vn&&(Or=Rn):Or=Oi},gi=function(t,e,n,i){ui||(ui={});var r=ui[t];if(r){if(r.url===e)return;r.image?(r.image.onload=oi,r.image.onerror=oi):r.request&&(r.request.onload=oi,r.request.onerror=oi)}if(ti.test(e)){var o=new sd;if(ui[t]={request:o,url:e},e=f.beforeLoadURL(e),e.data){var a=f.parse(e.data);pi(t,a),f.handleImageLoaded(t,a)}else{o.onload=function(){if(200===this.status||0===this.status){var n=f.parse(o.getResponseText());pi(t,n),f.handleImageLoaded(t,n)}else pi(t,f.handleUnfoundImage(t,e)||u)},o.onerror=function(){pi(t,f.handleUnfoundImage(t,e)||u)};var s={};s.url=encodeURI(e),s.sync=!1,o.send(s)}}else{a=new Image;ui[t]={image:a,url:e},/^data:image/.test(e)||(e=f.beforeLoadURL(e),e=f.appendTimeStamp(e),e=encodeURI(e),a.crossOrigin=f.crossOrigin),f.convertImageSrc(e,(function(r){rt&&(e.toLowerCase().indexOf(".svg")>0||ei.test(e))?(l.body.appendChild(a),a.style.visibility="hidden",a.onload=function(){J((function(){if(n&&(a.width=n),i&&(a.height=i),!a.width||!a.height){var e=a.width||a.clientWidth,r=a.height||a.clientHeight;a.width=e,a.height=r}f.handleImageLoaded(t,a),pi(t,a),l.body.removeChild(a),a.style.visibility=""}),180)},a.onerror=function(){pi(t,f.handleUnfoundImage(t,e)||u),l.body.removeChild(a),a.style.visibility=""}):(a.onload=function(){n&&(a.width=n),i&&(a.height=i),f.handleImageLoaded(t,a),pi(t,a)},a.onerror=function(){pi(t,f.handleUnfoundImage(t,e)||u)}),a.src=r}))}},pi=function(t,e){if(hi(t,e),delete ui[t],$i(ui)&&(ui=u,di)){for(var n in di){var i=di[n];i._2O&&i._2O[t]&&(i.deleteTexture(t),delete i._2O[t]),i.invalidateAll&&i.invalidateAll(r,"imageLoaded",t),i.redraw&&i.redraw(),i.iv(),delete i._72O}di=u}if(e&&di)for(var n in di){i=di[n];i.invalidateAll&&i.invalidateAll(r,"imageLoading",t),i.redraw&&i.redraw(),i.iv()}},vi=function(){return Z=C&&Date,function(){return n.performance&&n.performance.now?n.performance.now():Date.now()}}(),yi=function(t,e){e?K(t):n.cancelAnimationFrame(t)},_i=function(t,e,n){return{width:t,height:e,comps:Ri(n)?n:[n]}},mi=function(t,e){return{type:Ot,rect:[t,e,1.6,1.6],borderWidth:1,borderColor:va,gradient:Ja,gradientColor:ya,background:va}},bi=function(t,e){return _i(16,16,{type:Et,rect:[4,4,10,8],background:t,rotation:e?1.57:3.14})},xi=function(t,e){return _i(16,16,{type:Et,rect:[4,4,8,7],background:t,rotation:e?3.14:0})},wi=function(t){var e=t._orientation;return"horizontal"===e||"h"===e},Ii=function(t,e){var n=u||4,i=u||1,r=u||1;0>n?n=0:n>.25&&(n=.25);var o,a,s,c,l,d,h,f=.5,g=[],p=[],v=[],y=G/r,_=G/i,m=f-n;for(a=0;i>=a;a++)for(c=a*_-B,d=R(c),l=N(c),o=0;r>=o;o++)s=o*y,h=m+n*d,g.push(R(s)*h,l*n,-N(s)*h),[t,e]&&p.push(o/r,1-a/i);for(a=0;i>a;a++){var b=a*(r+1),x=(a+1)*(r+1);for(o=0;r>o;o++)v.push(b+o,x+o+1,x+o,b+o,b+o+1,x+o+1),lr.z=To.z=[t,e]}},Si=function(t){var e=2,n=0;for(var i in t)i.length===e&&X(i,32)===Jr&&t[i],n++;return n},Ti=function(t,e,n,i){return n||(n=lt?5:3,n/=i||1),{x:t-n,y:e-n,width:2*n,height:2*n}},Ci=function(t,e,i,r){var o=this;e||(e=lt?5:3,i=20,r=20);var a={x:t,y:e,width:i,height:r};if(i)for(var s=0;i>s;s++)if(3===i)r=20;else for(var c=0;r>c;c++)o=n||i;var l={x:B,y:2*B};if(Ys(a,l)){var u=Bt[0]+yt[0]+Vt[1]+Ne.length,d=ue[0]+ze[0]+Vt[1]+Yt.length;bo[bt]=[o[u],o[d]],o[u]=Di[bt],o[d]=Di[We]}},Mi=function(t){return(/ble$/.test(t)||/ed$/.test(t)||y[t]?"is":"get")+t.charAt(0).toUpperCase()+t.slice(1)},Di=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)},Ei=function(t){return e(t)===ln||t instanceof String},Pi=function(t){return e(t)===fn},Oi=function(t){return e(t)===un},Ai=function(t){return t&&"object"==e(t)},ki=function(t){return"function"==typeof t},Ri=function(t){return t instanceof Array},zi=function(t){return t instanceof tl},Ni=function(t){return Ri(t)?new tl(t):t},Vi=function(t){return t instanceof Hu},Li=function(t){return t instanceof Yu},Bi=function(t){return t instanceof $u},Gi=function(t,e){if(!(t instanceof d.Group))return!1;if(!e)return t.isExpanded();var n=e.getDataUI(t);return!(!n||!n._88I)},Fi=function(t){return t instanceof Qu},ji=function(t){return t&&"IFRAME"===t.tagName},Hi=function(t){return t==u||f.numberDigits==u?t:parseFloat(t.toFixed(f.numberDigits))},Ui=function(t,e,n){var i,r=e.length;if(n)for(var o=0;n>o;o++)if(3===r)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(i=0;r>i;i++)t.push(e[i]);else if(3===r)t.push(e[0]),t.push(e[1]),t.push(e[2]);else for(i=0;r>i;i++)t.push(e[i])},Zi=function(t){return!!t&&(Ai(t)?t:{})},Wi=function(t,e,n){var i,o=Ai(t)?t:t.prototype;for(i in e)n&&i in o?o[i]===r&&console.warn("class",o,"has own undefined property",i,", keep exist!"):o[i]=e[i];return t},qi=function(t){return String.fromCharCode(t)},Xi=function(t){for(var e,n=0,i="";n<t.length;n++)e=t[t.length-1-n],"%"===e?e="'":"a"===e?e='"':"]"===e&&(e="\\"),i+=qi(e.charCodeAt(0)-1);return i},Yi=function(t,e,n){t.superClass.constructor.apply(e,n)},$i=function(t){for(var e in t)return!1;return!0},Qi=function(t){return!t||0===t.length},Ji=function(){var t="";return[jt[0],Te[0],$t[0]].forEach((function(e){t+=Di(e).slice(3)})),rn=l&&l[t]||nn,function(t,e){return t===e||t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}}(),Ki=function(t,e,n){return e>t?e:t>n?n:t},tr=function(t){return 0>t?-1:t>0?1:0},er=function(){var t=1e4*N(kn++);return t-D(t)},nr=function(t,e,n){return ir(t.x,t.y,e.x,e.y,n.x,n.y,n.x+n.width,n.y,!0)||ir(t.x,t.y,e.x,e.y,n.x+n.width,n.y,n.x+n.width,n.y+n.height,!0)||ir(t.x,t.y,e.x,e.y,n.x+n.width,n.y+n.height,n.x,n.y+n.height,!0)||ir(t.x,t.y,e.x,e.y,n.x,n.y+n.height,n.x,n.y,!0)},ir=function(t,e,n,i,r,o,a,s,c){var l=(a-r)*(e-o)-(s-o)*(t-r),d=(s-o)*(n-t)-(a-r)*(i-e);if(0!==d){var h=l/d,f=t+h*(n-t),g=e+h*(i-e);return c&&(f+hc<A(t,n)||f-hc>O(t,n)||f+hc<A(r,a)||f-hc>O(r,a)||g+hc<A(e,i)||g-hc>O(e,i)||g+hc<A(o,s)||g-hc>O(o,s))?u:[f,g]}return u},rr=function(t,e,n){if(t&&n)if(e){if(e===an)return t.getStyle(n);if(e===sn)return t.getAttr(n);if(e===cn)return t[n]}else if(n=Mi(n),t[n])return t[n]();return r},or=function(t,e,n,i){if(t&&n)if(e){if(e===an)t.s(n,i);else if(e===sn)t.a(n,i);else if(e===cn){var r=t[n];t[n]=i,t.fp("f:"+n,r,i)}}else n=Di(n),t[n]&&t[n](i)},ar=function(t,e,n){return e&&"top"!==e?"bottom"===e?{x:t.x,y:t.y,width:t.width,height:t.height*n}:"right"===e?{x:t.x,y:t.y,width:t.width*n,height:t.height}:"left"===e?{x:t.x+t.width*(1-n),y:t.y,width:t.width*n,height:t.height}:void 0:{x:t.x,y:t.y+t.height*(1-n),width:t.width,height:t.height*n}},sr=function(t,e,n,i,r){e&&Po(t,n,i,1,r,e)},cr=function(t,e,n,i){var r=1-t;return r*r*e+2*t*r*n+t*t*i},lr=function(t,e,n,i,r){var o=1-t;return o*o*o*e+3*o*o*t*n+3*o*t*t*i+t*t*t*r},ur=function(t){var e,n,i,r,o=0;return t.forEach((function(t){if(e=t.length,e>0)for(n=t[0],r=1;e>r;r++)i=t[r],o+=Ws(n,i),n=i})),o},dr=function(t,e,n){var i="__"+t,r=function(e){n.disabled||n["handle_"+t](e)};n[i]||(n[i]=r,S(e,t,r))},hr=function(t,e,n){var i="__"+t,r=n[i];r&&(T(e,t,r),delete n[i])},fr=function(t,e){var n="_"+e;t[Mi(e)]=function(){return this[n]},t[Di(e)]=function(t){var i=this[n];this[n]=t,this.fp(e,i,t)}},gr=function(t){return i.create(t)},pr=function(t){var e,n;t.element||((e=t.textField)?n=xs(wv.TextField,e):(e=t.textArea)?n=xs(wv.TextArea,e):(e=t.button)?n=xs(wv.Button,e):(e=t.comboBox)?n=xs(wv.ComboBox,e):(e=t.checkBox)?n=xs(wv.CheckBox,e):(e=t.radioButton)?n=xs(wv.RadioButton,e):(e=t.slider)?n=xs(wv.Slider,e):(e=t.colorPicker)?n=xs(wv.ColorPicker,e):(e=t.image)&&(n=xs(wv.Image,e)),n&&(t.element=n))},vr=function(t,e){var n=yr(t);return n._ht=e,n},yr=function(t,e){var n=l.createElement("div"),i=n.style;return n.tabIndex=-1,n.onkeydown=ws,i.msTouchAction=Tt,mr(n,u,0),lt&&i.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",u),t&&(i.overflow=ue),e&&wr(e,n),n},_r=function(t,e){var n=l.createElement("canvas"),i=n.style;return i.msTouchAction=Tt,e||(i.pointerEvents=Tt),mr(n,u,0),t&&wr(t,n),n},mr=function(t,e,n){var i=t.style;i.border=e?e+" solid 1px":0,i.outline=0,i.padding=n?"0 "+n+Ct:0,br(t)},br=function(t){var e=t.style;e.position=Mt,e.margin=0,e.setProperty("box-sizing","border-box",u),e.setProperty("-moz-box-sizing","border-box",u)},xr=function(t,e,n,i){i||(i=Ya),e!=u&&(t.width=e*i,t.style.width=e+Ct),n!=u&&(t.height=n*i,t.style.height=n+Ct)},wr=function(t,e,n){t.appendChild(e),n&&(e.style.position=Mt)},Ir=function(t,e){e.split||(e+="");for(var n,i=e.split("\n"),r=0,o=i.length,a=0;o>a;a++){var s=Vs(t.font,i[a]);s.width>r&&(r=s.width),n||(n=s.height)}return t.ss=i,{width:r,height:n*o}},Sr=function(t,e,n,i,r,o){var a=e.length;if(1===a)Tr(t,e[0],n,i,r);else for(var s=n.height/a,c={x:n.x,y:n.y,width:n.width,height:s},l=0;l<e.length;l++)o?Ns(t,e[l],i,r,c.x,c.y,c.width,c.height,o):Tr(t,e[l],c,i,r),c.y+=s},Tr=function(t,e,n,i,o){var a,s;t.font=i||as,t.fillStyle=o||rs,t.textAlign=mt,t.textBaseline=xt,n?n.width===r?(a=n.x,s=n.y):(a=n.x+n.width/2,s=n.y+n.height/2):(a=0,s=0),t.fillText(e,M(a),M(s))},Cr=function(t){t.getView&&(t=t.getView());var e=t.offsetWidth||t.scrollWidth;return!e&&t.style.width&&(e=X(t.style.width)),e},Mr=function(t){t.getView&&(t=t.getView());var e=t.offsetHeight||t.scrollHeight;return!e&&t.style.height&&(e=X(t.style.height)),e},Dr=function(t,e,n){var i=e[0].toUpperCase()+e.substring(1,e.length);t["webkit"+i]=n,t["moz"+i]=n,t["ms"+i]=n,t["o"+i]=n,t[e]=n},Er=function(){var t=function(t){ws(t),t.stopPropagation()},e=function(t){ws(t)},n=lt?[wn]:[Tn,_n];return function(i,r){var o=yr(),a=o.style;return a.backgroundColor=f.disabledBackground,i&&(a.backgroundImage="url("+i+")",a.backgroundPosition="50% 50%",a.backgroundRepeat="no-repeat no-repeat"),!1===r?n.forEach((function(t){S(o,t,e)})):n.forEach((function(e){S(o,e,t)})),o}}(),Pr=function(t){var e=t.getContext("2d");return e.save(),e.lineCap=ns,e.lineJoin=is,e},Or=function(t,e,n,i){Ar(t,e*Ya,n*Ya),i*=Ya,1!==i&&t.scale(i,i)},Ar=function(t,e,n){t.translate(e,n)},kr=function(t,e){e&&t.rotate(e)},Rr=function(t,e,n){e===r&&(e=1),n===r&&(n=1),(1!==e||1!==n)&&t.scale(e,n)},zr=!1,Nr=function(t){var e=l.activeElement;if(l.activeElement!==t){e&&e.forceOnblur&&e.forceOnblur();for(var i=[],r=t.parentNode;r;)i.push([r,r.scrollLeft,r.scrollTop]),r=r.parentNode;if(!zr){var o=[],a=[];try{for(var s=n.parent,c=n;s!==c;)o.push([s,s.scrollX,s.scrollY]),c=s,s=n.parent;var u=n.frameElement;if(u)for(var d=u.parentNode;d;)a.push([d,d.scrollLeft,d.scrollTop]),d=d.parentNode}catch(b){zr=!0}}if(lt)t.focus();else{var h=Ks(),f=h.target;t.focus(),f.scrollLeft=h.left,f.scrollTop=h.top}i.forEach((function(t){t[0].scrollLeft=t[1],t[0].scrollTop=t[2]})),zr||(o.forEach((function(t){t[0].scrollTo(t[1],t[2])})),a.forEach((function(t){t[0].scrollLeft=t[1],t[0].scrollTop=t[2]})))}},Vr=function(t){return t&&t.getView?t.getView():t},Lr=function(t,e,n,i,o){if(2===arguments.length&&(n=e.y,i=e.width,o=e.height,e=e.x),t.isSelfViewEvent)t.setX(e),t.setY(n),t.setWidth(i),t.setHeight(o);else{var a=Vr(t),s=a.style;if((l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement)!==a)e!==r&&(s.left=e+Ct),n!==r&&(s.top=n+Ct),i!==r&&(s.width=i+Ct),o!==r&&(s.height=o+Ct);else{var c=f.getWindowInfo();s.left=(e=c.left)+Ct,s.top=(n=c.top)+Ct,s.width=(i=c.width)+Ct,s.height=(o=c.height)+Ct}t.endEditing&&!lt&&t.endEditing(),t.redraw&&t.redraw(),t.invalidate&&t.invalidate(),t.onLayouted&&t.onLayouted(e,n,i,o),t.fireViewEvent&&t.fireViewEvent("layout")}},Br=function(t){if(!t.touches)return t;var e=t.touches[0];return e||t.changedTouches[0]},Gr=function(t){return lt?Br(t).target:t.target},Fr=function(t){f.popup&&f.popup.close(),f.popup=t},jr=u,Hr=function(t){jr.handleWindowTouchMove(t)},Ur=function t(e){jr.handleWindowTouchEnd(e),T(n,In,Hr),T(n,Sn,t),jr=u},Zr=function(t){jr.handleWindowMouseMove(t)},Wr=function t(e){jr.handleWindowMouseUp(e),T(n,mn,Zr),T(n,bn,t),jr=u},qr=function(t){return 1===Gs(t)},Xr=function(t,e){return e?e.keyCode===t:Yn[t]},Yr=function(t){return Hs(t)&&Xr(65,t)},$r=function(t){return Xr(46,t)||Xr(8,t)},Qr=function(t){return function(e){return e?e.keyCode===t:Yn[t]}},Jr=573,Kr=[65,83,68,87,37,38,39,40,32,13,27],to=Qr(Kr[0]),eo=Qr(Kr[1]),no=Qr(Kr[2]),io=Qr(Kr[3]),ro=Qr(Kr[4]),oo=Qr(Kr[5]),ao=Qr(Kr[6]),so=Qr(Kr[7]),co=Qr(Kr[8]),lo=Qr(Kr[9]),uo=Qr(Kr[10]),ho={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},fo=[2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,5,1217],go=u,po=u,vo=function(t,e){go||(go=_r()),xr(go,t,e,1);var n=Pr(go);return n.clearRect(0,0,t,e),n},yo=function(){var t,e={};for(var i in n){var r=ht.length;if(i.length==r&&i[0]===ht[2]&&i[1]===Tt[1]&&i[4]===ht[3]&&i[5]===ht[4]&&i.substr(r-2)===Tt[1]+Tt[2]){var o=n[i];for(var a in o)a.length===r&&a.substr(0,3)===vt[3]+Nt[3]+pe[0]&&a.substr(r-2)===ht[0]+Jt[3]&&(Mn=o[a])}}return function(n){var i,r=e[n];return r||(t||(t=_r(),xr(t,1,1,1)),i=t.getContext("2d"),i.clearRect(0,0,1,1),Po(i,0,0,1,1,n),r=i.getImageData(0,0,1,1).data,r=e[n]=[r[0],r[1],r[2],r[3]]),r}}(),_o=function(t){if(!Ei(t))return t;var e=yo(t);return e.CA||(e.CA=[e[0]/255,e[1]/255,e[2]/255,e[3]/255]),e.CA},mo=function(t,e,n,i,r){var o=_r();o.width=n,o.height=i;var a=o.getContext("2d");a.drawImage(t,0,0,n,i);try{for(var s=a.getImageData(0,0,n,i),c=s.data,l=0,u=c.length;u>l;l+=4){var d=c[l+0],h=c[l+1],f=c[l+2],g=c[l+3];"override_a"===r?c[l+3]=255*e[3]:"override_rgb"===r?(c[l+0]=255*e[0],c[l+1]=255*e[1],c[l+2]=255*e[2]):"override"===r?(c[l+0]=255*e[0],c[l+1]=255*e[1],c[l+2]=255*e[2],c[l+3]=255*e[3]):(c[l+0]=e[0]*d,c[l+1]=e[1]*h,c[l+2]=e[2]*f,c[l+3]=e[3]*g)}a.putImageData(s,0,0)}catch(k){return t}return o},bo=function(t,e,n){return e&&(e="miter"===n?8*e+20:e+1,t&&tc(t,e)),e},xo=function(t,e){if(e){var n=new ka(e),i=t.width/2,r=t.height/2,o=qs([n.tf(-i,-r),n.tf(i,-r),n.tf(i,r),n.tf(-i,r)]);return o.x+=t.x+i,o.y+=t.y+r,o}return t},wo=function(t,e,n,i,r,o,a,s){i*=Math.PI/180;var c={x:Math.cos(i)*(t.x-a.x)/2+Math.sin(i)*(t.y-a.y)/2,y:-Math.sin(i)*(t.x-a.x)/2+Math.cos(i)*(t.y-a.y)/2},l=Math.pow(c.x,2)/Math.pow(e,2)+Math.pow(c.y,2)/Math.pow(n,2);l>1&&(e*=Math.sqrt(l),n*=Math.sqrt(l));var u=(r==o?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(c.y,2)-Math.pow(n,2)*Math.pow(c.x,2))/(Math.pow(e,2)*Math.pow(c.y,2)+Math.pow(n,2)*Math.pow(c.x,2)));isNaN(u)&&(u=0);var d={x:u*e*c.y/n,y:u*-n*c.x/e},h={x:(t.x+a.x)/2+Math.cos(i)*d.x-Math.sin(i)*d.y,y:(t.y+a.y)/2+Math.sin(i)*d.x+Math.cos(i)*d.y},f=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},g=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(f(t)*f(e))},p=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(g(t,e))},v=p([1,0],[(c.x-d.x)/e,(c.y-d.y)/n]),y=[(c.x-d.x)/e,(c.y-d.y)/n],_=[(-c.x-d.x)/e,(-c.y-d.y)/n],m=p(y,_);g(y,_)<=-1&&(m=Math.PI),g(y,_)>=1&&(m=0);g=e>n?e:n;var b=e>n?1:e/n,x=e>n?n/e:1;if(null==s){var w={x:0,y:0,width:0,height:0};tc(w,g),w.x*=b,w.width*=b,w.y*=x,w.height*=x;var I=new ka(i);return w=qs([I.tf(w.x,w.y),I.tf(w.x+w.width,w.y),I.tf(w.x+w.width,w.y+w.height),I.tf(w.x,w.y+w.height)]),w.x+=h.x,w.y+=h.y,[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}]}s.translate(h.x,h.y),s.rotate(i),s.scale(b,x),s.arc(0,0,g,v,v+m,1-o),s.scale(1/b,1/x),s.rotate(-i),s.translate(-h.x,-h.y)},Io=function(t,e){t&&t.beginPath();for(var n,i,r,o=[],a=function(t){for(var e,n=/(\-{0,1}[\d\.]+)/gi,i=[];e=n.exec(t);)i.push(parseFloat(e[0]));return i},s=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,c={x:0,y:0};n=s.exec(e);){var l=n[0],u=l.substr(0,1);if("M"===u||"m"===u){for(var d=a(l),h=0;h<d.length;h+=2){var f=d[h],g=d[h+1];"m"===u&&(f+=c.x,g+=c.y),t&&t.moveTo(f,g),o.push({x:f,y:g}),c.x=f,c.y=g}i=r=null}else if("H"===u||"h"===u){for(d=a(l),h=0;h<d.length;h+=1){f=d[h];"h"===u&&(f+=c.x),t&&t.lineTo(f,c.y),o.push({x:f,y:c.y}),c.x=f}i=r=null}else if("C"===u||"c"===u){for(d=a(l),h=0;h<d.length;h+=6){var p=d[h],v=d[h+1],y=d[h+2],_=d[h+3];f=d[h+4],g=d[h+5];"c"===u&&(p+=c.x,v+=c.y,y+=c.x,_+=c.y,f+=c.x,g+=c.y),t&&t.bezierCurveTo(p,v,y,_,f,g),o.push({x:p,y:v}),o.push({x:y,y:_}),o.push({x:f,y:g}),c.x=f,c.y=g}i=[p,v,y,_,f,g],r=null}else if("S"===u||"s"===u){for(d=a(l),h=0;h<d.length;h+=4){i?(p=2*i[4]-i[2],v=2*i[5]-i[3]):(p=c.x,v=c.y);y=d[h],_=d[h+1],f=d[h+2],g=d[h+3];"s"===u&&(y+=c.x,_+=c.y,f+=c.x,g+=c.y),t&&t.bezierCurveTo(p,v,y,_,f,g),o.push({x:p,y:v}),o.push({x:y,y:_}),o.push({x:f,y:g}),c.x=f,c.y=g}i=[p,v,y,_,f,g],r=null}else if("Q"===u||"q"===u){for(d=a(l),h=0;h<d.length;h+=4){p=d[h],v=d[h+1],f=d[h+2],g=d[h+3];"q"===u&&(p+=c.x,v+=c.y,f+=c.x,g+=c.y),t&&t.quadraticCurveTo(p,v,f,g),o.push({x:p,y:v}),o.push({x:f,y:g}),c.x=f,c.y=g}i=null,r=[p,v,f,g]}else if("T"===u||"t"===u){for(d=a(l),h=0;h<d.length;h+=2){r?(p=2*r[2]-r[0],v=2*r[3]-r[1]):(p=c.x,v=c.y);f=d[h],g=d[h+1];"t"===u&&(f+=c.x,g+=c.y),t&&t.quadraticCurveTo(p,v,f,g),o.push({x:p,y:v}),o.push({x:f,y:g}),c.x=f,c.y=g}i=null,r=[p,v,f,g]}else if("V"===u||"v"===u){for(d=a(l),h=0;h<d.length;h+=1){g=d[h];"v"===u&&(g+=c.y),t&&t.lineTo(c.x,g),o.push({x:c.x,y:g}),c.y=g}i=r=null}else if("L"===u||"l"===u){for(d=a(l),h=0;h<d.length;h+=2){f=d[h],g=d[h+1];"l"===u&&(f+=c.x,g+=c.y),t&&t.lineTo(f,g),o.push({x:f,y:g}),c.x=f,c.y=g}i=r=null}else if("A"===u||"a"===u){for(d=a(l),h=0;h<d.length;h+=7){var m=d[h],b=d[h+1],x=d[h+2],w=d[h+3],I=d[h+4];f=d[h+5],g=d[h+6];"a"===u&&(f+=c.x,g+=c.y);var S=wo(c,m,b,x,w,I,{x:f,y:g},t);S&&(o=o.concat(S)),c.x=f,c.y=g}i=r=null}var T=l.substr(l.length-1);("z"===T||"Z"===T)&&t&&t.closePath()}return o},So=function(t,e){var n,i,r="L"===e[0],o=e.length;t.save(),r?(t.transform(e[5],e[6],e[7],e[8],e[9],e[10]),n=t.createLinearGradient(e[1],e[2],e[3],e[4]),i=11):(t.transform(e[7],e[8],e[9],e[10],e[11],e[12]),n=t.createRadialGradient(e[1],e[2],e[3],e[4],e[5],e[6]),i=13);for(var a=t.compGray;o>i;)n.addColorStop(e[i],a?f.toGrayColor(e[i+1]):e[i+1]),i+=2;t.fillStyle=n},To=function(t,e){var n=t.s("shape.gradient.pack");if(n){for(var i=n.length,r=new Array(i),o=0;i>o;o++)r[o]=n[o];var a,s,c,l,u,d,h,f,g,p,v,y,_,m="L"===r[0];a=m?5:7,s=r[a],c=r[a+1],l=r[a+2],u=r[a+3],d=r[a+4],h=r[a+5],f=e[0],g=e[1],p=e[2],v=e[3],y=e[4],_=e[5],r[a]=f*s+p*c,r[a+1]=g*s+v*c,r[a+2]=f*l+p*u,r[a+3]=g*l+v*u,r[a+4]=f*d+p*h+y,r[a+5]=g*d+v*h+_,t.s("shape.gradient.pack",r)}},Co=function(t,e,n,i){var r=!1;if(t.beginPath?t.beginPath():r=!0,zi(e)&&(e=e._as),zi(n)&&(n=n._as),n&&n.length){for(var o,a,s,c,l=0,u=0,d=n.length;d>u;u++)o=n[u],1===o?(a=e[l++],t.moveTo(a.x,r?-a.y:a.y)):2===o?(a=e[l++],t.lineTo(a.x,r?-a.y:a.y)):3===o?(a=e[l++],s=e[l++],t.quadraticCurveTo(a.x,r?-a.y:a.y,s.x,r?-s.y:s.y)):4===o?(a=e[l++],s=e[l++],c=e[l++],t.bezierCurveTo(a.x,r?-a.y:a.y,s.x,r?-s.y:s.y,c.x,r?-c.y:c.y)):5===o&&t.closePath();i&&5!==o&&t.closePath()}else{var h,f,g,p=e.length;if(p>0){for(h=e[0],t.moveTo(h.x,r?-h.y:h.y),f=1;p>f;f++)g=e[f],t.lineTo(g.x,r?-g.y:g.y);i&&t.closePath()}}},Mo=function(t,e,n,i){if(zi(t)&&(t=t._as),zi(e)&&(e=e._as),e&&e.length){n=n||ac;for(var r,o,a,s,c,l,d,h,f=[],g=u,p=0,v=0,y=e.length;y>v;v++)if(r=e[v],1===r)f.push(g=[]),g.push(t[p++]);else if(2===r)g.push(t[p++]);else if(3===r){for(o=g[g.length-1],a=t[p++],s=t[p++],l=1;n>l;l++)d=cr(l/n,o.x,a.x,s.x),h=cr(l/n,o.y,a.y,s.y),g.push({x:d,y:h,b:!0});g.push(s)}else if(4===r){for(o=g[g.length-1],a=t[p++],s=t[p++],c=t[p++],l=1;n>l;l++)d=lr(l/n,o.x,a.x,s.x,c.x),h=lr(l/n,o.y,a.y,s.y,c.y),g.push({x:d,y:h,b:!0});g.push(c)}else 5===r&&g.push(g[0]);return i&&5!==r&&g&&g.length>2&&g.push(g[0]),f}return i&&t.length>2&&(t=t.slice(),t.push(t[0])),t?[t]:[]},Do=function(t,e,n,i,r,o){var a,s,c,l=yo(e),u=i,d=l[0],h=l[1],f=l[2];if(n){var g=yo(n);a=g[0]-d,s=g[1]-h,c=g[2]-f}else a=255-d,s=255-h,c=255-f;for(o||(o=i>10?1:.5,o=1>r?A(o/r,2):o),t.save(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=0;(i-=o)>0;){var p=1-i/u,v=d+a*p,y=h+s*p,_=f+c*p;v=A(E(v),255),y=A(E(y),255),_=A(E(_),255),t.strokeStyle="rgb("+v+","+y+","+_+")",t.lineWidth=i,t.stroke()}t.restore()},Eo=function(){var t={};return function(e,n){var i=e+"-"+n,r=t[i];if(r)return r;var o,a,s,c=yo(e);return 0>n?(n=(100+n)/100,o=E(c[0]*n),a=E(c[1]*n),s=E(c[2]*n)):(n/=100,o=c[0],a=c[1],s=c[2],o+=(255-o)*n,a+=(255-a)*n,s+=(255-s)*n,o=A(E(o),255),a=A(E(a),255),s=A(E(s),255)),t[i]="rgb("+o+","+a+","+s+")"}}(),Po=function(t,e,n,i,r,o){o&&(t.fillStyle=o),t.beginPath(),t.rect(e,n,i,r),t.fill()},Oo=function(t,e,n,i,r,o,a){t.beginPath(),Uo[e](t,n.x,n.y,n.width,n.height,i,r,o,a)},Ao=function(t,e,n,i,r){var o=Uo[n];t.fillStyle=o?o(t,e,i||ya,r.x,r.y,r.width,r.height):e},ko=function(t,e,n,i,r,o){try{if(!e.tagName&&e.comps){var a;e._cacheImage_||(e._cacheImage_={}),a="override"===i?"colors_override":"override_rgb"===i?"colors_override_rgb":"override_a"===i?"colors_override_a":"colors",e._cacheImage_[a]||(e._cacheImage_[a]={__count__:0});var s=e._cacheImage_[a][n];s||(e._cacheImage_[a].__count__>f.imageCacheThreshold&&(e._cacheImage_[a]={__count__:0}),s=d.Default.toCanvas(e,$c(e),Qc(e),null,r,o,n,null,i),e._cacheImage_[a][n]=s,e._cacheImage_[a].__count__++),e=s}t.fillStyle=t.createPattern(e,"repeat")}catch(T){t.fillStyle="black"}},Ro=function(t,e,n,i,r,o,a){t.save(),t.translate(e,n),t.scale(1,a/o),t.arc(0,0,o,i,r),t.restore()},zo=function(t,e,n,i,r,o,a,s){var c,l,u,d,h,f,g,p,v,y,_;if(k(r)>2*B&&(r=2*B),h=E(k(r)/(B/4)),c=r/h,l=-c,u=-i,h>0){f=e+R(i)*o,g=n+N(-i)*a,s?t.lineTo(f,g):t.moveTo(f,g);for(var m=0;h>m;m++)u+=l,d=u-l/2,p=e+R(u)*o,v=n+N(u)*a,y=e+R(d)*(o/R(l/2)),_=n+N(d)*(a/R(l/2)),t.quadraticCurveTo(y,_,p,v)}},No=function(t,e,n,i,r,o,a,s,c){6===arguments.length&&(a=o,s=o,c=o);var l=e+i,u=n+r,d=r>i?2*i:2*r;o=d>o?o:d,a=d>a?a:d,s=d>s?s:d,c=d>c?c:d;var h=.29*c,f=.58*c;t.moveTo(l,u-c),t.quadraticCurveTo(l,u-f,l-h,u-h),t.quadraticCurveTo(l-f,u,l-c,u),h=.29*s,f=.58*s,t.lineTo(e+s,u),t.quadraticCurveTo(e+f,u,e+h,u-h),t.quadraticCurveTo(e,u-f,e,u-s),h=.29*o,f=.58*o,t.lineTo(e,n+o),t.quadraticCurveTo(e,n+f,e+h,n+h),t.quadraticCurveTo(e+f,n,e+o,n),h=.29*a,f=.58*a,t.lineTo(l-a,n),t.quadraticCurveTo(l-f,n,l-h,n+h),t.quadraticCurveTo(l,n+f,l,n+a),t.lineTo(l,u-c)},Vo=function(t,e,n,i,r,o,a){e&&(n=M(n),i=M(i),a||(a=1),t.fillStyle=e,t.beginPath(),t.rect(n,i,a,o),t.rect(n,i,r,a),o-a>0&&t.rect(n,i+o-a,r,a),r-a>0&&t.rect(n+r-a,i,a,o),t.fill())},Lo=function(t,e,n,i){var r=i.x,o=i.y,a=i.width,s=i.height;if(!(!e||!n||0>=a||0>=s)){var c,l=Rs(e),u=zs(e),d=n>0;1===n||-1===n?(t.fillStyle=d?l:u,t.beginPath(),t.rect(r,o,1,s),t.rect(r,o,a,1),t.fill(),t.fillStyle=d?u:l,t.beginPath(),t.rect(r,o+s-1,a,1),t.rect(r+a-1,o,1,s),t.fill()):(n=A(k(n),A(a/2,s/2)),c=t.createLinearGradient(r,o,r+n,o),c.addColorStop(0,d?l:u),c.addColorStop(1,e),t.fillStyle=c,t.beginPath(),t.moveTo(r,o),t.lineTo(r+n,o+n),t.lineTo(r+n,o+s-n),t.lineTo(r,o+s),t.lineTo(r,o),t.fill(),c=t.createLinearGradient(r,o,r,o+n),c.addColorStop(0,d?l:u),c.addColorStop(1,e),t.fillStyle=c,t.beginPath(),t.moveTo(r,o),t.lineTo(r+n,o+n),t.lineTo(r+a-n,o+n),t.lineTo(r+a,o),t.lineTo(r,o),t.fill(),c=t.createLinearGradient(r,o+s,r,o+s-n),c.addColorStop(0,d?u:l),c.addColorStop(1,e),t.fillStyle=c,t.beginPath(),t.moveTo(r,o+s),t.lineTo(r+n,o+s-n),t.lineTo(r+a-n,o+s-n),t.lineTo(r+a,o+s),t.lineTo(r,o+s),t.fill(),c=t.createLinearGradient(r+a,o,r+a-n,o),c.addColorStop(0,d?u:l),c.addColorStop(1,e),t.fillStyle=c,t.beginPath(),t.moveTo(r+a,o),t.lineTo(r+a-n,o+n),t.lineTo(r+a-n,o+s-n),t.lineTo(r+a,o+s),t.lineTo(r+a,o),t.fill())}},Bo=function(t,e,n,i,r,o,a){var s=t.createLinearGradient(i,r,o,a);return s.addColorStop(0,n),s.addColorStop(1,e),s},Go=function(t,e,n,i,r,o,a){var s=t.createLinearGradient(i,r,o,a);return s.addColorStop(0,e),s.addColorStop(.5,n),s.addColorStop(1,e),s},Fo=function(t,e,n,i,r,o,a){var s=t.createLinearGradient(i,r,o,a);return s.addColorStop(0,e),s.addColorStop(1/3,n),s.addColorStop(2/3,e),s.addColorStop(1,n),s},jo=function(t,e,n,i,r,o,a,s,c){var l=t.createRadialGradient(i+o*s,r+a*c,A(o,a)/24,i+o/2,r+a/2,O(o,a)/2);return l.addColorStop(0,n),l.addColorStop(1,e),l},Ho=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-11102230246251565e-32,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],Uo={polygon:function(t,e,n,i,r,o){(o==u||3>o)&&(o=6);for(var a,s,c=A(i,r)/2,l=e+i/2,d=n+r/2,h=0,f=2*B/o,g=0;o>g;g++)a=l+R(h)*c,s=d+N(h)*c,0===g?t.moveTo(a,s):t.lineTo(a,s),h+=f;t.closePath()},arc:function(t,e,n,i,r,o,a,s,c){o==u&&(o=B),a==u&&(a=G),s==u&&(s=!0);var l=e+i/2,d=n+r/2;s&&t.moveTo(l,d),c?Ro(t,l,d,o,a,i/2,r/2):t.arc(l,d,A(i,r)/2,o,a),s&&t.closePath()},rect:function(t,e,n,i,r){t.rect(e,n,i,r)},circle:function(t,e,n,i,r){t.arc(e+i/2,n+r/2,A(i,r)/2,0,G,!0)},oval:function(t,e,n,i,r){Ro(t,e+i/2,n+r/2,0,G,i/2,r/2)},roundRect:function(t,e,n,i,r,o){o==u&&(o=A(A(i,r)/4,8)),No(t,e,n,i,r,o)},star:function(t,e,n,i,r){var o=2*i,a=2*r,s=e+i/2,c=n+r/2;t.moveTo(s-o/4,c-a/12),t.lineTo(e+.306*i,n+.579*r),t.lineTo(s-o/6,c+a/4),t.lineTo(e+i/2,n+.733*r),t.lineTo(s+o/6,c+a/4),t.lineTo(e+.693*i,n+.579*r),t.lineTo(s+o/4,c-a/12),t.lineTo(e+.611*i,n+.332*r),t.lineTo(s+0,c-a/4),t.lineTo(e+.388*i,n+.332*r),t.closePath()},pentagram:function(t,e,n,i,r){var o=.5*r,a=e+.5*i,s=n+o,c=.5257311121191336*i;c>o&&(c=o);var l=Ho,u=0;for(t.moveTo(a+c*l[u++],s+c*l[u++]);20>u;)t.lineTo(a+c*l[u++],s+c*l[u++]);t.closePath()},triangle:function(t,e,n,i,r){t.moveTo(e+i/2,n),t.lineTo(e+i,n+r),t.lineTo(e,n+r),t.closePath()},hexagon:function(t,e,n,i,r){t.moveTo(e,n+r/2),t.lineTo(e+i/4,n+r),t.lineTo(e+3*i/4,+n+r),t.lineTo(e+i,n+r/2),t.lineTo(e+3*i/4,n),t.lineTo(e+i/4,n),t.closePath()},pentagon:function(t,e,n,i,r){var o=2*i,a=2*r,s=e+i/2,c=n+r/2;t.moveTo(s-o/4,c-a/12),t.lineTo(s-o/6,c+a/4),t.lineTo(s+o/6,c+a/4),t.lineTo(s+o/4,c-a/12),t.lineTo(s+0,c-a/4),t.closePath()},diamond:function(t,e,n,i,r){t.moveTo(e+i/2,n),t.lineTo(e,n+r/2),t.lineTo(e+i/2,n+r),t.lineTo(e+i,n+r/2),t.closePath()},rightTriangle:function(t,e,n,i,r){t.moveTo(e,n),t.lineTo(e+i,n+r),t.lineTo(e,n+r),t.closePath()},parallelogram:function(t,e,n,i,r){var o=i/4;t.moveTo(e+o,n),t.lineTo(e+i,n),t.lineTo(e+i-o,n+r),t.lineTo(e,n+r),t.closePath()},trapezoid:function(t,e,n,i,r){var o=i/4;t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.lineTo(e+i,n+r),t.lineTo(e,n+r),t.closePath()},"linear.southwest":function(t,e,n,i,r,o,a){return Bo(t,e,n,i,r+a,i+o,r)},"linear.southeast":function(t,e,n,i,r,o,a){return Bo(t,e,n,i+o,r+a,i,r)},"linear.northwest":function(t,e,n,i,r,o,a){return Bo(t,e,n,i,r,i+o,r+a)},"linear.northeast":function(t,e,n,i,r,o,a){return Bo(t,e,n,i+o,r,i,r+a)},"linear.north":function(t,e,n,i,r,o,a){return Bo(t,e,n,i,r,i,r+a)},"linear.south":function(t,e,n,i,r,o,a){return Bo(t,e,n,i,r+a,i,r)},"linear.west":function(t,e,n,i,r,o){return Bo(t,e,n,i,r,i+o,r)},"linear.east":function(t,e,n,i,r,o){return Bo(t,e,n,i+o,r,i,r)},"radial.center":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.5,.5)},"radial.southwest":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.25,.75)},"radial.southeast":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.75,.75)},"radial.northwest":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.25,.25)},"radial.northeast":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.75,.25)},"radial.north":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.5,.25)},"radial.south":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.5,.75)},"radial.west":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.25,.5)},"radial.east":function(t,e,n,i,r,o,a){return jo(t,e,n,i,r,o,a,.75,.5)},"spread.horizontal":function(t,e,n,i,r,o){return Go(t,e,n,i,r,i+o,r)},"spread.vertical":function(t,e,n,i,r,o,a){return Go(t,e,n,i,r,i,r+a)},"spread.diagonal":function(t,e,n,i,r,o,a){return Go(t,e,n,i+o,r,i,r+a)},"spread.antidiagonal":function(t,e,n,i,r,o,a){return Go(t,e,n,i,r,i+o,r+a)},"spread.north":function(t,e,n,i,r,o,a){return Fo(t,e,n,i,r-a/4,i,r+a+a/4)},"spread.south":function(t,e,n,i,r,o,a){return Fo(t,n,e,i,r-a/4,i,r+a+a/4)},"spread.west":function(t,e,n,i,r,o){return Fo(t,e,n,i-o/4,r,i+o+o/4,r)},"spread.east":function(t,e,n,i,r,o){return Fo(t,n,e,i-o/4,r,i+o+o/4,r)}},Zo=function(t,e,n){return new ka(t).tf(e,n)},Wo=function(t){var e=t.touches[0],n=t.touches[1],i=e.clientX,r=e.clientY,o=n.clientX,a=n.clientY;return P((i-o)*(i-o)+(r-a)*(r-a))},qo=(function(){for(var t=0,e=Ve.split(""),i=0;i<e.length;i++)t=10*X(e[i])+t;Ii(n[Jr.toString(8*i)+$t.substr(i)+3],n[Jr.toString(8*i)+$t.substr(i)+4])}(),function(t,e,n){for(var i=0;i<n.size();i++){var r=n.get(i);t.co(r)&&e.add(r)}for(i=0;i<n.size();i++)r=n.get(i),qo(t,e,r._children)}),Xo=function t(e,n,i){for(var r=0;r<i.size();r++){var o=i.get(i.size()-1-r);e.co(o)&&n.add(o)}for(r=0;r<i.size();r++)o=i.get(r),t(e,n,o._children)},Yo=function t(e,n,i){for(var r=!1,o=0;o<i.size();o++){var a=i.get(o);e.co(a)?r&&n.add(a):r=1}for(o=0;o<i.size();o++)a=i.get(o),t(e,n,a._children)},$o=function t(e,n,i){for(var r=!1,o=0;o<i.size();o++){var a=i.get(i.size()-1-o);e.co(a)?r&&n.add(a):r=!0}for(o=0;o<i.size();o++)a=i.get(o),t(e,n,a._children)},Qo=f.moveDatas=function(t,e,n,i){var o=i==u;if(0!==e||0!==n||!o&&0!==i){var a=!0,s=[];if(t.forEach((function(t){a&&(t._69O||Bi(t)||Fi(t))&&(a=!1)})),a)s=t;else{var c={},l={};t.forEach((function(t){c[t._id]=!0}));var d={},h=function(t){var e=t._id;return c[e]?(s.push(t),d[e]=!0):d[e]=!1},f=function t(e){var n=e._id;if(l[n])return h(e);var i=d[n];if(i!==r)return i;var o=e._parent;if(o&&(Fi(o)||Bi(o))&&t(o))return d[n]=!0;var a=e._host;return a&&(l[n]=n,i=t(a),l[n]=r,i)?d[n]=!0:h(e)};t.forEach((function(t){f(t)}))}s.forEach((function(t){if(Vi(t))o?t.translate(e,n):t.translate3d(e,n,i);else{var r=t.s(se);if(!r||r.isEmpty())return;var a=new tl;r.each((function(t){t=Os(t),o?(t.x+=e,t.y+=n):(t.x+=e,t.y+=i,t.e==u?t.e=n:t.e+=n),a.add(t)})),t.s(se,a)}}))}},Jo=function(){function t(t,e){return e===t.substring(0,e.length)}function e(t){return parseFloat(t)||0}function n(n,i){if(i==r&&(i=new Ha),t(n,"matrix3d")){var o=n.substring(9,n.length-1).split(",");o=o.map(e),i.fromArray(o)}else if(t(n,"matrix")){o=n.substring(7,n.length-1).split(",");o=o.map(e),i.el[0]=o[0],i.el[1]=o[1],i.el[2]=0,i.el[3]=0,i.el[4]=o[2],i.el[5]=o[3],i.el[6]=0,i.el[7]=0,i.el[8]=0,i.el[9]=0,i.el[10]=1,i.el[11]=0,i.el[12]=o[4],i.el[13]=o[5],i.el[14]=0,i.el[15]=1}return i}function i(t,n){n==r&&(n=new Na);var i=t.split(/\s+/);return i=i.map(e),n.set(i[0]||0,i[1]||0,i[2]||0),n}var o,a,s,c,l,u=function t(u,d){o||(o=new Ha,a=new Na,s=new Ha,c=new Ha,l=new Ha),d==r&&(d=new Ha);var h=getComputedStyle(u);h.transform&&"none"!==h.transform&&(n(h.transform,o),i(h.transformOrigin,a),c.setPosition(a),a.negate(),l.setPosition(a),(rt||"preserve-3d"!==h.transformStyle)&&(o.el[8]=0,o.el[9]=0,o.el[10]=1,o.el[11]=0),d.multiplyMatrices(l,d),d.multiplyMatrices(o,d),d.multiplyMatrices(c,d)),!rt&&h.perspective&&"none"!==h.perspective&&(s.el[11]=-1/e(h.perspective),i(h.perspectiveOrigin,a),c.setPosition(a),a.negate(),l.setPosition(a),d.multiplyMatrices(l,d),d.multiplyMatrices(s,d),d.multiplyMatrices(c,d));for(var f=u.offsetParent,g=u.offsetLeft,p=u.offsetTop,v=u.parentElement;v&&v!==f;){var y=getComputedStyle(v);if("none"!==y.transform||"none"!==y.perspective)break;v=v.parentElement}return v==r&&u!==u.ownerDocument.documentElement&&"fixed"!==h.position&&(v=u.ownerDocument.documentElement),f!=r&&f!==v&&(g-=v.offsetLeft,p-=v.offsetTop),a.set(g,p,0),c.setPosition(a),d.multiplyMatrices(c,d),v&&t(v,d),d};return function(t,e){var n=t.parentElement;if(n){var i=n.updateAppendMatrix;if(i){delete n.updateAppendMatrix;var r=new Ha;u(n,r);var o=new Ha;o.getInverse(r),n._matrixAppend=o,n._maxrixPreAppend=r}return e?n._matrixAppend:n._maxrixPreAppend}}}(),Ko=function(t,e){for(;t&&!t.hasOwnProperty(e);)t=i.getPrototypeOf(t);return t&&i.getOwnPropertyDescriptor(t,e)},ta=i.getPrototypeOf?function(t,e,n){var r=Ko(e,n);r&&i.defineProperty(t,n,r)}:function(t,e,n){t[n]=e[n]},ea={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},na=function(){var t={1:function(t,e){return{x:t.x-e.width/2,y:t.y-e.height/2}},2:function(t,e){return{x:t.x+e.width/2,y:t.y-e.height/2}},3:function(t,e){return{x:t.x+t.width/2,y:t.y-e.height/2}},4:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y-e.height/2}},5:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y-e.height/2}},6:function(t){return{x:t.x,y:t.y}},7:function(t){return{x:t.x+t.width/2,y:t.y}},8:function(t){return{x:t.x+t.width,y:t.y}},9:function(t,e){return{x:t.x-e.width/2,y:t.y+e.height/2}},10:function(t,e){return{x:t.x+e.width/2,y:t.y+e.height/2}},11:function(t,e){return{x:t.x+t.width/2,y:t.y+e.height/2}},12:function(t,e){return{x:t.x-e.width/2+t.width,y:t.y+e.height/2}},13:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+e.height/2}},14:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height/2}},15:function(t){return{x:t.x,y:t.y+t.height/2}},16:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height/2}},17:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},18:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height/2}},19:function(t){return{x:t.x+t.width,y:t.y+t.height/2}},20:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height/2}},21:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height-e.height/2}},22:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height-e.height/2}},23:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height-e.height/2}},24:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height-e.height/2}},25:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height-e.height/2}},26:function(t){return{x:t.x,y:t.y+t.height}},27:function(t){return{x:t.x+t.width/2,y:t.y+t.height}},28:function(t){return{x:t.x+t.width,y:t.y+t.height}},29:function(t,e){return{x:t.x-e.width/2,y:t.y+t.height+e.height/2}},30:function(t,e){return{x:t.x+e.width/2,y:t.y+t.height+e.height/2}},31:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height+e.height/2}},32:function(t,e){return{x:t.x+t.width-e.width/2,y:t.y+t.height+e.height/2}},33:function(t,e){return{x:t.x+t.width+e.width/2,y:t.y+t.height+e.height/2}},34:function(t,e){return{x:t.x,y:t.y-e.height/2}},35:function(t,e){return{x:t.x+t.width,y:t.y-e.height/2}},36:function(t,e){return{x:t.x,y:t.y+t.height+e.height/2}},37:function(t,e){return{x:t.x+t.width,y:t.y+t.height+e.height/2}},38:function(t,e){return{x:t.x+t.width/4,y:t.y-e.height/2}},39:function(t,e){return{x:t.x+3*t.width/4,y:t.y-e.height/2}},40:function(t){return{x:t.x+t.width/4,y:t.y}},41:function(t){return{x:t.x+3*t.width/4,y:t.y}},42:function(t,e){return{x:t.x+t.width/4,y:t.y+e.height/2}},43:function(t,e){return{x:t.x+3*t.width/4,y:t.y+e.height/2}},44:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2-e.height/2}},45:function(t){return{x:t.x+t.width/4,y:t.y+t.height/2}},46:function(t,e){return{x:t.x+t.width/2-e.width/2,y:t.y+t.height/2}},47:function(t,e){return{x:t.x+t.width/2+e.width/2,y:t.y+t.height/2}},48:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height/2}},49:function(t,e){return{x:t.x+t.width/2,y:t.y+t.height/2+e.height/2}},50:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height-e.height/2}},51:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height-e.height/2}},52:function(t){return{x:t.x+t.width/4,y:t.y+t.height}},53:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height}},54:function(t,e){return{x:t.x+t.width/4,y:t.y+t.height+e.height/2}},55:function(t,e){return{x:t.x+3*t.width/4,y:t.y+t.height+e.height/2}}};return Si(n)?function(e,n,i){return t[e](n,i||ci)}:void 0}();Wi(v,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var ia=v.reverse,ra=v.transparent,oa=v.rectSelectBackground,aa=v.dash,sa=v.titleBackground,ca=v.titleIconBackground,la=v.headerBackground,ua=v.headerIconBackground,da=v.headerSeparator,ha=v.headerLine,fa=v.contentIconBackground,ga=v.contentLine,pa=(v.widgetIconHighlight,v.widgetIconBorder),va=(v.widgetIconGradient,v.imageBackground),ya=v.imageGradient,_a=v.highlight,ma=v.label,ba=v.labelSelect;if(Y&&!n.shutAlert1){var xa=new Date,wa=Y.split("-"),Ia=new Date(xa.getFullYear(),xa.getMonth(),xa.getDate()),Sa=(Y=new Date(X(wa[0],10),X(wa[1],10)-1,X(wa[2],10)),Ia.getTime()),Ta=Y.getTime(),Ca=c+"_try",Ma=n.alert;try{var Da=n.localStorage;if(Da&&Ma)if(Ta>Sa&&1728e6>Ta-Sa){var Ea=(Ta-Sa)/864e5;Da&&Da[Ca]!=Ea&&(Da[Ca]=Ea,n.htWillExpire?Ma(n.htWillExpire.replace("{{day}}",Ea)):Ma("HT for Web free trial license will expire in "+Ea+" days, please apply for a new license!"))}else Sa>=Ta&&(n.htExpired?Ma(n.htExpired):Ma("Your free trial of HT for Web has expired!")),Da&&delete Da[Ca]}catch(Fv){}}Math.sign===r&&(Math.sign=function(t){return 0>t?-1:t>0?1:+t});var Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Oa={encode:function(t,e){var n,i,r,o,a,s,c,l="",u=0;for(t=Oa._utf8_encode(t);u<t.length;)n=t.charCodeAt(u++),i=t.charCodeAt(u++),r=t.charCodeAt(u++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,c=63&r,isNaN(i)?s=c=64:isNaN(r)&&(c=64),l=l+e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(c);return l},decode:function(t,e){var n,i,r,o,a,s,c,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),n=o<<2|a>>4,i=(15&a)<<4|s>>2,r=(3&s)<<6|c,l+=String.fromCharCode(n),64!=s&&(l+=String.fromCharCode(i)),64!=c&&(l+=String.fromCharCode(r));return Oa._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|63&i>>6),e+=String.fromCharCode(128|63&i))}return e},_utf8_decode:function(t){for(var e="",n=0,i=0,r=0,o=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o),n+=3);return e}};d.Math={generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16).toUpperCase();return function(){var e=0|4294967295*Math.random(),n=0|4294967295*Math.random(),i=0|4294967295*Math.random(),r=0|4294967295*Math.random();return t[255&e]+t[255&e>>8]+t[255&e>>16]+t[255&e>>24]+"-"+t[255&n]+t[255&n>>8]+"-"+t[64|15&n>>16]+t[255&n>>24]+"-"+t[128|63&i]+t[255&i>>8]+"-"+t[255&i>>16]+t[255&i>>24]+t[255&r]+t[255&r>>8]+t[255&r>>16]+t[255&r>>24]}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},generateIncreasingID:function(){var t=0;return function(){return++t}}(),encodeBase64:function(t,e){return Oa.encode(t,e||Pa)},decodeBase64:function(t,e){return Oa.decode(t,e||Pa)},randomArray:function(t,e){e=e||t.length;for(var n=e-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[i],t[i]=r}return t}};var Aa=d.Matrix=d.Math.Matrix2d=function(t,e,n,i,r){this.setFromTransform(t,e,n,i,r)},ka=Aa;Aa.prototype={},Aa.prototype.constructor=Aa,Aa.prototype.set=function(t,e,n,i,r,o){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o,this},Aa.prototype.setFromTransform=function(t,e,n,i,o){var a=this;if(t===r)return a.a=1,a.b=0,a.c=0,a.d=1,a.tx=0,void(a.ty=0);t=t||0;var s=N(t),c=R(t);return i=i||1,o=o||1,a.a=c*i,a.b=s*i,a.c=-s*o,a.d=c*o,a.tx=e||0,a.ty=n||0,a},Aa.prototype.apply=function(t,e){e=e||new Va;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},Aa.prototype.applyInverse=function(t,e){e=e||new Va;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,r=t.y;return e.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},Aa.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Aa.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Aa.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,o=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},Aa.prototype.appendTranslate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},Aa.prototype.appendScale=function(t,e){return this.a*=t,this.d*=e,this.c*=e,this.b*=t,this},Aa.prototype.appendRotate=function(t){if(!t)return this;var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.b;return this.a=i*e+this.c*n,this.b=r*e+this.d*n,this.c=-i*n+this.c*e,this.d=-r*n+this.d*e,this},Aa.prototype.append=function(t){var e=this.a,n=this.b,i=this.c,r=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*r,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*r,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this},Aa.prototype.setTransform=function(t,e,n,i,r,o,a,s,c){var l,u,d,h,f,g,p,v,y,_;return f=Math.sin(a),g=Math.cos(a),p=Math.cos(c),v=Math.sin(c),y=-Math.sin(s),_=Math.cos(s),l=g*r,u=f*r,d=-f*o,h=g*o,this.a=p*l+v*d,this.b=p*u+v*h,this.c=y*l+_*d,this.d=y*u+_*h,this.tx=t+(n*l+i*d),this.ty=e+(n*u+i*h),this},Aa.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},Aa.prototype.transform=Aa.prototype.prepend,Aa.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,o=t*i-e*n;return this.a=i/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*r)/o,this.ty=-(t*this.ty-e*r)/o,this},Aa.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Aa.prototype.clone=function(){var t=new Aa;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Aa.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Aa.prototype.tf=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var n=this;return{x:n.a*t+n.c*e+n.tx,y:n.b*t+n.d*e+n.ty}},Aa.prototype.tfi=function(t,e){1===arguments.length&&(e=t.y,t=t.x);var n=this,i=1/(n.a*n.d+n.c*-n.b);return{x:n.d*i*t+-n.c*i*e+(n.ty*n.c-n.tx*n.d)*i,y:n.a*i*e+-n.b*i*t+(-n.ty*n.a+n.tx*n.b)*i}},Aa.IDENTITY=new Aa,Aa.TEMP_MATRIX=new Aa;var Ra=d.Math.Quaternion=function(t,e,n,i){this.set(t,e,n,i)};i.assign(Ra.prototype,{set:function(t,e,n,i){var o=this;return o._x=t||0,o._y=e||0,o._z=n||0,o._w=i!==r?i:1,o},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){var e=this;return e._x=t._x,e._y=t._y,e._z=t._z,e._w=t._w,e},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this},fromArray:function(t,e){e===r&&(e=0);var n=this;return n._x=t[e],n._y=t[e+1],n._z=t[e+2],n._w=t[e+3],this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,a),l=Math.sin((1-e)*c)/s,u=Math.sin(e*c)/s;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this},setFromEuler:function(t){var e=t._x,n=t._y,i=t._z,r=t._order,o=Math.cos,a=Math.sin,s=o(e/2),c=o(n/2),l=o(i/2),u=a(e/2),d=a(n/2),h=a(i/2);return"XYZ"===r?(this._x=u*c*l+s*d*h,this._y=s*d*l-u*c*h,this._z=s*c*h+u*d*l,this._w=s*c*l-u*d*h):"YXZ"===r?(this._x=u*c*l+s*d*h,this._y=s*d*l-u*c*h,this._z=s*c*h-u*d*l,this._w=s*c*l+u*d*h):"ZXY"===r?(this._x=u*c*l-s*d*h,this._y=s*d*l+u*c*h,this._z=s*c*h+u*d*l,this._w=s*c*l-u*d*h):"ZYX"===r?(this._x=u*c*l-s*d*h,this._y=s*d*l+u*c*h,this._z=s*c*h-u*d*l,this._w=s*c*l+u*d*h):"YZX"===r?(this._x=u*c*l+s*d*h,this._y=s*d*l+u*c*h,this._z=s*c*h-u*d*l,this._w=s*c*l-u*d*h):"XZY"===r&&(this._x=u*c*l-s*d*h,this._y=s*d*l-u*c*h,this._z=s*c*h+u*d*l,this._w=s*c*l+u*d*h),this},setFromRotationMatrix:function(t){var e,n=t.el,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],d=n[10],h=i+s+d;return h>0?(e=.5/Math.sqrt(h+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(a-r)*e):i>s&&i>d?(e=2*Math.sqrt(1+i-s-d),this._w=(u-c)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+l)/e):s>d?(e=2*Math.sqrt(1+s-i-d),this._w=(o-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+d-i-s),this._w=(a-r)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this},setFromToVectors:function(){var t,e;return function(n,i){return t===r&&(t=new Na),e=n.dot(i)+1,1e-7>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),setFromUnitVectors:function(){var t,e,n=1e-6;return function(i,o){return t===r&&(t=new Na),e=i.dot(o)+1,n>e?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,o),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),multiply:function(t){return this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+i*c-r*s,this._y=i*l+o*s+r*a-n*c,this._z=r*l+o*c+n*s-i*a,this._w=o*l-n*a-i*s-r*c,this}});var za=d.Math.Vector4=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=i!==r?i:1};i.assign(za.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==r?t.w:1,this},add:function(t,e){return e!==r?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return e!==r?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.el;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=.01,a=.1,s=t.el,c=s[0],l=s[4],u=s[8],d=s[1],h=s[5],f=s[9],g=s[2],p=s[6],v=s[10];if(Math.abs(l-d)<o&&Math.abs(u-g)<o&&Math.abs(f-p)<o){if(Math.abs(l+d)<a&&Math.abs(u+g)<a&&Math.abs(f+p)<a&&Math.abs(c+h+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var y=(c+1)/2,_=(h+1)/2,m=(v+1)/2,b=(l+d)/4,x=(u+g)/4,w=(f+p)/4;return y>_&&y>m?o>y?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(y),i=b/n,r=x/n):_>m?o>_?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(_),n=b/i,r=w/i):o>m?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(m),n=x/r,i=w/r),this.set(n,i,r,e),this}var I=Math.sqrt((p-f)*(p-f)+(u-g)*(u-g)+(d-l)*(d-l));return Math.abs(I)<.001&&(I=1),this.x=(p-f)/I,this.y=(u-g)/I,this.z=(d-l)/I,this.w=Math.acos((c+h+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return t===r&&(t=new za,e=new za),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return e===r&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return t===r&&(t=[]),e===r&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}});var Na=d.Math.Vector3=function(t,n,i){t===r?(this.x=0,this.y=0,this.z=0):"object"==e(t)?this.copy(t):this.set(t,n==r?t:n,i==r?t:i)};i.assign(Na.prototype,{set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},equals:function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return t.x===r?(this.x=t[0],this.y=t[1],this.z=t[2]):(this.x=t.x,this.y=t.y,this.z=t.z),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceToSquared2:function(t){var e=this.x-t[0],n=this.y-t[1],i=this.z-t[2];return e*e+n*n+i*i},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.el;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},applyEuler:function(){var t=new Ra;return function(e){return this.applyQuaternion(t.setFromEuler(e))}}(),applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t._x,o=t._y,a=t._z,s=t._w,c=s*e+o*i-a*n,l=s*n+a*e-r*i,u=s*i+r*n-o*e,d=-r*e-o*n-a*i;return this.x=c*s+d*-r+l*-a-u*-o,this.y=l*s+d*-o+u*-r-c*-a,this.z=u*s+d*-a+c*-o-l*-r,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.el,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.el;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:function(){var t=new Na;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var t=this.length();return t?this.multiplyScalar(1/t):this},setLength:function(t){return this.normalize().multiplyScalar(t)},fromArray:function(t,e){return e===r&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return t===r&&(t=[0,0,0]),e===r&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},cross:function(t){return this.crossVectors(this,t)},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return e>1||-1>e?0:Math.acos(e)},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.el,4*e)}});var Va=d.Math.Vector2=function(t,n,i){"object"==e(t)&&(t.x!=r?(n=t.y,t=t.x,i=t.e):(i=t[2],n=t[1],t=t[0])),this.set(t||0,n||0,i)};Va.prototype={},Va.prototype.constructor=Va,i.defineProperties(Va.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Va.prototype.clone=function(){return new Va(this.x,this.y,this.e)},Va.prototype.copy=function(t){return this.set(t.x,t.y,t.e),this},Va.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Va.prototype.set=function(t,e,n){return this.x=t||0,this.y=e||(0!==e?this.x:0),n!=r&&(this.e=n),this},Va.prototype.setScalar=function(t){return this.x=t,this.y=t,this},Va.prototype.setX=function(t){return this.x=t||0,this},Va.prototype.setY=function(t){return this.y=t||0,this},Va.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},Va.prototype.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},Va.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},Va.prototype.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},Va.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},Va.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},Va.prototype.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},Va.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},Va.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},Va.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},Va.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},Va.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},Va.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},Va.prototype.fromArray=function(t,e){return e===r&&(e=0),this.x=t[e],this.y=t[e+1],this},Va.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},Va.prototype.clampScalar=function(){var t,e;return function(n,i){return t===r&&(t=new Va,e=new Va),t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),Va.prototype.clampLength=function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},Va.prototype.dot=function(t){return this.x*t.x+this.y*t.y},Va.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},Va.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Va.prototype.normalize=function(){return this.divideScalar(this.length())},Va.prototype.angle=function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},Va.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},Va.prototype.distanceToSquared=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},Va.prototype.isNearEnough=function(t){return this.distanceToSquared(t)<1e-8},Va.prototype.setLength=function(t){var e=this.length();return e?this.multiplyScalar(t/e):this},Va.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},Va.prototype.lerpVectors=function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},Va.prototype.rotateAround=function(t,e){var n=t?t.x:0,i=t?t.y:0,r=Math.cos(e),o=Math.sin(e),a=this.x-n,s=this.y-i;return this.x=a*r-s*o+n,this.y=a*o+s*r+i,this},i.assign(o.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,o,a,s,c){var l=this.el;return l[0]=t,l[1]=i,l[2]=a,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(t){var e=this.el,n=t.el;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.el;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new Na;return function(e){for(var n=0,i=e.count;i>n;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.el,i=e.el,r=this.el,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],d=n[2],h=n[5],f=n[8],g=i[0],p=i[3],v=i[6],y=i[1],_=i[4],m=i[7],b=i[2],x=i[5],w=i[8];return r[0]=o*g+a*y+s*b,r[3]=o*p+a*_+s*x,r[6]=o*v+a*m+s*w,r[1]=c*g+l*y+u*b,r[4]=c*p+l*_+u*x,r[7]=c*v+l*m+u*w,r[2]=d*g+h*y+f*b,r[5]=d*p+h*_+f*x,r[8]=d*v+h*m+f*w,this},multiplyScalar:function(t){var e=this.el;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.el,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*r*l+n*a*s+i*r*c-i*o*s},getInverse:function(t){var e=t.el,n=this.el,i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=d*s-c*u,f=c*l-d*a,g=u*a-s*l,p=i*h+r*f+o*g;if(0===p)return this.identity();var v=1/p;return n[0]=h*v,n[1]=(o*u-d*r)*v,n[2]=(c*r-o*s)*v,n[3]=f*v,n[4]=(d*i-o*l)*v,n[5]=(o*a-c*i)*v,n[6]=g*v,n[7]=(r*l-u*i)*v,n[8]=(s*i-r*a)*v,this},transpose:function(){var t,e=this.el;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.el;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,o,a){var s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*o+c*a)+o+t,-i*c,i*s,-i*(-c*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.el;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.el,r=i[0],o=i[3],a=i[6],s=i[1],c=i[4],l=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*c,i[6]=e*a+n*l,i[1]=-n*r+e*s,i[4]=-n*o+e*c,i[7]=-n*a+e*l,this},translate:function(t,e){var n=this.el;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.el,n=t.el,i=0;9>i;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){e===r&&(e=0);for(var n=0;9>n;n++)this.el[n]=t[n+e];return this},toArray:function(t,e){t===r&&(t=[]),e===r&&(e=0);var n=this.el;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var La=d.Math.Plane=function(t,e){this.normal=t!==r?t:new Na(1,0,0),this.constant=e!==r?e:0};i.assign(La.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new Na,e=new Na;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return e===r&&(e=new Na),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new Na;return function(e,n){n===r&&(n=new Na);var i=e.delta(t),o=this.normal.dot(i);if(0===o)return 0===this.distanceToPoint(e.start)?n.copy(e.start):r;var a=-(e.start.dot(this.normal)+this.constant)/o;return 0>a||a>1?r:n.copy(i).multiplyScalar(a).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return 0>e&&n>0||0>n&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return t===r&&(t=new Na),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new Na,e=new o;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Ba=d.Math.Ray=function(t,e){this.origin=t!==r?t.clone():new Na,this.direction=e!==r?e.clone():new Na};i.assign(Ba.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this.maxHitLen=t.maxHitLen,this},at:function(t,e){var n=e||new Na;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},setMaxHitLength:function(t){this.maxHitLen=t},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},applyMatrix4:function(t){var e=this.maxHitLen;if(e){var n=this.direction.clone().multiplyScalar(e).add(this.origin);n.applyMatrix4(t)}return this.origin.applyMatrix4(t),this.direction.transformDirection(t),e&&(this.maxHitLen=this.origin.distanceTo(n)),this},intersectBox:function(t,e){var n,i,r,o,a,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,d=this.origin;if(c>=0?(n=(t.min.x-d.x)*c,i=(t.max.x-d.x)*c):(n=(t.max.x-d.x)*c,i=(t.min.x-d.x)*c),l>=0?(r=(t.min.y-d.y)*l,o=(t.max.y-d.y)*l):(r=(t.max.y-d.y)*l,o=(t.min.y-d.y)*l),n>o||r>i)return null;if((r>n||n!==n)&&(n=r),(i>o||i!==i)&&(i=o),u>=0?(a=(t.min.z-d.z)*u,s=(t.max.z-d.z)*u):(a=(t.max.z-d.z)*u,s=(t.min.z-d.z)*u),n>s||a>i)return null;if((a>n||n!==n)&&(n=a),(i>s||i!==i)&&(i=s),0>i)return null;var h=n>=0?n:i,f=this.maxHitLen;return f&&h>f?null:this.at(h,e)},intersectTriangle:function(){var t=new Na,e=new Na,n=new Na,i=new Na;return function(r,o,a,s,c){e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n);var l,u=this.direction.dot(i);if(u>0){if(s)return null;l=1}else{if(!(0>u))return null;l=-1,u=-u}t.subVectors(this.origin,r);var d=l*this.direction.dot(n.crossVectors(t,n));if(0>d)return null;var h=l*this.direction.dot(e.cross(t));if(0>h||d+h>u)return null;var f=-l*t.dot(i);if(0>f)return null;var g=f/u,p=this.maxHitLen;return p&&g>p?null:this.at(g,c)}}()});var Ga=d.Math.Box3=function(t,e){this.min=t!==r?t:new Na(1/0,1/0,1/0),this.max=e!==r?e:new Na(-1/0,-1/0,-1/0)};i.assign(Ga.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,c=t.length;c>s;s+=3){var l=t[s],u=t[s+1],d=t[s+2];e>l&&(e=l),n>u&&(n=u),i>d&&(i=d),l>r&&(r=l),u>o&&(o=u),d>a&&(a=d)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;n>e;e++)this.expandByPoint(t[e]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this}});var Fa=d.Math.Sphere=function(t,e){this.center=t!==r?t:new Na,this.radius=e!==r?e:0};i.assign(Fa.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new Ga;return function(e,n){var i=this.center;n!==r?i.copy(n):t.setFromPoints(e).getCenter(i);for(var o=0,a=0,s=e.length;s>a;a++)o=Math.max(o,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(o),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return e===r&&(e=new Na),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return t===r&&(t=new Ga),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var ja=d.Math.Frustum=function(t,e,n,i,o,a){this.planes=[t!==r?t:new La,e!==r?e:new La,n!==r?n:new La,i!==r?i:new La,o!==r?o:new La,a!==r?a:new La]};i.assign(ja.prototype,{set:function(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.el,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],d=n[8],h=n[9],f=n[10],g=n[11],p=n[12],v=n[13],y=n[14],_=n[15];return e[0].setComponents(a-i,u-s,g-d,_-p).normalize(),e[1].setComponents(a+i,u+s,g+d,_+p).normalize(),e[2].setComponents(a+r,u+c,g+h,_+v).normalize(),e[3].setComponents(a-r,u-c,g-h,_-v).normalize(),e[4].setComponents(a-o,u-l,g-f,_-y).normalize(),e[5].setComponents(a+o,u+l,g+f,_+y).normalize(),this},intersectsObject:function(){var t=new Fa;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new Fa;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;6>r;r++){var o=e[r].distanceToPoint(n);if(i>o)return!1}return!0},intersectsBox:function(){var t=new Na;return function(e){for(var n=this.planes,i=0;6>i;i++){var r=n[i];if(t.x=r.normal.x>0?e.max.x:e.min.x,t.y=r.normal.y>0?e.max.y:e.min.y,t.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(t)<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Ha=d.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};i.assign(Ha.prototype,{set:function(t,e,n,i,r,o,a,s,c,l,u,d,h,f,g,p){var v=this.el;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=d,v[3]=h,v[7]=f,v[11]=g,v[15]=p,this},clone:function(){return(new Ha).fromArray(this.el)},fromArray:function(t,e){e===r&&(e=0);for(var n=this.el,i=0;16>i;i++)n[i]=t[i+e];return this},scale:function(t){var e=this.el,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},makeRotationFromEuler:function(t){var e=this.el,n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos(n),s=Math.sin(n),c=Math.cos(i),l=Math.sin(i),u=Math.cos(r),d=Math.sin(r);if("XYZ"===o){var h=a*u,f=a*d,g=s*u,p=s*d;e[0]=c*u,e[4]=-c*d,e[8]=l,e[1]=f+g*l,e[5]=h-p*l,e[9]=-s*c,e[2]=p-h*l,e[6]=g+f*l,e[10]=a*c}else if("YXZ"===o){var v=c*u,y=c*d,_=l*u,m=l*d;e[0]=v+m*s,e[4]=_*s-y,e[8]=a*l,e[1]=a*d,e[5]=a*u,e[9]=-s,e[2]=y*s-_,e[6]=m+v*s,e[10]=a*c}else if("ZXY"===o){v=c*u,y=c*d,_=l*u,m=l*d;e[0]=v-m*s,e[4]=-a*d,e[8]=_+y*s,e[1]=y+_*s,e[5]=a*u,e[9]=m-v*s,e[2]=-a*l,e[6]=s,e[10]=a*c}else if("ZYX"===o){h=a*u,f=a*d,g=s*u,p=s*d;e[0]=c*u,e[4]=g*l-f,e[8]=h*l+p,e[1]=c*d,e[5]=p*l+h,e[9]=f*l-g,e[2]=-l,e[6]=s*c,e[10]=a*c}else if("YZX"===o){var b=a*c,x=a*l,w=s*c,I=s*l;e[0]=c*u,e[4]=I-b*d,e[8]=w*d+x,e[1]=d,e[5]=a*u,e[9]=-s*u,e[2]=-l*u,e[6]=x*d+w,e[10]=b-I*d}else if("XZY"===o){b=a*c,x=a*l,w=s*c,I=s*l;e[0]=c*u,e[4]=-d,e[8]=l*u,e[1]=b*d+I,e[5]=a*u,e[9]=x*d-w,e[2]=w*d-x,e[6]=s*u,e[10]=I*d+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.el,n=t._x,i=t._y,r=t._z,o=t._w,a=n+n,s=i+i,c=r+r,l=n*a,u=n*s,d=n*c,h=i*s,f=i*c,g=r*c,p=o*a,v=o*s,y=o*c;return e[0]=1-(h+g),e[4]=u-y,e[8]=d+v,e[1]=u+y,e[5]=1-(l+g),e[9]=f-p,e[2]=d-v,e[6]=f+p,e[10]=1-(l+h),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(t){var e=this.el,n=t.el,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],d=n[8],h=n[9],f=n[10],g=n[11],p=n[12],v=n[13],y=n[14],_=n[15],m=h*y*u-v*f*u+v*l*g-c*y*g-h*l*_+c*f*_,b=p*f*u-d*y*u-p*l*g+s*y*g+d*l*_-s*f*_,x=d*v*u-p*h*u+p*c*g-s*v*g-d*c*_+s*h*_,w=p*h*l-d*v*l-p*c*f+s*v*f+d*c*y-s*h*y,I=i*m+r*b+o*x+a*w;if(0===I)return this.identity();var S=1/I;return e[0]=m*S,e[1]=(v*f*a-h*y*a-v*o*g+r*y*g+h*o*_-r*f*_)*S,e[2]=(c*y*a-v*l*a+v*o*u-r*y*u-c*o*_+r*l*_)*S,e[3]=(h*l*a-c*f*a-h*o*u+r*f*u+c*o*g-r*l*g)*S,e[4]=b*S,e[5]=(d*y*a-p*f*a+p*o*g-i*y*g-d*o*_+i*f*_)*S,e[6]=(p*l*a-s*y*a-p*o*u+i*y*u+s*o*_-i*l*_)*S,e[7]=(s*f*a-d*l*a+d*o*u-i*f*u-s*o*g+i*l*g)*S,e[8]=x*S,e[9]=(p*h*a-d*v*a-p*r*g+i*v*g+d*r*_-i*h*_)*S,e[10]=(s*v*a-p*c*a+p*r*u-i*v*u-s*r*_+i*c*_)*S,e[11]=(d*c*a-s*h*a-d*r*u+i*h*u+s*r*g-i*c*g)*S,e[12]=w*S,e[13]=(d*v*o-p*h*o+p*r*f-i*v*f-d*r*y+i*h*y)*S,e[14]=(p*c*o-s*v*o-p*r*l+i*v*l+s*r*y-i*c*y)*S,e[15]=(s*h*o-d*c*o+d*r*l-i*h*l-s*r*f+i*c*f)*S,this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,c=r*o,l=r*a;return this.set(c*o+n,c*a-i*s,c*s+i*a,0,c*a+i*s,l*a+n,l*s-i*o,0,c*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.el,i=e.el,r=this.el,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],d=n[9],h=n[13],f=n[2],g=n[6],p=n[10],v=n[14],y=n[3],_=n[7],m=n[11],b=n[15],x=i[0],w=i[4],I=i[8],S=i[12],T=i[1],C=i[5],M=i[9],D=i[13],E=i[2],P=i[6],O=i[10],A=i[14],k=i[3],R=i[7],z=i[11],N=i[15];return r[0]=o*x+a*T+s*E+c*k,r[4]=o*w+a*C+s*P+c*R,r[8]=o*I+a*M+s*O+c*z,r[12]=o*S+a*D+s*A+c*N,r[1]=l*x+u*T+d*E+h*k,r[5]=l*w+u*C+d*P+h*R,r[9]=l*I+u*M+d*O+h*z,r[13]=l*S+u*D+d*A+h*N,r[2]=f*x+g*T+p*E+v*k,r[6]=f*w+g*C+p*P+v*R,r[10]=f*I+g*M+p*O+v*z,r[14]=f*S+g*D+p*A+v*N,r[3]=y*x+_*T+m*E+b*k,r[7]=y*w+_*C+m*P+b*R,r[11]=y*I+_*M+m*O+b*z,r[15]=y*S+_*D+m*A+b*N,this},lookAt:function(){var t=new Na,e=new Na,n=new Na;return function(i,r,o){var a=this.el;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),extractScale:function(){var t;return function(e){t===r&&(t=new Na),e===r&&(e=new Na);var n=t.setFromMatrixColumn(this,0).length(),i=t.setFromMatrixColumn(this,1).length(),o=t.setFromMatrixColumn(this,2).length();return e.set(n,i,o),e}}(),extractRotation:function(){var t;return function(e){t===r&&(t=new Na),e===r&&(e=new Ha);var n=this.el,i=e.el,o=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*o,n[1]=i[1]*o,n[2]=i[2]*o,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,this}}(),multiplyScalar:function(t){var e=this.el;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},getPosition:function(t){return t===r&&(t=new Na),t.setFromMatrixColumn(this,3)},setPosition:function(t){var e=this.el;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},toArray:function(t,e){t===r&&(t=[]),e===r&&(e=0);var n=this.el;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},determinant:function(){var t=this.el,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],d=t[10],h=t[14],f=t[3],g=t[7],p=t[11],v=t[15];return f*(+r*s*u-i*c*u-r*a*d+n*c*d+i*a*h-n*s*h)+g*(+e*s*h-e*c*d+r*o*d-i*o*h+i*c*l-r*s*l)+p*(+e*c*u-e*a*h-r*o*u+n*o*h+r*a*l-n*c*l)+v*(-i*a*l-e*s*u+e*a*d+i*o*u-n*o*d+n*s*l)},copy:function(t){var e=this.el,n=t.el;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},compose:function(t,e,n){var i=this.el,r=e._x,o=e._y,a=e._z,s=e._w,c=r+r,l=o+o,u=a+a,d=r*c,h=r*l,f=r*u,g=o*l,p=o*u,v=a*u,y=s*c,_=s*l,m=s*u,b=n.x,x=n.y,w=n.z;return i[0]=(1-(g+v))*b,i[1]=(h+m)*b,i[2]=(f-_)*b,i[3]=0,i[4]=(h-m)*x,i[5]=(1-(d+v))*x,i[6]=(p+y)*x,i[7]=0,i[8]=(f+_)*w,i[9]=(p-y)*w,i[10]=(1-(d+g))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(){var t=new Na,e=new Ha;return function(n,i,r){var o=this.el,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),c=t.set(o[8],o[9],o[10]).length(),l=this.determinant();0>l&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var u=1/a,d=1/s,h=1/c;return e.el[0]*=u,e.el[1]*=u,e.el[2]*=u,e.el[4]*=d,e.el[5]*=d,e.el[6]*=d,e.el[8]*=h,e.el[9]*=h,e.el[10]*=h,i.setFromRotationMatrix(e),r.x=a,r.y=s,r.z=c,this}}()});var Ua=d.Math.Triangle=function(t,e,n){this.a=t!==r?t:new Na,this.b=e!==r?e:new Na,this.c=n!==r?n:new Na};i.assign(Ua,{barycoordFromPoint:function(){var t=new Na,e=new Na,n=new Na;return function(i,r,o,a,s){t.subVectors(a,r),e.subVectors(o,r),n.subVectors(i,r);var c=t.dot(t),l=t.dot(e),u=t.dot(n),d=e.dot(e),h=e.dot(n),f=c*d-l*l,g=s||new Na;if(0===f)return g.set(-2,-1,-1);var p=1/f,v=(d*u-l*h)*p,y=(c*h-l*u)*p;return g.set(1-v-y,y,v)}}()});var Za=d.Math.Euler=function(t,e,n,i,r){this.set(t,e,n,i,r)};Za.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Za.DefaultOrder="XYZ",Za.ReverseOrder=function(t){return t=t[2]+t[1]+t[0],t.toUpperCase()},i.defineProperties(Za.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),i.assign(Za.prototype,{set:function(t,e,n,i,r){return Ri(t)&&(r=n,i=e,n=t[2],e=t[1],t=t[0]),i?r&&(i=Za.ReverseOrder(i)):i="ZYX",this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=d.Math.clamp,r=t.el||t,o=r[0],a=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],f=r[6],g=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,g),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,g),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,g))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,g),this._y=0)):console.warn("unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Ha;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new Ra;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==r&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return t===r&&(t=[]),e===r&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Na(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}});var Wa={ms_ac:function(t,e){for(var n=e.ms_ac,i=0;i<n.length;i++)fr(t,n[i])},ms_listener:function(t){t.addListeners=function(){for(var t=this,e=0;e<En.length;e++)t["handle_"+En[e]]&&dr(En[e],t.getView(),t)},t.removeListeners=function(){for(var t=this,e=0;e<En.length;e++)t["handle_"+En[e]]&&hr(En[e],t.getView(),t)}},ms_fire:function(t){t.mp=function(t,e,n){this.addPropertyChangeListener(t,e,n)},t.ump=function(t,e){this.removePropertyChangeListener(t,e)},t.fp=function(t,e,n,i,r){return this.firePropertyChange(t,e,n,i,r)},t.addPropertyChangeListener=function(t,e,n){var i=this;i._62I||(i._62I=new nl),i._62I.add(t,e,n)},t.removePropertyChangeListener=function(t,e){this._62I&&this._62I.remove(t,e)},t.firePropertyChange=function(t,e,n,i,r){if(i){if(i(e,n))return!1}else if(e===n)return!1;var o=this,a=r||{};return a.property=t,a.oldValue=e,a.newValue=n,a.source=o,a.data=o,o._62I&&o._62I.fire(a),o.onPropertyChanged&&o.onPropertyChanged(a),!0}},ms_attr:function(t){t.a=function(t,e){var n=this;if(2===arguments.length)n.setAttr(t,e);else{if(!Ai(t))return n.getAttr(t);for(var i in t)n.setAttr(i,t[i])}return n},t.getAttr=function(t,e){if(e===r&&(e=1),this._attrObject&&t in this._attrObject)return this._attrObject[t];if(this.getImage){var n=this.getImage();if(Ei(n)&&(n=Zn[n]),Ai(n)&&"dataBindings"in n)for(var i=n.dataBindings,o=i.length-1;o>=0;o--){var a=i[o];if(a.attr===t){if("defaultValue"in a)return a.defaultValue;break}}}return e?p[t]:r},t.setAttr=function(t,e){var n=this;n._attrObject||(n._attrObject={});var i=n._attrObject[t];e===r?delete n._attrObject[t]:n._attrObject[t]=e,n.fp&&n.fp("a:"+t,i,e)&&n.onAttrChanged&&n.onAttrChanged(t,i,e)},t.getSerializableAttrs=function(){var t,e={};for(t in this._attrObject)e[t]=1;return e}},ms_bnb:function(t){t.getBodyColor=function(t){return t.s("body.color")},t.getBorderColor=function(t){return t.s("border.color")}},_51o:function(t){t.mi=function(t,e,n){this.addInteractorListener(t,e,n)},t.umi=function(t,e){this.removeInteractorListener(t,e)},t.fi=function(t){this.fireInteractorEvent(t)},t.addInteractorListener=function(t,e,n){var i=this;i._63I||(i._63I=new nl),i._63I.add(t,e,n)},t.removeInteractorListener=function(t,e){this._63I&&this._63I.remove(t,e)},t.fireInteractorEvent=function(t){this._63I&&this._63I.fire(t)},t.setInteractors=function(t){var e=this,n=e._interactors;n&&n.each((function(t){t.tearDown()})),Ri(t)&&(t=new tl(t)),e._interactors=t,t&&t.each((function(t){t.setUp()})),e.fp("interactors",n,t),e.invalidateSelection()},t.getInteractors=function(){return this._interactors}},_49o:function(t){t._44O=u,t._45O=u,t.getTopPainters=function(){return this._44O},t.getBottomPainters=function(){return this._45O},t.addTopPainter=function(t){var e=this;e._44O||(e._44O=new tl),e._44O.contains(t)||(e._44O.add(t),e.redraw&&e.redraw())},t.removeTopPainter=function(t){var e=this;e._44O&&(e._44O.remove(t),e.redraw&&e.redraw())},t.addBottomPainter=function(t){var e=this;e._45O||(e._45O=new tl),e._45O.contains(t)||(e._45O.add(t),e.redraw&&e.redraw())},t.removeBottomPainter=function(t){var e=this;e._45O&&(e._45O.remove(t),e.redraw&&e.redraw())},t._93db=function(t,e){var n=this;n._45O&&n._45O.each((function(i){i.draw?i.draw(t,e):i.call(n,t,e)}))},t._92db=function(t,e){var n=this;n._44O&&n._44O.each((function(i){i.draw?i.draw(t,e):i.call(n,t,e)}))}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(t){this.sm().setFilterFunc(t)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){var t=this;return t._selectionModel?t._selectionModel:t.dm().sm()},t.isSelectionModelShared=function(){return!this._selectionModel},t.setSelectionModelShared=function(t){var e=this,n=!e._selectionModel,i=e.handleSelectionChange,r=e.dm();n!==t&&(e.invalidateSelection&&e.invalidateSelection(),t?(r.sm().ms(i,e),e._selectionModel.ums(i,e),e._selectionModel.dispose(),e._selectionModel=u):(r.sm().ums(i,e),e._selectionModel=new ol(r),e._selectionModel.ms(i,e)),e.onSelectionModelSharedChanged(),e.fp("selectionModelShared",n,t))},t.onSelectionModelSharedChanged=function(){var t=this;t.redraw(),t.invalidateSelection&&t.invalidateSelection()},t.removeSelection=function(){var t=this.dm();t.beginTransaction(),this.sm().toSelection().each(t.remove,t),t.endTransaction()},t.selectAll=function(){var t=this;t.sm().ss(t.dm().toDatas((function(e){return t.isVisible(e)&&t.isSelectable(e)})))},t.isSelected=function(t){return this.sm().co(t)},t.isSelectedById=function(t){var e=this.dm().getDataById(t);return!!e&&this.isSelected(e)},t.isSelectable=function(t){return this.sm().isSelectable(t)}},ms_tx:function(t){t._64I=0,t._65O=0,t.isScrollable=function(){return this.getWidth()<this._64I},t._40o=function(){return this.isScrollable()},t.getLogicalPoint=function(t){return ec(t,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},t.tx=function(t){return t===r?this.getTranslateX():void this.setTranslateX(t)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this,n=e.getWidth()-e._64I;n>t&&(t=n),t>0&&(t=0),t=M(t);var i=e._65O;e._65O=t,e.fp(Fe,i,t)}},ms_ty:function(t){t._23Q=0,t._66O=0,t._41o=function(){return this.getHeight()<this._23Q},t.getLogicalPoint=function(t){return ec(t,this._canvas||this._view,this.tx?this.tx():0,this.ty())},t.ty=function(t){return t===r?this.getTranslateY():void this.setTranslateY(t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this,n=e.getHeight()-e._23Q;n>t&&(t=n),t>0&&(t=0),t=M(t);var i=e._66O;e._66O=t,e.fp(je,i,t)}},ms_txy:function(t){t._65O=0,t._66O=0,t.tx=function(t){return t===r?this.getTranslateX():void this.setTranslateX(t)},t.ty=function(t){return t===r?this.getTranslateY():void this.setTranslateY(t)},t.onTranslateEnded=function(){},t.setTranslate=function(t,e,n){var i=this;if(n=Zi(n)){i._65I&&i._65I.stop(!0);var r=i.tx(),o=i.ty();n.action=function(n){i.setTranslate(r+(t-r)*n,o+(e-o)*n)},n._37o=function(){delete i._66I,delete i._65I,i.onTranslateEnded()},i._66I=1,i._65I=ks(n)}else i.tx(t),i.ty(e)},t.getTranslateX=function(){return this._65O},t.setTranslateX=function(t){var e=this;t=e.adjustTranslateX(t);var n=e._65O;e._65O=t,e.fp(Fe,n,t)},t.getTranslateY=function(){return this._66O},t.setTranslateY=function(t){var e=this;t=e.adjustTranslateY(t);var n=e._66O;e._66O=t,e.fp(je,n,t)},t.adjustTranslateX=function(t){return M(t)},t.adjustTranslateY=function(t){return M(t)},t.translate=function(t,e,n){this.setTranslate(this.tx()+t,this.ty()+e,n)},t.getLogicalPoint=function(t){var e=this;return ec(t,this._canvas||e._view,e.tx(),e.ty())}},ms_dm:function(t){t.dm=function(t){return t?void this.setDataModel(t):this.getDataModel()},t.getDataModel=function(){return this._dataModel}},ms_lp:function(t){t.lp=function(t){return this.getLogicalPoint(t)}},ms_v:function(t){t._disabled=!1,t.setDisabled=function(t,e){var n=this,i=n._disabled;i!==t&&(i&&(rc(n._63O),delete n._63O),t&&(wr(n._view,n._63O=Er(e)),n.iv()),n._disabled=t,n.fp("disabled",i,t))},t.isDisabled=function(){return this._disabled},t.getDisabledDiv=function(){return this._63O},t.getView=function(){return this._view},t.addToDOM=function(t){var e=this,i=e.getView(),r=i.style;t=t||l.body,t.appendChild(i),r.left="0",r.right="0",r.top="0",r.bottom="0",S(n,"resize",(function(){e.iv()})),e.iv()},t.getWidth=function(){return this._view.clientWidth},t.getHeight=function(){return this._view.clientHeight},t.setWidth=function(t){var e=this;e._view.style.width=t+Ct,e.iv(),e.fp&&e.fp(Lt,u,t)},t.setHeight=function(t){var e=this;e._view.style.height=t+Ct,e.iv(),e.fp&&e.fp(Bt,u,t)},t.setFocus=function(t){var e=this,n=e._currentEditor;return!(t&&n&&(n.getView&&(n=n.getView()),n.contains(t.target)))&&(Nr(e._view),e.endEditing&&e.endEditing(),e.fireViewEvent("focus"),!0)},t.iv=function(t){this.invalidate(t)},t.invalidate=function(t){var e=this;e._68I||(e._68I=1,Es(e.validate,e,u,t),e.onInvalidated&&e.onInvalidated(),e.fireViewEvent("invalidate"))},t.validate=function(){var t=this,e=t._view;if(t._68I&&(delete t._68I,e.parentNode))if(0===e.offsetWidth&&0===e.offsetHeight&&t._67I!==u)t._67I===r&&(t._67I=f.reinvalidateCount),t._67I>0?t._67I--:t._67I=u,t.iv();else{t.fireViewEvent("beginValidate"),t.validateImpl(),t.onValidated&&t.onValidated(),t.fireViewEvent("validate");var n=t._63O;n&&(e.lastChild!==n&&(rc(n),wr(e,n)),Lr(n,0,0,t.getWidth(),t.getHeight())),fi(t),Gc(t),wg(t)}},t.layout=function(t,e,n,i){1===arguments.length?Lr(this,t):Lr(this,t,e,n,i)},t.addViewListener=function(t,e,n){var i=this;i._67O||(i._67O=new nl),i._67O.add(t,e,n)},t.removeViewListener=function(t,e){this._67O.remove(t,e)},t.fireViewEvent=function(t){var e=this;e._67O&&(Ei(t)&&(t={kind:t}),e._67O.fire(t)),f.viewListener&&f.viewListener(e,t)}},ms_tip:function(t){t.setToolTipEnabled=function(t){var e=this;t?lt||e._13o||(e.enableToolTip(),e.fp("toolTipEnabled",!1,!0)):e._13o&&(e.disableToolTip(),e.fp("toolTipEnabled",!0,!1))},t.isToolTipEnabled=function(){return!!this._13o},t.enableToolTip=function(){var t=this;if(!lt&&!t._13o){t._13o=function(e){var n=t.getToolTip(e);n!=u?f.toolTipContinual&&f.isToolTipShowing()?Ka(e,n):(ts(),An={timeout:J(zn,Xa),e:e,info:n}):ts()};var e=t.getView();S(e,mn,t._13o),S(e,"mouseleave",f.hideToolTip)}},t.disableToolTip=function(){var t=this;if(t._13o){var e=t.getView();T(e,mn,t._13o),T(e,"mouseleave",f.hideToolTip),delete t._13o}},t.getToolTip=function(t){var e=this;if(e.getDataAt){var n=e.getDataAt(t);return n?n.getToolTip():u}return e.getValue?e.getValue():void 0}},_52o:function(t){t._zoom=1,t._29I=ci,t.zoomIn=function(t,e){this.setZoom(this._zoom*vs,t,e)},t.zoomOut=function(t,e){this.setZoom(this._zoom/vs,t,e)},t.zoomReset=function(t,e){this.setZoom(1,t,e)},t.scrollZoomIn=function(t){this.setZoom(this._zoom*ys,u,t)},t.scrollZoomOut=function(t){this.setZoom(this._zoom/ys,u,t)},t.pinchZoomIn=function(t){this.setZoom(this._zoom*_s,u,t)},t.pinchZoomOut=function(t){this.setZoom(this._zoom/_s,u,t)},t.adjustZoom=function(t){return bs>t?bs:t>ms?ms:t},t.getZoom=function(){return this._zoom},t.setZoom=function(t,e,n){var i=this;if(e=Zi(e)){i._14o&&i._14o.stop(!0);var r=i._zoom;e.action=function(e){i._96O(r+(t-r)*e,n)},e._37o=function(){delete i._zooming,delete i._14o,i.onZoomEnded()},i._zooming=1,i._14o=ks(e)}else i._96O(t,n)},t._96O=function(t,e){var n=this;if(t=n.adjustZoom(t),t!==n._zoom){n.validate();var i=n._29I,r=n._zoom;0!==i.width&&0!==i.height&&(e=e||{x:i.x+i.width/2,y:i.y+i.height/2},n.tx((e.x-i.x)*r-e.x*t),n.ty((e.y-i.y)*r-e.y*t)),n._zoom=t,n.fp("zoom",r,t)}}},ms_edge:function(t){t._2I=function(t){var e=this;e._44I||(e._44I=new tl),e._42I||(e._42I=new tl),e._44I.add(t),e._42I.add(t),e._20I()},t._4I=function(t){var e=this;e._44I||(e._44I=new tl),e._43I||(e._43I=new tl),e._44I.add(t),e._43I.add(t),e._20I()},t._16I=function(t){var e=this;e._44I.remove(t),e._42I.remove(t),e._44I.isEmpty()&&delete e._44I,e._42I.isEmpty()&&delete e._42I,e._20I()},t._18I=function(t){var e=this;e._44I.remove(t),e._43I.remove(t),e._44I.isEmpty()&&delete e._44I,e._43I.isEmpty()&&delete e._43I,e._20I()},t._20I=function(){var t,e=this;(delete e._45I,e._44I&&!e._44I.isEmpty())?(e._44I.each((function(n){n.isLooped()&&(t||(t={}),t[n._id]||(e._45I||(e._45I=new tl),e._45I.add(n),t[n._id]=n))})),t?(e._70O=new tl,e._44I.each((function(n){t[n._id]?"A"===t[n._id]||(t[n._id]="A",e._70O.add(n)):e._70O.add(n)}))):e._70O=e._44I):delete e._70O},t.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},t.getSourceAgentEdges=function(){return this._46I},t.getTargetAgentEdges=function(){return this._47I},t._1I=function(t){var e=this;e._46I||(e._46I=new tl),e._48I||(e._48I=new tl),e._46I.add(t),e._48I.add(t),e._19I()},t._3I=function(t){var e=this;e._47I||(e._47I=new tl),e._48I||(e._48I=new tl),e._47I.add(t),e._48I.add(t),e._19I()},t._15I=function(t){var e=this;e._46I.remove(t),e._48I.remove(t),e._46I.isEmpty()&&delete e._46I,e._48I.isEmpty()&&delete e._48I,e._19I()},t._17I=function(t){var e=this;e._47I.remove(t),e._48I.remove(t),e._47I.isEmpty()&&delete e._47I,e._48I.isEmpty()&&delete e._48I,e._19I()},t._19I=function(){var t=this;delete t._49I;var e=t._48I;if(e&&!e.isEmpty()){var n={};e.each((function(e){n[e._id]?t._49I||(t._49I=new tl):n[e._id]=e})),t._49I?e.each((function(e){n[e._id]&&(t._49I.add(e),delete n[e._id])})):t._49I=e}},t.getLoopedEdges=function(){return this._45I},t.getEdges=function(){return this._70O},t.getAgentEdges=function(){return this._49I},t.getSourceEdges=function(){return this._42I},t.getTargetEdges=function(){return this._43I},t._8I=function(){this._70O&&this._70O.each((function(t){t._7I()}))}}};Wi(f,{numberDigits:5,crossOrigin:"",baseZIndex:r,isTouchable:lt,devicePixelRatio:n.devicePixelRatio?n.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:v.disabledBackground,forceHierarchicalSerialization:!0,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return jr},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],encodeStringKey:null,doubleClickRange:lt?20:1,animDuration:200,animEasing:function(t){return t*t},labelColor:ma,labelSelectColor:ba,labelFont:(lt?"15":"12")+"px arial, sans-serif",widgetIndent:lt?30:20,widgetRowHeight:lt?30:20,widgetHeaderHeight:lt?32:22,widgetTitleHeight:lt?34:24,scrollBarColor:ra,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:lt?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:nr,intersectionLineLine:ir,isEnter:lo,isEsc:uo,isDelete:$r,isSpace:co,isLeft:ro,isUp:oo,isRight:ao,isDown:so,getTarget:Gr,isString:Ei,isNumber:Pi,isBoolean:Oi,isArray:Ri,isSelectAll:Yr,isFunction:ki,isObject:Ai,getPropertyValue:rr,setPropertyValue:or,addMethod:Wi,getVersion:function(){return"7.0.2"},createGradient:function(t,e,n,i,r,o,a,s){var c=Uo[e];return c(t,n,i,r,o,a,s)},appendToScreen:function(t){t=t.getView?t.getView():t,(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement||l.body).appendChild(t)},encodeString:function(t){return d.Math.encodeBase64(t,f.encodeStringKey)},decodeString:function(t){return d.Math.decodeBase64(t,f.encodeStringKey)},findView:function(t){var e=function t(e,n){var i=n._ht;i&&e.push(i);var r=n.children,o=r.length;if(o)for(var a=0;o>a;a++)t(e,r[a])},n=[];e(n,l.body);var i=function(t,e){for(var i="2d"===e?Nl.GraphView:Uf.Graph3dView,r=0,o=t.length;o>r;r++)if(t[r]instanceof i)return n[r];return null};return"all"===t?n:"2d"===t?i(n,"2d"):"3d"===t?i(n,"3d"):i(n,"3d")||i(n,"2d")},toggleFullscreen:function(t){var e=t.getView();if(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement)l.exitFullscreen?l.exitFullscreen():l.msExitFullscreen?l.msExitFullscreen():l.mozCancelFullScreen?l.mozCancelFullScreen():l.webkitExitFullscreen&&l.webkitExitFullscreen();else{var n=!0;if(t.isSelfViewEvent){var i=t.getX(),r=t.getY(),o=t.getWidth(),a=t.getHeight(),s=e.style.background,c=e.style.backgroundColor;s||c||(e.style.backgroundColor="white"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen();var u=setInterval((function(){if(e!==(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement))clearInterval(u),t.setX(i),t.setY(r),t.setWidth(o),t.setHeight(a),t._fullscreen=!1,e.style.oldBackgroundColor=c,t.iv();else{var s=d.Default.getWindowInfo();(n||s.width!==t.getWidth()||s.height!==t.getHeight())&&(t.setX(s.left),t.setY(s.top),t.setWidth(s.width),t.setHeight(s.height),t._fullscreen=!0,t.iv(),n=!1)}}),500)}else{var h=e.style.left,f=e.style.top;o=e.style.width,a=e.style.height,s=e.style.background,c=e.style.backgroundColor;s||c||(e.style.backgroundColor="white"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen();u=setInterval((function(){if(e!==(l.fullscreenElement||l.mozFullScreenElement||l.webkitFullscreenElement||l.msFullscreenElement))clearInterval(u),e.style.left=h,e.style.top=f,e.style.width=o,e.style.height=a,e.style.oldBackgroundColor=c,t.iv();else{var i=d.Default.getWindowInfo();(n||i.width!==t.getWidth()||i.height!==t.getHeight())&&(Lr(t),n=!1)}}),500)}}},appendTimeStamp:function(t){return t},setCompType:function(t,e){ki(e)||Ai(e)?$n[t]=e:Fc(t)},getCompType:function(t){var e=$n[t];return e===r&&ti.test(t)&&Fc(t),e},getCompTypeMap:function(){return $n},drawCompType:function(t,e,n,i,r,o){t(e,n,i,r,o)},numberListener:function(){var t={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(e){var n=e.keyCode;t[n]||65===n&&f.isCtrlDown(e)||86===n&&f.isCtrlDown(e)||67===n&&f.isCtrlDown(e)||88===n&&f.isCtrlDown(e)||n>=35&&40>=n||(e.shiftKey||48>n||n>57)&&(96>n||n>105)&&e.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(t){var e=t.target.tagName;("DIV"===e||"CANVAS"===e)&&!(f.ignoreKeyCodes.indexOf(t.keyCode)>=0)&&("keydown"!==t.type||ro(t)||ao(t)||oo(t)||so(t)||$r(t)||65===t.keyCode&&(t.metaKey||t.ctrlKey))&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())},getWindowInfo:function(){var t=l.documentElement,e=t&&(t.scrollLeft||t.scrollTop)?t:l.body;return{target:e,left:e.scrollLeft,top:e.scrollTop,width:n.innerWidth||e.clientWidth,height:n.innerHeight||e.clientHeight}},isDragging:function(){return!!jr},isLeftButton:function(t){return!!lt||0===t.button},isMiddleButton:function(t){return!lt&&(t&&(1===t.button||4&(t.buttons||0)))},isInput:function(t){if(!t)return!1;var e=t.tagName;return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e},getTouchCount:function(t){return lt?t.touches.length:1},isDoubleClick:function(){function t(t){t.details=0,t.timeout=null,t.lastPoint=null}var e={};return jn=new Z,Hn=jn.getTime(),function(n){if(n.touches&&n.touches.length>1)return!1;var i=n.button==u?"":n.button,o=n.type+i,a=o+"_isDoubleClick",s=e[o];if(s||(s=e[o]={details:0,timeout:null,lastPoint:null}),n[a]===r){n[a]=!0;var c=Us(n);s.timeout&&(K(s.timeout),s.timeout=null),s.lastPoint&&Ws(s.lastPoint,c)>f.doubleClickRange&&t(s),s.lastPoint=c,s.details++,s.timeout=J(function(){t(this)}.bind(s),500)}return 2===s.details}}(),isShiftDown:function(t){return t?t.shiftKey:Yn["16"]},isCtrlDown:function(t){return t?ct?t.metaKey:t.ctrlKey:ct?Yn["91"]:Yn["17"]},getClientPoint:function(t){return lt&&(t=Br(t)),{x:t.clientX,y:t.clientY}},isMouseEvent:function(t){return t instanceof MouseEvent||0===t.type.indexOf("mouse")},getTargetElement:function(t){if(f.isMouseEvent(t)||!l.elementFromPoint)return t.target;var e=Zs(t);return l.elementFromPoint(e.x,e.y)},getPagePoint:function(t){return lt&&(t=Br(t)),{x:t.pageX,y:t.pageY}},createObject:function(t,e){var n=new t;for(var i in e){var r=e[i];if(ki(r))n[i]=r;else if(0===i.indexOf("s:"))n.s(i.substr(2),e[i]);else if(0===i.indexOf("a:"))n.a(i.substr(2),e[i]);else{var o=Di(i);r=e[i];n[o]?(n[o](r),"setToolTip"===o&&n.enableToolTip&&n.enableToolTip()):n[i]=r}}return n},setImage:function(t,e,n,i){var r=arguments.length;4===r?gi(t,i,e,n):2===r?Ei(e)?gi(t,e):hi(t,e):1===r&&gi(t,t)},getImage:function(t,e,n){var i;if(t==u)return u;if(Ai(t)?i=t:(i=Zn[t],t&&i===r&&(ui&&ui[t]||gi(t,t))),e&&i&&i.tagName){var o;o="override"===n?"colors_override":"override_rgb"===n?"colors_override_rgb":"override_a"===n?"colors_override_a":"colors",i[o]||(i[o]={__count__:0});var a=i[o][e];return a||(i[o].__count__>f.imageCacheThreshold&&(i[o]={__count__:0}),a=mo(i,_o(e),i.width,i.height,n),i[o][e]=a,i[o].__count__++),a}return i},isImageComplete:function(t,e,n){var i=Ss(t);if(!i)return!1;if(i.tagName)return i.complete;for(var o,a,s=i.comps,c=!0,l=0,u=s.length;u>l;l++)if(o=s[l],a=o.type,"image"===o.type){t=o.name,t&&t.func&&(t=Jc(t,e));var d=Ts(t,e,n);if(!d){c=!1;break}}else if(ti.test(a)&&f.getCompType(a)===r){c=!1,Fc(a);break}return c},getId:function(){var t=1;return function(){return++t}}(),callLater:function(t,e,i,r){var o=function(){t.apply(e,i)};return r?J(o,r):n.requestAnimationFrame(o)},clone:function(t){if(null==t||"object"!=e(t))return t;if(t instanceof Date){var n=new Date;return n.setTime(t.getTime()),n}if(t instanceof Array){n=[];for(var r=0,o=t.length;o>r;r++)n[r]=Os(t[r]);return n}if(t instanceof tl){for(n=new tl,r=0,o=t.length;o>r;r++)n.set(r,Os(t.get(r)));return n}if(t instanceof il)return t;if(t instanceof i){n={};for(var a in t)t.hasOwnProperty(a)&&(n[a]=Os(t[a]));return n}return t},callWhenLoaded:function(t,e){e=e||100;var n=Fn(t,e);Gn||(Gn={}),Gn[n]={tick:n,cb:t,delay:e}},beforeLoadURL:function(t){if(Gn){var e={};for(var n in Gn){var i=Gn[n];K(i.tick);var r=Fn(i.cb,i.delay);e[r]={tick:r,delay:i.delay,cb:i.cb}}Gn=e}return f.convertURL?f.convertURL(t):t},convertURL:function(t){return t},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){return f.getImage("default_blank")},sortFunc:function(t,n){if(t===n)return 0;if(t==u&&n!=u)return 1;if(t!=u&&n==u)return-1;if(t==u&&n==u)return 0;var i,o=e(t),a=e(n);return o===ln&&a===ln?i=t.localeCompare(n):o===fn&&a===fn&&(i=t-n),i===r&&(i=(""+t).localeCompare(""+n)),i>0?1:0>i?-1:0},getClassMap:function(){return Un},getClass:function(t){if(Ei(t)){var e,i=Un[t];if(!i){e=t.split("."),i=n;for(var r=0;r<e.length;r++)i=i[e[r]];Un[t]=i}return i}return t},def:function(t,e,n){var i,r,o,a=function(){};if(a.prototype=e.prototype,i=new a,Ei(t)){if(Un[t])throw"'"+t+"' already defined";o=As(t),i.getClassName=function(){return t}}else o=t;if(i.constructor=o,i.getClass=function(){return o},i.getSuperClass=function(){return e},n)for(r in n)Wa[r]&&Wa.hasOwnProperty(r)?Wa[r](i,n):ta(i,n,r);o.prototype=i,o.superClass=e.prototype},startAnim:function(){var t=function(t){t.duration&&(t.startTime=vi()),t.timeId=Es(t.tick,u,u,t.interval)};return function(e){return e=Os(e),e.easing=e.easing||f.animEasing,e.duration||e.frames||(e.duration=f.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var t=(vi()-e.startTime)/e.duration;if(t>1&&(t=1),e.t=t,e.action(e.easing(t),t),!e.isRunning())return;1===t?e.stop():e._isPaused||(e.timeId=Es(e.tick))}else{if(e.frame++,t=e.t=e.frame/e.frames,e.action(e.easing(t),t),!e.isRunning())return;e.frame<e.frames?e._isPaused||(e.timeId=Es(e.tick,u,u,e.interval)):e.stop()}},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=vi()-e.duration*e.t,e.timeId=Es(e.tick)):e.frame<e.frames&&(e.timeId=Es(e.tick,u,u,e.interval)))},e.pause=function(){e._isPaused=!0},e.isPaused=function(){return this._isPaused},e.stop=function(t){e.isRunning()&&(yi(e.timeId,!e.duration),delete e.timeId,e.duration?e.t<1&&t&&(e.t=1,e.action(e.easing(1),1)):e.frame<e.frames&&t&&(e.frame=e.frames,e.action(e.easing(1),1)),e._37o&&e._37o(),e.finishFunc&&e.finishFunc())},e.isRunning=function(){return e.timeId!=u},e.delay?Es(t,u,[e],e.delay):t(e),e}}(),getTextSize:function(){var t={},e=l?_r().getContext("2d"):u;return function(n,i){e.font=n||as;var r=t[e.font];return r||(r=2*e.measureText("e").width+4,t[e.font]=r),{width:e.measureText(i).width+4,height:r}}}(),drawText:function(t,e,n,i,r,o,a,s,c,l){if(e!=u){var d=Vs(n,e),h={};h.y=l&&l!==xt?l===yt?o+d.height/2:o+s-d.height/2:o+s/2,h.x=c&&c!==pt?c===vt?r+a-d.width/2:r+a/2:r+d.width/2,Tr(t,e,h,n,i)}},getDistance:function(t,e){var n=t.length;return e?3===n?P(Q(t[0]-e[0])+Q(t[1]-e[1])+Q(t[2]-e[2])):2===n?P(Q(t[0]-e[0])+Q(t[1]-e[1])):t.z===r?P(Q(e.x-t.x)+Q(e.y-t.y)):P(Q(e.x-t.x)+Q(e.y-t.y)+Q(e.z-t.z)):3===n?P(Q(t[0])+Q(t[1])+Q(t[2])):2===n?P(Q(t[0])+Q(t[1])):void 0},brighter:function(t,e){return 0>e&&(e=-e),Eo(t,e||40)},darker:function(t,e){return e>0&&(e=-e),Eo(t,e||-40)},unionPoint:function(t,e){if(!t)return u;if(2===arguments.length)return t&&e?{x:A(t.x,e.x),y:A(t.y,e.y),width:k(t.x-e.x),height:k(t.y-e.y)}:u;var n=t;if(n._as&&(n=n._as),n.length===r)return u;var i=n.length;if(0>=i)return u;for(var o=1,a=n[0],s={x:a.x,y:a.y,width:0,height:0};i>o;o++){a=n[o];var c=A(s.x,a.x),l=O(s.x+s.width,a.x),d=A(s.y,a.y),h=O(s.y+s.height,a.y);s.x=c,s.y=d,s.width=l-c,s.height=h-d}return s},unionRect:function(t,e){if(t&&!e)return Os(t);if(!t&&e)return Os(e);if(t&&e){var n={x:A(t.x,e.x),y:A(t.y,e.y)};return n.width=O(t.x+t.width,e.x+e.width)-n.x,n.height=O(t.y+t.height,e.y+e.height)-n.y,n}return u},containsPoint:function(t,e,n,i){if(i!=u&&1!==i){var r=t.x+t.width/2,o=t.y+t.height/2;t={x:r-t.width/2*i,y:o-t.height/2*i,width:t.width*i,height:t.height*i}}if(n){var a=t.width/2,s=t.height/2,c=N(-n),l=R(-n),d=e.x-t.x-a,h=e.y-t.y-s;return e={x:l*d-c*h,y:c*d+l*h},Ys({x:-a,y:-s,width:t.width,height:t.height},e)}return!(!t||e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height)},containsRect:function(t,e){if(!t||!e)return!1;var n=e.x,i=e.y,r=e.width,o=e.height,a=t.width,s=t.height;if(0>(a|s|r|o))return!1;var c=t.x,l=t.y;if(c>n||l>i)return!1;if(a+=c,r+=n,n>=r){if(a>=c||r>a)return!1}else if(a>=c&&r>a)return!1;if(s+=l,o+=i,i>=o){if(s>=l||o>s)return!1}else if(s>=l&&o>s)return!1;return!0},intersectsRect:function(t,e){if(!t||!e)return!1;var n=e.width,i=e.height,r=t.width,o=t.height;if(0>=r||0>=o||0>=n||0>=i)return!1;var a=e.x,s=e.y,c=t.x,l=t.y;return r+=c,o+=l,n+=a,i+=s,r>a&&o>s&&n>c&&i>l},intersection:function(t,e){if(!t||!e)return u;var n=e.x,i=e.y,r=t.x,o=t.y,a=n,s=i,c=r,l=o;return a+=e.width,s+=e.height,c+=t.width,l+=t.height,r>n&&(n=r),o>i&&(i=o),a>c&&(a=c),s>l&&(s=l),a-=n,s-=i,0>=a||0>=s?u:{x:n,y:i,width:a,height:s}},grow:function(t,e,n){n===r&&(n=e),t.x-=e,t.y-=n,t.width=t.width+2*e,t.height=t.height+2*n},getScreenPoint:function(t,e,n,i,r,o,a){var s=n.getBoundingClientRect(),c=t*(o||1)-n.scrollLeft+(i||0),l=e*(a||1)-n.scrollTop+(r||0),u=Jo(n,!1);if(u){var d=new Na(c,l,0);return d.applyMatrix4(u),console.log(d),{x:d.x,y:d.y}}return{x:c+s.left,y:l+s.top}},getLogicalPoint:function(t,e,n,i,r,o){var a,s,c=e.getBoundingClientRect();t.target?(Hs(t)?ct?Yn["91"]=!0:Yn["17"]=!0:ct?Yn["91"]=!1:Yn["17"]=!1,Yn["16"]=!!js(t),t=lt?Br(t):t,a=t.clientX,s=t.clientY):(a=t.x,s=t.y);var l=Jo(e,!0);if(l){var u=new Na(a,s,0);u.applyMatrix4(l);do{if(Math.abs(u.z)<=1e-6)break;var d=new Na(a,s,1);if(d.applyMatrix4(matrix),Math.abs(d.z)<=1e-6){u=d;break}if(d.sub(u),Math.abs(d.z)<=1e-6)break;u.addScaledVector(d,-u.z/d.z)}while(0);return{x:(u.x+e.scrollLeft-(n||0))/(r||1),y:(u.y+e.scrollTop-(i||0))/(o||1)}}return{x:(a-c.left+e.scrollLeft-(n||0))/(r||1),y:(s-c.top+e.scrollTop-(i||0))/(o||1)}},removeHTML:function(){var t;return function(e){return e&&e.getView&&(e=e.getView()),!(!e||!e.parentNode)&&(t===e||(t=e,e.parentNode.removeChild(e),t=u),!0)}}(),getToolTipDiv:function(){if(!Pn){Pn=yr(),On=yr();var t=Pn.style;f.baseZIndex!=u&&(t.zIndex=X(f.baseZIndex)+3+""),t.whiteSpace="nowrap",t.color=f.toolTipLabelColor,t.background=f.toolTipBackground,t.font=f.toolTipLabelFont,t.padding="5px",t.boxShadow="0px 0px 3px "+f.toolTipShadowColor}return Pn},isToolTipShowing:function(){return!(!Pn||!Pn.parentNode)||!(!On||!On.parentNode)},hideToolTip:function(){rc(Pn),rc(On),Rn()},showToolTip:function(t,e){if(t&&e!=u){var n,i;if(f.getToolTipDiv(),e.html?(e=e.html,n=On,rc(Pn)):(n=Pn,rc(On)),i=n.style,n.innerHTML=e,n.parentNode||d.Default.appendToScreen(n),t.target){t=Zs(t);var r=Ks(),o=t.x,a=t.y,s=lt?60:12;if(lt){var c=n.getBoundingClientRect();i.left=o-c.width/2+Ct,i.top=a-c.height-s<r.top?a+s+Ct:a-c.height-s+Ct}else{i.left=o+s+Ct,i.top=a+s+Ct;c=n.getBoundingClientRect();c.left+c.width>r.width&&(i.left=o-s-c.width+Ct),c.top+c.height>r.height&&(i.top=a-s-c.height+Ct),c.left<0&&(i.left=o+s+Ct),c.top<0&&(i.top=a+s+Ct)}}else i.left=t.x+Ct,i.top=t.y+Ct;Rn()}else ts()},startDragging:function(t,e,i){i==r&&(i=!0),t!==jr&&(jr?i&&(lt?jr.handleWindowTouchEnd(e):jr.handleWindowMouseUp(e)):lt?(S(n,In,Hr),S(n,Sn,Ur)):(S(n,mn,Zr),S(n,bn,Wr)),jr=t)},getImageMap:function(){return Zn},toBoundaries:function(t,e,n,i){var r=[];return Mo(t,e,n,i).forEach((function(t){var e=[];t.forEach((function(t){e.push(t.x,t.y)})),r.push(e)})),r},getCurrentKeyCodeMap:function(){return Yn},drawCenterImage:function(t,e,n,i,r,o,a,s){!r&&o&&o.isSelfViewEvent&&(r=o);var c=$c(e,r,o),l=Qc(e,r,o);Kc(t,e,M(n-c/2),M(i-l/2),c,l,r,o,a,s)},drawStretchImage:function(t,e,n,i,r,o,a,s,c,l,u,d){!s&&c&&c.isSelfViewEvent&&(s=c);var h,f=$c(e,s,c,o),g=Qc(e,s,c,a);"uniform"===n?(h=A(o/f,a/g),f*=h,g*=h,i+=M((o-f)/2),r+=M((a-g)/2),o=f,a=g):"centerUniform"===n&&((f>o||g>a)&&(h=A(o/f,a/g),f*=h,g*=h),i+=M((o-f)/2),r+=M((a-g)/2),o=f,a=g);var p,v=t.interactiveInfo;if(v)if(p="center"===n?{x:i+o/2-f/2,y:r+a/2-g/2,width:f,height:g}:{x:i,y:r,width:o,height:a},v.rect){var y=v.compInfos,_=y.length;_&&(y[_-1].rect.image=e)}else v.rect=p;if("center"===n){var m=!1!==u&&(f>o||g>a);m&&(t.save(),t.beginPath(),t.rect(i,r,o,a),t.clip()),Kc(t,e,i+o/2-f/2,r+a/2-g/2,f,g,s,c,l,d),m&&t.restore()}else Kc(t,e,i,r,o,a,s,c,l,d)},toCanvas:function(t,e,n,i,r,o,a,s,c){t=Ss(t,a),e=e||$c(t,r),n=n||Qc(t,r);var l=_r(),u=Pr(l);return s?(xr(l,e,n,s),u.scale(s,s)):xr(l,e,n,1),Ms(u,t,i,0,0,e,n,r,o,a,c),t&&t.clampToEdge&&(l.clampToEdge=t.clampToEdge),u.restore(),l},toGrayColor:function(t){if(!t)return t;var e=yo(t),n=.299*e[0]+.587*e[1]+.114*e[2];return"rgba("+n+","+n+","+n+","+e[3]/255+")"},createGradientImage:function(t,e,n,i){for(var r=["L",0,0,t,0,1,0,0,1,0,0],o=0,a=Math.min(e.length,n.length);a>o;o++)r.push(n[o],e[o]);var s=d.Default.toCanvas({width:t,height:t,clampToEdge:!0,comps:[{type:"shape",rotation:i||0,points:[0,0,t,0,t,t,0,t],background:"#ffffff",gradientPack:r}]});return s},createElement:function(t,e,n,i){var r=l.createElement(t);return mr(r,e||v.widgetBorder,2),r.style.font=n||as,i!=u&&(r.value=i),f.onElementCreated&&f.onElementCreated(r),r},containedInView:function(t,e){var n=Vr(e).getBoundingClientRect();return Ys({x:n.left,y:n.top,width:n.width,height:n.height},Us(t))},isIsolating:function(){return Bn>0},setIsolating:function(t){t?Bn++:Bn--},getMSMap:function(){return Wa},stringify:function(t,e,n){var i=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var r=JSON.stringify(t,(function(t,e){return"function"==typeof e?"__ht__"+(e.__ht__||e.toString()):Pi(e)?Hi(e):e instanceof d.List?"__ht__list"+(e.__ht__list||f.stringify(e._as)):e}),e==u?2:e);return Date.prototype.toJSON=i,n&&(r="__ht__encode"+f.encodeString(r)),r},parse:function(t){return Ei(t)&&("__ht__encode"!=t.substr(0,12)||(t=f.decodeString(t.substr(12)),Ei(t)))?JSON.parse(t,(function(t,e){if(Ei(e))if("__ht__function"==e.substr(0,14)){var n=e.indexOf("{")+1,i=e.lastIndexOf("}"),r=e.indexOf("(")+1,o=e.indexOf(")");if(n&&i&&r&&o){var a=new Function(e.substring(r,o),e.substring(n,i));return a.__ht__=e.substr(6),a}}else{if("__ht__date"==e.substr(0,10))return new Date(X(e.substr(10)));if("__ht__list"===e.substr(0,10))return new tl(f.parse(e.substr(10)))}return e})):t},loadJS:function(t,e){e&&t.push(e);var n=t.shift();if(Ri(n))t=n.contact(t),f.loadJS(t);else if(ki(n))n(),f.loadJS(t);else if(Ei(n)){var i=l.createElement("script");i.onload=function(){f.loadJS(t)},i.setAttribute("src",n),l.getElementsByTagName("head")[0].appendChild(i)}else t.length&&f.loadJS(t)},toRoundedCorner:function(t,e){var n=t.size();if(0>=e)return{points:t};var i,r=new tl,o=new tl,a=t.get(0);r.add(a),o.add(1);for(var s=1;n>s;s++)if(n>s+1){var c=t.get(s),l=t.get(s+1),u=a.x,d=a.y,h=c.x,f=c.y,g=f-d,p=h-u,v=H(g,p);i=A(.99*Ws(a,c),e),r.add({x:h-i*R(v),y:f-i*N(v)}),r.add(c),u=c.x,d=c.y,h=l.x,f=l.y,g=f-d,p=h-u,v=H(g,p),i=A(.99*Ws(c,l),e),a={x:u+i*R(v),y:d+i*N(v)},r.add(a),o.addAll([2,3])}else r.add(t.get(s)),o.add(2);return{points:r,segments:o}},toColorData:yo,setCanvas:xr,createDiv:yr,createDisabledDiv:Er,createView:vr,createCanvas:_r,appendChild:wr,initContext:Pr,checkLoadingImage:fi,translateAndScale:Or,layout:Lr,getPosition:na,drawPoints:Co,drawRoundRect:No,drawBorder:Vo,setFocus:Nr,getter:Mi,setter:Di,isEmptyObject:$i,cameraPriority:function(){var t={skybox:0,main:1e4,top:1e7};return i.seal(i.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return t.skybox},set:function(e){if(e>=t.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");t.skybox=Number(e)}},main:{configurable:!1,enumerable:!1,get:function(){return t.main},set:function(e){if(e<=t.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(e>=t.top)throw new RangeError("Main camera must have lower priority than the top camera.");t.main=Number(e)}},top:{configurable:!1,enumerable:!1,get:function(){return t.top},set:function(e){if(e<=t.main)throw new RangeError("Top camera must have higher priority than the main camera.");t.top=Number(e)}}}))}()},!0),Wi(y,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var qa=f.disabledOpacity,Xa=f.toolTipDelay,Ya=f.devicePixelRatio,$a=f.autoMakeVisible,Qa=f.autoHideScrollBar,Ja=f.imageGradient,Ka=f.showToolTip,ts=f.hideToolTip,es=f.dashPattern,ns=f.lineCap,is=f.lineJoin,rs=f.labelColor,os=f.labelSelectColor,as=f.labelFont,ss=f.widgetIndent,cs=f.widgetRowHeight,ls=f.widgetHeaderHeight,us=f.widgetTitleHeight,ds=f.scrollBarColor,hs=f.scrollBarSize,fs=f.scrollBarTimeout,gs=f.scrollBarMinLength,ps=f.scrollBarInteractiveSize,vs=f.zoomIncrement,ys=f.scrollZoomIncrement,_s=f.pinchZoomIncrement,ms=f.zoomMax,bs=f.zoomMin,xs=f.createObject,ws=f.preventDefault,Is=f.setImage,Ss=f.getImage,Ts=f.isImageComplete,Cs=f.drawCenterImage,Ms=f.drawStretchImage,Ds=f.getId,Es=f.callLater,Ps=f.sortFunc,Os=f.clone,As=f.getClass,ks=f.startAnim,Rs=f.brighter,zs=f.darker,Ns=f.drawText,Vs=f.getTextSize,Ls=f.isLeftButton,Bs=f.isMiddleButton,Gs=f.getTouchCount,Fs=f.isDoubleClick,js=f.isShiftDown,Hs=f.isCtrlDown,Us=f.getClientPoint,Zs=f.getPagePoint,Ws=f.getDistance,qs=f.unionPoint,Xs=f.unionRect,Ys=f.containsPoint,$s=f.containsRect,Qs=f.intersectsRect,Js=f.intersection,Ks=f.getWindowInfo,tc=f.grow,ec=f.getLogicalPoint,nc=f.getScreenPoint,ic=f.startDragging,rc=f.removeHTML,oc=f.createElement,ac=f.segmentResolution,sc=f.shapeResolution,cc=f.shapeSide,lc=f.def,uc=function(t,e,n){lc(c+"."+t,e,n)},dc=function t(e,n){e.childNodes.forEach((function(e){n(e),t(e,n)}))};Wi(f,{toolTipLabelColor:rs,toolTipLabelFont:as,toolTipBackground:v.toolTipBackground,toolTipShadowColor:ra,drawBreakableText:Sr,setDevicePixelRatio:function(t){Ya=f.devicePixelRatio="number"==typeof t?t:n.devicePixelRatio,dc(l.body,(function(t){var e=t._ht;e&&e._canvas&&(xr(e._canvas,e.getWidth(),e.getHeight()),e.redraw?e.redraw():e.iv())}))}},!0);var hc=1e-6,fc="undefined"!=typeof Uint16Array?Uint16Array:Array,gc="undefined"!=typeof Float32Array?Float32Array:Array,pc=function(t,e,n){var i=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];if(n){var r=Ws(i);r>0&&(i[0]/=r,i[1]/=r,i[2]/=r)}return i},vc=function(){var t="charCodeAt",e=2*(2*Mt.length+1);for(var i in n)if(i===c+pt[0]+(Ct.length+2)){var r=n[i];if(!r)break;for(var o=r.length,a=0;o>a;a++)if(r[a][t](0)===e&&r[a+1]!=u&&r[a+1]===Ct[0]&&r[a+2]!=u&&r[a+2][t](0)===e){for(var s=a+3;o>s;s++)if(r[s][t](0)===e){if(0==r[s+1])for(var l,d=s+2;o>d;d++){if(r[d][t](0)===e){0==r[d-1]&&l&&(it=l.substr(0,l.length-1));break}l==u?l=r[d]:l+=r[d]}break}break}break}return function(t){return[-t[0],-t[1],-t[2]]}}(),yc=function(t,e){return 3===t.length?t[0]*e[0]+t[1]*e[1]+t[2]*e[2]:t[0]*e[0]+t[1]*e[1]},_c=function(){var t=new gc(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mc=_c(),bc=function(t){var e=new gc(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},xc=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},wc=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ic=function(t,e){var n=t[0],i=t[1],r=t[2];return t[0]=e[0]*n+e[4]*i+e[8]*r+e[12],t[1]=e[1]*n+e[5]*i+e[9]*r+e[13],t[2]=e[2]*n+e[6]*i+e[10]*r+e[14],t},Sc=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];return t[0]=e[0]*n+e[4]*i+e[8]*r+e[12]*o,t[1]=e[1]*n+e[5]*i+e[9]*r+e[13]*o,t[2]=e[2]*n+e[6]*i+e[10]*r+e[14]*o,t[3]=e[3]*n+e[7]*i+e[11]*r+e[15]*o,t},Tc=function(){var t,e,n,i,r=qi(Kr[1]+Kr[7]),o=qi(Kr[0]+Kr[3]-Kr[10]),a=qi(Kr[8]+2),s=function(){return e=n.charAt(t),t+=1,e},c=function(){var t="";if(e===a)for(;s();){if(e===a)return s(),t;t+=e}else s()},l=function(){for(;e&&" ">=e;)s()},u=function(){var t,n={};if(e===r){if(s(),l(),e===o)return s(),n;for(;e;){if(t=c(),l(),s(),n[t]=i(),l(),e===o)return s(),n;s(),l()}}};return i=function(){switch(l(),e){case r:return u();default:return c()}},function(r){var o;if((b={},r)&&(n=r,t=0,e=" ",o=i(),l(),!e))return o}}(),Cc=function(t,e){if(e){var n=N(e),i=R(e),r=t[4],o=t[5],a=t[6],s=t[7],c=t[8],l=t[9],u=t[10],d=t[11];t[4]=r*i+c*n,t[5]=o*i+l*n,t[6]=a*i+u*n,t[7]=s*i+d*n,t[8]=c*i-r*n,t[9]=l*i-o*n,t[10]=u*i-a*n,t[11]=d*i-s*n}},Mc=function(t,e){if(e){var n=N(e),i=R(e),r=t[0],o=t[1],a=t[2],s=t[3],c=t[8],l=t[9],u=t[10],d=t[11];t[0]=r*i-c*n,t[1]=o*i-l*n,t[2]=a*i-u*n,t[3]=s*i-d*n,t[8]=r*n+c*i,t[9]=o*n+l*i,t[10]=a*n+u*i,t[11]=s*n+d*i}},Dc=function(t,e){if(e){var n=N(e),i=R(e),r=t[0],o=t[1],a=t[2],s=t[3],c=t[4],l=t[5],u=t[6],d=t[7];t[0]=r*i+c*n,t[1]=o*i+l*n,t[2]=a*i+u*n,t[3]=s*i+d*n,t[4]=c*i-r*n,t[5]=l*i-o*n,t[6]=u*i-a*n,t[7]=d*i-s*n}},Ec=function(t,e,n){return Pc(u,!1===n?u:t.getFinalScale3d(),t.getFinalRotation3d(),t.getRotationMode(),t.p3(),u,e)},Pc=function(t,e,n,i,r,o,a){return o||(o=_c()),r&&qh(o,r),Xu(o,n,i),a&&Yh(o,o,a),e&&Xh(o,e),t&&Yh(o,o,t),o},Oc=function(t,e,n){e=X(e),n=X(n);var i=this;i.g=t,i._84O=e,i._85O=n,i._70I=!0,i.F=0,i._83O=e+n,i.pen={x:0,y:0}},Ac="lineDashOffset",kc="setLineDash",Rc=function(t){for(var e in t)1===e.length&&(Ac=t[e]);return e?1:0},zc=function(t,e,n){return Qi(e)?t:t[kc]?(t[kc](e),n&&(t.lineDashOffset=n),t):new Oc(t,e[0],e.length>1?e[1]:e[0])},Nc=function(t,e){!Qi(e)&&t[kc]&&(t[kc](ii),t.lineDashOffset=0)};if(lc(Oc,i,{_69I:6,moveTo:function(t,e){var n=this,i=n.pen;i.x=t,i.y=e,n.g.moveTo(t,e),n.start||(n.start={x:t,y:e})},lineTo:function(t,e){var n=this,i=n.pen,r=t-i.x,o=e-i.y,a=H(o,r),s=R(a),c=N(a),l=n._23O(i.x,i.y,t,e),u=n._85O,d=n._84O,h=n._83O;if(n.F){if(n.F>l)return n._70I?n._72I(t,e):n.moveTo(t,e),void(n.F-=l);if(n._70I?n._72I(i.x+s*n.F,i.y+c*n.F):n.moveTo(i.x+s*n.F,i.y+c*n.F),l-=n.F,n.F=0,n._70I=!n._70I,!l)return}var f=D(l/h);if(f){for(var g=s*d,p=c*d,v=s*u,y=c*u,_=0;f>_;_++)n._70I?(n._72I(i.x+g,i.y+p),n.moveTo(i.x+v,i.y+y)):(n.moveTo(i.x+v,i.y+y),n._72I(i.x+g,i.y+p));l-=h*f}n._70I?l>d?(n._72I(i.x+s*d,i.y+c*d),n.moveTo(t,e),n.F=u-(l-d),n._70I=!1):(n._72I(t,e),l===d?(n.F=0,n._70I=!n._70I):(n.F=d-l,n.moveTo(t,e))):l>u?(n.moveTo(i.x+s*u,i.y+c*u),n._72I(t,e),n.F=d-(l-u),n._70I=!0):(n.moveTo(t,e),l===u?(n.F=0,n._70I=!n._70I):n.F=u-l)},quadraticCurveTo:function(t,e,n,i){var r,o=this,a=o.pen,s=a.x,c=a.y,l=o._22O(s,c,t,e,n,i),u=0,d=0,h=o._85O,f=o._84O;if(o.F){if(o.F>l)return o._70I?o._71I(t,e,n,i):o.moveTo(n,i),void(o.F-=l);if(u=o.F/l,r=o._20O(s,c,t,e,n,i,u),o._70I?o._71I(r[2],r[3],r[4],r[5]):o.moveTo(r[4],r[5]),o.F=0,o._70I=!o._70I,!l)return}var g=l-l*u,p=D(g/o._83O),v=f/l,y=h/l;if(p)for(var _=0;p>_;_++)o._70I?(d=u+v,r=o._21O(s,c,t,e,n,i,u,d),o._71I(r[2],r[3],r[4],r[5]),u=d,d=u+y,r=o._21O(s,c,t,e,n,i,u,d),o.moveTo(r[4],r[5])):(d=u+y,r=o._21O(s,c,t,e,n,i,u,d),o.moveTo(r[4],r[5]),u=d,d=u+v,r=o._21O(s,c,t,e,n,i,u,d),o._71I(r[2],r[3],r[4],r[5])),u=d;g=l-l*u,o._70I?g>f?(d=u+v,r=o._21O(s,c,t,e,n,i,u,d),o._71I(r[2],r[3],r[4],r[5]),o.moveTo(n,i),o.F=h-(g-f),o._70I=!1):(r=o._19O(s,c,t,e,n,i,u),o._71I(r[2],r[3],r[4],r[5]),l===f?(o.F=0,o._70I=!o._70I):(o.F=f-g,o.moveTo(n,i))):g>h?(d=u+y,r=o._21O(s,c,t,e,n,i,u,d),o.moveTo(r[4],r[5]),r=o._19O(s,c,t,e,n,i,d),o._71I(r[2],r[3],r[4],r[5]),o.F=f-(g-h),o._70I=!0):(o.moveTo(n,i),g===h?(o.F=0,o._70I=!o._70I):o.F=h-g)},bezierCurveTo:function(){var t=arguments;this.pen={x:t[4],y:t[5]},this.g.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},arc:function(t,e,n,i,r,o){o||(i=-i,r=-r),zo(this,t,e,i,r-i,n,n,!1)},rect:function(t,e,n,i){var r=this;r.pen={x:t,y:e},r.moveTo(t,e),r.lineTo(t,e+i),r.lineTo(t+n,e+i),r.lineTo(t+n,e),r.lineTo(t,e)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(t,e,n,i){var r=n-t,o=i-e;return P(r*r+o*o)},_22O:function(t,e,n,i,r,o,a){for(var s,c,l,u,d,h,f,g=0,p=t,v=e,y=a>0?a:this._69I,_=1;y>=_;_++)l=_/y,u=1-l,d=u*u,h=2*l*u,f=l*l,s=d*t+h*n+f*r,c=d*e+h*i+f*o,g+=this._23O(p,v,s,c),p=s,v=c;return g},_21O:function(t,e,n,i,r,o,a,s){var c=this;if(0===a)return c._20O(t,e,n,i,r,o,s);if(1===s)return c._19O(t,e,n,i,r,o,a);var l=c._20O(t,e,n,i,r,o,s);return l.push(a/s),c._19O.apply(c,l)},_20O:function(t,e,n,i,r,o,a){if(1!==a){var s=n+(r-n)*a,c=i+(o-i)*a;n=t+(n-t)*a,i=e+(i-e)*a,r=n+(s-n)*a,o=i+(c-i)*a}return[t,e,n,i,r,o]},_19O:function(t,e,n,i,r,o,a){if(1!==a){var s=t+(n-t)*a,c=e+(i-e)*a;n+=(r-n)*a,i+=(o-i)*a,t=s+(n-s)*a,e=c+(i-c)*a}return[t,e,n,i,r,o]},_72I:function(t,e){var n=this.pen;(t!==n.x||e!==n.y)&&(n.x=t,n.y=e,this.g.lineTo(t,e))},_71I:function(t,e,n,i){var r=this.pen;(t!==n||e!==i||n!==r.x||i!==r.y)&&(r.x=n,r.y=i,this.g.quadraticCurveTo(t,e,n,i))}}),W&&tt){var Vc=tt.toString();q=Vc.indexOf(ue.substr(0,2))>0&&Vc.indexOf(yt+yt.substr(1,1))>1||Vc.indexOf(cn.substr(0,2)+ue.substr(2,2)+pt[0]+ue[4])>1}var Lc=u,Bc=u,Gc=function(t){Lc&&!t._72O&&(Bc||(Bc={}),Bc[t._72O=Ds()]=t)},Fc=function(t,e){if(e||(e=t),e&&(Lc||(Lc={}),!Lc[t])){var n=new sd;if(Lc[e]={request:n,url:e},e=f.beforeLoadURL(e),e.data){var i=f.parse(e.data);jc(t,i),f.handleCompTypeLoaded(t,i)}else{n.onload=function(){if(200===this.status||0===this.status){var e=f.parse(n.getResponseText());jc(t,e),f.handleCompTypeLoaded(t,e)}else jc(t,u)},n.onerror=function(){jc(t,u)};var r={};r.url=encodeURI(e),r.sync=!1,n.send(r)}}},jc=function(t,e){if($n[t]=e,delete Lc[t],$i(Lc)&&(Lc=u,Bc)){for(var n in Bc){var i=Bc[n];i.invalidateAll&&i.invalidateAll(r,"compTypeLoaded",t),i.redraw&&i.redraw(),i.iv(),delete i._72O}Bc=u}if(e&&Bc)for(var n in Bc){i=Bc[n];i.invalidateAll&&i.invalidateAll(r,"compTypeLoading",t),i.redraw&&i.redraw(),i.iv()}},Hc=v.chart,Uc="",Zc=f.compStack=[],Wc=/^style@/,qc=/^attr@/,Xc=/^field@/,Yc={x:.5,y:.5},$c=function(t,e,n,i){if(!t)return 0;if(Jc(t.fitSize,e,n)&&i)return i;var r=Jc(t.width,e,n);return null==r?20:r},Qc=function(t,e,n,i){if(!t)return 0;if(Jc(t.fitSize,e,n)&&i)return i;var r=Jc(t.height,e,n);return null==r?20:r},Jc=function(t,e,n){if(!t||!t.func)return t;var i,o=t.func,a=t.value;return i=ki(o)?n&&n.vectorDataBindingDisabled&&!t.isSafeFunc?a:o(e,n):e instanceof il?qc.test(o)?e.a(Uc+o.slice(5)):Wc.test(o)?e.s(Uc+o.slice(6)):Xc.test(o)?e[o.slice(6)]:e[o]?e[o](n):a:a,a!==r&&i==u?a:i},Kc=f.drawImage=function(){var t,i,o,a,s,c,l=function(t,e){t.getValue&&t.getValue.compType===e||(t.getValue=function(n){var i=d(t,n);if(i===r&&e.properties){var o=e.properties[n];o&&(i=o.defaultValue)}return i},t.getColor=function(e){return h(t.getValue(e))},t.getValue.compType=e)},d=function(t,e,n){var a,s=!1;if(t.prefix&&i instanceof il){var c=i.a(Uc+e);c!==r&&(s=!0,a=c)}return a===r&&(a=t[e]),a&&a.func&&(s=!0,a=Jc(a,i,o)),n&&(a=n(a),s||(t[e]=a)),a},h=function(e,n){var i;if(i=n?d(e,n):e,t&&t.compGray&&i)return f.toGrayColor(i);if(s&&i){if("override"===c)return s;if("override_rgb"===c){var r=_o(s);return i=yo(i),"rgba("+D(255*r[0])+","+D(255*r[1])+","+D(255*r[2])+","+i[3]/255+")"}if("override_a"===c){r=_o(s);return i=yo(i),"rgba("+i[0]+","+i[1]+","+i[2]+","+r[3]+")"}r=_o(s);return i=yo(i),"rgba("+D(i[0]*r[0])+","+D(i[1]*r[1])+","+D(i[2]*r[2])+","+i[3]/255*r[3]+")"}return i},g=function(t){if(Ri(t)){for(var e=new tl,n=t.length,i=0;n>i;i+=2)e.add({x:t[i],y:t[i+1]});t=e}return t},p=function(t){var e=d(t,"anchorX"),n=d(t,"anchorY");if(e!==r||n!==r)return{x:e===r?Yc.x:e,y:n===r?Yc.y:n};var i=d(t,"type"),o=d(t,"name");if("image"!==i||!o)return Yc;var a=Ss(o);return a&&a.anchorX!==r&&a.anchorY!==r?{x:a.anchorX,y:a.anchorY}:Yc},v=function(t,n){var i=d(t,Pt),r=p(t);if(Ri(i)){var o=i.length,a=d(t,"relative"),s=n.width,c=n.height;if(4===o)i={x:i[0],y:i[1],width:i[2],height:i[3]},a&&(i.x*=s,i.y*=c,i.width*=s,i.height*=c);else if(3===o){var l=i[0];i={width:i[1],height:i[2]},a&&(i.width*=s,i.height*=c),"object"==e(l)?l.length&&(l={x:l[0],y:l[1]}):l=na(l,n,i),i.x=l.x-i.width*r.x,i.y=l.y-i.height*r.y}i.x+=d(t,"offsetX")||0,i.y+=d(t,"offsetY")||0,!a&&n.fitSize&&(i=y(t,i,n))}return i},y=function(t,e,n){if(e){var i,r,o,a={x:e.x,y:e.y,width:e.width,height:e.height},s=p(t),c=d(t,"layoutH"),l=d(t,"layoutV"),h=1,f=1,g=0,v=0,y=1,_=1;switch(c){case"left":break;case"right":a.x+=n.width-n.rw;break;case"center":a.x+=.5*(n.width-n.rw);break;case"scale":case"leftright":default:i=d(t,le)||0,i&&(g=Math.abs(v=Math.sin(i)),y=Math.abs(_=Math.cos(i))),"leftright"!==c?(h+=y*(n.widthScale-1),f+=g*(n.widthScale-1)):(h+=a.width?y*(n.width-n.rw)/a.width:0,f+=a.height?g*(n.width-n.rw)/a.height:0,r=-Math.min(-s.x*_+s.y*v,-s.x*_-(1-s.y)*v,(1-s.x)*_+s.y*v,(1-s.x)*_-(1-s.y)*v))}switch(l){case"top":break;case"bottom":a.y+=n.height-n.rh;break;case"center":a.y+=.5*(n.height-n.rh);break;case"scale":case"topbottom":default:i==u&&(i=d(t,le),i&&(g=Math.abs(v=Math.sin(i)),y=Math.abs(_=Math.cos(i)))),"topbottom"!==l?(h+=g*(n.heightScale-1),f+=y*(n.heightScale-1)):(h+=a.width?g*(n.height-n.rh)/a.width:0,f+=a.height?y*(n.height-n.rh)/a.height:0,o=-Math.min(-s.x*v-s.y*_,-s.x*v+(1-s.y)*_,(1-s.x)*v-s.y*_,(1-s.x)*v+(1-s.y)*_))}return(1!==h||1!==f)&&("scale"!==c&&c?"leftright"===c&&(a.x+=a.width*(1-h)*s.x+r*(n.width-n.rw)):a.x+=a.x*(n.widthScale-1)+s.x*a.width*(n.widthScale-h),"scale"!==l&&l?"topbottom"===l&&(a.y+=a.height*(1-f)*s.y+o*(n.height-n.rh)):a.y+=a.y*(n.heightScale-1)+s.y*a.height*(n.heightScale-f),a.width*=h,a.height*=f),a.width<0&&(a.width=0),a.height<0&&(a.height=0),a}},_=function(t){return Ri(t)?new tl(t):t},m=function(e,n,i,o,a,s,c){var l=t.interactiveInfo,u=e.transform;if(u)return t.save(),t.setTransform(u.a,u.b,u.c,u.d,u.tx,u.ty),l&&l.compInfos.push({comp:e,rect:n,matrix:u.clone(),prefix:Uc}),!0;a===r&&(a=1),s===r&&(s=1);var h=d(e,"clipPercentage"),f=Ji(i,n);if(f&&!o&&1===a&&1===s&&!(1>h))return l&&l.compInfos.push({comp:e,rect:n,matrix:l.matrix.clone(),prefix:Uc}),!1;c=c||Yc;var g=n.x+n.width*c.x,p=n.y+n.height*c.y,v=i.x+i.width*c.x,y=i.y+i.height*c.y,_=i.width?a*(n.width/i.width):1,m=i.height?s*(n.height/i.height):1;if(t.save(),l&&(l.matrix.appendTranslate(g,p).appendRotate(o).appendScale(_,m).appendTranslate(-v,-y),l.compInfos.push({comp:e,rect:n,matrix:l.matrix.clone()})),Ar(t,g,p),kr(t,o||0),Rr(t,_,m),Ar(t,-v,-y),1>h){0>h&&(h=0);var b=ar(i,d(e,"clipDirection"),h);t.beginPath(),t.rect(b.x,b.y,b.width,b.height),t.clip()}return!0},b=function(){t.restore()},x=function(e,n,i){var r=d(e,"path"),o=d(e,le),s=d(e,"scaleX"),c=d(e,"scaleY"),l=p(e),f=u,g=Io(null,r);if(i||(i=e.unionRect,i||(i=qs(g),e.path.func||(e.unionRect=i)),f=i),i){f||(f=e.unionRect,f||(f=qs(g),e.path.func||(e.unionRect=f)));var v=m(e,i,f,o,s,c,l),y=d(e,"borderPattern"),_=zc(t,y),x=h(e,"background"),w=h(e,"borderColor"),I=d(e,"borderWidth"),S=d(e,"gradient"),T=h(e,"gradientColor"),C=d(e,"border3d"),M=h(e,"border3dColor"),D=d(e,"border3dAccuracy"),E=t.lineJoin,P=t.lineCap;if(t.lineJoin=d(e,"borderJoin")||is,t.lineCap=d(e,"borderCap")||ns,x?(Ao(t,x,S,T,f),Io(t,r),t.fill(),_!==t&&Io(t,r)):Io(t,r),I&&w){var O=d(e,"borderWidthAbsolute");O&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=I,t.strokeStyle=w,t.stroke(),O&&t.restore(),C&&Do(t,w,M,I,a,D)}if(Nc(t,y),d(e,"dash")){var A=d(e,"dashWidth")||I;if(A>0){y=d(e,"dashPattern")||es;_=zc(t,y,d(e,"dashOffset"));var k=h(e,"dashColor")||h(aa);_!==t&&Io(t,r),t.strokeStyle=k,t.lineWidth=A,t.stroke(),d(e,"dash3d")&&Do(t,k,h(e,"dash3dColor"),A,a,d(e,"dash3dAccuracy")),Nc(t,y)}}n===Pt&&Lo(t,x,d(e,"depth"),f),t.lineJoin=E,t.lineCap=P,v&&b()}},w=function(e,n,r,l){var f=d(e,Wt,g),v=d(e,le),x=p(e);if(f&&l.fitSize){var w=new tl,I=qs(f),S=y(e,I,l),T=I.x+x.x*I.width,C=I.y+x.y*I.height,M=S.x+x.x*S.width,D=S.y+x.y*S.height,E=I.width?S.width/I.width:1,P=I.height?S.height/I.height:1;f.each((function(t){w.add({x:M+(t.x-T)*E,y:D+(t.y-C)*P})})),f=w,e.unionRect=null}var O=d(e,"scaleX"),A=d(e,"scaleY"),k=n===kt,R=u;if(!r&&k&&(r=e.unionRect,r||(r=qs(f),e.points.func||(e.unionRect=r)),R=r),r){k?R||(R=e.unionRect,R||(R=qs(f),e.points.func||(e.unionRect=R))):R=r;var z,N,V,L,B=m(e,r,R,v,O,A,x),G=d(e,"borderPattern"),F=zc(t,G),j=h(e,"background"),H=Ss(d(e,"repeatImage"),s,c),U=d(e,"gradientPack"),Z=h(e,"borderColor"),W=d(e,"borderWidth"),q=d(e,"segments",_),X=d(e,"gradient"),Y=h(e,"gradientColor"),$=d(e,"border3d"),Q=h(e,"border3dColor"),J=d(e,"border3dAccuracy"),K=d(e,"closePath"),tt=d(e,"fillRule")||"nonzero",et=t.lineJoin,nt=t.lineCap;if(t.lineJoin=d(e,"borderJoin")||is,t.lineCap=d(e,"borderCap")||ns,k)if(j||H||U){var it=d(e,"fillClipPercentage");if(1>it){0>it&&(it=0);var rt=ar(R,d(e,"fillClipDirection"),it);t.save(),t.beginPath(),t.rect(rt.x,rt.y,rt.width,rt.height),t.clip()}if(Co(t,f,q,K),U)So(t,U);else if(H){var ot=t,at=s,st=c;ko(t,H,s,c,i,o),t=ot,s=at,c=st}else{ot=t;Ao(t,j,X,Y,R),t=ot}t.fill(tt),1>it&&t.restore(),U&&t.restore(),F!==t&&Co(F,f,q,K)}else Co(F,f,q,K);else if("roundRect"===n?z=d(e,"cornerRadius"):"polygon"===n?z=d(e,"polygonSide"):"arc"===n&&(z=d(e,"arcFrom"),N=d(e,"arcTo"),V=d(e,"arcClose"),L=d(e,"arcOval")),j||H||U){it=d(e,"fillClipPercentage");if(1>it){0>it&&(it=0);rt=ar(R,d(e,"fillClipDirection"),it);t.save(),t.beginPath(),t.rect(rt.x,rt.y,rt.width,rt.height),t.clip()}if(Oo(t,n,R,z,N,V,L),U)So(t,U);else if(H){ot=t,at=s,st=c;ko(t,H,s,c,i,o),t=ot,s=at,c=st}else Ao(t,j,X,Y,R);t.fill(tt),1>it&&t.restore(),U&&t.restore(),t!==F&&Oo(F,n,R,z,N,V,L)}else Oo(F,n,R,z,N,V,L);if(W&&Z){var ct=d(e,"borderWidthAbsolute");ct&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=W,t.strokeStyle=Z,t.stroke(),ct&&t.restore(),$&&Do(t,Z,Q,W,a,J)}if(Nc(t,G),d(e,"dash")){var lt=d(e,"dashWidth")||W;if(lt>0){G=d(e,"dashPattern")||es;F=zc(t,G,d(e,"dashOffset"));var ut=h(e,"dashColor")||h(aa);F!==t&&(k?Co(F,f,q,K):Oo(F,n,R,z,N,V,L)),t.strokeStyle=ut,t.lineWidth=lt,t.stroke(),d(e,"dash3d")&&Do(t,ut,h(e,"dash3dColor"),lt,a,d(e,"dash3dAccuracy")),Nc(t,G)}}n===Pt&&Lo(t,j,d(e,"depth"),R),t.lineJoin=et,t.lineCap=nt,B&&b()}},I=function(e,n){var r=s,a=c,l=s||d(e,dn),u=c||d(e,"blendMode"),h=Ss(d(e,"name"),l,u);h&&(Ms(t,h,d(e,"stretch"),n.x,n.y,n.width,n.height,i,o,l,null,u),s=r,c=a)},S=function(e,n){var i=d(e,"text");i!=u&&Ns(t,i,d(e,"font"),h(e,dn),n.x,n.y,n.width,n.height,d(e,"align"),d(e,"vAlign"))},T=function(e,n){Vo(t,h(e,dn),n.x,n.y,n.width,n.height,d(e,"width"))},C=function(e,n){var r=d(e,qt),o=0;if(r&&(r.forEach((function(t){o+=t})),o>0)){for(var a=d(e,"colors")||Hc,s=d(e,"startAngle")||0,c=d(e,"hollow"),l=d(e,$t),h=d(e,ee),f=d(e,ne),g=l?new tl:u,p=n.x,v=n.y,y=n.width,_=n.height,m=p+y/2,b=v+_/2,x=A(y,_)/2,w=0,I=0;I<r.length;I++){var S=r[I],T=G*S/o,C=s+T;if(t.fillStyle=a[w++],w===a.length&&(w=0),t.beginPath(),c){var M=m+R(s)*x/2,D=b+N(s)*x/2,E=m+R(C)*x,P=b+N(C)*x;t.moveTo(M,D),t.arc(m,b,x/2,s,C,!1),t.lineTo(E,P),t.arc(m,b,x,C,s,!0)}else t.moveTo(m,b),t.arc(m,b,x,C,s,!0);g&&(T=(s+C)/2,g.add({text:ki(l)?l(S,I,o,i):S,x:m+.75*R(T)*x,y:b+.75*N(T)*x})),t.closePath(),t.fill(),s=C}g&&g.each((function(e){Ns(t,e.text,h,f,e.x,e.y,0,0,mt)}))}},M=function(e,n){var r=d(e,Xt);if(r&&r.length>0){var o=r.length,a=d(e,$t),s=d(e,ee),c=d(e,ne),l=a?new tl:u,h=d(e,"minValue")||0,f=d(e,"maxValue");if(f==u&&(f=0,r.forEach((function(t){d(t,qt).forEach((function(t){f=O(f,t)}))}))),h===f)return;for(var g=n.height/(f-h),p=n.y+f*g,v=d(r[0],qt).length,y=n.width/(3*v+1),_=2*y/o,m=0,b=0;o>b;b++)for(var x=r[b],w=d(x,dn),I=d(x,"colors"),S=d(x,qt),T=0;v>T;T++){I?t.fillStyle=I[T]:w?t.fillStyle=w:(t.fillStyle=Hc[m++],m===Hc.length&&(m=0));var C=S[T],M=C*g,D=n.x+(1+3*T)*y+b*_;if(Po(t,D,p-M,_,M),l){var E=ki(a)?a(C,T,x,i):C,P=Vs(s,E).height;l.add({x:D,y:p-M-P,width:_,height:P,text:E})}}l&&l.each((function(e){Ns(t,e.text,s,c,e.x,e.y,e.width,e.height,mt)}))}},E=function(e,n){var r=d(e,Xt);if(r&&r.length>0){var o=r.length,a=d(r[0],qt).length,s=n.width/(3*a+1),c=0,l=d(e,"maxValue"),h=d(e,$t),f=d(e,ee),g=d(e,ne),p=h?new tl:u;if(l==u){l=0;for(var v=0;a>v;v++){for(var y=0,_=0;o>_;_++)y+=d(r[_],qt)[v];l=O(l,y)}}if(l>0){for(v=0;a>v;v++){var m=n.y+n.height;for(_=0;o>_;_++){var b=r[_],x=d(b,dn),w=d(b,qt)[v],I=w/l*n.height;x?t.fillStyle=x:(t.fillStyle=Hc[c++],c===Hc.length&&(c=0)),m-=I;var S={x:n.x+(1+3*v)*s,y:m,width:2*s,height:I};Po(t,S.x,S.y,S.width,S.height),p&&(S.text=ki(h)?h(w,v,b,i):w,p.add(S))}}p&&p.each((function(e){Ns(t,e.text,f,g,e.x,e.y,e.width,e.height,mt)}))}}},P=function(e,n){var r=d(e,Xt);if(r&&r.length>0){for(var o=r.length,a=d(r[0],qt).length,s=n.width/(3*a+1),c=0,l=d(e,$t),h=d(e,ee),f=d(e,ne),g=l?new tl:u,p=0;a>p;p++){for(var v=0,y=0;o>y;y++)v+=d(r[y],qt)[p];if(v>0){var _=n.y+n.height;for(y=0;o>y;y++){var m=r[y],b=d(m,dn),x=d(m,qt)[p],w=x/v*n.height;b?t.fillStyle=b:(t.fillStyle=Hc[c++],c===Hc.length&&(c=0)),_-=w;var I={x:n.x+(1+3*p)*s,y:_,width:2*s,height:w};Po(t,I.x,I.y,I.width,I.height),g&&(I.text=ki(l)?l(x,p,m,i):x,g.add(I))}}}g&&g.each((function(e){Ns(t,e.text,h,f,e.x,e.y,e.width,e.height,mt)}))}},k=function(e,n){var r=d(e,Xt);if(r&&r.length>0){var o=r.length,s=d(e,"minValue")||0,c=d(e,"maxValue");if(c==u&&(c=0,r.forEach((function(t){d(t,qt).forEach((function(t){c=O(c,t)}))}))),s===c)return;for(var l=n.height/(c-s),h=n.y+c*l,f=d(r[0],qt).length,g=n.width/(3*f+1),p=0,v=d(e,"lineWidth")||2,y=d(e,"line3d"),_=d(e,"linePoint"),m=d(e,$t),b=d(e,ee),x=d(e,ne),w=0;o>w;w++){var I=r[w],S=d(I,dn),T=d(I,qt);S?t.strokeStyle=S:(S=t.strokeStyle=Hc[p++],p===Hc.length&&(p=0)),t.beginPath();for(var C=0;f>C;C++){var M=n.x+(2+3*C)*g,D=h-T[C]*l;0===C?t.moveTo(M,D):t.lineTo(M,D)}if(t.lineWidth=v,t.stroke(),y&&Do(t,S,u,v,a),_||m){var E,P=v/2+2;for(C=0;f>C;C++){var A=T[C];if(M=n.x+(2+3*C)*g,D=h-A*l,ki(_)?_(t,M,D,S,C,I,i):_&&(t.fillStyle=S,t.beginPath(),t.arc(M,D,P,0,G,!0),t.fill()),ki(m)?E=m(A,C,I,i):m&&(E=A),E){var k=Vs(b,E).height,R=t.shadowBlur;if(R){var z=t.shadowOffsetX,N=t.shadowOffsetY,V=t.shadowColor;t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=u}Ns(t,E,b,x,M,D-k-P+2,0,k,mt),R&&(t.shadowOffsetX=z,t.shadowOffsetY=N,t.shadowBlur=R,t.shadowColor=V)}}}}}},z=function(){t=null,i=null,o=null},V=function(t,e){var n;o&&o.getState?n=o.getState(i):(n=i instanceof il?i.s(Ze):null,(n===r||null===n)&&(n=d(t,Ze)));var a=d(e,Ze);return(a===r||null===a||a===n)&&d(e,de)},L={border:T,image:I,text:S,pieChart:C,columnChart:M,stackedColumnChart:E,percentageColumnChart:P,lineChart:k};return function(e,y,I,S,T,C,M,D,E,P){if(y&&T&&C){var O=!t;t=e,i=M,o=D,!i&&o&&o.isSelfViewEvent&&(i=o),a=o&&o._zoom?o._zoom:1,s=E,c=P;var A,k,R,N=T,B=C;if(lu())0===t[Ue]?lu[0]&&(A=!0):A=!0,t.texureImage2D?lu[1]&&(k=!0):k=!0,t.texureImage3D?lu[2]&&(R=!0):R=!0,A&&k&&R&&(N=I,B=S);if(y.tagName)return Ei(it)&&!n[it]||t.drawImage(y,N,B,T,C),void(O&&z());if(!1===d(y,"visible"))return void(O&&z());s||(s=Jc(y.color,i,o)),P||(c=Jc(y.blendMode,i,o)),Ei(it)&&!n[it]&&(T=N,C=B);var G=$c(y,i,o,T),F=Qc(y,i,o,C),j={x:0,y:0,width:G,height:F,fitSize:d(y,"fitSize")},H=d(y,"clip"),U=d(y,"opacity");if(j.fitSize){var Z=j.rw=Jc(y.width,i,o)||20;j.widthScale=G/Z;var W=j.rh=Jc(y.height,i,o)||20;j.heightScale=F/W}if(t.save(),t.interactiveInfo){var q=t.interactiveInfo.matrix,X=q.clone();q.appendTranslate(N,B).appendScale(T/G,C/F)}Ar(t,N,B),(G!==T||F!==C)&&t.scale(T/G,C/F),H&&(ki(H)?H(t,G,F,i,o,y):(t.beginPath(),t.rect(0,0,G,F),t.clip())),U!=u&&(t.globalAlpha*=U),d(y,"comps").forEach((function(e){if(e.prefix){var n=Uc,s=Jc(e.prefix,i,o);s&&(Uc=Uc+s+".")}if(!1!==V(y,e)){if(Zc.splice(0,0,e),t.interactiveInfo)var c=t.interactiveInfo.matrix.clone();var I=d(e,"opacity"),S=d(e,"shadow"),T=d(e,"type"),C=v(e,j);if(I!=u){var M=t.globalAlpha;t.globalAlpha*=I}if(S){var D=t.shadowOffsetX,E=t.shadowOffsetY,P=t.shadowBlur,O=t.shadowColor,A=d(e,"shadowOffsetX"),k=d(e,"shadowOffsetY"),R=d(e,"shadowBlur"),z=h(e,"shadowColor");t.shadowOffsetX=(A==u?3:A)*a,t.shadowOffsetY=(k==u?3:k)*a,t.shadowBlur=(R==u?6:R)*a,t.shadowColor=z||h(_a)}if("save"===T)t.save();else if("endClip"===T||"restore"===T)t.restore();else if("clip"===T)t.save(),Co(t,d(e,"points",g),d(e,"segments",_),!0),t.clip();else if(Uo[T])C=C||{x:0,y:0,width:j.width,height:j.height},w(e,T,C,j);else if(T===kt)w(e,T,C,j);else if("SVGPath"===T)x(e,T,C);else{C=C||{x:0,y:0,width:j.width,height:j.height};var N=d(e,le),B=d(e,"scaleX"),G=d(e,"scaleY"),F=p(e),H=m(e,C,C,N,B,G,F);if(ki(T))l(e,T),f.drawCompType(T,t,C,e,i,o);else if(f.getCompType(T)){var U=f.getCompType(T),Z=U.func||U;l(e,U),f.drawCompType(Z,t,C,e,i,o)}else L[T]?L[T](e,C):f.getCompType(T)===r&&ti.test(T)&&Fc(T);H&&b()}S&&(t.shadowOffsetX=D,t.shadowOffsetY=E,t.shadowBlur=P,t.shadowColor=O),I!=u&&(t.globalAlpha=M),t.interactiveInfo&&(t.interactiveInfo.matrix=c),e.prefix&&(Uc=n),Zc.splice(0,1)}else e.prefix&&(Uc=n)})),t.interactiveInfo&&(t.interactiveInfo.matrix=X),t.restore(),O&&z()}}}();f.getCurrentComp=function(){return Zc[0]},f.getParentComp=function(){return Zc[1]},f.getInternal=function(){return{isEnter:lo,isEsc:uo,isSpace:co,isLeft:ro,isUp:oo,isRight:ao,isDown:so,addMethod:Wi,superCall:Yi,toPointsArray:Mo,translateAndScale:Or,appendArray:Ui,createWorldMatrix:Pc,vec3TransformMat4:Ic,setCanvas:xr,createDiv:yr,createView:vr,createCanvas:_r,createImage:_i,initContext:Pr,layout:Lr,fillRect:Po,Mat:ka,drawBorder:Vo,isString:Ei,setBorder:mr,getPropertyValue:rr,setPropertyValue:or,drawVerticalLine:sr,draw3DRect:Lo,getPinchDist:Wo,isSameRect:Ji,getPosition:na,intersectionLineRect:nr,getNodeRect:al,getEdgeAgentPosition:Tl,getEdgeHostPosition:Sl,getImageWidth:$c,getImageHeight:Qc,initItemElement:pr,drawPoints:Co,createG2:zc,closePopup:Fr,isH:wi,createAnim:Zi,createNormalMatrix:Rf,createNormals:of,toFloatArray:ep,glMV:zf,batchShape:fg,createNodeMatrix:Ec,getFaceInfo:Ff,transformAppend:zh,drawFaceInfo:jf,to3dPointsArray:rp,setGLDebugMode:function(t){Ch=t},cube:function(){return{vs:Eg,is:Pg,uv:Og}},ui:function(){return{DataUI:cd,NodeUI:ld,EdgeUI:ud,GroupUI:hd,ShapeUI:gd,GridUI:vd,Data3dUI:nv,Node3dUI:iv,Shape3dUI:ov}},getInternalVersion:function(){return"U2FsdGVkX18qrs+bisHqHvXa+pkD/UBuTN2j1kYk0iI="},getDragger:function(){return jr},addMSMap:function(t){Wi(Wa,t)},k:_,addEventListener:S,removeEventListener:T}},function(t){function n(t,n){t!=u&&(n==u&&ln!=e(t)?this._54O(t,256):this._54O(t,n))}function i(){return new n(u)}function r(t,e,n,i,r,o){for(;--o>=0;){var a=e*this[t++]+n[i]+r;r=D(a/67108864),n[i++]=67108863&a}return r}function o(t,e,n,i,r,o){for(var a=32767&e,s=e>>15;--o>=0;){var c=32767&this[t],l=this[t++]>>15,u=s*c+l*a;c=a*c+((32767&u)<<15)+n[i]+(1073741823&r),r=(c>>>30)+(u>>>15)+s*l+(r>>>30),n[i++]=1073741823&c}return r}function a(t,e,n,i,r,o){for(var a=16383&e,s=e>>14;--o>=0;){var c=16383&this[t],l=this[t++]>>14,u=s*c+l*a;c=a*c+((16383&u)<<14)+n[i]+r,r=(c>>28)+(u>>14)+s*l,n[i++]=268435455&c}return r}function s(t){return Pt.charAt(t)}function l(t,e){var n=Ot[t.charCodeAt(e)];return n==u?-1:n}function d(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function h(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function f(t){var e=i();return e._58O(t),e}function g(t,e){var i,r=this;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void r.fromRadix(t,e);i=2}r.t=0,r.s=0;for(var o=t.length,a=!1,s=0;--o>=0;){var c=8==i?255&t[o]:l(t,o);0>c?"-"==t.charAt(o)&&(a=!0):(a=!1,0==s?r[r.t++]=c:s+i>r.DB?(r[r.t-1]|=(c&(1<<r.DB-s)-1)<<s,r[r.t++]=c>>r.DB-s):r[r.t-1]|=c<<s,s+=i,s>=r.DB&&(s-=r.DB))}8==i&&0!=(128&t[0])&&(r.s=-1,s>0&&(r[r.t-1]|=(1<<r.DB-s)-1<<s)),r._57O(),a&&n.ZERO._78O(r,r)}function p(){for(var t=this,e=t.s&t.DM;t.t>0&&t[t.t-1]==e;)--t.t}function v(t){var e,n=this;if(n.s<0)return"-"+n._85O()[_t](t);if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return n.toRadix(t);e=2}var i,r=(1<<e)-1,o=!1,a="",c=n.t,l=n.DB-c*n.DB%e;if(c-- >0)for(l<n.DB&&(i=n[c]>>l)>0&&(o=!0,a=s(i));c>=0;)e>l?(i=(n[c]&(1<<l)-1)<<e-l,i|=n[--c]>>(l+=n.DB-e)):(i=n[c]>>(l-=e)&r,0>=l&&(l+=n.DB,--c)),i>0&&(o=!0),o&&(a+=s(i));return o?a:"0"}function y(){var t=i();return n.ZERO._78O(this,t),t}function b(){return this.s<0?this._85O():this}function x(t){var e=this,n=e.s-t.s;if(0!=n)return n;var i=e.t;if(n=i-t.t,0!=n)return e.s<0?-n:n;for(;--i>=0;)if(0!=(n=e[i]-t[i]))return n;return 0}function w(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function I(){var t=this;return t.t<=0?0:t.DB*(t.t-1)+w(t[t.t-1]^t.s&t.DM)}function S(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function T(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=O(this.t-t,0),e.s=this.s}function C(t,e){var n,i=this,r=t%i.DB,o=i.DB-r,a=(1<<o)-1,s=D(t/i.DB),c=i.s<<r&i.DM;for(n=i.t-1;n>=0;--n)e[n+s+1]=i[n]>>o|c,c=(i[n]&a)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=c,e.t=i.t+s+1,e.s=i.s,e._57O()}function M(t,e){var n=this;e.s=n.s;var i=D(t/n.DB);if(i>=n.t)e.t=0;else{var r=t%n.DB,o=n.DB-r,a=(1<<r)-1;e[0]=n[i]>>r;for(var s=i+1;s<n.t;++s)e[s-i-1]|=(n[s]&a)<<o,e[s-i]=n[s]>>r;r>0&&(e[n.t-i-1]|=(n.s&a)<<o),e.t=n.t-i,e._57O()}}function k(t,e){for(var n=this,i=0,r=0,o=A(t.t,n.t);o>i;)r+=n[i]-t[i],e[i++]=r&n.DM,r>>=n.DB;if(t.t<n.t){for(r-=t.s;i<n.t;)r+=n[i],e[i++]=r&n.DM,r>>=n.DB;r+=n.s}else{for(r+=n.s;i<t.t;)r-=t[i],e[i++]=r&n.DM,r>>=n.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=n.DV+r:r>0&&(e[i++]=r),e.t=i,e._57O()}function z(t,e){var i=this.abs(),r=t.abs(),o=i.t;for(e.t=o+r.t;--o>=0;)e[o]=0;for(o=0;o<r.t;++o)e[o+i.t]=i.am(0,r[o],e,o,0,i.t);e.s=0,e._57O(),this.s!=t.s&&n.ZERO._78O(e,e)}function L(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t._57O()}function B(t,e,r){var o=t.abs(),a=this;if(!(o.t<=0)){var s=a.abs();if(s.t<o.t)return e!=u&&e._58O(0),void(r!=u&&a._77O(r));r==u&&(r=i());var c=i(),l=a.s,d=t.s,h=a.DB-w(o[o.t-1]);h>0?(o._44O(h,c),s._44O(h,r)):(o._77O(c),s._77O(r));var f=c.t,g=c[f-1];if(0!=g){var p=g*(1<<a.F1)+(f>1?c[f-2]>>a.F2:0),v=a.FV/p,y=(1<<a.F1)/p,_=1<<a.F2,m=r.t,b=m-f,x=e==u?i():e;for(c._59O(b,x),r._52O(x)>=0&&(r[r.t++]=1,r._78O(x,r)),n.ONE._59O(f,x),x._78O(c,c);c.t<f;)c[c.t++]=0;for(;--b>=0;){var I=r[--m]==g?a.DM:D(r[m]*v+(r[m-1]+_)*y);if((r[m]+=c.am(0,I,r,b,0,f))<I)for(c._59O(b,x),r._78O(x,r);r[m]<--I;)r._78O(x,r)}e!=u&&(r._45O(f,e),l!=d&&n.ZERO._78O(e,e)),r.t=f,r._57O(),h>0&&r._46O(h,r),0>l&&n.ZERO._78O(r,r)}}}function F(t){var e=i();return this.abs()._49O(t,u,e),this.s<0&&e._52O(n.ZERO)>0&&t._78O(e,e),e}function j(t){this.m=t}function H(t){return t.s<0||t._52O(this.m)>=0?t.mod(this.m):t}function Z(t){return t}function W(t){t._49O(this.m,u,t)}function q(t,e,n){t._47O(e,n),this._74O(n)}function Y(t,e){t._48O(e),this._74O(e)}function $(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=15&e*(2-(15&t)*e),e=255&e*(2-(255&t)*e),e=65535&e*(2-(65535&(65535&t)*e)),e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Q(t){var e=this;e.m=t,e.mp=t._50O(),e.mpl=32767&e.mp,e.mph=e.mp>>15,e.um=(1<<t.DB-15)-1,e.mt2=2*t.t}function J(t){var e=i();return t.abs()._59O(this.m.t,e),e._49O(this.m,u,e),t.s<0&&e._52O(n.ZERO)>0&&this.m._78O(e,e),e}function K(t){var e=i();return t._77O(e),this._74O(e),e}function tt(t){for(var e=this;t.t<=e.mt2;)t[t.t++]=0;for(var n=0;n<e.m.t;++n){var i=32767&t[n],r=i*e.mpl+((i*e.mph+(t[n]>>15)*e.mpl&e.um)<<15)&t.DM;for(i=n+e.m.t,t[i]+=e.m.am(0,r,t,n,0,e.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t._57O(),t._45O(e.m.t,t),t._52O(e.m)>=0&&t._78O(e.m,t)}function et(t,e){t._48O(e),this._74O(e)}function nt(t,e,n){t._47O(e,n),this._74O(n)}function it(){return 0==(this.t>0?1&this[0]:this.s)}function rt(t,e){if(t>4294967295||1>t)return n.ONE;var r=i(),o=i(),a=e._73O(this),s=w(t)-1;for(a._77O(r);--s>=0;)if(e._76O(r,o),(t&1<<s)>0)e._75O(o,a,r);else{var c=r;r=o,o=c}return e.revert(r)}function ot(t,e){var n;return n=256>t||e._51O()?new j(e):new Q(e),this.exp(t,n)}function at(){var t=this;if(t.s<0){if(1==t.t)return t[0]-t.DV;if(0==t.t)return-1}else{if(1==t.t)return t[0];if(0==t.t)return 0}return(t[1]&(1<<32-t.DB)-1)<<t.DB|t[0]}function st(t,e){return new n(t,e)}function ct(){var t=this;t.n=u,t.e=0,t.d=u,t.p=u,t.q=u,t.dmp1=u,t.dmq1=u,t._10A=u}function lt(t){return t._53O(this.e,this.n)}function ut(t){var e,n,i,r="",o=0;for(e=0;e<t.length&&t.charAt(e)!=Lt;++e)i=Vt.indexOf(t.charAt(e)),0>i||(0==o?(r+=s(i>>2),n=3&i,o=1):1==o?(r+=s(n<<2|i>>4),n=15&i,o=2):2==o?(r+=s(n),r+=s(i>>2),n=3&i,o=3):(r+=s(n<<2|i>>4),r+=s(15&i),o=0));return 1==o&&(r+=s(n<<2)),r}function dt(t){var e=t.split(""),n=ut(t);return e.forEach((function(t){var e=t.length;e>0&&n&&(Nn+=X(t))})),n}function ht(t,e){var n=Zt._4O.Util._56O(t,"ss"),i={},r=0;return i.v=n==e,i.t=1,i.s=0>r?-1:0,Vn=i.v,r>0?i[0]=r:-1>r?i[0]=r+i.DV:i.t=0,[n,i]}function ft(t){var e=38,n=t.substring(0,e);if(n&&30==n.indexOf("05000420")){var i=["ss",t.substring(e)];return i}return[]}function gt(t,e){e=e.replace(Ht,""),e=e.replace(/[ \n]+/g,"");var n=st(e,16);if(n._55O()>this.n._55O())return 0;var i=this._37O(n),r=i[_t](16).replace(/^1f+00/,""),o=ft(r);if(0==o.length)return!1;for(var a,s,c,l=.5,u=cc,d=[0,.5,.75,.875,.9375],h=[],f=[],g=[],p=G/u,v=o[1],y=ht(t,v)[0],_=0,m=0;_<d.length;_++){var b=0===_%2?0:.5;for(a=0;u>=a;a++)s=(a+b)*p,c=1-d[_],h.push(R(s)*l*c,-l+2*d[_]*l,-N(s)*l*c),f.push((a+b)/u,c)}for(_=0;_<d.length-1;_++){var x=_*(u+1),w=(_+1)*(u+1);for(a=0;u>a;a++)g.push(x+a,w+a+1,w+a,x+a,x+a+1,w+a+1)}return g.forEach((function(t){m+=t})),v==y&&m>10}var pt,vt=0xdeadbeefcafe,yt=15715070==(16777215&vt),_t="toString",mt="",bt="nat",xt=function(){};m=t["D"+11182[_t](V(2,5))];var wt=n.prototype;fe+=It.substr(0,1);var St=t.navigator?t.navigator.appName:"";yt&&"Microsoft Internet Explorer"==St?(wt.am=o,pt=30):yt&&"Netscape"!=St?(wt.am=r,pt=26):(wt.am=a,pt=28),wt.DB=pt,wt.DM=(1<<pt)-1,wt.DV=1<<pt;var Mt=52;wt.FV=V(2,Mt),wt.F1=Mt-pt,wt.F2=2*pt-Mt;var Dt,Et,Pt="0123456789abcdefghijklmnopqrstuvwxyz",Ot=[],At=function(t){return String.fromCharCode(t)};for(Dt="0".charCodeAt(0),Et=0;9>=Et;++Et)Ot[Dt++]=Et;for(Dt="a".charCodeAt(0),Et=10;36>Et;++Et)Ot[Dt++]=Et;for(Dt="A".charCodeAt(0),Et=10;36>Et;++Et)Ot[Dt++]=Et;var kt=j.prototype;kt._73O=H,kt.revert=Z,kt._74O=W,kt._75O=q,kt._76O=Y;var Rt=Q.prototype;Rt._73O=J,Rt.revert=K,Rt._74O=tt,Rt._75O=nt,Rt._76O=et,wt._77O=d,wt._58O=h,wt._54O=g,wt._57O=p,wt._59O=S,wt._45O=T,wt._44O=C,wt._46O=M,wt._78O=k,wt._47O=z,wt._48O=L,wt._49O=B,wt._50O=$,wt._51O=it,wt.exp=rt,wt.toString=v,wt._85O=y,wt.abs=b,wt._52O=x,wt._55O=I,wt.mod=F,wt._53O=ot,n.ZERO=f(0),n.ONE=f(1),wt._86O=at;var zt=function(t,n){var i=this;i.isPublic=!0,e(t)!==ln?(i.n=t,i.e=n):t!=u&&n!=u&&t.length>0&&n.length>0&&(i.n=st(t,16),i.e=X(n,16))};po=function(){var t,e,n=dt(Ft),i=n.substr(0,4),r=n.substr(4,2),o=n.substr(6,2),a=1,s=!a,c=_,l=[],d=pn.charAt(7);if(m&&(m[_t]().indexOf(bt)<0||m[fe][_t]().indexOf(bt)<0||!n?t=u:(n=new m(i-0,r-a,o-0),e=n.setHours(9),m[fe]()>e?t=To[d]:s=!0)),n&&t&&t[0]&&t[E(.5)]&&c){var h=Tc(t[0]),f=Tc(t[1]);for(var g in f)l.push(g);var p,v=0,y=h[l[v]],b=f[l[v++]],x=f[l[v++]],w=f[l[v++]],I=f[l[v++]],S=f[l[v++]],T=f[l[v++]],C=h[l[v]],M=f[l[v++]],D=ne._27O(c);if(y===b&&D&&M){p=b+x+w+I+S+T;var P=!T||T===Mn;if(!P&&T)for(var O,A=0,k=T.length;k>A;A++)T[A]===De[v]?O===Mn||O[0]===ie[5]&&Mn&&Mn.indexOf(O.substr(1))>=0?P=!0:O=u:(O==u?O=T[A]:O+=T[A],A===k-1&&(O===Mn||O[0]===ie[5]&&Mn&&Mn.indexOf(O.substr(1))>=0)&&(P=!0));p&&D._31O(p,M)&&D._31O(y,C)&&P&&(!S||m[fe]()<S)&&(s=!0)}}return s||(Oo=Qi),d};var Nt=ct.prototype;Nt._37O=lt,Nt._38O=zt;var Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt="=",Bt=25,Gt=10,Ft="IBkSJQ==",jt=jt||function(t,n){var i={},r=i._7A={},o=r._6A=function(){function t(){}return{_80O:function(e){t.prototype=this;var n=new t;return e&&n._5A(e),n.hasOwnProperty("_82O")||(n._82O=function(){n.$super._82O.apply(this,arguments)}),n._82O.prototype=n,n.$super=this,n},_3A:function(){var t=this._80O();return t._82O.apply(t,arguments),t},_82O:function(){},_5A:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty(_t)&&(this.toString=t.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),a=r._39O=o._80O({_82O:function(t,e){t=this._84O=t||[],this._65O=e!=n?e:4*t.length},toString:function(t){return(t||c).stringify(this)},_89O:function(t){var e=this._84O,n=t._84O,i=this._65O,r=t._65O;if(this._57O(),i%4)for(var o=0;r>o;o++){var a=255&n[o>>>2]>>>24-o%4*8;e[i+o>>>2]|=a<<24-(i+o)%4*8}else if(n.length>65535)for(o=0;r>o;o+=4)e[i+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this._65O+=r,this},_57O:function(){var t=this._84O,e=this._65O;t[e>>>2]&=4294967295<<32-e%4*8,t.length=E(e/4)},_88O:function(){var t=o._88O.call(this);return t._84O=this._84O.slice(0),t},_87O:function(t){for(var e=[],n=0;t>n;n+=4)e.push(0|4294967296*U);return new a._82O(e,t)}}),s=i._2A={},c=s._69O={stringify:function(t){var e,n=t._84O,i=t._65O,r=[];for(e=0;i>e;e++){var o=255&n[e>>>2]>>>24-e%4*8;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},_68O:function(t){for(var e=t.length,n=[],i=0;e>i;i+=2)n[i>>>3]|=X(t.substr(i,2),16)<<24-i%8*4;return new a._82O(n,e/2)}},l=s._8A={stringify:function(t){var e,n=t._84O,i=t._65O,r=[];for(e=0;i>e;e++){var o=255&n[e>>>2]>>>24-e%4*8;r.push(At(o))}return r.join("")},_68O:function(t){var e,n=t.length,i=[];for(e=0;n>e;e++)i[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new a._82O(i,n)}},u=s._9A={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw new Error("")}},_68O:function(t){return l._68O(unescape(encodeURIComponent(t)))}},d=r._32O=o._80O({_1A:function(){this._83O=new a._82O,this._23O=0},_33O:function(t){e(t)==ln&&(t=u._68O(t)),this._83O._89O(t),this._23O+=t._65O},_25O:function(t){var e=this._83O,n=e._84O,i=e._65O,r=this._79O,o=4*r,s=i/o;s=t?E(s):O((0|s)-this._22O,0);var c=s*r,l=A(4*c,i);if(c){for(var u=0;c>u;u+=r)this._20O(n,u);var d=n.splice(0,c);e._65O-=l}return new a._82O(d,l)},_88O:function(){var t=o._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});r._66O=d._80O({cfg:o._80O(),_82O:function(t){this.cfg=this.cfg._80O(t),this._1A()},_1A:function(){d._1A.call(this),this._34O()},_81O:function(t){return this._33O(t),this._25O(),this},_72O:function(t){t&&this._33O(t);var e=this._21O();return e},_79O:16,_26O:function(t){return function(e,n){return new t._82O(n)._72O(e)}},_19O:function(t){return function(e,n){return new h._71O._82O(t,n)._72O(e)}}});var h=i._67O={};return i}();!function(){var t=jt,e=t._7A,n=e._39O,i=e._66O,r=t._67O,o=[],a=[];!function(){function t(t){for(var e=P(t),n=2;e>=n;n++)if(!(t%n))return!1;return!0}function e(t){return 0|4294967296*(t-(0|t))}for(var n=2,i=0;64>i;)t(n)&&(8>i&&(o[i]=e(V(n,.5))),a[i]=e(V(n,1/3)),i++),n++}();var s=[],c=r._41O=i._80O({_34O:function(){this._64O=new n._82O(o.slice(0))},_20O:function(t,e){for(var n=this._64O._84O,i=n[0],r=n[1],o=n[2],c=n[3],l=n[4],u=n[5],d=n[6],h=n[7],f=0;64>f;f++){if(16>f)s[f]=0|t[e+f];else{var g=s[f-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=s[f-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;s[f]=p+s[f-7]+y+s[f-16]}var _=l&u^~l&d,m=i&r^i&o^r&o,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),x=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),w=h+x+_+a[f]+s[f],I=b+m;h=d,d=u,u=l,l=0|c+w,c=o,o=r,r=i,i=0|w+I}n[0]=0|n[0]+i,n[1]=0|n[1]+r,n[2]=0|n[2]+o,n[3]=0|n[3]+c,n[4]=0|n[4]+l,n[5]=0|n[5]+u,n[6]=0|n[6]+d,n[7]=0|n[7]+h},_21O:function(){var t=this._83O,e=t._84O,n=8*this._23O,i=8*t._65O;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=D(n/4294967296),e[15+(i+64>>>9<<4)]=n,t._65O=4*e.length,this._25O(),this._64O},_88O:function(){var t=i._88O.call(this);return t._64O=this._64O._88O(),t}});t._41O=i._26O(c),t._42O=i._19O(c)}();var Ht=new RegExp("");Ht.compile("[^0-9a-f]","gi"),ct._28O=-1,ct._29O=-2,Nt._31O=gt,Nt._63O=gt,ct._43O=-2;var Ut=new function(){var t=this;t._5O=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var n=X(t.substring(e+3,e+4));return 0==n?-1:n>0&&10>n?n+1:-2},t._13O=function(e,n){var i=t._5O(e,n);return 1>i?"":e.substring(n+2,n+2+2*i)},t._12O=function(e,i){var r,o=t._13O(e,i);return""==o?-1:(r=X(o.substring(0,1))<8?new n(o,16):new n(o.substring(2),16),r._86O())},t._6O=function(e,n){var i=t._5O(e,n);return 0>i?i:n+2*(i+1)},t._11O=function(e,n){var i=t._6O(e,n),r=t._12O(e,n);return e.substring(i,i+2*r)},t._10O=function(e,n){var i=t._6O(e,n),r=t._12O(e,n);return i+2*r},t._7O=function(e,n){var i=[],r=t._6O(e,n);i.push(r);for(var o=t._12O(e,n),a=r,s=0;;){var c=t._10O(e,a);if(c==u||c-r>=2*o)break;if(s>=200)break;i.push(c),a=c,s++}return i}};if(Ut._90O=At(Gt+24),Ut._91O=c+At(Gt*Gt+8),Zt==u||!Zt)var Zt={};Zt._4O!=u&&Zt._4O||(Zt._4O={});var Wt=Zt._4O;Zt._4O.Util=new function(){var t=this;t._56O=function(t){var e=new Zt._4O._3O;return e._30O(t)},t._4A=function(t){var e=new Zt._4O._3O;return e._36O(t)},t._11A=function(t){var e=new Wt._3O;return e._30O(t)}},Zt._4O._3O=function(){var t=this;t._8O=function(e,n){if("ss"==e&&"cj"==n){try{t.md=jt._67O._41O._3A()}catch(a){xt(mt)}t._24O=function(e){t.md._81O(e)},t._35O=function(e){var n=jt._2A._69O._68O(e);t.md._81O(n)},t._60O=function(){var e=t.md._72O();return e[_t](jt._2A._69O)},t._30O=function(e){return t._24O(e),t._60O()},t._36O=function(e){return t._35O(e),t._60O()}}},t._24O=function(){xt(mt)},t._35O=function(){xt(mt)},t._60O=function(){xt(mt)},t._30O=function(){xt(mt)},t._36O=function(){xt(mt)},t._8O("ss","cj")},Ln=function(t){var e=lr[tn[7]],n=1,i=!1;if(fo.a!=lr[fn])return fo.a;if(fo.forEach((function(t){n*=t})),t>n){if(e&&e[1]&&e[0]){var r=e[0],o=e[1];o=o.split(Ut._90O),r=r.split(Ut._90O);var a=o[3],s=r[3],c=o[7],l=o[11],u=o[15],d=o[19],h=o[23],f=o[27],g=r[7],p=a+c+l+u+d+h,v=!h,y=s===a;if(h){var _=h&&h.split(Di("firefox")[3]);if(_)for(var m=0;m<_.length;m++){var b=_[m];if(b[0]===me[8]&&(b=b.substring(1)),rn.indexOf(b)>=0){v=!0;break}}}i=y&&li()(s,g)&&li()(p,f)&&v&&(!d||d>t)}i||(cd.prototype._42=zn)}else i=!0;return fo.a=i,i},Bt=String.fromCharCode(Bt+20);var qt,Xt,Yt=function(t){return t=t.replace(Ht,mt),t.replace(/[ \n]+/g,mt)},$t="30",Qt="06",Jt="02",Kt="03",te=st,ee=/^1f+00/,ne=function(){var t;return t={_18O:function(t){var e=t,n=e.replace(/\s+/g,""),i=ut(n);return i},_14O:function(t){var e=this._18O(t),n=this._15O(e);return n},_15O:function(t){var e=this._17O(t);if("2a864886f70d010101"==e._61O){var n=this._16O(e.key),i=new ct;return i._38O(n.n,n.e),i}xt(mt)},_16O:function(t){var e={};t.substr(0,2)!=$t&&xt(mt);var n=Ut._7O(t,0);return 2!=n.length&&xt(mt),t.substr(n[0],2)!=Jt&&xt(mt),e.n=Ut._11O(t,n[0]),t.substr(n[1],2)!=Jt&&xt(mt),e.e=Ut._11O(t,n[1]),e},_17O:function(t){var e={};e._40O=u;var n=Ut._7O(t,0);2!=n.length&&xt(mt);var i=n[0];t.substr(i,2)!=$t&&xt(mt);var r=Ut._7O(t,i);return 2!=r.length&&xt(mt),t.substr(r[0],2)!=Qt&&xt(mt),e._61O=Ut._11O(t,r[0]),t.substr(r[1],2)==Qt?e._40O=Ut._11O(t,r[1]):t.substr(r[1],2)==$t&&(e._40O={},e._40O.p=Ut._70O(t,r[1],[0],Jt),e._40O.q=Ut._70O(t,r[1],[1],Jt),e._40O.g=Ut._70O(t,r[1],[2],Jt)),t.substr(n[1],2)!=Kt&&xt(mt),e.key=Ut._11O(t,n[1]).substr(2),e}},t._17O?t:u}(),re=ne._27O=function(t){return ne._14O(t)};li=function(){return function(t,e){if(t&&e){e=Yt(e);var n=te(e,V(2,4)),i=this;if(!i||!i.n||n._55O()>i.n._55O())return 0;var r=i._37O(n),o=r[_t](V(2,4)).replace(ee,""),a=ft(o);if(0==a.length)return!1;var s=a[0],c=a[1],l=function(t){return Zt._4O.Util._56O(t,s)},u=l(t);return c==u}}.bind(re(_))},function(){var t=Pe.length-Ee.length;if(t>0)for(var e=0;t>e;e++)qt=Wt.Util,Xt=Yt}(),ni=function(t,e){e=Xt(e);var n=re(Ac),i=Ct.length,r=2*i,o=te(e,V(i,r)),a=n,s=!0;if(a){var c=a[Tt[0]];c&&o._55O()<=c._55O()&&(s=!1)}if(s)return 0;var l=a._37O(o),u=l[_t](V(i,r)).replace(ee,""),d=ft(u);if(0==d.length)return!1;var h=d[0],f=d[1],g=qt._11A(t,h);return f==g}}(n),Wi(f,{load:function(){var t={},e=function(t){return t?"c_"+(t.sync?"1":"0")+"_"+(t.post?"1":"0")+"_"+(t.responseType||"H")+"_"+(t.mimeType||"H")+"_"+(t.data?JSON.stringify(t.data):"H"):""};return function(n,i,r){var o,a=t[n],s=e(r);return a&&(o=a[s])?void o.push(i):(t[n]||(a=t[n]={count:0}),o=a[s]=[i],a.count++,void f.xhrLoad(n,(function(e){delete a[s],a.count--,a.count||delete t[n],o.forEach((function(t){t(e)}))}),r))}}(),asyncEach:function(t,e,n){"function"!=typeof n&&(n=Function.prototype);var i=new Array(t.length),r=0,o=!1;t.forEach((function(a,s){e(a,(function(e,a){return o?void 0:e?(o=!0,n(null)):(i[s]=a,r++,r===t.length?n(i):void 0)}))}))},xhrLoad:function(t,e,n){var i=!1;Ri(t)||(i=!0,t=[t]),n=n||{};var r=n.sync,o=null,a=n.method||"GET";return n.post&&(a="POST"),n.method=a,f.asyncEach(t,(function(t,e){var i=new sd;t=f.beforeLoadURL(t),t.data?e(null,t.data):(n.url=encodeURI(t),n.responseType?i.setResponseType(n.responseType):i.setOverrideMimeType(n.mimeType||"text/plain"),i.onload=function(){200===this.status||0===this.status?e(null,i.getResponseText()):e(!0)},i.onerror=function(){e(!0)},i.send(n))}),(function(t){var n="function"==typeof e;(n||r)&&(o=i&&t?t[0]:t,n&&e(o))})),r?o:void 0}});var tl=d.List=function(){this._as=[];var t,e,n=arguments.length;if(1===n){var i=arguments[0];if(zi(i)&&(i=i._as),Ri(i))for(e=i.length,t=0;e>t;t++)this._as.push(i[t]);else i!=u&&this._as.push(i)}else if(n>1)for(t=0;n>t;t++)this._as.push(arguments[t])};uc("List",i,{forEach:function(t,e){this.each(t,e)},push:function(){for(var t=0;t<arguments.length;t++)this.add(arguments[t])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(t,e){return e===r?this._as.push(t):this._as.splice(e,0,t)},addAll:function(t){zi(t)&&(t=t._as),Ri(t)?Ui(this._as,t):this._as.push(t)},get:function(t){return this._as[t]},slice:function(t,e){return new tl(this._as.slice(t,e))},remove:function(t){var e=this._as.indexOf(t);return e>=0&&e<this._as.length&&this.removeAt(e),e},removeAt:function(t){return this._as.splice(t,1)[0]},set:function(t,e){return this._as[t]=e},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return this._as.indexOf(t)>=0},indexOf:function(t){return this._as.indexOf(t)},each:function(t,e){for(var n=0,i=this._as.length;i>n;n++){var r=this._as[n];e?t.call(e,r,n,this):t(r,n,this)}},reverseEach:function(t,e){for(var n=this._as.length-1;n>=0;n--){var i=this._as[n];e?t.call(e,i):t(i)}},getArray:function(){return this._as},toArray:function(t,e){if(t){for(var n,i=[],r=0,o=this._as.length;o>r;r++)n=this._as[r],e?t.call(e,n)&&i.push(n):t(n)&&i.push(n);return i}return this._as.concat()},toList:function(t,e){if(t){for(var n,i=new tl,r=0,o=this._as.length;o>r;r++)n=this._as[r],e?t.call(e,n)&&i.add(n):t(n)&&i.add(n);return i}return new tl(this)},reverse:function(){this._as.reverse()},sort:function(t){return this._as.sort(t||Ps),this},toString:function(){return this._as.toString()}}),i.defineProperties(tl.prototype,{length:{get:function(){return this._as.length},set:function(t){this._as.length=t}}});var el=new tl;Wi(el,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:oi,each:oi,reverseEach:oi,toArray:function(){return[]},toList:function(){return new tl},add:ai,addAll:ai,set:ai,remove:ai,removeAt:ai,clear:ai});var nl=d.Notifier=function(){this._f=0};uc("Notifier",i,{contains:function(t,e){if(this._ls)for(var n,i=0,r=this._ls.size();r>i;i++)if(n=this._ls.get(i),t===n.l&&e===n.s)return!0;return!1},add:function(t,e,n){var i=this,r={l:t,s:e,a:n};i._ls||(i._ls=new tl),i._f?(i._as||(i._as=new tl),i._as.add(r)):r.a?i._ls.add(r,0):i._ls.add(r)},remove:function(t,e){var n=this;n._ls&&(n._f?(n._rs||(n._rs=new tl),n._rs.add({l:t,s:e})):n._remove(t,e))},_remove:function(t,e){for(var n,i=this._ls,r=0,o=i.size();o>r;r++)if(n=i.get(r),n.l===t&&n.s===e)return void i.removeAt(r)},fire:function(t){var e=this,n=e._ls;if(e._b=1e4,n){++e._f;try{for(var i,r=0,o=n.size();o>r;r++)i=n.get(r),i.s?i.l.call(i.s,t):i.l(t)}catch(t){J((function(){throw t}))}finally{if(--e._f)return;if(e._rs){for(o=e._rs.size(),r=0;o>r;r++)i=e._rs.get(r),e._remove(i.l,i.s);delete e._rs}if(e._as){for(o=e._as.size(),r=0;o>r;r++)i=e._as.get(r),i.a?n.add(i,0):n.add(i);delete e._as}}}}});var il=d.Data=function(){this._id=Ds()};uc("Data",i,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:u,_parent:u,_children:el,_childMap:u,_styleMap:u,_layer:"0",_adjustChildrenToTop:!1,getUIClass:function(){return u},_22Q:function(){return u},s:function(t,e){var n=this;if(2===arguments.length)n.setStyle(t,e);else{if(!Ai(t))return n.getStyle(t);for(var i in t)n.setStyle(i,t[i])}return n},fp:function(t,e,n,i,r){return this.firePropertyChange(t,e,n,i,r)},firePropertyChange:function(t,e,n,i,r){if(i){if(i(e,n))return!1}else if(e===n)return!1;var o=this,a=r||{};return a.property=t,a.oldValue=e,a.newValue=n,a.data=o,o._dataModel&&o._dataModel.handleDataPropertyChange(a),o.onPropertyChanged(a),!0},onPropertyChanged:function(t){var e=this,n=e._parent,i=t.property;if(Bi(n)){var r=e.s(Gt),o="s:ingroup"===i;(r&&dl[i]||i===o)&&n._81I(),(r||o)&&n.fp("childChange",!0,!1)}Fi(n)&&dl[i]&&n.updateFromChildren()},_21I:function(t){var e=this;if(t&&e._dataModel)throw"Remove data from dataModel before adding";e._dataModel=t},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var t=0,e=this._children.toArray(),n=e.length;n>t;t++)e[t].removeFromDataModel()},getId:function(){return this._id},setId:function(t){this._id=t},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(t,e){return this._children.toList(t,e)},eachChild:function(t,e){this._children.each(t,e)},addChild:function(t,e){var n=this;t!==n&&(n._children===el&&(n._children=new tl,n._childMap={}),e>=0||(e=n._children.size()),n._childMap[t._id]||n.isDescendantOf(t)||(t._parent&&t._parent.removeChild(t),(0>e||e>n._children.size())&&(e=n._children.size()),n._children.add(t,e),n._childMap[t._id]=t,t.setParent(n),n.onChildAdded(t,e),n.fp(Ge,u,t)))},onChildAdded:function(){},removeChild:function(t){var e=this;if(e._childMap&&e._childMap[t._id]){var n=e._children.remove(t);delete e._childMap[t._id],e.fp(Ge,t,u),t.setParent(u,n),e.onChildRemoved(t,n)}},onChildRemoved:function(){},getChildAt:function(t){return this._children.get(t)},clearChildren:function(){var t=this;if(!t._children.isEmpty())for(var e=0,n=t._children.toArray(),i=n.length;i>e;e++)t.removeChild(n[e])},getParent:function(){return this._parent},setParent:function(t,e){var n=this;if(!(n._73I||n._parent===t||n===t||t&&t.isDescendantOf(n))){var i,o=n._parent;n._parent=t,n._73I=1,o?(e==u&&(e=o.getChildren().indexOf(n)),o.removeChild(n)):n._dataModel&&e==u&&(e=n._dataModel.getRoots().indexOf(n)),t&&(t.addChild(n),i=t.getChildren().indexOf(n)),delete n._73I,n.fp("parent",o,t,r,{oldIndex:e,newIndex:i}),n.onParentChanged(o,t)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(t){return!!t&&(this.isDescendantOf(t)||t.isDescendantOf(this))},isParentOf:function(t){return!(!t||!this._childMap)&&!!this._childMap[t._id]},isDescendantOf:function(t){if(!t||t.isEmpty())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e._parent}return!1},getStyle:function(t,e){e===r&&(e=1);var n=this._styleMap?this._styleMap[t]:r;return n===r&&e?g[t]:n},setStyle:function(t,e){var n=this;n._styleMap||(n._styleMap={});var i=n._styleMap[t];e===r?delete n._styleMap[t]:n._styleMap[t]=e,n.fp("s:"+t,i,e)&&n.onStyleChanged(t,i,e)},onStyleChanged:function(){},iv:function(t){this.invalidate(t)},invalidate:function(t){this.fp(t||"*",!1,!0)},toString:function(){var t=this;return t._displayName||t._name||t._tag||t._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(t,e){var n=this,i=n.s(te);i||n.s(te,i={}),e?i[t]=e:delete i[t],n.fp(te,u,i)},removeStyleIcon:function(t){var e=this.s(te);if(e){var n=e[t];delete e[t],this.fp(te,u,e)}return n},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var t,e={};for(t in this._styleMap)e[t]=1;return e},getCurrentPrefix:function(){return this._interactPrefix||Uc},ca:function(t,e){var n=this.getCurrentPrefix();return t=n+t,2===arguments.length?this.a(t,e):this.a(t)}});var rl=d.DataModel=function(){var t=this;t._datas=new tl,t._dataMap={},t._roots=new tl,t._rootMap={},t._fsDataMap={},t._78O={},t._reflectorMap={},t._36I=new nl,t._35I=new nl,t._serializeNotifier=new nl,t._selectionModel=new ol(t);var e=t._29Q=[],i=t._scheduleCallback=function(){for(var r=Date.now(),o=0;o<e.length;o++){var a=e[o];a.enabled&&r-a.lastTime>a.interval&&(a.beforeAction&&a.beforeAction(),t.each((function(t){a.action(t)})),a.afterAction&&a.afterAction(),a.lastTime=r)}e.length&&(t._30Q=n.requestAnimationFrame(i))}};uc("DataModel",i,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmap","postProcessingData","init"],_name:r,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:r,_init:r,_envmap:r,_postProcessingData:r,sm:function(){return this.getSelectionModel()},mm:function(t,e,n){this.addDataModelChangeListener(t,e,n)},umm:function(t,e){this.removeDataModelChangeListener(t,e)},md:function(t,e,n){this.addDataPropertyChangeListener(t,e,n)},umd:function(t,e){this.removeDataPropertyChangeListener(t,e)},mh:function(t,e,n){this.addHierarchyChangeListener(t,e,n)},umh:function(t,e){this.removeHierarchyChangeListener(t,e)},getAttrObject:function(){return this._attrObject},setAttrObject:function(t){return this._attrObject=t},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(t){return this._dataMap[t]},removeDataById:function(t){this.remove(this.getDataById(t))},toDatas:function(t,e){return this._datas.toList(t,e)},each:function(t,e){this._datas.each(t,e)},getDataByTag:function(t){return this._78O[t]},getTagMap:function(){return this._78O},removeDataByTag:function(t){this.remove(this.getDataByTag(t))},add:function(t,e,n){var i=this,o=t._id,a=t._tag,s=i._roots;if(i._dataMap[o])throw"'"+o+"' already exists";a!=u&&(i._78O[a]=t),i._dataMap[o]=t,n>=0?i._datas.add(t,n):i._datas.add(t),t._parent||(i._rootMap[o]=t,e>=0?s.add(t,e):s.add(t)),t.s("fullscreen")!==r&&(i._fsDataMap[o]=t),t.s("shape3d.reflector")&&(i._reflectorMap[o]=t),t._21I(i),i.onAdded(t),i._36I.fire({kind:"add",data:t,rootsIndex:e,datasIndex:n})},onAdded:function(){},remove:function(t,e){if(t){var n=this,i=t._id,r=e&&e.keepStructure,o=e&&e.keepChildren,a=t.getTag();if(t._dataModel===n){this.beginTransaction(),r?n._removingData||(n._removingData=t):n.prepareRemove(t),o||t.toChildren().each((function(t){n.remove(t,e)}),n),r?n._removingData===t&&(t._parent&&t._parent.removeChild(t),delete n._removingData):t._parent&&t._parent.removeChild(t);var s,c=n._datas.remove(t);delete n._dataMap[i],a!=u&&delete n._78O[a],n._rootMap[i]&&(delete n._rootMap[i],s=n._roots.remove(t)),n._fsDataMap[i]&&delete n._fsDataMap[i],n._reflectorMap[i]&&delete n._reflectorMap[i],t._21I(u),n.onRemoved(t),n._36I.fire({kind:Nt,data:t,rootsIndex:s,datasIndex:c}),this.endTransaction()}}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var t=this;if(t._datas.size()){var e=t._historyManager?this.toJSON():r;t._datas.toArray().forEach((function(t){t._21I(u)})),t._datas.clear(),t._dataMap={},t._roots.clear(),t._rootMap={},t._fsDataMap={},t._reflectorMap={},t._78O={},t._36I.fire({kind:Vt,json:e})}},contains:function(t){return t&&t._dataModel===this},handleDataPropertyChange:function(t){var e=this,n=t.data,i=t.property;if("parent"===i){var r=n._id,o=e._rootMap,a=e._roots;n._parent?o[r]&&(delete o[r],a.remove(n)):o[r]||(o[r]=n,a.add(n))}else if("tag"===i){var s=t.oldValue,c=t.newValue,l=e._78O;s!=u&&delete l[s],c!=u&&(l[c]=n)}else if("s:fullscreen"===i){r=n._id;var d=e._fsDataMap;t.oldValue!=u&&delete d[r],t.newValue!=u&&(d[r]=n)}else if("s:shape3d.reflector"===i){r=n._id;var h=e._reflectorMap;t.oldValue&&delete h[r],t.newValue&&(h[r]=n)}this.onDataPropertyChanged(n,t),this._35I.fire(t)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(t,e,n){this._36I.add(t,e,n)},removeDataModelChangeListener:function(t,e){this._36I.remove(t,e)},addSerializeListener:function(t,e,n){this._serializeNotifier.add(t,e,n)},removeSerializeListener:function(t,e){this._serializeNotifier.remove(t,e)},fireSerializeEvent:function(t){this._serializeNotifier.fire(t)},addDataPropertyChangeListener:function(t,e,n){this._35I.add(t,e,n)},removeDataPropertyChangeListener:function(t,e){this._35I.remove(t,e)},_38I:function(t,e,n){this._37I&&this._37I.fire({data:t,oldIndex:e,newIndex:n})},addHierarchyChangeListener:function(t,e,n){this._37I||(this._37I=new nl),this._37I.add(t,e,n)},removeHierarchyChangeListener:function(t,e){this._37I.remove(t,e)},getSiblings:function(t){var e=t._parent;return e?e._children:this._roots},eachByHierarchical:function(t,e,n){if(e)return this._eachByHierarchical(t,e,n);for(var i=0,r=this._roots,o=r.size();o>i;i++)if(!1===this._eachByHierarchical(t,r.get(i),n))return!1;return!0},_eachByHierarchical:function(t,e,n){if(n){if(!1===t.call(n,e))return!1}else if(!1===t(e))return!1;for(var i=e.size(),r=0;i>r;r++)if(!1===this._eachByHierarchical(t,e.getChildAt(r),n))return!1;return!0},reverseEachByHierarchical:function(t,e,n){if(e)return this._reverseEachByHierarchical(t,e,n);for(var i=this._roots,r=i.size(),o=r-1;o>=0;o--)if(!1===this._reverseEachByHierarchical(t,i.get(o),n))return!1;return!0},_reverseEachByHierarchical:function(t,e,n){for(var i=e.size(),r=i-1;r>=0;r--)if(!1===this._reverseEachByHierarchical(t,e.getChildAt(r),n))return!1;if(n){if(!1===t.call(n,e))return!1}else if(!1===t(e))return!1;return!0},eachByDepthFirst:function(t,e,n){if(e)return this._11I(t,e,n);for(var i=0,r=this._roots,o=r.size();o>i;i++)if(!1===this._11I(t,r.get(i),n))return!1;return!0},_11I:function(t,e,n){for(var i=e.size(),r=0;i>r;r++)if(!1===this._11I(t,e.getChildAt(r),n))return!1;if(n){if(!1===t.call(n,e))return!1}else if(!1===t(e))return!1;return!0},eachByBreadthFirst:function(t,e,n){var i=new tl;for(e?i.add(e):this._roots.each(i.add,i);i.size()>0;)if(e=i.removeAt(0),e.eachChild(i.add,i),n){if(!1===t.call(n,e))return!1}else if(!1===t(e))return!1;return!0},moveTo:function(t,e){var n=this.getSiblings(t),i=n.indexOf(t);i===e||0>i||e>=0&&e<=n.size()&&(n.remove(t),e>n.size()&&e--,n.add(t,e),this._38I(t,i,e))},moveUp:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)-1)},moveDown:function(t){this.moveTo(t,this.getSiblings(t).indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){this.moveTo(t,this.getSiblings(t).size())},moveSelectionUp:function(t){this.beginTransaction(),t||(t=this.sm());var e=new tl;Yo(t,e,this._roots),e.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(t){this.beginTransaction(),t||(t=this.sm());var e=new tl;$o(t,e,this._roots),e.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(t){this.beginTransaction(),t||(t=this.sm());var e=new tl;Xo(t,e,this._roots),e.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(t){this.beginTransaction(),t||(t=this.sm());var e=new tl;qo(t,e,this._roots),e.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(t,e,n){var i=this.getDatas();null==n&&(n=i.indexOf(t)),n===e||0>n||e>=0&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._76I(t,n,e))},bringForward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)+1)},bringToFront:function(t){this.moveToIndex(t,this.size())},sendBackward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)-1)},sendToBack:function(t){this.moveToIndex(t,0)},bringSelectionForward:function(t){this.beginTransaction(),t||(t=this.sm());for(var e=new tl,n=this.getDatas(),i=!1,r=0;r<n.size();r++){var o=n.get(n.size()-1-r);t.contains(o)?i&&e.add(o):i=!0}e.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(t){this.beginTransaction(),t||(t=this.sm());for(var e=new tl,n=this.getDatas(),i=0;i<n.size();i++){var r=n.get(i);t.contains(r)&&e.add(r)}e.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(t){this.beginTransaction(),t||(t=this.sm());for(var e=new tl,n=this.getDatas(),i=!1,r=0;r<n.size();r++){var o=n.get(r);t.contains(o)?i&&e.add(o):i=!0}e.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(t){this.beginTransaction(),t||(t=this.sm());for(var e=new tl,n=this.getDatas(),i=0;i<n.size();i++){var r=n.get(n.size()-1-i);t.contains(r)&&e.add(r)}e.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(t){var e=this;e.removeScheduleTask(t),t.enabled==u&&(t.enabled=!0),t.interval==u&&(t.interval=10),t.action==u&&(t.action=oi),t.lastTime=Date.now(),e._29Q.push(t),e._30Q==u&&(e._30Q=n.requestAnimationFrame(e._scheduleCallback))},removeScheduleTask:function(t){var e=this,i=e._29Q,r=i.indexOf(t);r>=0&&i.splice(r,1),i.length||e._30Q==u||(n.cancelAnimationFrame(e._30Q),delete e._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(t){this._historyManager||new d.HistoryManager(this),null!=t&&this._historyManager.setMaxHistoryCount(t),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(t){this._historyManager&&this._historyManager.undo(t)},redo:function(t){this._historyManager&&this._historyManager.redo(t)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(t){this._historyManager&&this._historyManager.addHistory(t)},onHistoryManagerChanged:function(){}});var ol=d.SelectionModel=function(t){var e=this;e._68O=ht,e._map={},e._73O=new tl,e._74I=new nl,e._21I(t)};uc("SelectionModel",i,{ms_fire:1,ms_dm:1,ms:function(t,e,n){this.addSelectionChangeListener(t,e,n)},ums:function(t,e){this.removeSelectionChangeListener(t,e)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===dt},co:function(t){return this._map[t._id]!=u},ss:function(t){this.setSelection(t)},as:function(t){this.appendSelection(t)},rs:function(t){this.removeSelection(t)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(t){var e=this;if(e._68O!==t&&(t===Tt||t===dt||t===ht)){e.cs();var n=e._68O;e._68O=t,e.fp("selectionMode",n,t)}},_21I:function(t){var e=this,n=e._dataModel;n!==t&&(n&&(e.cs(),n.umm(e.handleDataModelChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e,!0),e.fp(He,n,t))},dispose:function(){var t=this;t.cs(),t._dataModel.umm(t.handleDataModelChange,t)},handleDataModelChange:function(t){var e=this;if(t.kind===Nt){var n=t.data;e.co(n)&&(e._73O.remove(n),delete e._map[n._id],e._75I(Nt,new tl(n)))}else t.kind===Vt&&e.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(t){var e=this;if(e._filterFunc!==t){e.cs();var n=e._filterFunc;e._filterFunc=t,e.fp("filterFunc",n,e._filterFunc)}},_75I:function(t,e,n,i){n&&(this._73O.each((function(t){i[t._id]?n.remove(t):n.add(t)})),e=n.toList()),this._74I.fire({kind:t,datas:new tl(e)})},addSelectionChangeListener:function(t,e,n){this._74I.add(t,e,n)},removeSelectionChangeListener:function(t,e){this._74I.remove(t,e)},_97O:function(t,e){for(var n,i=this,r=0,o=new tl(t);r<o.size();r++)n=o.get(r),(i._filterFunc&&!i._filterFunc(n)||e&&i.co(n)||!e&&!i.co(n)||!i._dataModel.contains(n))&&(o.removeAt(r),r--);return o},appendSelection:function(t){var e=this;if(e._68O!==Tt){var n,i,r=e._73O,o=e._97O(t,!0);o.isEmpty()||(e.sg()&&(n=new tl(r),i=e._map,r.clear(),e._map={},o=new tl(o.get(o.size()-1))),o.each((function(t){r.add(t),e._map[t._id]=t})),e._75I("append",o,n,i))}},removeSelection:function(t){var e=this,n=e._97O(t),i=0,r=n.size();if(0!==r){for(;r>i;i++){var o=n.get(i);e._73O.remove(o),delete e._map[o._id]}e._75I(Nt,n)}},toSelection:function(t,e){return this._73O.toList(t,e)},getSelection:function(){return this._73O},each:function(t,e){this._73O.each(t,e)},setSelection:function(t){var e=this,n=e._73O;if(e._68O!==Tt&&!(n.isEmpty()&&!t||1===n.size()&&e.ld()===t)){var i=new tl(n),r=e._map;n.clear(),e._map={};var o=e._97O(t,!0);e.sg()&&o.size()>1&&(o=new tl(o.get(o.size()-1))),o.each((function(t){n.add(t),e._map[t._id]=t})),e._75I("set",u,i,r)}},clearSelection:function(){var t=this,e=t._73O;if(e.size()>0){var n=e.toList();e.clear(),t._map={},t._75I(Vt,n)}},selectAll:function(){var t=this;if(t._68O!==Tt){var e,n,i=t._dataModel.toDatas();if(t._filterFunc)for(e=0;e<i.size();e++)n=i.get(e),t._filterFunc(n)||(i.removeAt(e),e--);var r=t._73O,o=new tl(r),a=t._map;r.clear(),t._map={},t.sg()&&i.size()>1&&(i=new tl(i.get(i.size()-1)));var s=i.size();for(e=0;s>e;e++)n=i.get(e),r.add(n),t._map[n._id]=n;t._75I("all",u,o,a)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(t){return this._map[t._id]!=u},getLastData:function(){var t=this._73O;return t.size()>0?t.get(t.size()-1):u},getFirstData:function(){var t=this._73O;return t.size()>0?t.get(0):u},isSelectable:function(t){var e=this;return!(!t||e._68O===Tt)&&(!e._filterFunc||e._filterFunc(t))},getTopSelection:function(){var t=this,e=new tl;return t._73O.each((function(n){for(var i=n.getParent();i;){if(t.contains(i)){n=u;break}i=i.parent}n&&e.add(n)})),e}});var al=function(){return Ci(0),function(t,e){var n;if(Gi(e)){var i=t.getDataUI(e);i&&i._88I&&(n=i._88I.rect)}return n||e.getRect()}}();Wi(f,{edgeGroupAgentFunc:u,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:v.rectSelectBorder,graphViewRectSelectBackground:oa,graphViewEditPointSize:lt?17:7,graphViewEditPointBorderColor:v.editPointBorder,graphViewEditPointBackground:v.editPointBackground,setEdgeType:function(t,e,n){Qn[t]=e,Kn[t]=n},getEdgeType:function(t){return Qn[t]},getEdgeTypeMap:function(){return Qn},getNodeRect:al},!0),Wi(g,{"layout.h":r,"layout.v":r,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":r,interactive:!1,preventDefaultWhenInteractive:!0,"image.stretch":"fill",icons:r,ingroup:!0,"body.color":r,"2d.gray":!1,fullscreen:r,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:r,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"clip.direction":"top","clip.percentage":1,"select.color":_a,"select.width":1,"select.padding":2,"select.type":Pt,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":r,"border.width":2,"border.padding":2,"border.type":Pt,label:r,"label.font":r,"label.color":rs,"label.background":r,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":r,"label.max":r,"label.opacity":r,"label.scale":1,"label.align":r,"label.selectable":!0,label2:r,"label2.font":r,"label2.color":rs,"label2.background":r,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":r,"label2.max":r,"label2.opacity":r,"label2.scale":1,"label2.align":r,"label2.selectable":!0,note:r,"note.expanded":!0,"note.font":r,"note.color":os,"note.background":_a,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":r,"note.toggleable":!0,"note.border.width":1,"note.border.color":r,"note.opacity":r,"note.scale":1,"note.align":r,note2:r,"note2.expanded":!0,"note2.font":r,"note2.color":os,"note2.background":_a,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":r,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":r,"note2.opacity":r,"note2.scale":1,"note2.align":r,"group.type":r,"group.image":r,"group.image.stretch":"fill","group.repeat.image":r,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":r,"group.title.color":os,"group.title.background":v.groupTitleBackground,"group.title.align":pt,"group.title.orientation":yt,"group.background":v.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":r,"group.border.color":va,"group.border.radius":0,"group.border.cap":ns,"group.border.join":is,"group.splitLine":!1,"group.gradient":u,"group.gradient.color":"#FFF",shape:r,"shape.background":va,"shape.repeat.image":r,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":va,"shape.border.3d":!1,"shape.border.3d.color":r,"shape.border.3d.accuracy":r,"shape.border.cap":ns,"shape.border.join":is,"shape.border.pattern":r,"shape.gradient":u,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":es,"shape.dash.offset":0,"shape.dash.color":aa,"shape.dash.width":r,"shape.dash.3d":!1,"shape.dash.3d.color":r,"shape.dash.3d.accuracy":r,"shape.polygon.side":6,"shape.arc.from":B,"shape.arc.to":G,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":r,"shape.gradient.pack":r,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":1,"shape.foreground":r,"shape.foreground.gradient":u,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":1,"autolayout.gap":r,"autolayout.hgap":r,"autolayout.vgap":r,"edge.type":r,"edge.points":r,"edge.segments":r,"edge.color":va,"edge.width":2,"edge.width.absolute":!1,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":r,"edge.3d.accuracy":r,"edge.cap":ns,"edge.join":is,"edge.source.position":17,"edge.source.anchor.x":r,"edge.source.anchor.y":r,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":r,"edge.target.anchor.y":r,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":r,"edge.dash":!1,"edge.dash.pattern":es,"edge.dash.offset":0,"edge.dash.color":aa,"edge.dash.width":r,"edge.dash.3d":!1,"edge.dash.3d.color":r,"edge.dash.3d.accuracy":r,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":r,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":r,"grid.column.percents":r,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":v.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":v.gridCellBorderColor,"grid.block":r,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":v.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":rs,"text.font":as,"text.shadow":!1,"text.shadow.color":_a,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,_62O:r},!0),Wi(rl,{_76I:function(t,e,n){this._39I&&this._39I.fire({data:t,oldIndex:e,newIndex:n})},addIndexChangeListener:function(t,e,n){var i=this;i._39I||(i._39I=new nl),i._39I.add(t,e,n)},removeIndexChangeListener:function(t,e){this._39I.remove(t,e)},prepareRemove:function(t){Li(t)&&(t.setSource(u),t.setTarget(u)),t._70O&&t._70O.toList().each(this.remove,this),t._69O&&t._69O.toList().each((function(t){t.setHost(u)})),t._host&&t.setHost(u)},onAdded:function(t){this.isAutoAdjustIndex()&&this.adjustIndex(t)},onDataPropertyChanged:function(t,e){ul[e.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(t)},isAdjustable:function(t){return Vi(t)||Li(t)},isAdjustedToBottom:function(t){return!!Bi(t)&&(t.isExpanded()&&ml(t))},adjustIndex:function(t){var e=this;this.isHierarchicalRendering()||(e.isAdjustedToBottom(t)?(e.sendToBottom(t),t.eachChild(e.adjustIndex,e)):e.sendToTop(t))},sendToTop:function(t){var e=this;if(e.contains(t)&&e.isAdjustable(t)){var n=e._datas;if(t!==n.get(e.size()-1)){var i=n.indexOf(t);n.removeAt(i),n.add(t),e._76I(t,i,e.size()-1)}if(Li(t)){var r=t._40I;r&&!e.isAdjustedToBottom(r)&&e.sendToTop(r),r=t._41I,r&&!e.isAdjustedToBottom(r)&&e.sendToTop(r)}t._69O&&t._69O.each((function(n){n.isRelatedTo(t)||Vi(t)&&n.isLoopedHostOn(t)||e.sendToTop(n)})),t.ISubGraph||(!Bi(t)||t.isExpanded())&&t._adjustChildrenToTop&&t.eachChild((function(t){Li(t)||e.sendToTop(t)}))}},sendToBottom:function(t,e){var n=this;if(t!==e&&n.contains(t)&&n.isAdjustable(t)&&(!e||n.contains(e))){var i=n._datas,r=i.remove(t),o=e?n._datas.indexOf(e):0;if(i.add(t,o),r!==o){n._76I(t,r,o);var a=t._parent;!a||a.ISubGraph||Li(a)||n.sendToBottom(t._parent,t)}}}}),Wi(Wa,{ms_edit:function(t){t._46O=function(t){var e=this,n=e.gv.dm(),i=e._index,r=e._89I,o=e._node,a=e._shape,s=e._edge,c=e._77I;o&&r?(this.fi({kind:"endEditRect",event:t,data:o,direction:r}),n.endTransaction()):a&&i>=0?(e.fi({kind:"endEditPoint",event:t,data:a,index:i}),n.endTransaction()):s&&i>=0?(e.fi({kind:"endEditPoint",event:t,data:s,index:i}),n.endTransaction()):c&&(e.fi({kind:"endEditRotation",event:t,data:c}),n.endTransaction())},t._78I=function(t){var e=this;e.autoScroll(t);var n=e.gv.lp(t),i=e._index,r=e._89I,o=e._node,a=e._shape,s=e._edge,c=e._77I;if(o&&r)e._80O(n),e.fi({kind:"betweenEditRect",event:t,data:o,direction:r});else if(a&&i>=0)n.e=a.getPoints().get(i).e,a.setPoint(i,n),e.fi({kind:"betweenEditPoint",event:t,data:a,index:i});else if(s&&i>=0){var l=s.s(se);n.e=l.get(i).e,l.set(i,n),s.fp(se,u,l),e.fi({kind:"betweenEditPoint",event:t,data:s,index:i})}else if(c){var d=c.p(),h=c.getScale(),f=F+H(n.y-d.y,n.x-d.x);h.y<0&&(f+=B),k(f)<.04&&(f=0),c.setRotation(f),e.fi({kind:"betweenEditRotation",event:t,data:c})}},t._80O=function(t){var e=this,n=e._node,i=e._rect,r=i.x,o=i.y,a=i.width,s=i.height,c=e._89I,l=e._anchor,u=e._matrix;t=u.tfi(t);"northwest"===c?i=qs(t,{x:r+a,y:o+s}):c===St?i=qs({x:r,y:t.y},{x:r+a,y:o+s}):"northeast"===c?i=qs({x:r,y:t.y},{x:t.x,y:o+s}):c===It?i=qs({x:t.x,y:o},{x:r+a,y:o+s}):c===wt?i=qs({x:r,y:o},{x:t.x,y:o+s}):"southwest"===c?i=qs({x:t.x,y:o},{x:r+a,y:t.y}):"south"===c?i=qs({x:r,y:o},{x:r+a,y:t.y}):"southeast"===c&&(i=qs({x:r,y:o},t)),n.setPosition(u.tf(i.x+i.width*l.x,i.y+i.height*l.y)),n.setWidth(i.width),n.setHeight(i.height)},t._80I=function(t,e,n,i){var r=this,o=r.gv._zoom,a=(r.gv.getEditPointSize()+2)/o;return!!Ys({x:e-a/2,y:n-a/2,width:a,height:a},t)&&(r._89I!==i&&(r._89I=i),!0)},t._79I=function(t,e,n){var i=this,r=i.gv,o=e?r.getDataUI(e):u,a=o?o._55O:u;if(a){var s,c,l=r._zoom,d=(r.getEditPointSize()+2)/l,h=r.lp(t);if(Vi(e)){if(a._56O&&Vi(e)&&(s=a._98o,Ys({x:s.x-d/2,y:s.y-d/2,width:d,height:d},h)))return i._77I=e,n&&i.fi({kind:"beginEditRotation",event:t,data:e}),i.setCursor("crosshair"),!0;if(a._43O&&e instanceof td)for(c=e.getPoints(),p=c.size()-1;p>=0;p--)if(s=c.get(p),Ys({x:s.x-d/2,y:s.y-d/2,width:d,height:d},h))return i._index=p,i._shape=e,n&&i.fi({kind:"beginEditPoint",event:t,data:e,index:p}),i.setCursor("crosshair"),!0;if(a._42O)for(var f=e.getEditControlPoints(),g=["northwest",-1,-1,It,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,wt,1,0,"northeast",1,-1,St,0,-1],p=0,v=f.length;v>p;p++){var y=g[3*p],_=f[p];if(i._80I(h,_.x,_.y,y)){i._node=e;var m=e.getWidth(),b=e.getHeight(),x=e.getAnchor();i._rect={x:-m*x.x,y:-b*x.y,width:m,height:b},i._anchor=x,i._matrix=e.getMatrix();var w=e.getRotation(),I=R(w),S=N(w),T=g[3*p+1]*tr(e.getScale().x),C=g[3*p+2]*tr(e.getScale().y),M=Math.atan2(-S*T-I*C,I*T-S*C),D=(Math.round(M/(Math.PI/4))+8)%8,E=[gn,"nesw-resize",pn,"nwse-resize",gn,"nesw-resize",pn,"nwse-resize"][D];return i.setCursor(E),n&&i.fi({kind:"beginEditRect",event:t,data:e,direction:i._89I}),!0}}}if(a._43O&&Li(e)&&e.s(ce)===Wt&&(c=e.s(se)))for(p=c.size()-1;p>=0;p--)if(s=c.get(p),Ys({x:s.x-d/2,y:s.y-d/2,width:d,height:d},h))return i._index=p,i._edge=e,n&&i.fi({kind:"beginEditPoint",event:t,data:e,index:p}),i.setCursor("crosshair"),!0}return!1}},ms_gv:function(t){t._currentSubGraph=u,t._fpsInfo={time:0,fps:0,frames:0},t.upSubGraph=function(){this.setCurrentSubGraph(yl(this._currentSubGraph))},t.isVisible=function(t){var e=this;if(yl(t)!==e._currentSubGraph)return!1;if(Li(t)){var n=t._40I,i=t._41I;if(!n||!i)return!1;if(!(t.s("edge.independent")||e.isVisible(n)&&e.isVisible(i)))return!1;if(t.isEdgeGroupHidden())return!1}else for(var r=t._parent;r&&!r.ISubGraph;){if(Bi(r)&&(!r.isExpanded()||!e.isVisible(r)))return!1;r=r._parent}if(t._parent instanceof Qu&&!e.isVisible(t._parent))return!1;if(t._refGraph instanceof id&&!e.isVisible(t._refGraph))return!1;if(e instanceof Ap){if(!t.s("3d.visible"))return!1}else{var o=e.getLayersInfo();if(o){var a=o[t._layer];if(a&&!1===a.visible)return!1}if(!t.s("2d.visible"))return!1}return!e._visibleFunc||e._visibleFunc(t)},t.handleSelectionChange=function(t){var e=this;t.datas.each((function(t){e.invalidateData(t);var n=t._parent;Bi(n)&&Vi(t)&&t.s(Gt)&&(e.invalidateData(n),n._49I&&n._49I.each((function(t){e.invalidateData(t)})))})),e.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,n=e.sm();if(1===n.size()&&("set"===t.kind||"append"===t.kind)){var i=n.ld();e.isAutoMakeVisible()&&e.makeVisible(i),e.adjustIndex&&e._dataModel.isAutoAdjustIndex()&&e.adjustIndex(i)}},t.makeVisible=function(t){if(t){var e=this,n=e.getDataUI?e.getDataUI(t):e.getData3dUI(t);if(n){var i=t,r=yl(t);for(r!==e._currentSubGraph&&e.setCurrentSubGraph(r);(i=i._parent)&&i!==r;)Bi(i)&&i.setExpanded(!0);e._23I=t,e.iv()}}},t.getLabel=function(t){var e=t.getStyle($t);return e===r?t.getName():e},t.getLabelBackground=function(t){return t.getStyle("label.background")},t.getLabelColor=function(t){return t.getStyle("label.color")},t.getLabel2=function(t){return t.getStyle("label2")},t.getLabel2Background=function(t){return t.getStyle("label2.background")},t.getLabel2Color=function(t){return t.getStyle("label2.color")},t.getNote=function(t){return t.getStyle(Jt)},t.getNoteBackground=function(t){return t.getStyle("note.background")},t.getNote2=function(t){return t.getStyle(Kt)},t.getNote2Background=function(t){return t.getStyle("note2.background")},t.handleClick=function(t,e,n){var i=this;e?(i.fi({kind:"clickData",event:t,data:e,part:n}),i.onDataClicked(e,t)):(i.fi({kind:"clickBackground",event:t}),i.onBackgroundClicked(t))},t.handleDoubleClick=function(t,e,n){var i=this;Ls(t)&&(e?(i.fi({kind:"doubleClickData",event:t,data:e,part:n}),i.onDataDoubleClicked(e,t,n),i.checkDoubleClickOnNote(t,e,n)||i.checkDoubleClickOnRotation&&i.checkDoubleClickOnRotation(t,e,n)||(Li(e)?i.onEdgeDoubleClicked(e,t,n):e.ISubGraph?i.onSubGraphDoubleClicked(e,t,n):Bi(e)?i.onGroupDoubleClicked(e,t,n):e.IDoorWindow?i.onDoorWindowDoubleClicked(e,t,n):e.ICSGBox&&i.onCSGBoxDoubleClicked(e,t,n))):(i.fi({kind:"doubleClickBackground",event:t}),i.onBackgroundDoubleClicked(t)))},t.onSubGraphDoubleClicked=function(t){this.setCurrentSubGraph(t)},t.onEdgeDoubleClicked=function(t,e){t.ISubGraph&&!Hs(e)?this.setCurrentSubGraph(t):t.s("edge.toggleable")&&t.toggle()},t._39Q=function(t){return!!this.isInteractive(t)&&this.preventDefaultWhenInteractive(t)},t.preventDefaultWhenInteractive=function(t){return t.s("preventDefaultWhenInteractive")},t.onGroupDoubleClicked=function(t){t.s("group.toggleable")&&t.toggle()},t.onDoorWindowDoubleClicked=function(t){t.s("dw.toggleable")&&t.toggle(!0)},t.onCSGBoxDoubleClicked=function(t,e){var n=this;if(n instanceof Ap){var i=n.getHitFaceInfo(e);i&&i.face&&t.s(i.face+".toggleable")&&t.toggleFace(i.face,!0)}},t.onBackgroundClicked=function(){},t.onBackgroundDoubleClicked=function(){this.upSubGraph()},t.onDataClicked=function(){},t.onDataDoubleClicked=function(){},t.onAutoLayoutEnded=function(){},t.onMoveEnded=function(){},t.onPanEnded=function(){},t.onPinchEnded=function(){},t.onRectSelectEnded=function(){},t.onZoomEnded=function(){},t.serialize=function(t){return this.dm().serialize(t)},t.toJSON=function(){return this.dm().toJSON()},t.deserialize=function(t,e){var n=this;e=e instanceof il?{rootParent:e}:Oi(e)?{setId:e}:ki(e)?{finishFunc:e}:e||{},e.view=n;var i=n.dm(),r=e.finishFunc;return e.finishFunc=function(){r&&r.apply(e,arguments),Oi(i.a("zoomable"))&&n.setZoomable&&n.setZoomable(i.a("zoomable")),Oi(i.a("pannable"))&&n.setPannable&&n.setPannable(i.a("pannable")),Oi(i.a("rectSelectable"))&&n.setRectSelectable&&n.setRectSelectable(i.a("rectSelectable")),!0===i.a("fitContent")&&n.fitContent&&n.fitContent(!0,0)},i.deserialize(t,e.rootParent,e)},t.showDebugTip=function(){var t=this,e=t._debugDiv;if(!e){e=t._debugDiv=l.createElement("div"),e.style.position="absolute",e.style.overflow="hidden",e.style.backgroundColor="white",e.style.color="black";var n=t.getView();t._79O?n.insertBefore(e,t._79O):n.appendChild(e);var i=function n(){t.redraw();var i="FPS : "+t._fpsInfo.fps+"<br/>Datas : "+t.dm().getDatas().length,r=t.getDebugTip();r&&(i+="<br/>------<br/>"+r),e.innerHTML=i,t._isDebugging&&requestAnimationFrame(n)};requestAnimationFrame(i),t._isDebugging=!0}},t.hideDebugTip=function(){var t=this,e=t._debugDiv;e&&(delete t._debugDiv,t.getView().removeChild(e),t._isDebugging=!1)},t.updateDOMAppendMatrix=function(){var t=this.getView();t&&(t.updateAppendMatrix=!0)},t.countFrame=function(){if(this._isDebugging){var t=Date.now(),e=this._fpsInfo;t-e.time>1e3?(e.fps=Math.round(1e5*(e.frames+1)/(t-e.time))/100,e.time=t,e.frames=0):e.frames++}}},ms_icons:function(t){t.getRotation=function(t){return t==u?0:t},t._15O=function(){var t=this,e=t.s(te);if(e){var n=t,i=t.data||t._data,r=t._38o={icons:e,rects:{}};for(var o in e){var a=e[o],s=Jc(a.shape3d,i,n);if(!(!1===Jc(a.visible,i,n)||Jc(a.for3d,i,n)&&!t.I3d||s&&!t.I3d)){var c=s?[s]:Jc(a.names,i,n),l=c?c.length:0,d=Jc(a.position,i,n)||3,h=Jc(a.offsetX,i,n)||0,f=Jc(a.offsetY,i,n)||0,g=Jc(a.direction,i,n)||wt,p=Jc(a.gap,i,n),v=p!=u?p:1,y=Jc(a.rotation,i,n),_=Jc(a.keepOrien,i,n),m=Jc(a.rotationFixed,i,n)?y:t.getRotation(y,_,d),b=u,x=r.rects[o]=new Array(l);x.rotation=m;for(var w=0;l>w;w++){var I,S,T,C,M=c[w];if(s)T=0,C=0;else{var D=Ss(M);T=Jc(a.width,i,n),C=Jc(a.height,i,n),T==u&&(T=$c(D,i)),C==u&&(C=Qc(D,i))}if(b?g===wt?h+=T/2:g===It?h-=T/2:g===St?f-=C/2:f+=C/2:b={width:T,height:C},t.I3d){var E=-T/2,P=-C/2;S={width:T,height:C,mat:t._16O(Jc(a.autorotate,i,n),d,b,Jc(a.face,i,n)||ft,Jc(a.t3,i,n),Jc(a.r3,i,n),Jc(a.rotationMode,i,n),h,f),vs:new gc([E,-P,0,E,-P-C,0,E+T,-P-C,0,E+T,-P,0])}}else I=t.getPosition(d,h,f,b,Jc(a.positionFixed,i,n)),S={x:I.x-T/2,y:I.y-C/2,width:T,height:C},t._68o(S,m);x[w]=S,g===wt?h+=T/2+v:g===It?h-=T/2+v:g===St?f-=C/2+v:f+=C/2+v}}}}}}});var sl={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},cl={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},ll={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},ul={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},dl={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},hl={"edge.type":1,"edge.group":1},fl={rotation:1,rotationX:1,rotationZ:1},gl={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},pl={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},vl={shape:1,thickness:1,position:1,anchor:1,scale:1},yl=function t(e){if(!e)return u;if(Li(e)){var n=e._40I,i=e._41I;if(!n||!i)return u;var r=t(n),o=t(i);return r===o?r:u}for(var a=e._parent;Li(a)&&!a.ISubGraph;)a=a._parent;return a?a.ISubGraph?a:t(a):u},_l=function(t,e,n,i){var r=e.getStyle(n)*i;r&&tc(t,r),r=e.getStyle(n+".left")*i,r&&(t.x-=r,t.width+=r),r=e.getStyle(n+".right")*i,r&&(t.width+=r),r=e.getStyle(n+".top")*i,r&&(t.y-=r,t.height+=r),r=e.getStyle(n+".bottom")*i,r&&(t.height+=r),t.width<0&&(t.width=-t.width,t.x-=t.width),t.height<0&&(t.height=-t.height,t.y-=t.height)},ml=function t(e){for(var n,i=0,r=e.size();r>i;i++)if(n=e.getChildAt(i),Vi(n)&&t(n))return!0;return e.hasAgentEdges()},bl=function(t){if(!t)return u;for(var e=t._parent;Bi(e);){if(!Bi(e._parent))return e.isExpanded()?t:e;e.isExpanded()||(t=e),e=e._parent}return t},xl=function(t,e){if(!t||!e)return u;var n,i,r,o=yl(t),a=yl(e);if(o!==a){for(;a&&o!==a;)a=yl(a);if(o===a)return t;n=new tl,n.add(t,0);for(var s=t._parent;Vi(s)&&!e.isDescendantOf(s);)n.add(s,0),s=s._parent;for(r=n.size(),i=0;r>i;i++){var c=n.get(i);if(Bi(c)&&!c.isExpanded())return c;if(c.ISubGraph)return c}return t}return t},wl=function(t){if(t.isLooped())return t._source;var e=bl(t._source),n=bl(t._target);return e===n?t._source:xl(e,n)},Il=function(t){if(t.isLooped())return t._target;var e=bl(t._source),n=bl(t._target);return e===n?t._target:xl(n,e)},Sl=function(t,e,n){"target"!==n&&(n="source");var i="target"===n?e.getTargetAgent():e.getSourceAgent(),o="edge."+n+".";if(Li(i)){var a=t.getDataUI(i);a._79o();var s=e.s(o+"index");if(s!==r){var c=Yl(a);return c[Math.max(0,Math.min(s,c.length-1))]}var l=e.s(o+"percent")||0;l=Math.max(0,Math.min(l,1));var u=Ul(a);return Xl(u,100*l)}return Tl(t,i,e.s(o+"position"),e.s(o+"offset.x"),e.s(o+"offset.y"),e.s(o+"anchor.x"),e.s(o+"anchor.y"))},Tl=function(t,e,n,i,o,a,s){if(!e)return u;var c,l=e.getRotation?e.getRotation():0;if(a!==r||s!==r){a=a===r?.5:a,s=s===r?.5:s;var d=e.getScale();if(l&&!Gi(e,t)||d.x<0||d.y<0){var h=e.getPosition(),f=e.getWidth(),g=e.getHeight(),p=e.getAnchor(),v=new ka(l,h.x,h.y,d.x,d.y);n=v.tf((a-p.x)*f,(s-p.y)*g)}else c=al(t,e),n={x:c.x+a*c.width,y:c.y+s*c.height}}else n=na(n,al(t,e));if(l){var y=R(l),_=N(l),m=i*y-o*_;o=i*_+o*y,i=m}return n.x+=i,n.y+=o,n},Cl=function(t,e){if(!t||!e)return u;var n,i,r,o,a,s;if(t===e){if(o=t.getLoopedEdges(),!o)return u;o=new tl(o)}else{if(a=t.getAgentEdges(),s=e.getAgentEdges(),!a||!s)return u;for(i=a.size(),n=0;i>n;n++)r=a.get(n),s.contains(r)&&(o||(o=new tl),o.add(r))}if(o)for(n=0;n<o.size();n++)r=o.get(n),r.getStyle(ce)===Wt&&(r._22I(u),o.removeAt(n),n--);return o},Ml=function(t,e){var n=Cl(t,e);if(n&&!n.isEmpty()){if(1===n.size())return void n.get(0)._22I(u);var i=new tl,r=new tl;n.each((function(t){var e=t.s("edge.group");i.contains(e)||i.add(e)})),i.sort(),i.each((function(t){r.add(new d.EdgeGroup(n.toList((function(e){return t===e.s("edge.group")})),r))})),r.each((function(t){t.each((function(e){e._22I(t)}))}))}},Dl=function(t,e,n){var i=t._canvas;t._zoom;var r=ec(e,i),o=ec(n,i);return{x:r.x-o.x,y:r.y-o.y}},El=function(t,e){if(e){var n=e.rect,i=e.color,r=e.rotation,o=e.labelWidth,a=e.background,s=e.opacity,c=e.scale,l=c!=u&&1!==c;if(s!=u){var d=t.globalAlpha;t.globalAlpha*=s}if(r||l){t.save();var h=n.x+n.width/2,f=n.y+n.height/2;Ar(t,h,f),r&&kr(t,r),l&&t.scale(c,c),Ar(t,-h,-f)}if(a&&Po(t,n.x,n.y,n.width,n.height,a),o){var g=n.width,p=t.createLinearGradient(n.x,n.y,n.x+g,n.y);p.addColorStop(0,i),p.addColorStop(.9,i),p.addColorStop(1,on),i=p,n.width=o}Sr(t,e.ss,n,e.font,i,e.align),o&&(n.width=g),(r||l)&&t.restore(),s!=u&&(t.globalAlpha=d)}},Pl=function(t,e){if(e){var n=e.rect,i=n.x,r=n.y,o=n.width,a=n.height,s=e.background,c=e.backgroundImage,l=e.borderWidth,d=e.borderColor,h=e.labelWidth,f=e.opacity,g=e.scale,p=g!=u&&1!==g;if(f!=u){var v=t.globalAlpha;t.globalAlpha*=f}if(p){t.save();var y=n.x+n.width/2,_=n.y+n.height/2;Ar(t,y,_),t.scale(g,g),Ar(t,-y,-_)}if(e.expanded){var m=A(8,o/4),b=r+a-8;if(t.fillStyle=s,t.beginPath(),t.moveTo(i,r),t.lineTo(i,b),t.lineTo(i+o/2,b),t.lineTo(i+o/2,r+a),t.lineTo(i+o/2+m,b),t.lineTo(i+o,b),t.lineTo(i+o,r),t.closePath(),t.fill(),l&&(t.lineWidth=l,t.lineJoin="round",t.lineCap="round",d?(t.strokeStyle=d,t.stroke()):(t.strokeStyle=zs(s),t.beginPath(),t.moveTo(i+o,r),t.lineTo(i+o,b),t.lineTo(i+o/2+m,b),t.lineTo(i+o/2,r+a),t.stroke(),t.strokeStyle=Rs(s),t.beginPath(),t.moveTo(i+o,r),t.lineTo(i,r),t.lineTo(i,b),t.lineTo(i+o/2,b),t.lineTo(i+o/2,r+a),t.stroke())),c)Ms(t,Ss(c),nn,n.x,n.y,n.width,n.height-8,e.data,e.view);else{if(n.height-=8,s=e.color,h){var x=o,w=t.createLinearGradient(i,r,i+x,r);w.addColorStop(0,s),w.addColorStop(.9,s),w.addColorStop(1,on),s=w,n.width=h}Sr(t,e.ss,n,e.font,s,e.align),h&&(n.width=x),n.height+=8}}else if(e.icon)Kc(t,Ss(e.icon),i,r,o,a,e.data,e.view);else{var I=o/2;l&&(t.lineWidth=l,t.lineJoin="round",t.lineCap="round",t.strokeStyle=d||zs(s),t.beginPath(),t.arc(i+I,r+I,I,F,1.6*B,!0),t.moveTo(i+I,r+a),t.lineTo(i+o-I/5,r+I),t.stroke(),t.strokeStyle=d||Rs(s),t.beginPath(),t.arc(i+I,r+I,I,1.6*B,F,!0),t.moveTo(i+I,r+a),t.lineTo(i+I/5,r+I),t.stroke()),t.fillStyle=s,t.beginPath(),t.arc(i+I,r+I,I,0,G,!0),t.moveTo(i+I,r+a),t.lineTo(i+o-I/5,r+I),t.lineTo(i+I/5,r+I),t.closePath(),t.fill(),t.fillStyle=e.color,t.beginPath(),t.arc(i+I,r+I,I/3,0,G,!0),t.fill()}p&&t.restore(),f!=u&&(t.globalAlpha=v)}},Ol=function(t,e){return e>2*t?t:e/2},Al=function(t,e,n,i){if(!t||!e)return 0;var r=H(e.y-t.y,e.x-t.x);return n||(r=e.x<t.x?r+B:r),r+i},kl=function(t,e,n,i,r,o,a){a&&(t.x>e.x||t.x===e.x&&t.y>e.y)&&(n=ea[n],r=-r);var s=na(n,{x:0,y:0,width:Ws(t,e),height:0},o);return s.x+=i,s.y+=r,s=new ka(H(e.y-t.y,e.x-t.x)).tf(s),s.x+=t.x,s.y+=t.y,s},Rl=function(t,e,n,i,r){if(t._19Q=!0,!n.getEdgeGroup())return i?n.s("edge.gap"):0;if(Li(n.getSourceAgent())||Li(n.getTargetAgent()))return 0;var o,a=0,s=0,c=0;if(n.getEdgeGroup().getSiblings().each((function(t){t.each((function(t){if(e.isVisible(t)&&t.s(ce)==r){var i=t.s("edge.gap");o?(s+=c/2+i/2,c=i):(o=t,c=i),t===n&&(a=s)}}))})),i)return s-a+c;var l=a-s/2;return o&&n._40I!==o._40I&&(t._19Q=!1),l},zl=function(){var t=function(t){var e=[];return t.forEach((function(t){e.push({x:t.x,y:t.y}),e.push({x:t.x+t.width,y:t.y+t.height}),e.push({x:t.x+t.width,y:t.y}),e.push({x:t.x,y:t.y+t.height})})),e};return function(e,n,i){if("oval"===e){var r=0,o=i.height/i.width,a=o*o,s=i.x+i.width/2,c=i.y+i.height/2,l=t(n);l.forEach((function(t){var e=t.x-s,n=t.y-c,i=e*e+n*n/a;i>r&&(r=i)})),r=P(r);var u=o*r;return{x:s-r,y:c-u,width:2*r,height:2*u}}if("circle"===e){var d=0;s=i.x+i.width/2,c=i.y+i.height/2,l=t(n);return l.forEach((function(t){var e=t.x-s,n=t.y-c,i=e*e+n*n;i>d&&(d=i)})),d=P(d),{x:s-d,y:c-d,width:2*d,height:2*d}}return"roundRect"===e?(tc(i,A(i.width,i.height)/16),i):i}}(),Nl=d.graph={},Vl=function(t,e,n){lc(c+".graph."+t,e,n)};d.layout={};var Ll={},Bl=function(t,e,n,i,r,o,a,s){var c=[e.uuid,Math.round(i),Math.round(r),n].join("_");e.cacheRule&&(c+=Jc(e.cacheRule,o,a));var l=a._zoom;l!==a._cacheZoom&&(a._cacheZoom=l,a._cacheImage={}),l*=Ya;var u=a._cacheImage[c];return u||(u=a._cacheImage[c]=d.Default.toCanvas(e,Math.ceil(i*l),Math.ceil(r*l),n,o,a,s)),u};Wi(f,{setImageCacheRule:function(t,n){var i;for(var r in i=n||"object"!=e(t)?{_image:n}:t,i){var o=i[r];Ei(r)?(lc=Ss(r),lc?lc.cacheRule=o:Ll[r]=o):r.cacheRule=o}}});var Gl={comps:[{type:kt,points:[85,50,70,115,100,71,86,107,88,49,47,78,67,48,110,116,103,100,119,81,76,68,105,75,83,66,114,71,51,102,107,73,87,101,51,78,72,113,77,71,80,115,65,61],borderWidth:1,borderColor:u}]};if(Gl[Lt]=Gl[Bt]=160,n.Image){var Fl=new n.Image;Fl.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",Is("default_blank",Fl)}Is("node_image",_i(30,30,[{type:Pt,rect:[4,5,22,16],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[2,3,26,20],borderWidth:1,borderColor:va},{type:Pt,rect:[11,23,8,4],background:va},{type:Pt,rect:[6,27,18,2],background:va}])),Is("node_icon",_i(16,16,[{type:Pt,rect:[2,2,12,10],gradient:Ja,gradientColor:ya,background:va},{type:Dt,rect:[2,2,12,10],width:1,color:va},{type:Pt,rect:[6,12,4,2],background:va},{type:Pt,rect:[4,14,8,1],background:va}])),Is("block_icon",_i(16,16,[{type:Dt,rect:[1,1,14,14],width:1,color:va}])),Is("group_image",_i(66,39,[{type:Pt,rect:[44.3,18,18.1,12.8],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[3.3,17.8,18.1,12.8],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:va,gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[26.2,29.4,12.8,4.2],background:va},{type:Pt,rect:[21.3,33.5,22.5,2.3],background:va},{type:Pt,rect:[5.3,32.7,14.1,2.1],background:va},{type:Pt,rect:[9,30.4,6.7,2.4],background:va},{type:Pt,rect:[50,30.7,6.7,2.4],background:va},{type:Pt,rect:[46.3,33,14.1,2.1],background:va}])),Is("group_icon",_i(16,16,[{type:Pt,rect:[4,12,4,2],background:va},{type:Pt,rect:[2,13,8,1],background:va},{type:Pt,rect:[12,12,2,1],background:va},{type:Pt,rect:[11,13,4,1],background:va},{type:Pt,rect:[10,7,6,5],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[1,2,10,10],gradient:Ja,gradientColor:ya,background:va},{type:Dt,rect:[1,2,10,10],width:1,color:va}])),Is("refGraph_icon",_i(16,16,[{type:"shape",borderWidth:1,borderColor:va,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:va,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),Is("edge_icon",_i(16,16,[{type:Pt,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[10.8,1,4,4],background:va},{type:Pt,rect:[1,11,4,4],background:va}])),Is("subGraph_image",_i(72,45,[{type:kt,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[29.6,30.7,3.6,1.8],background:va},{type:Pt,rect:[28.4,32.3,6,1.2],background:va},{type:Pt,rect:[37.3,32,10.8,1.8],background:va},{type:Pt,rect:[39.1,29.9,7.2,2.3],background:va},{type:Pt,rect:[26.6,23.7,9.6,7.2],gradient:Ja,gradientColor:ya,background:va},{type:Pt,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:va,gradient:Ja,gradientColor:ya,background:va}])),Is("subGraph_icon",_i(17,17,[{type:kt,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Ja,gradientColor:ya,background:va}])),Is("shape_icon",_i(16,16,[{type:kt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:va}])),Is("polyline_icon",_i(16,16,[{type:kt,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:va},mi(7.5,.4),mi(7.5,6.3),mi(13.6,6.3),mi(13.6,14),mi(.7,13.9),mi(.7,.3)])),Is("grid_icon",_i(16,16,[{type:Pt,rect:[1,1,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[6,1,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[11,1,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[11,6,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[6,6,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[1,6,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[11,11,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[6,11,4,4],background:va,gradient:Ja,gradientColor:ya},{type:Pt,rect:[1,11,4,4],background:va,gradient:Ja,gradientColor:ya}])),Is("light_icon",_i(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:va},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:va,gradient:Ja,gradientColor:ya,background:{func:function(t){var e=t?t.s(bh):u;return Ri(e)?"rgb("+X(255*e[0])+","+X(255*e[1])+","+X(255*e[2])+")":e||va}}}])),Is("text_icon",_i(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:va}])),Is("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),Is("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),Is("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),Is("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var jl=function(t,e,n,i,r,o){var a,s,c,l,u,d,h,f,g,p,v,y=[];if(Math.abs(i)>2*Math.PI&&(i=2*Math.PI),u=Math.ceil(Math.abs(i)/(Math.PI/4)),a=i/u,s=-a,c=-n,u>0){d=t+Math.cos(n)*r,h=e+Math.sin(-n)*o,y.push({x:d,y:h});for(var _=0;u>_;_++)c+=s,l=c-s/2,f=t+Math.cos(c)*r,g=e+Math.sin(c)*o,p=t+Math.cos(l)*(r/Math.cos(s/2)),v=e+Math.sin(l)*(o/Math.cos(s/2)),y.push({x:p,y:v}),y.push({x:f,y:g})}return y},Hl=function(t){if(t){var e,n=t._data;if(n instanceof d.Shape)return{points:n.getPoints(),segments:n.getSegments()};if(n instanceof d.Edge&&(e=t._78o)){var i,r,o=e.type,a=e.points,s=e.segments,c=e.edgeTypeInfo;if(!o||a){var l=e.sourcePoint,u=l.x,h=l.y,f=e.targetPoint,g=f.x,p=f.y;if(o)s?(i=new tl({x:u,y:h}),i.addAll(a),i.add({x:g,y:p}),r=new tl(s._as)):(i=new tl({x:u,y:h}),a.each((function(t){i.add(t)})),i.add({x:g,y:p}));else if(e.looped){i=new tl(jl(u,h,0,2*Math.PI,e.radius,e.radius)),r=new tl([1]);for(var v=0;v<(i.size()-1)/2;v++)r.add(3)}else i=new tl,e.center?(i.add({x:e.c1.x,y:e.c1.y}),i.add({x:u,y:h}),i.add({x:g,y:p}),i.add({x:e.c2.x,y:e.c2.y})):(i.add({x:u,y:h}),i.add({x:g,y:p}))}else c&&(i=new tl(c.points._as),c.segments&&(r=new tl(c.segments._as)));return{points:i,segments:r}}}},Ul=function(t,e,n){if(null==e){var i=Hl(t);if(!i)return;e=i.points,n=i.segments}if(e){if(Array.isArray(e)&&(e=new tl(e)),"number"==typeof e.get(0)){for(var r=new d.List,o=0;o<e.size();o+=2)r.add({x:e.get(o),y:e.get(o+1)});e=r}if(!n){n=[1];for(var a=e.length-1;a>0;a--)n.push(2)}Array.isArray(n)&&(n=new tl(n));var s=Mo(e._as,n._as,50),c=s.length,l=[];for(o=0;c>o;o++){var u=s[o];u.length>1&&l.push(u)}return l}},Zl=function(t){for(var e=0,n=t.length-1,i=0;n>i;i++){var r=t[i],o=t[i+1],a=o.x-r.x,s=o.y-r.y;e+=Math.sqrt(a*a+s*s)}return e},Wl=function(t,e){for(var n=0,i=e.length,r=0;i>r;r++){var o=e[r];if(n+=o,n>t)return r}return Math.min(r,i-1)},ql=function(t,e){for(var n=0,i=0,r=0,o=t.length-1,a=0;o>a;a++){var s=t[a],c=t[a+1],l=c.x-s.x,u=c.y-s.y;if(r=Math.sqrt(l*l+u*u),n+=r,n>e){n-=r,i=a;break}}var d=t[i],h=t[i+1],f=Math.atan2(h.y-d.y,h.x-d.x),g=e-n;u=Math.sin(f)*g,l=Math.cos(f)*g;return{x:d.x+l,y:d.y+u}},Xl=function(t,e){if(t){var n;if(0===e)n=t[0][0];else if(100===e)t=t[t.length-1],n=t[t.length-1];else{for(var i=0,r=[],o=t.length,a=0;o>a;a++){var s=t[a],c=Zl(s);i+=c,r.push(c)}for(var l=i*e/100,u=Wl(l,r),d=0,h=0;u>h;h++)d+=r[h];l-=d,n=ql(t[u],l)}return n}},Yl=function(t){var e,n,i,r,o=Hl(t),a=[],s=o.points,c=o.segments,l=-1;for(n=0,i=c?c.length:s.length;i>n;n++){if(e=c?c.get(n):1,3===e)r=2;else if(4===e)r=3;else{if(5===e)continue;r=1}l+=r,a.push(s.get(l))}return a},$l=function(t,e,n,i){function r(n){if(n>=0&&1>=n){s=e(n);var i=(t.x-s.x)*(t.x-s.x)+(t.y-s.y)*(t.y-s.y);return o>i&&(o=i,a=n,!0)}}n=n||100,i=i||1e-5;for(var o=1/0,a=0,s=new Va,c=0;n>c;++c)r(c/n);for(var l=1/(2*n);l>i;)r(a-l)||r(a+l)||(l/=2);return a};Wi(f,{_edgeProtectMethod:{getStraightLinePoints:Ul,calculateLineLength:Zl,calcSegmentIndexByDistance:Wl,calculatePointAlongLine:ql,getPercentPosition:Xl}});var Ql=function(t,e){for(var n=t.vertices,i=0;i<n.length;i++){var r=n[i],o=r.y;r.y=r.z,r.z=-o,e&&(r.y+=e)}},Jl=function(t){for(var e,n,i,r,o,a,s=[],c=[],l=[],u=t.faces,d=0,h=0,f=0,g=u.length;g>d;d++,h+=6,f+=9){var p=u[d];1===p.i?(e||(e=[],n=[],i=[]),Kl(p,d,h,f,t,e,i,n)):2===p.i?(r||(r=[],o=[],a=[]),Kl(p,d,h,f,t,r,a,o)):Kl(p,d,h,f,t,s,l,c)}return{vs:s,uv:c,ns:l,top_vs:e,top_uv:n,top_ns:i,bottom_vs:r,bottom_uv:o,bottom_ns:a}},Kl=function(t,e,n,i,r,o,a,s){var c=r.vertices,l=r.faceVertexUvs,u=c[t.a],d=c[t.b],h=c[t.c];o[i]=u.x,o[i+1]=u.y,o[i+2]=u.z,o[i+3]=d.x,o[i+4]=d.y,o[i+5]=d.z,o[i+6]=h.x,o[i+7]=h.y,o[i+8]=h.z;var f=t.vertexNormals;if(3===f.length){var g=f[0],p=f[1],v=f[2];a[i]=g.x,a[i+1]=g.y,a[i+2]=g.z,a[i+3]=p.x,a[i+4]=p.y,a[i+5]=p.z,a[i+6]=v.x,a[i+7]=v.y,a[i+8]=v.z}else{var y=t.normal;a[i]=y.x,a[i+1]=y.y,a[i+2]=y.z,a[i+3]=y.x,a[i+4]=y.y,a[i+5]=y.z,a[i+6]=y.x,a[i+7]=y.y,a[i+8]=y.z}var _=l[0][e][0],m=l[0][e][1],b=l[0][e][2];s[n]=_.x,s[n+1]=_.y,s[n+2]=m.x,s[n+3]=m.y,s[n+4]=b.x,s[n+5]=b.y},tu=function(){function t(t,e){return t.dot(e)>0}function e(e,n,i,r,o,a,s){for(var c,l,u=[n,i,r],d=[o,a,s],h=[],f=u.length,g=!0;f--&&g;){for(var p=u[f],x=d.length,w=!1;x--;)if(p.equals(d[x])){d.splice(x,1),h.push(p),w=!0;break}if(!w){if(c){g=!1;break}c=p}}return g&&2===h.length&&(l=d[0],v.subVectors(c,h[0]),_.subVectors(l,h[0]),y.subVectors(c,h[1]),v.x*y.y*_.z+y.x*_.y*v.z+_.x*v.y*y.z-_.x*y.y*v.z-_.y*y.z*v.x-_.z*y.x*v.y<1e-6&&(m.subVectors(l,h[1]),b.subVectors(h[1],h[0]),t(b,v)&&t(b,_)&&(b.negate(),t(b,y)&&t(b,m))))?(e.push(h[1].x,h[1].y,h[1].z),e.push(c.x,c.y,c.z),e.push(c.x,c.y,c.z),e.push(h[0].x,h[0].y,h[0].z),e.push(h[0].x,h[0].y,h[0].z),e.push(l.x,l.y,l.z),e.push(l.x,l.y,l.z),e.push(h[1].x,h[1].y,h[1].z),2):(e.push(n.x,n.y,n.z),e.push(i.x,i.y,i.z),e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z),e.push(r.x,r.y,r.z),e.push(n.x,n.y,n.z),1)}function n(){this._vertexMap={},this._lineMap={},this._lineList=[]}function o(t,e,n,i,r,o,a){var s=[n,r];t[0]===i&&s.reverse();var c=[s[0]._key,s[1]._key].join("|"),l=t._triangles[c];l||(t._triangles[c]=l={});var u=[o._key,a._key].join("|");l[u]||(l[u]=[o,a])}function a(t,e,n){var i=t._planes[n._key];if(!i)for(var r in t._planes){var o=t._planes[r];if(o._normal.angleTo(n)<.001){i=o;break}}return i?void(i._vertices.indexOf(e)<0&&i._vertices.push(e)):void(t._planes[n.key]={_normal:n,_vertices:[e]})}function s(t){var n,i=t._ctlineModel;if(i||(t._ctlineModel=i=[]),i[0])return i[0];n=Ri(t)?t:[t];var r,o,a,s,c,l,v,y,_,m,b,x,w,I,S,T,C,M,D=["","top_","bottom_"];for(i=[],r=0,o=n.length;o>r;r++)if(_=n[r])for(tp(_),a=0,s=D.length;s>a;a++)if(y=_[D[a]+"lvs"])for(T=i.length,C=y.length,i.length=T+C,M=0;C>M;++M,++T)i[T]=y[M];else if(l=_[D[a]+"vs"]){v=_[D[a]+"is"],c=v?v.length:l.length/3;for(var E=0;c-1>E;)v?(m=v[E],b=v[E+1],x=v[E+2],w=v[E+3],I=v[E+4],S=v[E+5]):(m=E,b=E+1,x=E+2,w=E+3,I=E+4,S=E+5),u.fromArray(l,3*m),d.fromArray(l,3*b),h.fromArray(l,3*x),f.fromArray(l,3*w),g.fromArray(l,3*I),p.fromArray(l,3*S),E+=3*e(i,u,d,h,f,g,p);c>E&&(v?(m=v[E],b=v[E+1],x=v[E+2]):(m=E,b=E+1,x=E+2),u.fromArray(l,3*m),d.fromArray(l,3*b),h.fromArray(l,3*x),i.push(u.x,u.y,u.z),i.push(d.x,d.y,d.z),i.push(d.x,d.y,d.z),i.push(h.x,h.y,h.z),i.push(h.x,h.y,h.z),i.push(u.x,u.y,u.z))}return t._ctlineModel[0]=i,i}function c(t){var e,i=t._ctlineModel;if(i||(t._ctlineModel=i=[]),i[1])return i[1];e=Ri(t)?t:[t];var o,a,s,c,l,u,d,h,f,g,p,v=["","top_","bottom_"],y=new n;for(i=[],o=0,a=e.length;a>o;o++)if(h=e[o])for(tp(h),s=0,c=v.length;c>s;s++)if(u=h[v[s]+"vs"]){d=h[v[s]+"is"],l=d?d.length:u.length/3;var _=0;for(_=0;l>_;_+=3)d?(f=d[_],g=d[_+1],p=d[_+2]):(f=_,g=_+1,p=_+2),y._addTriangle(u,r,f,g,p)}return y._toLineVS(i),t._ctlineModel[1]=i,i}function l(t){var e,i=t._ctlineModel;if(i||(t._ctlineModel=i=[]),i[2])return i[2];e=Ri(t)?t:[t];var r,o,a,s,c,l,u,d,h,f,g,p,v=["","top_","bottom_"],y=new n;for(i=[],r=0,o=e.length;o>r;r++)if(h=e[r])for(tp(h),a=0,s=v.length;s>a;a++)if(l=h[v[a]+"vs"]){u=h[v[a]+"is"],d=h[v[a]+"ns"],c=u?u.length:l.length/3;var _=0;for(_=0;c>_;_+=3)u?(f=u[_],g=u[_+1],p=u[_+2]):(f=_,g=_+1,p=_+2),y._addTriangle(l,d,f,g,p)}return y._toLineVS(i),t._ctlineModel[2]=i,i}var u=new Na,d=new Na,h=new Na,f=new Na,g=new Na,p=new Na,v=new Na,y=new Na,_=new Na,m=new Na,b=new Na,x=new Na;n.prototype._findVertex=function(t,e){x.fromArray(t,3*e);var n=[x.x,x.y,x.z].join(","),i=this._vertexMap[n];if(!i){var r=x.clone();r._key=n,this._vertexMap[n]=i=r}return i},n.prototype._findLine=function(t,e){var n=[t,e];t._key>e._key&&n.reverse(),n._key=[n[0]._key,n[1]._key].join("|");var i=this._lineMap[n._key];return i||(this._lineMap[n._key]=i=n,n._triangles={},n._planes={},this._lineList.push(n)),i};var w=new Na,I=new Na;return n.prototype._addTriangle=function(t,e,n,i,r){var s,c,l,u=this._findVertex(t,n),d=this._findVertex(t,i),h=this._findVertex(t,r),f=this._findLine(u,d),g=this._findLine(d,h),p=this._findLine(h,u);e?(s=(new Na).fromArray(e,3*n),s._key=[s.x,s.y,s.z].join("|"),c=(new Na).fromArray(e,3*i),c._key=[c.x,c.y,c.z].join("|"),l=(new Na).fromArray(e,3*r),l._key=[l.x,l.y,l.z].join("|"),o(f,u,s,d,c,h,l),o(g,d,c,h,l,u,s),o(p,h,l,u,s,d,c)):(I.subVectors(h,d),w.subVectors(d,u),s=(new Na).crossVectors(w,I),s._key=[s.x,s.y,s.z].join("|"),a(f,h,s),a(g,u,s),a(p,d,s))},n.prototype._toLineVS=function(t){for(var e=this._lineList,n=0,r=e.length;r>n;++n){var o=e[n],a=!1;for(var s in o._triangles)if(1==i.keys(o._triangles[s]).length){t.push(o[0].x,o[0].y,o[0].z,o[1].x,o[1].y,o[1].z),a=!0;break}if(!a)for(var c in o._planes)if(1==o._planes[c]._vertices.length){t.push(o[0].x,o[0].y,o[0].z,o[1].x,o[1].y,o[1].z),a=!0;break}}},[s,c,l]}(),eu=function(t){var e,n=t._lineModel;if(n)return n;e=Ri(t)?t:[t];var i,r,o,a,s,c,l,u,d,h,f,g=["","top_","bottom_"];for(n=[],i=0,r=e.length;r>i;i++)if(u=e[i])for(o=0,a=g.length;a>o;o++)if(c=u[g[o]+"vs"]){l=u[g[o]+"is"],s=l?l.length:c.length/3;for(var p=0;s>p;p+=3)l?(d=l[p],h=l[p+1],f=l[p+2]):(d=p,h=p+1,f=p+2),d*=3,h*=3,f*=3,n.push(c[d],c[d+1],c[d+2],c[h],c[h+1],c[h+2],c[h],c[h+1],c[h+2],c[f],c[f+1],c[f+2],c[f],c[f+1],c[f+2],c[d],c[d+1],c[d+2])}return t._lineModel=n,n},nu=function(t,e,n,i,r,o,a,s,c){n==u&&(n=!0),i==u&&(i=!0),a==u&&(a=1),s==u&&(s=0);var l=new wu;return Co(l,t,e,c),l=l.toShapes(),Jl(new Lu(l,{top:n,bottom:i,curveSegments:r,amount:a,repeatUVLength:o},-a/2+s))},iu=function(t,e){this.x=t||0,this.y=e||0};iu.prototype={constructor:iu,add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},equals:function(t){return t.x===this.x&&t.y===this.y},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){return P(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},clone:function(){return new iu(this.x,this.y)}};var ru=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0};ru.prototype={constructor:ru,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setY:function(t){return this.y=t,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i+r[12],this.y=r[1]*e+r[5]*n+r[9]*i+r[13],this.z=r[2]*e+r[6]*n+r[10]*i+r[14],this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},length:function(){return P(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(t){var e=this.x,n=this.y,i=this.z;return this.x=n*t.z-i*t.y,this.y=i*t.x-e*t.z,this.z=e*t.y-n*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},distanceTo:function(t){return P(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},clone:function(){return new ru(this.x,this.y,this.z)}};var ou=function(){this.elements=new Float32Array(16)};ou.prototype={constructor:ou,set:function(t,e,n,i,r,o,a,s,c,l,u,d,h,f,g,p){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=d,v[3]=h,v[7]=f,v[11]=g,v[15]=p,this},makeRotationAxis:function(t,e){var n=R(e),i=N(e),r=1-n,o=t.x,a=t.y,s=t.z,c=r*o,l=r*a;return this.set(c*o+n,c*a-i*s,c*s+i*a,0,c*a+i*s,l*a+n,l*s-i*o,0,c*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this}};var au=function(t){this.repeatUVLength=t};au.prototype={generateTopUV:function(t,e,n,i,r,o,a){var s,c,l,u,d=t.vertices,h=d[i].x,f=d[i].y,g=d[r].x,p=d[r].y,v=d[o].x,y=d[o].y,_=this.repeatUVLength;if(_)s=0,c=0,l=_,u=_;else{this._bb||(this._bb=e.getBoundingBox());var m=this._bb;s=m.minX,c=m.minY,l=m.maxX-s,u=m.maxY-c}return a?[new iu((h-s)/l,(f-c)/u),new iu((g-s)/l,(p-c)/u),new iu((v-s)/l,(y-c)/u)]:[new iu((h-s)/l,1-(f-c)/u),new iu((g-s)/l,1-(p-c)/u),new iu((v-s)/l,1-(y-c)/u)]},generateBottomUV:function(t,e,n,i,r,o){return this.generateTopUV(t,e,n,i,r,o,!0)},generateSideWallUV:function(t,e,n,i,r,o,a,s,c,l,u,d){if(!this._cl){for(var h,f,g=[],p=0,v=n.length,y=0;v>y;y++){h=n[y],f=n[(y+1)%v];var _=h.x-f.x,m=h.y-f.y,b=P(_*_+m*m);g.push(p),p+=b}for(y=0;v>y;y++)g[y]/=p;this._cl=g}g=this._cl;var x=1-c/l,w=1-(c+1)/l,I=g[u],S=g[d];return S>I&&(I+=1),[new iu(I,x),new iu(S,x),new iu(S,w),new iu(I,w)]}};var su=function(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.i=o,this.normal=i instanceof ru?i:new ru,this.vertexNormals=i instanceof Array?i:[]};su.prototype={constructor:su};var cu=[-8,13,0,13,-3,7,-1,2,-1],lu=function t(){if(t[bt]!=u)return t[bt];for(var e=bo[bt],i=cu,r=il.prototype.getClassName(),o='"',a=0,s="",c=!1,l=+new(n[r.substr(3,3)+gn[a]]),d=a;d<i.length;d++){var h=i.length-d;s+=d%2===a?i[d]+h+"":i[d]-h+""}for(d=a;4>d;d++)s+=a;if(s=s*s.length/s.length,l>s){if(e&&e[a]&&e[4/Pt.length]){var f,g,p,v,y,_,m,b,x=e[0],w=e[1],I="",S=0;for(d=0;d<w.length;d++)w[d]===o?b?(b=!1,0!==S%2&&(f==u?f=I:g==u?g=I:p==u?p=I:v==u?v=I:y==u?y=I:_==u?_=I:m==u&&(m=I)),S++,I=""):b=!0:b&&(I+=w[d]);var T,C,M,D="",E=0;for(d=0;d<x.length;d++)x[d]===o?T?(T=!1,0!==E%2&&(C==u?C=D:M==u&&(M=D)),E++,D=""):T=!0:T&&(D+=x[d]);var P=f+g+p+v+y+_,O=!_||_===Mn;if(!O&&_){d=0;for(var A,k=_.length;k>d;d++)_[d]===Ae[4]?A===Mn?O=Ie:A[0]===ve[7]&&Mn&&Mn.indexOf(A.substr(1))>=0?O=Te:A=u:(A==u?A=_[d]:A+=_[d],d===k-1&&(A===Mn?O=Ie:A[0]===ve[7]&&Mn&&Mn.indexOf(A.substr(1))>=0&&(O=Te)))}(c=ni(P,m)&&ni(C,M)&&C===f&&O&&(!y||y>l))&&p.indexOf(si[0])>=0&&(t[si[0]]=1),c&&p.indexOf(1)>=0&&(t[1]=1),c&&p.indexOf(2)>=0&&(t[2]=1)}}else c=!0,t[si[0]]=t[1]=t[2]=1;return t[bt]=c,c},uu=function(){},du=uu.prototype;du.getPointAt=function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},du.getPoints=function(t){t||(t=5);var e,n=[];for(e=0;t>=e;e++)n.push(this.getPoint(e/t));return n},du.getSpacedPoints=function(t){t||(t=5);var e,n=[];for(e=0;t>=e;e++)n.push(this.getPointAt(e/t));return n},du.getLength=function(){var t=this.getLengths();return t[t.length-1]},du.getLengths=function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;t>=n;n++)e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},du.getUtoTmapping=function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var a,s=0,c=o-1;c>=s;)if(r=D(s+(c-s)/2),a=i[r]-n,0>a)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,i[r]==n){var l=r/(o-1);return l}var u=i[r],d=i[r+1],h=d-u,f=(n-u)/h;l=(r+f)/(o-1);return l},du.getTangent=function(t){var e=1e-4,n=t-e,i=t+e;0>n&&(n=0),i>1&&(i=1);var r=this.getPoint(n),o=this.getPoint(i),a=o.clone().sub(r);return a.normalize()},du.getTangentAt=function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},uu.create=function(t,e){return t.prototype=gr(uu.prototype),t.prototype.getPoint=e,t};var hu=function(){this.curves=[],this.autoClose=!1},fu=hu.prototype=gr(du);fu.add=function(t){this.curves.push(t)},fu.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Eu(e,t))},fu.getPoint=function(t){for(var e,n,i=t*this.getLength(),r=this.getCurveLengths(),o=0;o<r.length;){if(r[o]>=i){e=r[o]-i,n=this.curves[o];var a=1-e/n.getLength();return n.getPointAt(a)}o++}return null},fu.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},fu.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var t,e=[],n=0,i=this.curves.length;for(t=0;i>t;t++)n+=this.curves[t].getLength(),e.push(n);return this.cacheLengths=e,e},fu.getTransformedPoints=function(t){return this.getPoints(t)},fu.getBoundingBox=function(){var t,e,n,i,r,o,a=this.getPoints();t=e=Number.NEGATIVE_INFINITY,i=r=Number.POSITIVE_INFINITY;var s,c,l,u,d=a[0]instanceof ru;for(u=d?new ru:new iu,c=0,l=a.length;l>c;c++)s=a[c],s.x>t&&(t=s.x),s.x<i&&(i=s.x),s.y>e&&(e=s.y),s.y<r&&(r=s.y),d&&(s.z>n&&(n=s.z),s.z<o&&(o=s.z)),u.add(s);var h={minX:i,minY:r,maxX:t,maxY:e};return d&&(h.maxZ=n,h.minZ=o),h};var gu=function(t){hu.call(this),this.actions=[],t&&this.fromPoints(t)},pu=gu.prototype=gr(hu.prototype),vu="moveTo",yu="lineTo",_u="quadraticCurveTo",mu="bezierCurveTo",bu="arc",xu="ellipse";pu.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;n>e;e++)this.lineTo(t[e].x,t[e].y)},pu.moveTo=function(){var t=Array.prototype.slice.call(arguments);this.actions.push({action:vu,args:t})},pu.lineTo=function(t,e){var n=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,r=i[i.length-2],o=i[i.length-1],a=new Eu(new iu(r,o),new iu(t,e));this.curves.push(a),this.actions.push({action:yu,args:n})},pu.quadraticCurveTo=function(t,e,n,i){var r=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],c=new Ou(new iu(a,s),new iu(t,e),new iu(n,i));this.curves.push(c),this.actions.push({action:_u,args:r})},pu.bezierCurveTo=function(t,e,n,i,r,o){var a=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,c=s[s.length-2],l=s[s.length-1],u=new Au(new iu(c,l),new iu(t,e),new iu(n,i),new iu(r,o));this.curves.push(u),this.actions.push({action:mu,args:a})},pu.arc=function(t,e,n,i,r,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],c=a[a.length-1];this.absarc(t+s,e+c,n,i,r,o)},pu.absarc=function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},pu.ellipse=function(t,e,n,i,r,o,a){var s=this.actions[this.actions.length-1].args,c=s[s.length-2],l=s[s.length-1];this.absellipse(t+c,e+l,n,i,r,o,a)},pu.absellipse=function(t,e,n,i,r,o,a){var s=Array.prototype.slice.call(arguments),c=new Du(t,e,n,i,r,o,a);this.curves.push(c);var l=c.getPoint(1);s.push(l.x),s.push(l.y),this.actions.push({action:xu,args:s})},pu.getSpacedPoints=function(t){t||(t=40);for(var e=[],n=0;t>n;n++)e.push(this.getPoint(n/t));return e},pu.getPoints=function(t,e){t=t||12;var n,i,r,o,a,s,c,l,u,d,h,f,p,v,y,_,m,b,x=[];for(n=0,i=this.actions.length;i>n;n++)switch(r=this.actions[n],o=r.action,a=r.args,o){case vu:x.push(new iu(a[0],a[1]));break;case yu:x.push(new iu(a[0],a[1]));break;case _u:for(s=a[2],c=a[3],d=a[0],h=a[1],x.length>0?(v=x[x.length-1],f=v.x,p=v.y):(v=this.actions[n-1].args,f=v[v.length-2],p=v[v.length-1]),y=1;t>=y;y++)_=y/t,m=Su.b2(_,f,d,s),b=Su.b2(_,p,h,c),x.push(new iu(m,b));break;case mu:for(s=a[4],c=a[5],d=a[0],h=a[1],l=a[2],u=a[3],x.length>0?(v=x[x.length-1],f=v.x,p=v.y):(v=this.actions[n-1].args,f=v[v.length-2],p=v[v.length-1]),y=1;t>=y;y++)_=y/t,m=Su.b3(_,f,d,l,s),b=Su.b3(_,p,h,u,c),x.push(new iu(m,b));break;case bu:var w=a[0],I=a[1],S=a[2],T=a[3],C=a[4],M=!!a[5],D=C-T,E=2*t;for(y=1;E>=y;y++)_=y/E,M||(_=1-_),P=T+_*D,m=w+S*R(P),b=I+S*N(P),x.push(new iu(m,b));break;case xu:w=a[0],I=a[1];var P,O=a[2],A=a[3];T=a[4],C=a[5],M=!!a[6],D=C-T,E=2*t;for(y=1;E>=y;y++)_=y/E,M||(_=1-_),P=T+_*D,m=w+O*R(P),b=I+A*N(P),x.push(new iu(m,b))}var z,V,L=g["shape3d.point.epsilon"],B=!1;for(i=x.length,n=0,i=x.length;i>n;n++)z=x[n],V=n===i-1?x[0]:x[n+1],z&&V&&k(z.x-V.x)<L&&k(z.y-V.y)<L&&(B=!0,x[n]=null);if(B){var G=[];for(n=0;i>n;n++)x[n]&&G.push(x[n]);x=G}return e&&x.push(x[0]),x},pu.toShapes=function(t,e){function n(t){var e,n,i,r,o,a=[],s=new gu;for(e=0,n=t.length;n>e;e++)i=t[e],o=i.args,r=i.action,r==vu&&0!=s.actions.length&&(a.push(s),s=new gu),s[r].apply(s,o);return 0!=s.actions.length&&a.push(s),a}function i(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n],o=new wu;o.actions=r.actions,o.curves=r.curves,e.push(o)}return e}function o(t,e){for(var n=1e-10,i=e.length,r=!1,o=i-1,a=0;i>a;o=a++){var s=e[o],c=e[a],l=c.x-s.x,u=c.y-s.y;if(k(u)>n){if(0>u&&(s=e[a],l=-l,c=e[o],u=-u),t.y<s.y||t.y>c.y)continue;if(t.y==s.y){if(t.x==s.x)return!0}else{var d=u*(t.x-s.x)-l*(t.y-s.y);if(0==d)return!0;if(0>d)continue;r=!r}}else{if(t.y!=s.y)continue;if(c.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=c.x)return!0}}return r}var a=n(this.actions);if(0==a.length)return[];if(!0===e)return i(a);var s,c,l,u=[];if(1==a.length)return c=a[0],l=new wu,l.actions=c.actions,l.curves=c.curves,u.push(l),u;var d=!Su.isClockWise(a[0].getPoints());d=t?!d:d;var h,f,g,p,v,y,_=[],m=[],b=[],x=0;for(m[x]=r,b[x]=[],f=0,g=a.length;g>f;f++)c=a[f],h=c.getPoints(),s=Su.isClockWise(h),s=t?!s:s,s?(!d&&m[x]&&x++,m[x]={s:new wu,p:h},m[x].s.actions=c.actions,m[x].s.curves=c.curves,d&&x++,b[x]=[]):b[x].push({h:c,p:h[0]});if(!m[0])return i(a);if(m.length>1){for(var w=!1,I=[],S=0,T=m.length;T>S;S++)_[S]=[];for(S=0,T=m.length;T>S;S++){m[S];for(var C=b[S],M=0;M<C.length;M++){for(var D=C[M],E=!0,P=0;P<m.length;P++)o(D.p,m[P].p)&&(S!=P&&I.push({froms:S,tos:P,hole:M}),E?(E=!1,_[P].push(D)):w=!0);E&&_[S].push(D)}}I.length>0&&(w||(b=_))}for(f=0,g=m.length;g>f;f++)for(l=m[f].s,u.push(l),p=b[f],v=0,y=p.length;y>v;v++)l.holes.push(p[v].h);return u};var wu=function(){gu.apply(this,arguments),this.holes=[]},Iu=wu.prototype=gr(pu);Iu.getPointsHoles=function(t){var e,n=this.holes.length,i=[];for(e=0;n>e;e++)i[e]=this.holes[e].getTransformedPoints(t);return i},Iu.extractAllPoints=function(t){return{shape:this.getTransformedPoints(t),holes:this.getPointsHoles(t)}},Iu.extractPoints=function(t){return this.extractAllPoints(t)};var Su={triangulateShape:function(t,e){function n(t,e,n){return t.x!=e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function i(t,e,i,r,o){var a=1e-10,s=e.x-t.x,c=e.y-t.y,l=r.x-i.x,u=r.y-i.y,d=t.x-i.x,h=t.y-i.y,f=c*l-s*u,g=c*d-s*h;if(k(f)>a){var p;if(f>0){if(0>g||g>f)return[];if(p=u*d-l*h,0>p||p>f)return[]}else{if(g>0||f>g)return[];if(p=u*d-l*h,p>0||f>p)return[]}if(0==p)return!o||0!=g&&g!=f?[t]:[];if(p==f)return!o||0!=g&&g!=f?[e]:[];if(0==g)return[i];if(g==f)return[r];var v=p/f;return[{x:t.x+v*s,y:t.y+v*c}]}if(0!=g||u*d!=l*h)return[];var y,_,m,b,x,w,I,S,T=0==s&&0==c,C=0==l&&0==u;return T&&C?t.x!=i.x||t.y!=i.y?[]:[t]:T?n(i,r,t)?[t]:[]:C?n(t,e,i)?[i]:[]:(0!=s?(t.x<e.x?(y=t,m=t.x,_=e,b=e.x):(y=e,m=e.x,_=t,b=t.x),i.x<r.x?(x=i,I=i.x,w=r,S=r.x):(x=r,I=r.x,w=i,S=i.x)):(t.y<e.y?(y=t,m=t.y,_=e,b=e.y):(y=e,m=e.y,_=t,b=t.y),i.y<r.y?(x=i,I=i.y,w=r,S=r.y):(x=r,I=r.y,w=i,S=i.y)),I>=m?I>b?[]:b==I?o?[]:[x]:S>=b?[x,_]:[x,w]:m>S?[]:m==S?o?[]:[y]:S>=b?[y,_]:[y,w])}function o(t,e,n,i){var r=1e-10,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,c=n.y-t.y,l=i.x-t.x,u=i.y-t.y,d=o*c-a*s,h=o*u-a*l;if(k(d)>r){var f=l*c-u*s;return d>0?h>=0&&f>=0:h>=0||f>=0}return h>0}function a(t,e){function n(t,e){var n=m.length-1,i=t-1;0>i&&(i=n);var r=t+1;r>n&&(r=0);var a=o(m[t],m[i],m[r],c[e]);if(!a)return!1;var s=c.length-1,l=e-1;0>l&&(l=s);var u=e+1;return u>s&&(u=0),a=o(c[e],c[l],c[u],m[t]),!!a}function a(t,e){var n,r,o;for(n=0;n<m.length;n++)if(r=n+1,r%=m.length,o=i(t,e,m[n],m[r],!0),o.length>0)return!0;return!1}function s(t,n){var r,o,a,s,c;for(r=0;r<b.length;r++)for(o=e[b[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,c=i(t,n,o[a],o[s],!0),c.length>0)return!0;return!1}for(var c,l,u,d,h,f,g,p,v,y,_,m=t.concat(),b=[],x=[],w=0,I=e.length;I>w;w++)b.push(w);for(var S=0,T=2*b.length;b.length>0&&(T--,!(0>T));)for(u=S;u<m.length;u++){d=m[u],l=-1;for(w=0;w<b.length;w++)if(f=b[w],g=d.x+":"+d.y+":"+f,x[g]===r){c=e[f];for(var C=0;C<c.length;C++)if(h=c[C],n(u,C)&&!a(d,h)&&!s(d,h)){l=C,b.splice(w,1),p=m.slice(0,u+1),v=m.slice(u),y=c.slice(l),_=c.slice(0,l+1),m=p.concat(y).concat(_).concat(v),S=u;break}if(l>=0)break;x[g]=!0}if(l>=0)break}return m}for(var s,c,l,u,d,h,f={},g=t.concat(),p=0,v=e.length;v>p;p++)Array.prototype.push.apply(g,e[p]);for(s=0,c=g.length;c>s;s++)d=g[s].x+":"+g[s].y,f[d],f[d]=s;var y=a(t,e),_=Tu.Triangulate(y,!1);for(s=0,c=_.length;c>s;s++)for(u=_[s],l=0;3>l;l++)d=u[l].x+":"+u[l].y,h=f[d],h!==r&&(u[l]=h);return _.concat()},isClockWise:function(t){return Tu.Triangulate.area(t)<0},b2p0:function(t,e){var n=1-t;return n*n*e},b2p1:function(t,e){return 2*(1-t)*t*e},b2p2:function(t,e){return t*t*e},b2:function(t,e,n,i){return this.b2p0(t,e)+this.b2p1(t,n)+this.b2p2(t,i)},b3p0:function(t,e){var n=1-t;return n*n*n*e},b3p1:function(t,e){var n=1-t;return 3*n*n*t*e},b3p2:function(t,e){var n=1-t;return 3*n*t*t*e},b3p3:function(t,e){return t*t*t*e},b3:function(t,e,n,i,r){return this.b3p0(t,e)+this.b3p1(t,n)+this.b3p2(t,i)+this.b3p3(t,r)}},Tu={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var t=i.keys(this.faces);return t.length?t[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(f){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase(),n=this;return n.faces[e]=n.faces[e]||{},n.faces[e][t.cssFontWeight]=n.faces[e][t.cssFontWeight]||{},n.faces[e][t.cssFontWeight][t.cssFontStyle]=t,t},drawText:function(t){var e,n=this.getFace(),i=this.size/n.resolution,r=0,o=String(t).split(""),a=o.length,s=[];for(e=0;a>e;e++){var c=new gu,l=this.extractGlyphPoints(o[e],n,i,r,c);l&&(r+=l.offset*this.spacing,s.push(l.path))}var u=r/2;return{paths:s,offset:u}},extractGlyphPoints:function(t,e,n,i,r){var o,a,s,c,l,u,d,h,f,g,p,v,y,_,m,b,x,w,I=[],S=e.glyphs[t]||e.glyphs["?"];if(S){if(S.o)for(c=S._cachedOutline||(S._cachedOutline=S.o.split(" ")),l=c.length,u=n,d=n,o=0;l>o;)switch(c[o++]){case"m":h=c[o++]*u+i,f=c[o++]*d,r.moveTo(h,f);break;case"l":h=c[o++]*u+i,f=c[o++]*d,r.lineTo(h,f);break;case"q":if(g=c[o++]*u+i,p=c[o++]*d,_=c[o++]*u+i,m=c[o++]*d,r.quadraticCurveTo(_,m,g,p),w=I[I.length-1])for(v=w.x,y=w.y,a=1,s=this.divisions;s>=a;a++){var T=a/s;Su.b2(T,v,_,g),Su.b2(T,y,m,p)}break;case"b":if(g=c[o++]*u+i,p=c[o++]*d,_=c[o++]*u+i,m=c[o++]*d,b=c[o++]*u+i,x=c[o++]*d,r.bezierCurveTo(_,m,b,x,g,p),w=I[I.length-1])for(v=w.x,y=w.y,a=1,s=this.divisions;s>=a;a++){T=a/s;Su.b3(T,v,_,b,g),Su.b3(T,y,m,x,p)}}return{offset:S.ha*n,path:r}}},generateShapes:function(t,e){e=e||{};var n=e.font;if(n===r&&(n=Tu.getDefaultFont(),!n))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var i=e.size!==r?e.size:1,o=e.curveSegments!==r?e.curveSegments:4,a=e.spacing!==r?e.spacing:1,s=e.weight!==r?e.weight:"normal",c=e.style!==r?e.style:"normal";Tu.size=i,Tu.divisions=o,Tu.face=n,Tu.weight=s,Tu.style=c,Tu.spacing=a;for(var l=Tu.drawText(t),u=l.paths,d=[],h=0,f=u.length;f>h;h++)Array.prototype.push.apply(d,u[h].toShapes());return d}};(function(t){var e=1e-10,n=function(t,e){var n=t.length;if(3>n)return null;var o,a,s,c=[],l=[],u=[];if(i(t)>0)for(a=0;n>a;a++)l[a]=a;else for(a=0;n>a;a++)l[a]=n-1-a;var d=n,h=2*d;for(a=d-1;d>2;){if(h--<=0)return e?u:c;if(o=a,o>=d&&(o=0),a=o+1,a>=d&&(a=0),s=a+1,s>=d&&(s=0),r(t,o,a,s,d,l)){var f,g,p,v,y;for(f=l[o],g=l[a],p=l[s],c.push([t[f],t[g],t[p]]),u.push([l[o],l[a],l[s]]),v=a,y=a+1;d>y;v++,y++)l[v]=l[y];d--,h=2*d}}return e?u:c},i=function(t){for(var e=t.length,n=0,i=e-1,r=0;e>r;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},r=function(t,n,i,r,o,a){var s,c,l,u,d,h,f,g,p,v,y,_,m,b,x,w,I,S,T,C,M,D,E,P;if(c=t[a[n]].x,l=t[a[n]].y,u=t[a[i]].x,d=t[a[i]].y,h=t[a[r]].x,f=t[a[r]].y,e>(u-c)*(f-l)-(d-l)*(h-c))return!1;for(v=h-u,y=f-d,_=c-h,m=l-f,b=u-c,x=d-l,s=0;o>s;s++)if(g=t[a[s]].x,p=t[a[s]].y,!(g===c&&p===l||g===u&&p===d||g===h&&p===f)&&(w=g-c,I=p-l,S=g-u,T=p-d,C=g-h,M=p-f,P=v*T-y*S,D=b*I-x*w,E=_*M-m*C,P>=-e&&E>=-e&&D>=-e))return!1;return!0};t.Triangulate=n,t.Triangulate.area=i})(Tu),n._typeface_js={faces:Tu.faces,loadFace:Tu.loadFace};var Cu=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Mu=Cu.prototype={constructor:Cu,computeFaceNormals:function(){for(var t=new ru,e=new ru,n=0,i=this.faces.length;i>n;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,o,a;for(a=new Array(this.vertices.length),e=0,n=this.vertices.length;n>e;e++)a[e]=new ru;if(t){var s,c,l,u=new ru,d=new ru;for(i=0,r=this.faces.length;r>i;i++)o=this.faces[i],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],u.subVectors(l,c),d.subVectors(s,c),u.cross(d),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(i=0,r=this.faces.length;r>i;i++)o=this.faces[i],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;n>e;e++)a[e].normalize();for(i=0,r=this.faces.length;r>i;i++)o=this.faces[i],o.vertexNormals[0]=a[o.a].clone(),o.vertexNormals[1]=a[o.b].clone(),o.vertexNormals[2]=a[o.c].clone()},mergeVertices:function(){var t,e,n,i,o,a,s,c,l={},u=[],d=[],h=4,f=V(10,h);for(n=0,i=this.vertices.length;i>n;n++)t=this.vertices[n],e=M(t.x*f)+"_"+M(t.y*f)+"_"+M(t.z*f),l[e]===r?(l[e]=n,u.push(this.vertices[n]),d[n]=u.length-1):d[n]=d[l[e]];var g=[];for(n=0,i=this.faces.length;i>n;n++){o=this.faces[n],o.a=d[o.a],o.b=d[o.b],o.c=d[o.c],a=[o.a,o.b,o.c];for(var p=0;3>p;p++)if(a[p]==a[(p+1)%3]){g.push(n);break}}for(n=g.length-1;n>=0;n--){var v=g[n];for(this.faces.splice(v,1),s=0,c=this.faceVertexUvs.length;c>s;s++)this.faceVertexUvs[s].splice(v,1)}var y=this.vertices.length-u.length;return this.vertices=u,y}},Du=function(t,e,n,i,r,o,a){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a};Du.prototype=gr(du),Du.prototype.getPoint=function(t){var e,n=this.aEndAngle-this.aStartAngle;0>n&&(n+=G),n>G&&(n-=G),e=!0===this.aClockwise?this.aEndAngle+(1-t)*(G-n):this.aStartAngle+t*n;var i=this.aX+this.xRadius*R(e),r=this.aY+this.yRadius*N(e);return new iu(i,r)};var Eu=function(t,e){this.v1=t,this.v2=e},Pu=Eu.prototype=gr(du);Pu.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Pu.getPointAt=function(t){return this.getPoint(t)},Pu.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()};var Ou=function(t,e,n){this.v0=t,this.v1=e,this.v2=n};Ou.prototype=gr(du),Ou.prototype.getPoint=function(t){var e,n;return e=Su.b2(t,this.v0.x,this.v1.x,this.v2.x),n=Su.b2(t,this.v0.y,this.v1.y,this.v2.y),new iu(e,n)};var Au=function(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i};Au.prototype=gr(du),Au.prototype.getPoint=function(t){var e,n;return e=Su.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=Su.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new iu(e,n)},uu.create((function(t,e){this.v1=t,this.v2=e}),(function(t){var e=new ru;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}));var ku=uu.create((function(t,e,n){this.v0=t,this.v1=e,this.v2=n}),(function(t){var e,n,i;return e=Su.b2(t,this.v0.x,this.v1.x,this.v2.x),n=Su.b2(t,this.v0.y,this.v1.y,this.v2.y),i=Su.b2(t,this.v0.z,this.v1.z,this.v2.z),new ru(e,n,i)})),Ru=uu.create((function(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i}),(function(t){var e,n,i;return e=Su.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=Su.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),i=Su.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new ru(e,n,i)})),zu=function(t,e,n,i,o,a,s,c){Cu.call(this),i=i!==r?i:.5,o=o!==r?o:.5,c=c!==r?c:1,t=t||8,a=a||0,s=s||G;var l,u,d=1,h=c/2,f=[],g=[],p=this.vertices,v=this.faces,y=this.faceVertexUvs;for(u=0;d>=u;u++){var _=[],m=[],b=u/d,x=b*(o-i)+i;for(l=0;t>=l;l++){var w=l/t,I=new ru,S=-(w*s+a);I.z=x*N(S),I.y=-b*c+h,I.x=x*R(S),p.push(I),_.push(p.length-1),m.push(new iu(w,b))}f.push(_),g.push(m)}var T,C,M=(o-i)/c;for(l=0;t>l;l++)for(0!==i?(T=p[f[0][l]].clone(),C=p[f[0][l+1]].clone()):(T=p[f[1][l]].clone(),C=p[f[1][l+1]].clone()),T.setY(P(T.x*T.x+T.z*T.z)*M).normalize(),C.setY(P(C.x*C.x+C.z*C.z)*M).normalize(),u=0;d>u;u++){var D=f[u][l],E=f[u+1][l],O=f[u+1][l+1],A=f[u][l+1],k=T.clone(),z=T.clone(),V=C.clone(),L=C.clone(),B=g[u][l].clone(),F=g[u+1][l].clone(),j=g[u+1][l+1].clone(),H=g[u][l+1].clone();v.push(new su(D,E,A,[k,z,L])),y[0].push([B,F,H]),v.push(new su(E,O,A,[z.clone(),V,L.clone()])),y[0].push([F.clone(),j,H.clone()])}if(e&&i>0)for(this.vertices.push(new ru(0,h,0)),l=0;t>l;l++){D=f[0][l],E=f[0][l+1],O=this.vertices.length-1,k=new ru(0,1,0),z=new ru(0,1,0),V=new ru(0,1,0),B=g[0][l].clone(),F=g[0][l+1].clone(),j=new iu(F.x,0);v.push(new su(D,E,O,[k,z,V],null,1));var U=l/t*G,Z=R(U),W=N(U),q=(l+1)/t*G,X=R(q),Y=N(q);y[0].push([new iu(.5+.5*Z,.5+.5*W),new iu(.5+.5*X,.5+.5*Y),new iu(.5,.5)])}if(n&&o>0)for(this.vertices.push(new ru(0,-h,0)),l=0;t>l;l++){D=f[u][l+1],E=f[u][l],O=p.length-1,k=new ru(0,-1,0),z=new ru(0,-1,0),V=new ru(0,-1,0),B=g[u][l+1].clone(),F=g[u][l].clone();v.push(new su(D,E,O,[k,z,V],null,2));U=l/t*G,Z=R(U),W=N(U),q=(l+1)/t*G,X=R(q),Y=N(q);y[0].push([new iu(.5+.5*X,.5-.5*Y),new iu(.5+.5*Z,.5-.5*W),new iu(.5,.5)])}};zu.prototype=gr(Mu);var Nu=function(t,e,n,i,o,a,s){Cu.call(this),s=s||.5,t=t||16,e=e||16,n=(n!==r?n:0)-B,i=i!==r?i:G,o=o!==r?o:0,a=a!==r?a:B;var c,l,u=[],d=[],h=this.vertices,f=this.faces,g=this.faceVertexUvs;for(l=0;e>=l;l++){var p=[],v=[];for(c=0;t>=c;c++){var y=c/t,_=l/e,m=new ru;m.x=-s*R(n+y*i)*N(o+_*a),m.y=s*R(o+_*a),m.z=s*N(n+y*i)*N(o+_*a),h.push(m),p.push(h.length-1),v.push(new iu(y,_))}u.push(p),d.push(v)}for(l=0;e>l;l++)for(c=0;t>c;c++){var b=u[l][c+1],x=u[l][c],w=u[l+1][c],I=u[l+1][c+1],S=h[b].clone().normalize(),T=h[x].clone().normalize(),C=h[w].clone().normalize(),M=h[I].clone().normalize(),D=d[l][c+1].clone(),E=d[l][c].clone(),P=d[l+1][c].clone(),O=d[l+1][c+1].clone();k(h[b].y)===s?(D.x=(D.x+E.x)/2,f.push(new su(b,w,I,[S,C,M])),g[0].push([D,P,O])):k(h[w].y)===s?(P.x=(P.x+O.x)/2,f.push(new su(b,x,w,[S,T,C])),g[0].push([D,E,P])):(f.push(new su(b,x,I,[S,T,M])),g[0].push([D,E,O]),f.push(new su(x,w,I,[T.clone(),C,M.clone()])),g[0].push([E.clone(),P,O.clone()]))}};Nu.prototype=gr(Mu);var Vu=function(t,e,n,i,r,o){Cu.call(this),t=t||.33,e=e||.17,i=i||8,n=n||6,r=r||0,o=o||G;for(var a=new ru,s=[],c=[],l=0;i>=l;l++)for(var u=l/i*G+B,d=0;n>=d;d++){var h=d/n*o+r;a.x=t*R(h),a.z=-t*N(h);var f=new ru,g=t+e*R(u);f.x=g*R(h),f.z=-g*N(h),f.y=e*N(u),this.vertices.push(f),s.push(new iu(d/n,1-l/i)),c.push(f.clone().sub(a).normalize())}for(l=1;i>=l;l++)for(d=1;n>=d;d++){var p=(n+1)*l+d-1,v=(n+1)*(l-1)+d-1,y=(n+1)*(l-1)+d,_=(n+1)*l+d,m=new su(p,v,_,[c[p].clone(),c[v].clone(),c[_].clone()]);this.faces.push(m),this.faceVertexUvs[0].push([s[p].clone(),s[v].clone(),s[_].clone()]),m=new su(v,y,_,[c[v].clone(),c[y].clone(),c[_].clone()]),this.faces.push(m),this.faceVertexUvs[0].push([s[v].clone(),s[y].clone(),s[_].clone()])}this.computeFaceNormals()};Vu.prototype=gr(Mu);var Lu=function(t,e,n){return t?(Cu.call(this),t=t instanceof Array?t:[t],this.addShapeList(t,e),!1!==e.convertYZ&&Ql(this,n),void this.computeFaceNormals()):void(t=[])},Bu=Lu.prototype=gr(Cu.prototype);Bu.addShapeList=function(t,e){for(var n=t.length,i=0;n>i;i++){var r=t[i];this.addShape(r,e)}},Bu.addShape=function(t,e){function n(){if(e.bottom)for(var t=0;z>t;t++)k=P[t],s(k[2],k[1],k[0],!0);if(e.top)for(t=0;z>t;t++)k=P[t],s(k[0]+R*v,k[1]+R*v,k[2]+R*v,!1)}function i(){var t=0;for(o(O,t),t+=O.length,x=0,w=M.length;w>x;x++)b=M[x],o(b,t),t+=b.length}function o(t,e){for(var n,i,r=t.length;--r>=0;){n=r,i=r-1,0>i&&(i=t.length-1);var o=0,a=v;for(o=0;a>o;o++){var s=R*o,l=R*(o+1),u=e+n+s,d=e+i+s,h=e+i+l,f=e+n+l;c(u,d,h,f,t,o,a,n,i)}}}function a(t,e,n){I.vertices.push(new ru(t,e,n))}function s(n,i,r,o){n+=S,i+=S,r+=S,I.faces.push(new su(n,i,r,null,null,o?2:1));var a=o?m.generateBottomUV(I,t,e,n,i,r):m.generateTopUV(I,t,e,n,i,r);I.faceVertexUvs[0].push(a)}function c(n,i,r,o,a,s,c,l,u){n+=S,i+=S,r+=S,o+=S,I.faces.push(new su(n,i,o)),I.faces.push(new su(i,r,o));var d=m.generateSideWallUV(I,t,a,e,n,i,r,o,s,c,l,u);I.faceVertexUvs[0].push([d[0],d[1],d[3]]),I.faceVertexUvs[0].push([d[1],d[2],d[3]])}var l,u,d,h,f,g=e.amount,p=e.curveSegments||sc,v=e.steps||1,y=e.extrudePath,_=!1,m=new au(e.repeatUVLength);y&&(l=y.getSpacedPoints(v),_=!0,u=e.frames!==r?e.frames:new Gu.FrenetFrames(y,v,!1),d=new ru,h=new ru,f=new ru);var b,x,w,I=this,S=this.vertices.length,T=t.extractPoints(p),C=T.shape,M=T.holes,D=!Su.isClockWise(C);if(D){for(C=C.reverse(),x=0,w=M.length;w>x;x++)b=M[x],Su.isClockWise(b)&&(M[x]=b.reverse());D=!1}var E,P=Su.triangulateShape(C,M),O=C;for(x=0,w=M.length;w>x;x++)b=M[x],C=C.concat(b);for(var A,k,R=C.length,z=P.length,N=0;R>N;N++)A=C[N],_?(h.copy(u.normals[0]).multiplyScalar(A.x),d.copy(u.binormals[0]).multiplyScalar(A.y),f.copy(l[0]).add(h).add(d),a(f.x,f.y,f.z)):a(A.x,A.y,0);for(E=1;v>=E;E++)for(N=0;R>N;N++)A=C[N],_?(h.copy(u.normals[E]).multiplyScalar(A.x),d.copy(u.binormals[E]).multiplyScalar(A.y),f.copy(l[E]).add(h).add(d),a(f.x,f.y,f.z)):a(A.x,A.y,g/v*E);n(),i()};var Gu=function t(e,n,i,r,o){function a(t,e,n){return M.vertices.push(new ru(t,e,n))-1}Cu.call(this),n=n||64,i=i||1,r=r||8,o=o||!1;var s,c,l,u,d,h,f,g,p,v,y,_,m,b,x,w,I,S,T,C=[],M=this,D=n+1,E=new ru,P=new t.FrenetFrames(e,n,o),O=P.tangents,A=P.normals,k=P.binormals;for(this.tangents=O,this.normals=A,this.binormals=k,g=0;D>g;g++)for(C[g]=[],l=g/(D-1),f=e.getPointAt(l),O[g],s=A[g],c=k[g],p=0;r>p;p++)u=p/r*G,d=-i*R(u),h=i*N(u),E.copy(f),E.x+=d*s.x+h*c.x,E.y+=d*s.y+h*c.y,E.z+=d*s.z+h*c.z,C[g][p]=a(E.x,E.y,E.z);for(g=0;n>g;g++)for(p=0;r>p;p++)v=o?(g+1)%n:g+1,y=(p+1)%r,_=C[g][p],m=C[v][p],b=C[v][y],x=C[g][y],w=new iu(g/n,p/r),I=new iu((g+1)/n,p/r),S=new iu((g+1)/n,(p+1)/r),T=new iu(g/n,(p+1)/r),this.faces.push(new su(_,m,x)),this.faceVertexUvs[0].push([w,I,T]),this.faces.push(new su(m,b,x)),this.faceVertexUvs[0].push([I.clone(),S,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Gu.prototype=gr(Mu),Gu.FrenetFrames=function(t,e,n){function i(){f[0]=new ru,g[0]=new ru,o=Number.MAX_VALUE,a=k(h[0].x),s=k(h[0].y),c=k(h[0].z),o>=a&&(o=a,d.set(1,0,0)),o>=s&&(o=s,d.set(0,1,0)),o>=c&&d.set(0,0,1),p.crossVectors(h[0],d).normalize(),f[0].crossVectors(h[0],p),g[0].crossVectors(h[0],f[0])}var r,o,a,s,c,l,u,d=new ru,h=[],f=[],g=[],p=new ru,v=new ou,y=e+1,_=1e-4;for(this.tangents=h,this.normals=f,this.binormals=g,l=0;y>l;l++)u=l/(y-1),h[l]=t.getTangentAt(u),h[l].normalize();for(i(),l=1;y>l;l++)f[l]=f[l-1].clone(),g[l]=g[l-1].clone(),p.crossVectors(h[l-1],h[l]),p.length()>_&&(p.normalize(),r=z(Ki(h[l-1].dot(h[l]),-1,1)),f[l].applyMatrix4(v.makeRotationAxis(p,r))),g[l].crossVectors(h[l],f[l]);if(n)for(r=z(Ki(f[0].dot(f[y-1]),-1,1)),r/=y-1,h[0].dot(p.crossVectors(f[0],f[y-1]))>0&&(r=-r),l=1;y>l;l++)f[l].applyMatrix4(v.makeRotationAxis(h[l],r*l)),g[l].crossVectors(h[l],f[l])};var Fu=function(t,e,n,i){Cu.call(this),e=e||18,n=n||0,i=i==u?G:i;for(var r=1/(t.length-1),o=1/e,a=0,s=e;s>=a;a++)for(var c=n+a*o*i,l=R(c),d=N(c),h=0,f=t.length;f>h;h++){var g=t[h],p=new ru;p.x=l*g.x-d*g.y,p.y=d*g.x+l*g.y,p.z=g.z,this.vertices.push(p)}var v=t.length;for(a=0,s=e;s>a;a++)for(h=0,f=t.length-1;f>h;h++){var y=h+v*a,_=y,m=y+v,b=(l=y+1+v,y+1),x=a*o,w=h*r,I=x+o,S=w+r;this.faces.push(new su(_,b,m)),this.faceVertexUvs[0].push([new iu(x,w),new iu(x,S),new iu(I,w)]),this.faces.push(new su(m,b,l)),this.faceVertexUvs[0].push([new iu(I,w),new iu(x,S),new iu(I,S)])}this.mergeVertices(),Ql(this),this.computeFaceNormals(),this.computeVertexNormals()};Fu.prototype=gr(Mu);var ju=function(t,e){e=e||{};var n=Tu.generateShapes(t,e);e.amount=e.amount!==r?e.amount:.5,e.convertYZ=!1,!1!==e.fill&&(e.bottom=!0,e.top=!0),Lu.call(this,n,e)};ju.prototype=gr(Bu);var Hu=d.Node=function(){Yi(Hu,this)},Uu={X:Cc,Y:Mc,Z:Dc},Zu={X:0,Y:1,Z:2},Wu={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},qu="xzy",Xu=function(t,e,n){if(e){var i=e[0],r=e[1],o=e[2];"xzy"===n?(Mc(t,r),Dc(t,o),Cc(t,i)):"xyz"===n?(Dc(t,o),Mc(t,r),Cc(t,i)):"yxz"===n?(Dc(t,o),Cc(t,i),Mc(t,r)):"yzx"===n?(Cc(t,i),Dc(t,o),Mc(t,r)):"zxy"===n?(Mc(t,r),Cc(t,i),Dc(t,o)):"zyx"===n?(Cc(t,i),Mc(t,r),Dc(t,o)):(Mc(t,r),Dc(t,o),Cc(t,i))}};uc("Node",il,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:qu,_64O:0,_rotationX:0,_53O:0,_host:u,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return ld},_22Q:function(){return iv},getX:function(){return this.p().x},setX:function(t){this.p(t,this.p().y)},getY:function(){return this.p().y},setY:function(t){this.p(this.p().x,t)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(t){this.setAnchor(t,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(t){this.setAnchor(this.getAnchor().x,t)},getScaleX:function(){return this.getScale().x},setScaleX:function(t){this.setScale(t,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(t){this.setScale(this.getScale().x,t)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(t,e){Ic(t,Pc(u,u,this.r3(),this.getRotationMode())),this.translate3d(t[0]*e,t[1]*e,t[2]*e)},translateFront:function(t){this.translate3dBy([0,0,1],t)},translateBack:function(t){this.translate3dBy([0,0,-1],t)},translateLeft:function(t){this.translate3dBy([-1,0,0],t)},translateRight:function(t){this.translate3dBy([1,0,0],t)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(t){this.translate3dBy([0,-1,0],t)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]),this.p(t,n),this.setElevation(e)},translate3d:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]),this.translate(t,n),this.setElevation(this._54O+e)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]),this.setSize(t,n),this.setTall(e)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]),this.setRotationX(t),this.setRotation(-e),this.setRotationZ(n)},setRotationY:function(t){this.setRotation(-t)},getRotationY:function(){return-this._64O},lookAtDirection:function(t,e){e=e||ft;var n=this,i=Ws(t);e===ft?(n.r3([-L(t[1]/i),-H(t[2],t[0])+F,0]),n.setRotationMode("xzy")):e===vt?(n.r3(0,-H(t[2],t[0]),L(t[1]/i)),n.setRotationMode("zyx")):e===pt?(n.r3(0,-H(t[2],t[0])+B,-L(t[1]/i)),n.setRotationMode("zyx")):e===yt?(n.r3([-L(t[1]/i)+F,-H(t[2],t[0])+F,0]),n.setRotationMode("xzy")):e===_t&&(n.r3([-L(t[1]/i)-F,-H(t[2],t[0])+F,0]),n.setRotationMode("xzy")),e===gt&&(n.r3([-L(t[1]/i)+B,-H(t[2],t[0])+F,B]),n.setRotationMode("zxy"))},lookAt:function(t,e){return this.lookAtDirection(pc(t,this.p3()),e)},lookAtX:function(){var t=new Na,e=new Na,n=new Na,i=new Ha,r=new Ha,o=new Za;return function(a,s){var c=Ec(this);i.fromArray(c),n.copy(this.p3()),t.copy(a).sub(n).normalize(),s===ft?e.set(0,0,1):s===gt?e.set(0,0,-1):s===pt?e.set(-1,0,0):s===vt?e.set(1,0,0):s===yt?e.set(0,1,0):s===_t&&e.set(0,-1,0),e.applyMatrix4(i).sub(n).normalize();var l=Math.acos(t.dot(e));if(l){var u=t.clone().cross(e).normalize();o.set(this.r3(),this.getRotationMode(),!0),i.makeRotationFromEuler(o),r.makeRotationAxis(u,-l),o.setFromRotationMatrix(r.multiply(i)),this.r3([o.x,o.y,o.z])}}}(),getHost:function(){return this._host},setHost:function(t){var e=this;if(e!==t&&e._host!==t){var n=e._host;n&&n._removeAttach(e),e._host=t,e._host&&e._host._addAttach(e),e.fp("host",n,t),e.onHostChanged(n,t)}},getAttaches:function(){return this._69O},_addAttach:function(t){var e=this;e._69O||(e._69O=new tl),e._69O.add(t),e.fp("attaches",u,t)},_removeAttach:function(t){var e=this;e._69O.remove(t),e._69O.isEmpty()&&delete e._69O,e.fp("attaches",t,u)},getImage:function(){if(this._pendingCheckImageJSON){var t=f.getImage(this._image);t&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof id&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function(t){var e=this,n=e._image,i=e.getWidth(),r=e.getHeight();e._image=t,e.fp("image",n,t)&&(null!=t&&(Ai(t)||Ei(t)&&/\.json$/i.test(t))&&(this._pendingCheckImageJSON=!0),e.fp(Lt,i,e.getWidth()),e.fp(Bt,r,e.getHeight()))},getElevation:function(){return this._54O},setElevation:function(t){var e=this;if(!e._50O){e._50O=1;var n=e._54O;e._54O=t,e.fp(Be,n,t),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(t){var e=this;if(!e._49O){e._49O=1;var n=e._64O;e._64O=t,e.fp(le,n,t),delete e._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(t){var e=this;if(!e._51O){e._51O=1;var n=e._rotationX;e._rotationX=t,e.fp("rotationX",n,t),delete e._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(t){var e=this;if(!e._52O){e._52O=1;var n=e._53O;e._53O=t,e.fp("rotationZ",n,t),delete e._52O}},getPosition:function(){return this._position},setPosition:function(t,e){var n=this;if(!n._50I){var i;if(n._50I=1,i=2===arguments.length?{x:t,y:e}:t,i.x!==n._position.x||i.y!==n._position.y){var r=n._position;n._position=i,n.fp(Le,r,i)}delete n._50I}},translate:function(t,e){var n=this._position;this.p(n.x+t,n.y+e)},getWidth:function(){var t=this;if(t._width>=0)return t._width;var e=t.getStyle("shape3d");if(e){var n=Ih(e);if(n&&n.rawS3)return n.rawS3[0];if("billboard"===e||"plane"===e){var i=Ss(t.getStyle("shape3d.image"));return i?$c(i,t):20}}i=Ss(t._image);return i?$c(i,t):20},setWidth:function(t){var e=this,n=e._width;e._width=t,e.fp(Lt,n,t)},getHeight:function(){var t=this;if(t._height>=0)return t._height;var e=t.getStyle("shape3d");if(e){var n=Ih(e);if(n&&n.rawS3)return n.rawS3[2];if("plane"===e){var i=Ss(t.getStyle("shape3d.image"));return i?Qc(i,t):20}if("billboard"===e)return 2}i=Ss(t._image);return i?Qc(i,t):20},setHeight:function(t){var e=this,n=e._height;e._height=t,e.fp(Bt,n,t)},getTall:function(){var t=this;if(t._tall>=0)return t._tall;var e=t.getStyle("shape3d");if(e){var n=Ih(e);if(n&&n.rawS3)return n.rawS3[1];if("billboard"===e){var i=Ss(t.getStyle("shape3d.image"));return i?Qc(i,t):20}if("plane"===e)return 2}return 20},setTall:function(t){var e=this,n=e._tall;e._tall=t,e.fp("tall",n,t)},setSize:function(t,e){var n=this;2===arguments.length?(n.setWidth(t),n.setHeight(e)):(n.setWidth(t.width),n.setHeight(t.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(t,e,n,i,r){var o=this,a=o.getAnchor(),s=o.getScale();arguments.length<=2&&(r=e,e=t.y,n=t.width,i=t.height,t=t.x);var c=r&&s.x<0?1-a.x:a.x,l=r&&s.y<0?1-a.y:a.y;o.p(t+n*c,e+i*l),r&&(n/=Math.abs(s.x),i/=Math.abs(s.y)),o.setWidth(n),o.setHeight(i)},getMatrix:function(){var t=this,e=t._64O,n=t._position,i=t.getScale();return new ka(e,n.x,n.y,i.x,i.y)},getAnchorRect:function(){var t=this,e=t.getWidth(),n=t.getHeight(),i=t.getAnchor();return{x:-e*i.x,y:-n*i.y,width:e,height:n}},toLocal:function(t){return this.getMatrix().tfi(t)},toGlobal:function(t){return this.getMatrix().tf(t)},getAttachPosition:function(){var t=new ka;return function(e,n,i,r){i=i||0,r=r||0;var o=this,a=o.getAnchor(),s=o._64O,c=o._position,l=o.getScale();return t.setFromTransform(s,c.x,c.y).tf({x:i+l.x*o.getWidth()*(e-a.x),y:r+l.y*o.getHeight()*(n-a.y)})}}(),isInRect:function(t){t=this.toLocal(t);var e=this.getWidth(),n=this.getHeight();return t.x+=e*this.getAnchorX(),t.y+=n*this.getAnchorY(),!(t.x<0||t.y<0||t.x>e||t.y>n)},getRect:function(){var t=this,e=t.getWidth(),n=t.getHeight(),i=t.getAnchor(),r={x:-e*i.x,y:-n*i.y,width:e,height:n},o=t.getMatrix();return qs([o.tf(r.x,r.y),o.tf(r.x+r.width,r.y),o.tf(r.x+r.width,r.y+r.height),o.tf(r.x,r.y+r.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var t=this,e=t.getAnchor(),n=t._anchorElevation;return{x:e.x,y:n,z:e.y}},setAnchorElevation:function(t){var e=this,n=e._anchorElevation;return n!==t&&(e._anchorElevation=t,e.fp("anchorElevation",n,t),!0)},setAnchor3d:function(t,e,n,i){var r,o=this;"number"==typeof t?r={x:t,y:e,z:n}:(r=t.length?{x:t[0],y:t[1],z:t[2]}:t,i=e);var a=o.getDataModel();a&&a.beginTransaction();var s=o.getAnchor3d(),c=o.setAnchor(r.x,r.z);if(o.setAnchorElevation(r.y)&&(c=!0),c&&i&&!Bn){o.getAnchor3d();var l=Ec(o),u=Ic([r.x-s.x,r.y-s.y,r.z-s.z],l);o.p3(u)}return a&&a.endTransaction(),c},getAnchor:function(){var t=this;if(t.hasOwnProperty("_anchor"))return t._anchor;var e=Ss(t._image);return e&&e.anchorX!==r?{x:e.anchorX,y:e.anchorY}:t._anchor},setAnchor:function(t,e,n){var i,r=this;"number"==typeof t?i={x:t,y:e}:(i=t.length?{x:t[0],y:t[1]}:t,n=e);var o=r.getAnchor();if(o.x!==i.x||o.y!==i.y){var a=r.getDataModel();if(a&&a.beginTransaction(),r._anchor=i,r.fp("anchor",o,i),n&&!Bn){var s=r.getPosition(),c=r.getSize(),l=r.getRotation(),u=r.getScale(),d=-c.width*(o.x-i.x)*u.x,h=-c.height*(o.y-i.y)*u.y,f=N(l),g=R(l);r.setPosition(s.x+g*d-f*h,s.y+f*d+g*h)}return a&&a.endTransaction(),!0}return!1},getScale:function(){return this._scale},setScale:function(t,e){var n,i=this;n=2===arguments.length?{x:t,y:e}:t;var r=i.getScale();(r.x!==n.x||r.y!==n.y)&&(i._scale=n,i.fp("scale",r,n))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var t=this,e=t._scaleTall,n=t.getScale();return[n.x,e,n.y]},getFinalScale3d:function(){var t=this,e=t.s3(),n=t._dynamicScale3d,i=t.getScale3d();return e&&(i[0]*=e[0],i[1]*=e[1],i[2]*=e[2]),n&&(i[0]*=n[0],i[1]*=n[1],i[2]*=n[2]),i},getFinalRotation3d:function(){var t=this;return t._dynamicRotation||t.r3()},setScaleTall:function(t){var e=this,n=e._scaleTall;n!==t&&(e._scaleTall=t,e.fp("scaleTall",n,t))},setScale3d:function(t,e,n){var i,r=this;i="number"==typeof t?{x:t,y:e,z:n}:t.length?{x:t[0],y:t[1],z:t[2]}:t,r.setScaleTall(i.y),r.setScale(i.x,i.z)},getCorners:function(t,e){t==u&&(t=0),e==u&&(e=t);var n=this,i=n.getAnchor(),r=n.getWidth(),o=n.getHeight(),a=-r*i.x-t,s=-o*i.y-e,c=r+2*t,l=o+2*e,d=n.getMatrix();return[d.tf(a,s),d.tf(a,s+l),d.tf(a+c,s+l),d.tf(a+c,s)]},getEditControlPoints:function(t,e,n){e==u&&(e=0),n==u&&(n=e);var i=this,r=i.getAnchor(),o=i.getWidth(),a=i.getHeight(),s=-o*r.x-e,c=-a*r.y-n,l=o+2*e,d=a+2*n;if(t)return[{x:s,y:c},{x:s,y:0},{x:s,y:c+d},{x:0,y:c+d},{x:s+l,y:c+d},{x:s+l,y:0},{x:s+l,y:c},{x:0,y:c}];var h=i.getMatrix();return[h.tf(s,c),h.tf(s,0),h.tf(s,c+d),h.tf(0,c+d),h.tf(s+l,c+d),h.tf(s+l,0),h.tf(s+l,c),h.tf(0,c)]},rotateAt:function(t,e,n){var i=this,r=i._position,o=i._64O,a=new ka(o,r.x,r.y).tf(t,e),s=P(t*t+e*e),c=H(r.y-a.y,r.x-a.x)+n;i.setRotation(o+n),i.p(a.x+s*R(c),a.y+s*N(c))},onParentChanged:function(){Hu.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:function(){var t={};return"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach((function(e){t[e]=!0})),function(e){var n=this;Hu.superClass.onPropertyChanged.call(n,e),t[e.property]&&!n._layoutUpdating&&n.updateLayoutParameters(null,e.property),n._69O&&n._69O.each((function(t){t.handleHostPropertyChange(e)})),n._49I&&n._49I.each((function(t){t.fp("agentChange",!0,!1)}))}}(),onHostChanged:function(){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(t){this.updateAttach(t)},onStyleChanged:function(t){Hu.superClass.onStyleChanged.apply(this,arguments),pl[t]&&this.updateAttach()},updateAttach:function(t){var e=this;return Bn?void e.updateLayoutParameters():void(e._51I||(e._51I=1,e._71O(t),delete e._51I))},_71O:function(t){var e,n,i,r,o,a,s=this,c=s._host,l=t?t.property:u,h=t?t.oldValue:u,f=t?t.newValue:u;if(c instanceof d.Grid){if(l===Be)s.setElevation(s._54O+f-h);else if(!t||gl[l]){if(e=s.s("attach.row.index"),n=s.s("attach.column.index"),i=c.getCellRect(e,n),!i)return;r=s.s("attach.row.span"),o=s.s("attach.column.span"),(1!==r||1!==o)&&(i=Xs(i,c.getCellRect(e+r-1,n+o-1))),_l(i,s,"attach.padding",1),s.setRect(i)}}else if(c instanceof td&&(a=s.s("attach.index"))>=0&&(!t||vl[l])){var g=s.s("attach.thickness");g!=u&&s.setHeight(c.getThickness()*g);var p=s.s("attach.offset"),v=c.getPoints(),y=v.size();if(y>a){var _=v.get(a),m=y===a+1?v.get(0):v.get(a+1),b=[m.x-_.x,m.y-_.y],x=Ws(b);if(x){s.s("attach.offset.relative")&&(p*=x),s.s("attach.offset.opposite")&&(p=x-p);var w={x:_.x+b[0]/x*p,y:_.y+b[1]/x*p},I=s.s("attach.gap");I&&(s.s("attach.gap.relative")&&(I*=c.getThickness()),w=Uh(u,w,m,I)),s.p(w),s.setRotation(H(b[1],b[0]))}}}else t&&(l===Le?s.translate(f.x-h.x,f.y-h.y):l===Be?s.setElevation(s._54O+f-h):fl[l]?s._11Q(c,l,f-h):("anchor"===l||"width"===l||"height"===l||"scale"===l)&&s.layout(c))},_11Q:function(){var t=new d.Math.Euler,e=d.Math.Euler.ReverseOrder,n=new d.Math.Vector2,i=new d.Math.Vector2;return function(r,o,a){var s=this,c=r.p3(),l=r.r3(),u=s.p3(),d=s.r3();if(o===le&&(o="rotationY",a=-a),(o===le||"rotationY"===o)&&0===d[0]&&0===d[2]&&0===l[0]&&0===l[2]&&0===u[1]&&0===c[1])return s.setRotation(-d[1]-a),n.set(u[0],u[2]).rotateAround(i.set(c[0],c[2]),-a),void s.p(n.x,n.y);var h=Wu[r.getRotationMode()],f=h[0],g=h[1],p=h[2],v=Uu[f],y=Uu[g],_=Uu[p],m=_c();o===le+f?(_(m,l[Zu[p]]),y(m,l[Zu[g]]),v(m,a),y(m,-l[Zu[g]]),_(m,-l[Zu[p]])):o===le+g?(_(m,l[Zu[p]]),y(m,a),_(m,-l[Zu[p]])):o===le+p&&_(m,a);var b=pc(u,c);Ic(b,m),s.p3(c[0]+b[0],c[1]+b[1],c[2]+b[2]);var x=s.getRotationMode();Xu(m,s.r3(),x),t.setFromRotationMatrix(m,e(x)),s.r3([t.x,t.y,t.z])}}(),isHostOn:function(t){var e=this;if(e._host&&t&&t._69O)for(var n={},i=e._host;i&&i!==e&&!n[i._id];){if(i===t)return!0;n[i._id]=i,i=i._host}return!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)},getScaledSize:function(){var t=this.getSize(),e=this.getScale();return t.width*=Math.abs(e.x),t.height*=Math.abs(e.y),t},layout:function(t){if(t=t||this.getHost()){var e=this,n=e.s("layout.h")||"center",i=e.s("layout.v")||"center";if("center"!==n||"center"!==i){var o=new d.Math.Vector2,a=t.getPosition(),s=t.getAnchor(),c=t.getScaledSize();e.getPosition();var l,u,h,f,g,p=1,v=1;switch(e._layoutUpdating=!0,n){case"left":o.setX(e._layoutHValue-s.x*c.width);break;case"right":o.setX((1-s.x)*c.width-e._layoutHValue);break;case"leftright":l=c.width-e._layoutHValue[2],h=e.getRotation()-t.getRotation(),f=Math.abs(Math.sin(h)),g=Math.abs(Math.cos(h)),p+=g*l/e._layoutHValue[3],v+=f*l/e._layoutHValue[4],o.setX(e._layoutHValue[1]+(e._layoutHValue[5]-s.x)*c.width);break;case"center":o.setX((.5-s.x)*c.width-e._layoutHValue);break;case"scale":h=e.getRotation()-t.getRotation(),f=Math.abs(Math.sin(h)),g=Math.abs(Math.cos(h)),o.setX((.5-s.x)*c.width-e._layoutHValue[1]*c.width/e._layoutHValue[0]),u=c.width/e._layoutHValue[2]-1,p+=g*u,v+=f*u}switch(i){case"top":o.setY(e._layoutVValue-s.y*c.height);break;case"bottom":o.setY((1-s.y)*c.height-e._layoutVValue);break;case"topbottom":h||(h=e.getRotation()-t.getRotation(),f=Math.abs(Math.sin(h)),g=Math.abs(Math.cos(h))),l=c.height-e._layoutVValue[2],p+=f*l/e._layoutVValue[3],v+=g*l/e._layoutVValue[4],o.setY(e._layoutVValue[1]+(e._layoutVValue[5]-s.y)*c.height);break;case"center":o.setY((.5-s.y)*c.height-e._layoutVValue);break;case"scale":h||(h=e.getRotation()-t.getRotation(),f=Math.abs(Math.sin(h)),g=Math.abs(Math.cos(h))),o.setY((.5-s.y)*c.height-e._layoutVValue[1]*c.height/e._layoutVValue[0]),u=c.height/e._layoutVValue[2]-1,p+=f*u,v+=g*u}if("leftright"===n||"scale"===n||"topbottom"===i||"scale"===i){var y=this.getScale(),_=Math.abs(y.x),m=Math.abs(y.y);"leftright"===n||"scale"===n?e.setSize(e._layoutHValue[3]*p/_,e._layoutHValue[4]*v/m):e.setSize(e._layoutVValue[3]*p/_,e._layoutVValue[4]*v/m)}o.rotateAround(null,t.getRotation()),this.setPosition(o.x+a.x,o.y+a.y),e._layoutUpdating=r}}},updateLayoutParameters:function(t,n){if(t=t||this.getHost()){var i=this,r=i.s("layout.h"),o=i.s("layout.v");if(r||o){var a,s,c,l,u,h,f=new d.Math.Vector2,g=t.getPosition(),p=t.getAnchor(),v=t.getScaledSize(),y=i.getPosition(),_=i.getScaledSize();switch(f.set(y.x-g.x,y.y-g.y),f.rotateAround(null,-t.getRotation()),r){case"left":i._layoutHValue=f.x+p.x*v.width;break;case"right":i._layoutHValue=-f.x+(1-p.x)*v.width;break;case"center":i._layoutHValue=-f.x+(.5-p.x)*v.width;break;case"leftright":case"scale":"scale"===r?a=-f.x+(.5-p.x)*v.width:(s=i.getAnchor(),c=i.getRotation()-t.getRotation(),l=Math.cos(c),u=Math.sin(c),h=-Math.min(-s.x*l+s.y*u,-s.x*l-(1-s.y)*u,(1-s.x)*l+s.y*u,(1-s.x)*l-(1-s.y)*u),a=f.x-(h-p.x)*v.width),"position"===n&&"object"==e(i._layoutHValue)?(i._layoutHValue[0]=v.width,i._layoutHValue[1]=a):i._layoutHValue=[v.width,a,v.width,_.width,_.height,h]}switch(o){case"top":i._layoutVValue=f.y+p.y*v.height;break;case"bottom":i._layoutVValue=-f.y+(1-p.y)*v.height;break;case"center":i._layoutVValue=-f.y+(.5-p.y)*v.height;break;case"topbottom":case"scale":"scale"===o?a=-f.y+(.5-p.y)*v.height:(c||(s=i.getAnchor(),c=i.getRotation()-t.getRotation(),l=Math.cos(c),u=Math.sin(c)),h=-Math.min(-s.x*u-s.y*l,-s.x*u+(1-s.y)*l,(1-s.x)*u-s.y*l,(1-s.x)*u+(1-s.y)*l),a=f.y-(h-p.y)*v.height),"position"===n&&"object"==e(i._layoutVValue)?(i._layoutVValue[0]=v.height,i._layoutVValue[1]=a):i._layoutVValue=[v.height,a,v.height,_.width,_.height,h]}}}},getSerializableProperties:function(){var t=Hu.superClass.getSerializableProperties.call(this);return Wi(t,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),t}});var Yu=d.Edge=function(t,e){var n=this;Yi(Yu,n),n.setSource(t),n.setTarget(e)};uc("Edge",il,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return ud},_22Q:function(){return rv},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(t){if(t===this)return!1;if(Vi(t))return!0;for(var e,n,i,r,o,a=[this],s=-1,c=0;c>s;)if(s++,e=a[s],n=e._44I)for(n=n.getArray(),r=0,o=n.length;o>r;r++)if(i=n[r],Li(i)&&!(a.indexOf(i)>=0)){if(i===t)return!1;a.push(i),c++}return!0},setSource:function(t){var e=this;if(e._source!==t&&e.canSetSourceTarget(t)){var n=e._source;e._source=t,n&&n._16I(e),t&&t._2I(e),e._7I(),e.fp("source",n,t)}},setTarget:function(t){var e=this;if(e._target!==t&&e.canSetSourceTarget(t)){var n=e._target;e._target=t,n&&n._18I(e),t&&t._4I(e),e._7I(),e.fp("target",n,t)}},isLooped:function(){var t=this;return t._source===t._target&&Vi(t._source)&&Vi(t._target)},onPropertyChanged:function(){var t=this;t._49I&&t._49I.each((function(t){t.fp("agentChange",!0,!1)}))},_7I:function(){var t,e=this,n=wl(e);e._40I!==n&&(t=this._40I,t&&t._15I(e),e._40I=n,n&&n._1I(e),e.fp("sourceAgent",t,n),Ml(t,e._41I),Ml(n,e._41I));var i=Il(e);e._41I!==i&&(t=e._41I,t&&t._17I(e),e._41I=i,i&&i._3I(e),e.fp("targetAgent",t,i),Ml(t,e._40I),Ml(i,e._40I))},_22I:function(t){this._52I=t,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var t=this;return t._52I&&t._52I.get(0)!==t&&!t.getStyle(ae)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var t=this,e=t._52I;return e&&!t.getStyle(ae)&&e.size()>1&&t===e.get(0)},toggle:function(){var t=this._52I,e=!this.s(ae);t&&t.size()>1&&(t.each((function(t){t.s(ae,e)})),t.getSiblings().each((function(e){e!==t&&e.each((function(t){t.fp("edgeGroup",u,e)}))})))},setStyle:function(t,e){(t===se||"edge.segments"===t)&&(e=Ni(e)),Yu.superClass.setStyle.call(this,t,e)},onStyleChanged:function(t){Yu.superClass.onStyleChanged.apply(this,arguments),hl[t]&&Ml(this._41I,this._40I)},getSerializableProperties:function(){var t=Yu.superClass.getSerializableProperties.call(this);return Wi(t,{source:1,target:1}),t}});var $u=d.Group=function(){Yi($u,this)};uc("Group",Hu,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return hd},onChildAdded:function(){$u.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){$u.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var t=this;if(!t._54I&&!Bn){var e=t.getChildrenRect();e&&(t._53I=1,t.p(na(t.s("group.position"),e,t.getSize())),delete t._53I)}},getChildrenRect:function(){var t,e=this;return e.eachChild((function(n){Vi(n)&&(t=Xs(t,e.getChildRect(n)))})),t},getChildRect:function(t){var e;return Vi(t)&&t.s(Gt)&&(Bi(t)&&t.isExpanded()&&t.eachChild((function(n){e=Xs(e,t.getChildRect(n))})),!e&&t.getRect&&(e=t.getRect())),e},setPosition:function(t,e){var n,i=this;i._54I||(n=2===arguments.length?{x:t,y:e}:t,Bn||i._53I||(i._54I=1,Qo(i._children,n.x-i._position.x,n.y-i._position.y),delete i._54I),$u.superClass.setPosition.call(this,n))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(t){var e=this;if(e._57O!==t){var n=e._57O;e._57O=t,e.fp("expanded",n,e._57O),e._fireInvalidateDeep(),e._8I()}},_fireInvalidateDeep:function(){this.eachChild((function(t){Bi(t)?t._fireInvalidateDeep():t.iv()}))},_8I:function(){$u.superClass._8I.call(this),this.eachChild((function(t){Vi(t)&&t._8I()}))},onStyleChanged:function(t){$u.superClass.onStyleChanged.apply(this,arguments),"group.position"===t&&this._81I()},getSerializableProperties:function(){var t=$u.superClass.getSerializableProperties.call(this);return t.expanded=1,t}});var Qu=d.Block=function(){Yi(Qu,this)};uc("Block",Hu,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,ms_ac:["clickThroughEnabled","syncSize"],getUIClass:function(){return fd},onChildAdded:function(){Qu.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Qu.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var t=this;if(!Bn&&!t._updatingToChildren&&t._syncSize&&!t._freezeSyncFromChildren){var e,n,i,r,o,a=[],s=t.getRotation();if(t.eachChild((function(t){Vi(t)&&a.push.apply(a,t.getCorners())})),a.length){t._updatingFromChildren=1;var c=R(-s),l=N(-s),u=1/0,d=-1/0,h=1/0,f=-1/0;for(r=0,o=a.length;o>r;r++)i=a[r],e=i.x,n=i.y,i.x=c*e-l*n,i.y=l*e+c*n,u=A(u,i.x),d=O(d,i.x),h=A(h,i.y),f=O(f,i.y);var g,p=t.getScale();t.setSize(k((d-u)/p.x),k((f-h)/p.y)),p.x<0&&(g=u,u=d,d=g),p.y<0&&(g=h,h=f,f=g),c=R(s),l=N(s);var v=t.getAnchor();e=u+(d-u)*v.x,n=h+(f-h)*v.y,t.setPosition(c*e-l*n,l*e+c*n),delete t._updatingFromChildren}}},setPosition:function(t,e){var n,i=this;i._updatingToChildren||(n=2===arguments.length?{x:t,y:e}:t,Bn||i._updatingFromChildren||(i._updatingToChildren=1,Qo(i._children,n.x-i._position.x,n.y-i._position.y),delete i._updatingToChildren),Qu.superClass.setPosition.call(this,n))},setWidth:function(t){return this.setSize(t,this.getHeight())},setHeight:function(t){return this.setSize(this.getWidth(),t)},setSize:function(t,e){1>t&&(t=1),1>e&&(e=1);var n=this;if(!n._updatingToChildren){2!==arguments.length&&(e=t.height,t=t.width);var i=n.getWidth(),r=n.getHeight();if(t!==i&&Qu.superClass.setWidth.call(n,t),e!==r&&Qu.superClass.setHeight.call(n,e),!Bn&&!n._updatingFromChildren){n._updatingToChildren=1;var o=t/i,a=e/r;n._adjustChildScaleOrSize(o,a,"size"),delete n._updatingToChildren,n.updateFromChildren()}}},_adjustChildScaleOrSize:function(t,e,n){var i=this;if(i._syncSize){var r=i.getPosition(),o=i.getRotation();i.getScale(),i.eachChild((function(i){if(Vi(i)){var a=i.getPosition(),s=i.getRotation(),c=i.getWidth(),l=i.getHeight(),u=i.getScale(),h=u.x*c,f=u.y*l,g=new ka(s,a.x,a.y,h,f);g.translate(-r.x,-r.y),g.rotate(-o),s=H(g.b*Math.sign(h),g.a*Math.sign(h)),g.scale(t,e);var p,v,y,_=R(s);if(Math.abs(_)<.001?(p=N(s),v=g.b/p,y=-g.c/p):(v=g.a/_,y=g.d/_),"scale"===n)i.setScale(v/c,y/l);else if("size"===n){var m=v/u.x,b=y/u.y;i.setScale(tr(v)*Math.abs(u.x),tr(y)*Math.abs(u.y)),i instanceof d.Shape?(i.setWidthForce(Math.max(Math.abs(m),1e-5)),i.setHeightForce(Math.max(Math.abs(b),1e-5))):i.setSize(Math.max(.01,Math.abs(m)),Math.max(.01,Math.abs(b)))}g.rotate(o),g.translate(r.x,r.y),i.setPosition(g.tx,g.ty)}}))}},_calcChangeFactor:function(t,e,n,i){var r,o,a,s;return r=k(t),o=k(n),a=r>o?r/o:o/r,r=k(e),o=k(i),s=r>o?r/o:o/r,O(a,s)},setAnchor:function(){var t=this;if(!t._updatingToChildren){var e=t.getAnchor();if(Qu.superClass.setAnchor.apply(t,arguments),!Bn&&!t._updatingFromChildren&&t._syncSize){t._updatingToChildren=1;var n=t.getAnchor();t.getPosition();var i=t.getSize(),r=t.getScale(),o=t.getRotation(),a=-i.width*r.x*(e.x-n.x),s=-i.height*r.y*(e.y-n.y),c=N(o),l=R(o),u=l*a-c*s,d=c*a+l*s;t.eachChild((function(t){if(Vi(t)){var e=t.getPosition();t.setPosition(e.x-u,e.y-d)}})),delete t._updatingToChildren}}},setRotation:function(t){var e=this;if(!e._updatingToChildren){var n=e.getRotation();if(Qu.superClass.setRotation.apply(e,arguments),!Bn&&!e._updatingFromChildren){e._updatingToChildren=1;var i=e.getPosition(),r=t-n;e.eachChild((function(t){if(Vi(t)){var e=t.getMatrix();e.translate(-i.x,-i.y),e.rotate(r),e.translate(i.x,i.y);var n=Math.sign(t.getScale().x);t.setRotation(H(e.b*n,e.a*n)),t.setPosition(e.tx,e.ty)}})),delete e._updatingToChildren}}},setScale:function(t,e){var n=this;if(!n._updatingToChildren){null==e&&(e=t.y,t=t.x);var i=n.getScale();if(k(t)<.01&&(t=.01*(tr(t)||tr(i.x))),k(e)<.01&&(e=.01*(tr(e)||tr(i.y))),Qu.superClass.setScale.call(n,t,e),!Bn&&!n._updatingFromChildren){n._updatingToChildren=1;var r=t/i.x,o=e/i.y;n._adjustChildScaleOrSize(r,o,"size"),delete n._updatingToChildren,n.updateFromChildren()}}},getSerializableProperties:function(){var t=Qu.superClass.getSerializableProperties.call(this);return t.clickThroughEnabled=1,t.syncSize=1,t}});var Ju=d.Grid=function(){Yi(d.Grid,this)};uc("Grid",Hu,{IRotatable:!1,_icon:"grid_icon",_image:u,getUIClass:function(){return vd},setRotation:function(){},getCellRect:function(t,e){var n=this,i=n.s("grid.row.count"),r=n.s("grid.column.count");if(0>=i||0>=r||0>t||t>=i||0>e||e>=r)return u;var o,a,s,c=n.getRect(),l=n.s("grid.row.percents"),d=n.s("grid.column.percents");if(_l(c,n,"grid.border",-1),l&&l._as&&(l=l._as),d&&d._as&&(d=d._as),l&&l.length===i){for(s=0,o=0;t>o;o++)s+=c.height*l[o];c.y+=s,c.height=c.height*l[t]}else c.height=c.height/i,c.y+=c.height*t;if(d&&d.length===r){for(a=0,o=0;e>o;o++)a+=c.width*d[o];c.x+=a,c.width=c.width*d[e]}else c.width=c.width/r,c.x+=c.width*e;return tc(c,-n.s("grid.gap")),c}});var Ku=d.Text=function(){Yi(Ku,this),this.setSize(100,50),this.s("text","TEXT")};uc("Text",Hu,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return yd},setWidth:function(t){t||(t=.001),Ku.superClass.setWidth.call(this,t)},setHeight:function(t){t||(t=.001),Ku.superClass.setHeight.call(this,t)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),Is("__text__",{width:{value:100,isSafeFunc:!0,func:function(t){return t._width}},height:{value:50,isSafeFunc:!0,func:function(t){return t._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"}}]});var td=d.Shape=function(){Yi(td,this),this._59O=new tl};td.__de__=Gl,uc("Shape",Hu,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return gd},_22Q:function(){return ov},getLength:function(t){return ur(Mo(this._59O,this._58O,t,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var t=this._58O;return t?new tl(t._as.slice(0)):t},setSegments:function(t){var e=this._58O;t=t?Ri(t)?new tl(t.slice(0)):new tl(t._as.slice(0)):null,(e&&t&&e._as.join(",")!==t._as.join(",")||e!==t)&&(this._58O=t,this.fp("segments",e,t))},getPoints:function(){return this._59O},toPoints:function(){var t=this._59O;return new tl(t._as.slice(0))},setPoints:function(t,e){var n,i,r,o,a,s,c=this,l=c._59O;t=t?Ri(t)?new tl(t.slice(0)):new tl(t._as.slice(0)):new tl,e&&(n=c.getPosition(),s=new ka(c.getRotation(),0,0,c.getScale().x,c.getScale().y)),(l&&t&&l._as.join(",")!==t._as.join(",")||l!==t)&&(c._59O=t,c.fs(),c.fp("points",l,t)),e&&(i=c.getPosition(),r=i.x-n.x,o=i.y-n.y,a=s.tf(r,o),c.setPosition(i.x-r+a.x,i.y-o+a.y))},addPoint:function(t,e,n){var i=this.toPoints();i.add(t,e),this.setPoints(i,n)},setPoint:function(t,e,n){var i=this.toPoints();i.set(t,e),this.setPoints(i,n)},removePointAt:function(t){var e=this.toPoints();e.removeAt(t),this.setPoints(e)},setWidthForce:function(t){var e=this;if(!e._55I&&!Bn&&e.getWidth()){e._55I=1;var n=e._position.x,i=t/e.getWidth(),r=e.toPoints(),o=new tl;r.each((function(t){o.add({x:(t.x-n)*i+n,y:t.y,e:t.e})})),e.setPoints(o),To(e,[i,0,0,1,n*(1-i),0]),e.fs(),delete e._55I}td.superClass.setWidth.call(e,t)},setWidth:function(t){return this.setWidthForce(1>t?1:t)},setHeightForce:function(t){var e=this;if(!e._55I&&!Bn&&e.getHeight()){e._55I=1;var n=e._position.y,i=t/e.getHeight(),r=e.toPoints(),o=new tl;r.each((function(t){o.add({x:t.x,y:(t.y-n)*i+n,e:t.e})})),e.setPoints(o),To(e,[1,0,0,i,0,n*(1-i)]),e.fs(),delete e._55I}td.superClass.setHeight.call(e,t)},setHeight:function(t){return this.setHeightForce(1>t?1:t)},setAnchorElevation:function(t){var e=this;e._55I=!0;var n=e._updatingAnchor3d,i=!Bn&&!n;if(i){var r,o=t,a=e.getAnchorElevation(),s=e.getTall();r=s*(a-o),e.shiftPointsElevation(r)}var c=td.superClass.setAnchorElevation.apply(e,arguments);return n||delete e._55I,c},getShapeElevation:function(){var t=this,e=t._54O;return e-(t.getTall()||0)*(t._anchorElevation-.5)},setAnchor3d:function(t,e,n,i){var r,o=this;"number"==typeof t?r={x:t,y:e,z:n}:(r=t.length?{x:t[0],y:t[1],z:t[2]}:t,i=e),o._55I=!0,o._updatingAnchor3d=!0;var a=o.getDataModel();if(a&&a.beginTransaction(),!Bn){var s=o.getAnchor3d(),c=o.getSize(),l=o.getTall(),u=c.width*(s.x-r.x),d=c.height*(s.z-r.z),h=l*(s.y-r.y);i||o.shiftPoints(u,d,h);var f=o.p3()}var g=td.superClass.setAnchor3d.apply(o,arguments);if(!Bn&&i){var p=o.p3();o.shiftPoints(p[0]-f[0]+u,p[2]-f[2]+d,p[1]-f[1]+h)}return a&&a.endTransaction(),delete o._updatingAnchor3d,delete o._55I,g},setAnchor:function(t,e,n){var i=this;i._55I=!0;var r=i._updatingAnchor3d,o=!Bn&&!r;if(o){var a,s,c;"number"==typeof t?c={x:t,y:e}:(c=t.length?{x:t[0],y:t[1]}:t,n=e);var l=i.getAnchor(),u=i.getSize();a=u.width*(l.x-c.x),s=u.height*(l.y-c.y),n||i.shiftPoints(a,s);var d=i.getPosition()}var h=td.superClass.setAnchor.apply(i,arguments);if(o){var f=i.getPosition();n&&i.shiftPoints(f.x-d.x+a,f.y-d.y+s)}return r||delete i._55I,h},shiftPoints:function(t,e,n){var i=this,r=i.getElevation()||0,o=i.toPoints(),a=new tl;o.each((function(i){var o=i.e;n&&(o=(o==u?r:o)+n),a.add({x:i.x+t,y:i.y+e,e:o})})),i.setPoints(a),i.fs()},shiftPointsElevation:function(t){return this.shiftPoints(0,0,t)},setPosition:function(t,e){var n,i=this;if(!i._28Q){if(i._28Q=1,!i._55I&&!Bn){n=2===arguments.length?{x:t,y:e}:t;var r=n.x-i._position.x,o=n.y-i._position.y;if(0===r&&0===o)return void delete i._28Q;i._55I=1,i.shiftPoints(r,o),To(i,[1,0,0,1,r,o]),delete i._55I}td.superClass.setPosition.apply(i,arguments),delete i._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var t=this;if(2!==t._59O.size())return!1;var e=t._58O;return!e||2===e.size()&&1===e.get(0)&&2===e.get(1)},fireShapeChange:function(){var t=this;if(!t._55I&&!Bn){var e=qs(t._59O);e&&(t._55I=1,t.setRect(e),delete t._55I)}t.fp(kt,!1,!0)},getSerializableProperties:function(){var t=td.superClass.getSerializableProperties.call(this);return t.segments=1,t.points=1,t.thickness=1,t.closePath=1,t}});var ed=d.Polyline=function(){Yi(ed,this),this.s({"shape.background":null,"shape.border.width":2})};uc("Polyline",td,{_icon:"polyline_icon",_22Q:function(){return av},getUIClass:function(){return pd},setClosePath:function(){},setTall:function(t){var e=this;if(!e._55I&&!e._24Q&&!Bn&&e.getTall()){e._24Q=1;var n=e._54O,i=t/e.getTall();e._59O.each((function(t){t.e=t.e==u?n:(t.e-n)*i+n})),e.fs(),delete e._24Q}ed.superClass.setTall.call(e,t)},setElevation:function(t){var e=this;if(!e._55I&&!e._24Q&&!Bn){e._24Q=1;var n=t-e._54O;e._59O.each((function(e){e.e==u?e.e=t:e.e+=n})),e.fs(),delete e._24Q}ed.superClass.setElevation.apply(e,arguments)},fireShapeChange:function(){var t=this,e=t._59O;if(!t._55I&&!t._24Q&&!Bn){var n=e.size();if(n){var i=1,r=e.get(0),o=t._54O;r.e==u&&(r.e=o);for(var a=r.e,s=0;n>i;i++){r=e.get(i),r.e==u&&(r.e=o);var c=A(a,r.e),l=O(a+s,r.e);a=c,s=l-c}t._24Q=1,t.setTall(s),t.setElevation(a+s*t._anchorElevation),delete t._24Q}}ed.superClass.fireShapeChange.apply(t,arguments)}});var nd=d.SubGraph=function(){Yi(nd,this)};uc("SubGraph",Hu,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){nd.superClass._8I.call(this),this.eachChild((function(t){Vi(t)&&t._8I()}))}}),f.loadingRefGraph=0;var id=d.RefGraph=function(){Yi(id,this)};uc("RefGraph",Qu,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(t){var e=this._ref;this._ref=t,this.fp("ref",e,t),this.updateRef()},_21I:function(){id.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var t=this;if(f.loadingRefGraph++,t.clearChildrenFromDataModel(),f.loadingRefGraph--,t._ref&&t._dataModel){t._xhrLoadHandler&&(t._xhrLoadHandler.cancel=!0);var e=Bn,n=t._xhrLoadHandler=function(n){if(n&&t._dataModel){f.loadingRefGraph++;var i=t._pendingUpdateInfo={needToRestore:e};e&&(i.position=t.p(),i.width=t.getWidth(),i.height=t.getHeight(),i.rotation=t.getRotation(),i.anchor=t.getAnchor(),i.scale=t.getScale()),t.p(0,0),t.setAnchor(.5,.5),t.setRotation(0),t.setScale(1,1);var r=f.parse(n),o=t._dataModel.deserialize(r,t,{justDatas:!0});o.each((function(e){e._refGraph=t})),t.checkPendingUpdateInfo(),f.loadingRefGraph--,f.handleRefGraphLoaded(t,o,r)}};n.xhrLoadCalled=!1,f.load(t._ref,(function(t){n.cancel||(n.xhrLoadCalled?n(t):Es((function(){n(t)})))})),n.xhrLoadCalled=!0}},checkPendingUpdateInfo:function(){var t=this,e=t._pendingUpdateInfo;if(e){var n=!0;this.eachChild((function(t){(t._pendingCheckImageJSON||t._pendingUpdateInfo)&&(n=!1)})),n&&(f.loadingRefGraph++,t._pendingUpdateInfo=null,t.updateFromChildren(),e.needToRestore&&(t.setSize(e.width,e.height),t.setAnchor(e.anchor),t.setRotation(e.rotation),t.setScale(e.scale),t.p(e.position)),this.getParent()instanceof id&&this.getParent().checkPendingUpdateInfo(),t.onPendingUpdated&&t.onPendingUpdated(),f.loadingRefGraph--)}else t.onPendingUpdated&&(f.loadingRefGraph++,t.onPendingUpdated(),f.loadingRefGraph--)},getSerializableProperties:function(){var t=id.superClass.getSerializableProperties.call(this);return t.ref=1,t}}),d.EdgeGroup=function(t,e){this._70O=t,this._siblings=e;for(var n,i,r=0,o=t.size(),a=g[ae];o>r;r++)if(n=t.get(r).getStyle(ae,!1),n!=u){a=n;break}a==u&&(a=!0);var s=f.edgeGroupAgentFunc;for(s&&(i=s(t),i&&i!==t.get(0)&&(t.remove(i),t.add(i,0))),r=0;o>r;r++)t.get(r).s(ae,a)},uc("EdgeGroup",i,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(t){return this._70O.get(t)},indexOf:function(t){return this._70O.indexOf(t)},each:function(t,e){this._70O.each(t,e)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(t,e){this._siblings.each((function(n){n._70O.each(t,e)}))}});var rd=function(t,e,n){var i=Jn[t]={type:t,action:e};if(n)for(var r in n)i[r]=n[r]};Wi(f,{setConnectAction:rd,getConnectAction:function(t,e){if(!e){if(!t)return null;e=t.getCurrentConnectActionType()}return Jn[e]},doConnectAction:function(t,e,n,i){i=i||t.getCurrentConnectActionType();var r=Jn[i];if(!r)return!1;var o=r.action;return!!o&&(e instanceof Ad.Group?t.sm().getSelection().each((function(e){o.call(null,t,e,n)})):o.call(null,t,e,n),!0)},doDeleteConnectionAction:function(t,e,n){n=n||t.getCurrentConnectActionType();var i=Jn[n];if(!i||!i["delete"])return!1;var r=i["delete"].action;return!!r&&(e instanceof Ad.Group?t.sm().getSelection().each((function(e){r.call(null,t,e)})):r.call(null,t,e),!0)}});var od=d.JSONSerializer=function(t,e){this.dm=this._dataModel=t,this._hierarchical=!!f.forceHierarchicalSerialization||(e==u?t.isHierarchicalRendering():e)};uc("JSONSerializer",i,{ms_ac:["hierarchical"],serialize:function(t){return f.stringify(this.toJSON(),t)},toJSON:function(){var t=this,e=t.dm,n=e.getRoots(),i=t.json={v:f.getVersion(),p:{},a:{},d:[]},o=e.getSerializableAttrs();for(var a in e.getInit()&&(i.init=e.getInit()),e.getName()&&(i.p.name=e.getName()),e.getBackground()&&(i.p.background=e.getBackground()),e.getLayers()&&(i.p.layers=e.getLayers()),e.getEnvmap()&&(i.p.envmap=e.getEnvmap()),i.p.autoAdjustIndex=e.isAutoAdjustIndex(),i.p.hierarchicalRendering=e.isHierarchicalRendering(),o){var s=e.a(a);s!==r&&t[tn](a,s,i.a)}return $i(i.a)&&delete i.a,t._hierarchical?n.each(t.serializeData,this):e.each((function(e){t.serializeData(e)})),e.fireSerializeEvent({type:"serialize",json:i}),e.getPostProcessingData()&&(i.p.postProcessingData=e.getPostProcessingData()),i},isSerializable:function(){return!0},getProperties:function(t){return t.getSerializableProperties()},getStyles:function(t){return t.getSerializableStyles()},getAttrs:function(t){return t.getSerializableAttrs()},serializeData:function(t){var e=this;if(e.isSerializable(t)&&!t._refGraph){var n,i,o,a,s=As(t.getClassName())||t.getClass(),c=new s,l={c:t.getClassName(),i:t.getId(),p:{},s:{},a:{}};for(i in e.json.d.push(l),n=e.getProperties(t),n)if(/^_/.test(i)){var u;if(o=t[i],("_width"===i||"_height"===i)&&o===r)((t.s("layout.h")||t.s("layout.v"))&&t.getHost()||t instanceof d.Node&&(u=t.getParent())&&u instanceof d.Block||t.s("fullscreen"))&&(o=t[i]="_width"===i?t.getWidth():t.getHeight());o!==c[i]&&e[tn](i.substr(1),o,l.p)}else a=Mi(i),t[a]&&(o=t[a](),o!==c[a]()&&e[tn](i,o,l.p));for(i in n=e.getStyles(t),n)o=t.s(i),o!==c.s(i)&&e[tn](i,o,l.s);for(i in n=e.getAttrs(t),n)o=t.a(i),o!==c.a(i)&&e[tn](i,o,l.a);$i(l.p)&&delete l.p,$i(l.s)&&delete l.s,$i(l.a)&&delete l.a}e._hierarchical&&t.getChildren().each(e.serializeData,e)},serializeValue:function(t,e,n){zi(e)?e={__a:e._as}:e instanceof il&&(e={__i:e.getId()}),n[t]=e},deserialize:function(t,e,n){var i=this;return Ei(t)&&/.json$/.test(t)?void f.xhrLoad(t,(function(t){i.deserializeImpl(t,e,n)})):i.deserializeImpl(t,e,n)},deserializeImpl:function(t,e,n){var i=this,r=i.dm;n=Oi(n)?{setId:n}:ki(n)?{finishFunc:n}:n||{},t=i.json=Ei(t)?f.parse(t):t,t.a&&t.a.onPreDeserialize&&!n.disableOnPreDeserialize&&t.a.onPreDeserialize(t,r,n.view),r.beginTransaction(),Bn++,i._82I={};var o=new tl,a=new tl,s=0,c=t.d.length;if(n.justDatas||(ki(t.init)&&t.init(r),r.setInit(t.init)),!n.justDatas){for(var l in t.a)r.a(l,i[en](t.a[l]));for(var d in t.p)r[Di(d)](t.p[d])}for(;c>s;s++){var h=t.d[s],g=As(h.c),p=new g,v=h.i;n.setId&&v!=u&&(p._id=v),i._82I[v]=p,o.add(p),a.add(h)}for(s=0;c>s;s++)i.deserializeData(o.get(s),a.get(s));return o.each((function(t){e&&!t.getParent()&&t.setParent(e),r.add(t)})),r.fireSerializeEvent({type:"deserialize",json:t}),Bn--,r.endTransaction(),t.a&&t.a.onPostDeserialize&&!n.disableOnPostDeserialize&&t.a.onPostDeserialize(t,r,n.view,o),n.finishFunc&&n.finishFunc(t,r,n.view,o),o},deserializeData:function(t,e){for(var n in e.p)t[Di(n)](this[en](e.p[n]));for(n in e.s)t.s(n,this[en](e.s[n]));for(n in e.a)t.a(n,this[en](e.a[n]))},deserializeValue:function(t){if(Ai(t)){var e=t.__i;if(e!=u)return this._82I[e];if(e=t.__a,Ri(e))return new tl(e)}return t}}),Wi(rl,{serialize:function(t,e){return new od(this,e).serialize(t)},toJSON:function(t){return new od(this,t).toJSON()},deserialize:function(t,e,n){return new od(this).deserialize(t,e,n)}});var ad=d.OverlappingBox=function(t){this.gv=t,this.boxes={}};uc("OverlappingBox",i,{clear:function(){var t,e,n=this.boxes;for(t in n)e=n[t],e.length=0},isOverlapping:function(t,e){var n,i,r,o,a=this,s=a.boxes,c=s[t];for(c?(n=c.rects,i=c.length):c=s[t]={rects:n=[],length:i=0},r=0;i>r;r++)if(o=n[r],o.x<e.x+e.w&&o.x+o.w>e.x&&o.y<e.y+e.h&&o.h+o.y>e.y)return!0;return n.length<=i?(n.push(e),c.length++):n[c.length++]=e,!1}}),Wi(f,{fetch:function(t,e){var n="GET",i=!1,r=null,o="";e&&(n=e.method||"GET",i=e.sync,o=e.url,r=e.data||null),t.open(n,o,!i),e.responseType?t.responseType=e.responseType:e.overrideMimeType&&t.overrideMimeType&&t.overrideMimeType(e.overrideMimeType),t.send(r)},convertImageSrc:function(t,e){e&&"function"==typeof e||(e=function(){}),e(t)}});var sd=d.Request=function(){this._xhr=new XMLHttpRequest,this._onloadFunc=function(){},this._errorFunc=function(){}};uc("Request",i,{_responseType:null,_overrideMimeType:"text/plain",send:function(t){var e=this._xhr,n=this.onload,i=this.onerror;this.getResponseType()?t.responseType=this.getResponseType():this.getOverrideMimeType()&&(t.overrideMimeType=this.getOverrideMimeType()),e.onload=n,e.onerror=i,f.fetch(e,t)},onload:function(){},onerror:function(){},getResponseType:function(){return this._responseType},setResponseType:function(t){this._responseType=t},getOverrideMimeType:function(){return this._overrideMimeType},setOverrideMimeType:function(t){this._overrideMimeType=t},getResponseText:function(){var t=this._xhr;return t.response||t.responseText}}),Nl.GraphView=function(t){var e=this;e._24I={},e._34I=new tl,e._25I={},e._56I={},e._view=vr(1,e),e._canvas=_r(e._view),e.dm(t||new rl),this._coreInteractor=new Td(this),e.setEditable(!1),e.setScrollBarVisible(f.graphViewScrollBarVisible)},Vl("GraphView",i,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[be,xe,_e,me,"resettable","editInteractor",ve,"zoomable","pannable","rectSelectable","autoScrollZone",De,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:f.graphViewZoomable,_resettable:f.graphViewResettable,_pannable:f.graphViewPannable,_rectSelectable:f.graphViewRectSelectable,_autoScrollZone:f.graphViewAutoScrollZone,_rectSelectBackground:f.graphViewRectSelectBackground,_rectSelectBorderColor:f.graphViewRectSelectBorderColor,_editPointSize:f.graphViewEditPointSize,_editPointBorderColor:f.graphViewEditPointBorderColor,_editPointBackground:f.graphViewEditPointBackground,_scrollBarColor:ds,_scrollBarSize:hs,_autoHideScrollBar:Qa,_autoMakeVisible:$a,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(t){this._dataModel.setLayers(t)},setEditable:function(t){var e=this,n=e.__interactorMap__;if(!n){var i=Nl.XEditInteractor;n=e.__interactorMap__={scrollBar:new Pd(e),select:new Md(e),edit:i?new i(e):new Rd(e),text:new Ed(e),move:new Dd(e),default:new Cd(e),touch:new Od(e,{editable:!1})}}t?(e._uieditable=!0,e.setInteractors([n.scrollBar,n.select,n.edit,n.text,n.move,n["default"],n.touch])):(e._uieditable=!1,e.setInteractors([n.scrollBar,n.select,n.move,n["default"],n.touch]))},getCanvas:function(){return this._canvas},_33I:function(t){var e=t.getUIClass();return e?new e(this,t):u},getDataUI:function(t){var e=this,n=e._25I[t._id];return n===r&&(n=e._33I(t),e._25I[t._id]=n),n},getNodeRect:function(t){return f.getNodeRect(this,t)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(t){var e=this.getDataUI(t);return e?(e._79o(),e._78o):null},getEdgeSourcePosition:function(t){var e=this,n=e.getDataUI(t),i=n.s,r=n._data._40I;return Tl(e,r,i("edge.source.position"),i("edge.source.offset.x"),i("edge.source.offset.y"),i("edge.source.anchor.x"),i("edge.source.anchor.y"))},getEdgeTargetPosition:function(t){var e=this,n=e.getDataUI(t),i=n.s,r=n._data._41I;return Tl(e,r,i("edge.target.position"),i("edge.target.offset.x"),i("edge.target.offset.y"),i("edge.target.anchor.x"),i("edge.target.anchor.y"))},invalidateAll:function(t){var e=this;if(t){for(var n in e._25I){var i=e._25I[n];i&&i.dispose()}e._25I={},e._56I={},e._24I={},e._34I.clear(),e.redraw()}else e.dm().each((function(t){e.invalidateData(t)}))},invalidateSelection:function(){var t=this;t.sm().each((function(e){t.invalidateData(e)}))},invalidateData:function(t){var e=this;e._24I[t._id]=t,e._21Q(t),e.iv()},_21Q:function(t){var e=this,n=e._24I;if(Li(t)&&Kn[t.s(ce)]){var i=t.getSourceAgent();i&&i.getAgentEdges().each((function(t){n[t._id]=t})),i=t.getTargetAgent(),i&&i.getAgentEdges().each((function(t){n[t._id]=t})),e.iv()}},redraw:function(t){var e=this;e._32I||(t?e._34I.add(t):(e._32I=1,e._34I.clear()),e.iv())},each:function(t,e){var n,i,r,o=0,a=this.getLayers(),s=this._dataModel,c=s._datas._as,l=c.length;if(a){for(var u=a.length;u>o;o++)if(r=a[o],Ai(r)&&(r=r.name),s.isHierarchicalRendering()){var d=function(n){return n._layer===r?e?t.call(e,n):t(n):void 0};if(!1===this._dataModel.eachByHierarchical(d))return}else for(var h=0;l>h;h++)if(n=c[h],n._layer===r&&(i=e?t.call(e,n):t(n),!1===i))return}else if(s.isHierarchicalRendering())this._dataModel.eachByHierarchical(t,null,e);else for(;l>o;o++)if(n=c[o],i=e?t.call(e,n):t(n),!1===i)return},reverseEach:function(t,e){var n,i,r,o,a=this._dataModel,s=a._layers,c=a._datas._as,l=c.length;if(s){for(n=s.length-1;n>=0;n--)if(o=s[n],Ai(o)&&(o=o.name),a.isHierarchicalRendering()){var u=function(n){return n._layer===o?e?t.call(e,n):t(n):void 0};if(!1===a.reverseEachByHierarchical(u))return}else for(var d=l-1;d>=0;d--)if(i=c[d],i._layer===o&&(r=e?t.call(e,i):t(i),!1===r))return}else if(a.isHierarchicalRendering())a.reverseEachByHierarchical(t,null,e);else for(n=l-1;n>=0;n--)if(i=c[n],r=e?t.call(e,i):t(i),!1===r)return},getViewRect:function(){return this._29I},getContentRect:function(){var t=this,e=t._84I;if(!e){var n=this.dm().a("width"),i=this.dm().a("height");n>0&&i>0?t._84I={x:0,y:0,width:n,height:i}:(t.each((function(n){t.isVisible(n)&&(e=Xs(e,t.getDataUIBounds(n)))})),t._84I=e||ci)}return t._84I},getScrollRect:function(){return Xs(this.getContentRect(),this._29I)},makeCenter:function(t,e,n){var i=this;if(i.getWidth()&&i.getHeight()){i.makeVisible(t),i.validate();var r=i.getDataUIBounds(t);if(r){var o=i.getWidth(),a=i.getHeight(),s=r.x+r.width/2,c=r.y+r.height/2,l=-s*i._zoom+o/2,u=-c*i._zoom+a/2;i.setTranslate(l,u,e)}}else n||Es(i.makeCenter,i,[t,e,!0],500)},fitData:function(t,e,n,i,r){var o=this;if(o.getWidth()&&o.getHeight()){var a=function(){o.makeVisible(t),o.validate();var r=o.getDataUIBounds(t);r&&(r=Os(r),tc(r,n==u?20:n),o.fitRect(r,e,i))};e?f.callWhenLoaded(a):a()}else r||Es(o.fitData,o,[t,e,n,i,!0],500)},fitContent:function(t,e,n,i){var r=this;if(r.getWidth()&&r.getHeight()){var o=function(){r.validate();var i=Os(r.getContentRect());tc(i,e==u?20:e),r.fitRect(i,t,n)};t?f.callWhenLoaded(o):o()}else i||Es(r.fitContent,r,[t,e,n,!0],500)},fitRect:function(t,e,n){var i=this,r=i.getWidth(),o=i.getHeight(),a=t.x+t.width/2,s=t.y+t.height/2,c=A(r/t.width,o/t.height),l=i._zoom,u=-a*l+r/2,d=-s*l+o/2;0===c||isNaN(c)||(n&&(c=A(1,c)),e?(i._65I&&(delete i._65I.finishFunc,i._65I.stop(!0)),i._14o&&i._14o.stop(!0),i.setTranslate(u,d,{finishFunc:function(){i.setZoom(c,e)}})):(i.setTranslate(u,d),i.setZoom(c)))},toCanvas:function(t,e){e=e||this._zoom,this.validateImpl();var n=this,i=n.getContentRect();i.width||(i.width=10),i.height||(i.height=10);var r=_r(),o=i.x*e,a=i.y*e,s=i.width*e,c=i.height*e;xr(r,s,c,1);var l=Pr(r);return t=t||this._dataModel.getBackground(),t&&Po(l,0,0,s,c,t),Ar(l,-o,-a),l.scale(e,e),n._42(l),l.restore(),r},toDataURL:function(t,e,n){return this.toCanvas(t,n).toDataURL(e||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(t,e){var n=this,i=n.dm().getBackground();if(i){var r=n.dm().a("width"),o=n.dm().a("height");r>0&&o>0&&Po(t,0,0,r,o,i)}var a=n.__htmlOrderList,s=[];if(n._93db(t,e),n.each((function(i){var r=n.getDataUI(i);if(r){var o=n._56I[i._id],a=r._htmlView;if(o){var c=r._79o();if(a=r._htmlView,d.HtmlNode&&i instanceof d.HtmlNode)r._42(t);else{var l=n.getViewRect(),u=a&&a.layoutHTML;!e||Qs(e,c)?(u&&(a.layoutHTML(),r.__outerLayout&&delete r.__outerLayout),r._42(t)):Qs(l,c)||!u||r.__outerLayout||(a.layoutHTML(),r.__outerLayout=!0)}}a&&(s.push(a),a.getView&&(a=a.getView()),a.style.display=o?"block":Tt)}})),a&&s.length>0){var c=!1;if(a.length!==s.length)c=!0;else for(var l=0;l<s.length;l++)if(s[l]!==a[l]){c=!0;break}c&&(s.forEach((function(t){!1!==t.autoAdjustIndex&&n.appendHTML(t,!0)})),this.__htmlOrderList=s)}else this.__htmlOrderList=s;n._92db(t,e)},validateImpl:function(){this.tryUpdateRootData();var t,e,n,i=this,r=i.tx(),o=i.ty(),a=i._zoom,s=i._canvas,c=this.getWidth(),l=this.getHeight(),u=i._29I,d={x:-r/a,y:-o/a,width:c/a,height:l/a},h={},f=i._34I,g=i._24I,p=i._32I,v=i._23I;for(e in i._24I={},(c!==s.clientWidth||l!==s.clientHeight)&&(xr(s,c,l),p=1),p||Ji(d,u)||(p=1),i._29I=d,i.each((function(t){e=t._id;var n=h[e]=i.isVisible(t);n!==i._56I[e]&&(g[e]=t,x=i.getDataUI(g[e]),x&&x._84o(n),i._84o(t,n))}),i),g)x=i.getDataUI(g[e]),x&&(!p&&i._56I[e]&&(w=x._79o(),w&&f.add(w)),x.invalidate()),i._83I=1;if(i._56I=h,!p)for(e in g)h[e]&&(x=i.getDataUI(g[e]),x&&(w=x._79o(),w&&f.add(w)));if(p?n=d:(f.each((function(t){Qs(d,t)&&(n=Xs(n,t))})),n&&(tc(n,O(1,1/a)),n.x=D(n.x*a)/a,n.y=D(n.y*a)/a,n.width=E(n.width*a)/a,n.height=E(n.height*a)/a,n=Js(d,n))),i._74O=n,n){t=Pr(s);var y=n.x,_=n.y,m=n.width,b=n.height;y=Math.floor((y*a+r)*Ya),_=Math.floor((_*a+o)*Ya),m=Math.ceil(m*a*Ya)+1,b=Math.ceil(b*a*Ya)+1,t.beginPath(),t.rect(y,_,m,b),t.clip(),t.clearRect(y,_,m,b),Or(t,r,o,a),i._42(t,n),t.restore(),delete i._74O}if(f.clear(),delete i._32I,v&&c>0&&l>0){var x=i.getDataUI(v);if(x){var w=x._79o(),I=i._29I,S=I.x,T=I.y,C=I.width,M=I.height;a=i._zoom;w&&!Qs(w,I)&&(w.x+w.width<S&&i.tx(-w.x*a),w.x>S+C&&i.tx(-(w.x+w.width-C)*a),w.y+w.height<T&&i.ty(-w.y*a),w.y>T+M&&i.ty(-(w.y+w.height-M)*a))}delete i._23I}i._83I&&(delete i._83I,delete i._84I),i._98O(),i.countFrame(),$i(i._24I)||Es(i.iv,i)},isValidGuideLineSource:function(){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var t,e=this.getFullscreenDatas();for(var n in e)t=e[n],this.scaleRootData(t);this._rootDataUpdating=!1}},scaleRootData:function(t){var e=t.s("fullscreen");if("uniform"===e||"fill"===e){t.getRotation()&&t.setRotation(0);var n=t.s("fullscreen.gap")||0,i=this.getWidth(),r=this.getHeight();if(i&&r){var o,a,s,c=i-2*n,l=r-2*n,u=t.getAnchor(),d=t.getScaledSize(),h=d.width,f=d.height,g=t.s("fullscreen.lock");if(g)return"uniform"===e?c/l>h/f?(o=l/f,h=f*c/l):(o=c/h,f=h*l/c):"v"===g?(o=l/f,h=c/o,t.getWidth()!==h&&t.setWidth(h)):(o=c/h,f=l/o,t.getHeight()!==f&&t.setHeight(f)),this.setZoom(o),a=n-(t.getX()-u.x*h)*o,s=n-(t.getY()-u.y*f)*o,a!==this.tx()&&this.tx(a),void(s!==this.ty()&&this.ty(s));a=this.tx(),s=this.ty(),o=this._zoom;var p={x:(-a+n)/o,y:(-s+n)/o,width:c/o,height:l/o};if("uniform"===e){var v=h/f,y=Math.min(p.width,p.height*v),_=y/v;p.x+=.5*(p.width-y),p.y+=.5*(p.height-_),p.width=y,p.height=_}c=p.width/t.getScaleX(),l=p.height/t.getScaleY(),(t.getWidth()!=c||t.getHeight()!==l)&&t.setSize(c,l);var m=p.x+u.x*p.width,b=p.y+u.y*p.height,x=t.getPosition();(m!==x.x||b!==x.y)&&t.setPosition(m,b)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(t){var e=this;t!==e.isScrollBarVisible()&&(t?(wr(e._view,e._79O=yr()),wr(e._79O,e._27I=yr()),wr(e._79O,e._28I=yr())):(rc(e._79O),delete e._79O,delete e._27I,delete e._28I),e.fp("scrollBarVisible",!t,t))},getDebugTip:function(){return""},showScrollBar:function(){var t=this;t._79O&&(t._85I||(J((function(){t._86I()}),fs),t.iv()),t._85I=new Date)},_86I:function(){var t=this;if(t._85I){var e=new Date,n=e.getTime();n-t._85I.getTime()>=fs?(delete t._85I,t.iv()):J((function(){t._86I()}),fs)}},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var t=this,e=this._27I,n=this._28I;if(t._79O){if(t._autoHideScrollBar&&!t._85I)return e.style.visibility=ue,void(n.style.visibility=ue);var i=t.getScrollBarColor(),r=t._zoom,o=t.getScrollBarSize(),a=t.getViewRect(),s=t.getScrollRect(),c=a.height*r,l=s.height*r,u=a.width*r-o-2,d=c*((a.y-s.y)*r/l),h=c*(c/l),f=e.style;l-.5>c?(gs>h&&(d=d+h/2-gs/2,0>d&&(d=0),d+gs>c&&(d=c-gs),h=gs),Lr(e,u,d,o,h),f.visibility=de,f.background=i,f.borderRadius=o/2+Ct):f.visibility=ue;var g=a.width*r,p=s.width*r,v=(d=a.height*r-o-2,u=g*((a.x-s.x)*r/p),g*(g/p));f=n.style;p-.5>g?(gs>v&&(u=u+v/2-gs/2,0>u&&(u=0),u+gs>g&&(u=g-gs),v=gs),Lr(n,u,d,v,o),f.visibility=de,f.background=i,f.borderRadius=o/2+Ct):f.visibility=ue}},setDataModel:function(t){var e=this,n=e._dataModel,i=e._selectionModel;n!==t&&(n&&(n.ump(e.handleDataModelPropertyChange,e),n.umm(e.handleDataModelChange,e),n.umd(e.handleDataPropertyChange,e),n.removeIndexChangeListener(e._75O,e),n.removeHierarchyChangeListener(e.handleHierarchyChange,e),i||n.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mp(e.handleDataModelPropertyChange,e),t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.addIndexChangeListener(e._75O,e),t.addHierarchyChangeListener(e.handleHierarchyChange,e),i?i._21I(t):t.sm().ms(e.handleSelectionChange,e),e.invalidateAll(!0),e.fp(He,n,t),e.updateBackground())},getLayersInfo:function(){if(this._layersInfo===r){var t=this.getLayers();t?(this._layersInfo={},t.forEach((function(t){var e=Ai(t)?t.name:t;this._layersInfo[e]=t}),this)):this._layersInfo=null}return this._layersInfo},calculateEdgePosition:function(t,e,n){var i,r,o=this,a=o.getDataUI(t),s=Ul(a),c=$l(e,(function(t){return Xl(s,100*t)}),100,.001),l=Xl(s,100*c);if(!n){var u=Yl(a),d=new Va(l.x,l.y),h=49/(o._zoom*o._zoom);for(i=0,r=u.length;r>i;i++)if(d.distanceToSquared(u[i])<h)return{index:i,point:u[i],distance:Math.sqrt((u[i].x-e.x)*(u[i].x-e.x)+(u[i].y-e.y)*(u[i].y-e.y))}}return{percent:c,point:l,distance:Math.sqrt((l.x-e.x)*(l.x-e.x)+(l.y-e.y)*(l.y-e.y))}},calculateAttachPoint:function(){var t=new Va,e=new Va,n=new Va;return function(i,r){var o=this.getAttachPoints(i);if(!o||!o.length)return null;n.set(r.x,r.y);for(var a,s,c,l,u=1/0,d=0,h=o.length;h>d;d++)c=o[d],e.x=c.x,e.y=c.y,t.x=c.offsetX||0,t.y=c.offsetY||0,l=Tl(this,i,0,t.x,t.y,e.x,e.y),s=n.distanceToSquared(l),u>s&&(a=d,u=s);u=Math.sqrt(u);var f=this.getAttachStyle(i);if("close"===f){var g=i.s("attach.close.threshold")/this._zoom;if(u>g)return null}return{index:a,distance:u,info:o[a]}}}(),getAttachPoints:function(t){var e=t.s("attach.points");if(e)return e;var n=Ss(t._image);return n?Jc(n.attachPoints,t,this)||null:void 0},getAttachStyle:function(t){var e=t.s("attach.style");if(e)return e;var n=Ss(t._image);return n?Jc(n.attachStyle,t,this)||"close":void 0},updateLayers:function(){this._layersInfo=r,this.invalidateSelection(),this.redraw()},updateBackground:function(){var t=this.dm().a("width"),e=this.dm().a("height");this._canvas.style.background=t>0&&e>0?"":this.dm().getBackground()||""},handleDataModelPropertyChange:function(t){if("background"===t.property){var e=this._canvas.style.background,n=t.newValue||"";this.updateBackground(),this.fp("canvasBackground",e,n),this.redraw()}else"a:width"===t.property||"a:height"===t.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===t.property?this.updateLayers():"hierarchicalRendering"===t.property&&this.redraw()},handleDataPropertyChange:function(t){this.dm().isHierarchicalRendering()&&"parent"===t.property&&t.data.hasChildren()&&this.redraw(),this.invalidateData(t.data)},onPropertyChanged:function(t){var e=this,n=t.property;if(e.redraw(),"zoom"===n){var i=e.sm().getSelection();i.size()&&i.each((function(t){t.invalidate()}))}else"dataModel"===n&&(e._83I=1);ll[n]?e.showScrollBar():n===ve&&e.onCurrentSubGraphChanged(t)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(t){var e=this,n=t.kind,i=t.data;if(e._83I=1,"add"===n)e.invalidateData(i),Li(i)&&i.getEdgeGroup()&&i.getEdgeGroup().eachSiblingEdge(e.invalidateData,e);else if(n===Nt){e._21Q(i);var r=i._id,o=e._25I[r];if(o){if(e._56I[r]){var a=o._79o();a&&e.redraw(a)}o.dispose(),delete e._25I[r],delete e._24I[r],delete e._56I[r]}i===e._currentSubGraph&&e.setCurrentSubGraph(u)}else n===Vt&&(e.invalidateAll(!0),e.setCurrentSubGraph(u))},_75O:function(t){this.invalidateData(t.data)},handleHierarchyChange:function(t){this.dm().isHierarchicalRendering()&&t.data.hasChildren()&&this.redraw(),this.invalidateData(t.data)},adjustIndex:function(t){var e=this;if(e.isVisible(t)){e.dm().beginTransaction();for(var n=t;n._parent&&e.isVisible(n._parent);)n=n._parent;n&&n!==t&&e._dataModel.adjustIndex(n),e._dataModel.adjustIndex(t),e.dm().endTransaction()}},getImage:function(t){return t.getImage?t.getImage():r},getSelectWidth:function(t){var e=Ss(this.getImage(t));return e&&Jc(e.disableSelectedBorder,t,this)?0:t.s("select.width")},getSelectColor:function(t){return t.s("select.color")},isSelectable:function(t,e){if(this.isSelected(t))return!0;if(!e&&t.getParent()instanceof Qu&&this.isSelectable(t.getParent(),!0)&&t.getParent().isSyncSize())return!1;var n=this.getLayersInfo();if(n){var i=n[t._layer];if(i&&!1===i.selectable)return!1}return t.s("2d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){var e=this;if(Li(t)&&t.getStyle(ce)!==Wt)return!1;var n=this.getLayersInfo();if(n){var i=n[t._layer];if(i&&!1===i.movable)return!1}return!!t.s("2d.movable")&&(!e._movableFunc||e._movableFunc(t))},isEditable:function(t){var e=this;if(d._uiSerializing)return e._uieditable;if(!e._editInteractor||!e.isSelected(t))return!1;if(Bi(t)){var n=e.getDataUI(t);if(!n||n._88I)return!1}if(Li(t)&&t.getStyle(ce)!==Wt)return!1;var i=this.getLayersInfo();if(i){var r=i[t._layer];if(r&&!1===r.editable)return!1}return!!t.s("2d.editable")&&(!e._editableFunc||e._editableFunc(t))},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(t){return(!Vi(t)||0===t.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(t))},isRectEditable:function(t){return!this._rectEditableFunc||this._rectEditableFunc(t)},isAnchorEditable:function(t){return!this._anchorEditableFunc||this._anchorEditableFunc(t)},isRotationEditable:function(t){return!(!t.setRotation||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},getRotationPoint:function(t){var e=t.getAnchor(),n=t.getScale(),i=this._zoom,r=Zo(t.getRotation(),0,-t.getHeight()*n.y*e.y-(n.y<0?-1:1)*(lt?32:16)/i),o=t.p();return r.x+=o.x,r.y+=o.y,r},getLogicalPoint:function(t){var e=this;return ec(t,e._canvas,e.tx(),e.ty(),e._zoom,e._zoom)},getScreenPoint:function(t,n){var i,o=this;return"object"==e(t)?t.x!==r?(i=t.x,n=t.y):(i=t[0],n=t[1]):i=t,nc(i,n,o._canvas,o.tx(),o.ty(),o._zoom,o._zoom)},getSelectedDataAt:function(t){var e=this;return this.getDataAt(t,(function(t){return e.isSelected(t)}))},getDataInfoAt:function(t,e,n){var i,r=this.lp(t),o=this.getDataAt(r,e,n);if(o){var a=this.getDataUI(o);i={data:o,ui:a,point:r};var s=a._38o;if(s){var c=s.icons;for(var l in c){var d=c[l],h=s.rects[l];if(h)for(var f=Jc(d.names,o,this),g=f?f.length:0,p=h.rotation,v=g-1;v>=0;v--){var y=f[v],_=h[v];if(Ys(_,r,p))return i.part="icons",i.name=l,i.icon=y,i.rect=_,i.index=v,i.rotation=p,i}}}if(this.isNoteVisible(o)){if(a.note2Info&&Ys(a.note2Info.clickRect,r,u,a.note2Info.scale))return i.part="note2",i;if(a.noteInfo&&Ys(a.noteInfo.clickRect,r,u,a.noteInfo.scale))return i.part="note",i}if(this.isLabelVisible(o)){if(a.label2Info&&Ys(a.label2Info.rect,r,a.label2Info.rotation,a.label2Info.scale))return i.part="label2",i;if(a.labelInfo&&Ys(a.labelInfo.rect,r,a.labelInfo.rotation,a.labelInfo.scale))return i.part="label",i}if(o.isInRect&&o.isInRect(r))return i.part="body",i}return i},getDataAt:function(t,e,n){t.target&&(t=this.lp(t));var i,r=this._zoom;return this.reverseEach((function(o){return(e?e(o):this.isSelectable(o))&&this.rectIntersects(o,Ti(t.x,t.y,n,r))?(i=o,!1):void 0}),this),i},getIconInfoAt:function(t,e){var n=this;if(t.target&&(t=n.lp(t)),e||(e=n.getDataAt(t)),e){var i=n.getDataUI(e);if(i&&i._38o){var r,o=i._38o,a=new tl;for(r in o.icons)a.add(r);for(var s=a.size()-1;s>=0;s--){r=a.get(s);for(var c=o.rects[r],l=c.rotation,d=c.length-1;d>=0;d--){var h=c[d],f=h.width,g=h.height,p={x:t.x-h.x-f/2,y:t.y-h.y-g/2};l!=u&&(p=Zo(-l,p.x,p.y));h={x:-f/2,y:-g/2,width:f,height:g};if(Ys(h,p))return{key:r,index:d,name:o.icons[r].names[d],rect:c[d],point:t,rotation:l,relativeRect:h,relativePoint:p,data:e}}}}}return u},getDatasInRect:function(t,e,n){n===r&&(n=1);var i=this,o=new tl;return i.reverseEach((function(r){n&&!i.isSelectable(r)||(e?i.rectIntersects(r,t):i.rectContains(r,t))&&o.add(r)})),o},moveSelection:function(t,e){var n=this;n.dm().beginTransaction(),Qo(n.sm().toSelection(n.isMovable,n),t,e),n.dm().endTransaction()},moveDatas:function(t,e,n){var i=this;i.dm().beginTransaction(),t instanceof tl||(t=new tl(t)),Qo(t,e,n),i.dm().endTransaction()},getDataUIBounds:function(t){var e=this.getDataUI(t);return e?e._79o():u},drawData:function(t,e,n){var i=this.getDataUI(e);if(i){var r=i._79o();(!n||Qs(n,r))&&(i._42(t),e instanceof d.Block&&e.eachChild((function(e){this.drawData(t,e,n)}),this))}},getBoundsForGroup:function(t){return t.s(Gt)?this.getDataUIBounds(t):u},isPixelPerfect:function(t){return t.s("pixelPerfect")},rectIntersects:function(t,e){this.validate();var n=u;if(this._56I[t._id]){var i=this._25I[t._id];if(i){var r=i._79o();if($s(e,r))n=!0;else if((e=Js(e,r))&&(i.rectIntersects&&(n=i.rectIntersects(e)),n==u)){if(!this.isPixelPerfect(t))return!0;var o=e.x,a=e.y,s=e.width,c=e.height,l=this._zoom,d=f.hitMaxArea,h=s*c*l*l;if(h>d){var g=Math.sqrt(d/h);l*=g}s*=l,c*=l,2>s&&(s=2),2>c&&(c=2),o*=l,a*=l;var p=vo(s,c);Ar(p,-o,-a),p.scale(l,l),this._drawForChecking=!0,this.drawData(p,t,e),this._drawForChecking=!1;try{for(var v=0,y=p.getImageData(0,0,s,c).data;v<y.length;v+=4)if(0!==y[v+3]){n=!0;break}p.restore()}catch(M){go=u,n=!1}}}}return!!n},rectContains:function(t,e){if(this._56I[t._id]){var n=this._25I[t._id];if(n)return $s(e,n._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(t){if(!f.isInput(t.target)){var e=this,n=e._focusData,i=n&&e._25I[n._id],r=0,o=e._dataModel._datas;if(!(n&&n._enabled&&n._editable&&i&&i.onKeyDown&&!0===i.onKeyDown(t)))if(9===t.keyCode&&(n&&(r=o.indexOf(n),js(t)?-1===--r&&(r=0):++r===o.size()&&(r=0)),e._focusData=n=o.get(r),e.sm().setSelection(n)),Yr(t)?e.selectAll():co(t)&&e.isResettable()&&e.reset(),e.sm().isEmpty()){if(e._editing)return;var a=e.tx(),s=e.ty(),c=!1,l=js()?100:10;ro(t)&&(a-=l,c=!0),oo(t)&&(s-=l,c=!0),ao(t)&&(a+=l,c=!0),so(t)&&(s+=l,c=!0),c&&e.setTranslate(a,s)}else{$r(t)&&e.handleDelete(t);var u=js()?10:1;ro(t)&&(e.moveSelection(-u,0),e.fi({kind:"moveLeft"})),oo(t)&&(e.moveSelection(0,-u),e.fi({kind:"moveUp"})),ao(t)&&(e.moveSelection(u,0),e.fi({kind:"moveRight"})),so(t)&&(e.moveSelection(0,u),e.fi({kind:"moveDown"}))}}},handleScroll:function(t,e){if(ws(t),this.isZoomable()){if(!this.getEditInteractor()){var n=this.getDataAt(t);if(n){var i=Ss(this.getImage(n));if(i&&Jc(i.scrollable,n,this))return}}var r=this.lp(t);e>0?this.scrollZoomIn(r):0>e&&this.scrollZoomOut(r)}},handlePinch:function(t,e,n){this.isZoomable()&&(e>n?this.pinchZoomIn(t):this.pinchZoomOut(t))},checkDoubleClickOnNote:function(t,e){var n=this,i=n.lp(t),r=n.getDataUI(e),o=r.note2Info;return o&&e.s("note2.toggleable")&&Ys(o.clickRect,i)?(e.s(oe,!e.s(oe)),n.fi({kind:"toggleNote2",event:t,data:e}),!0):(o=r.noteInfo,!!(o&&e.s("note.toggleable")&&Ys(o.clickRect,i))&&(e.s(re,!e.s(re)),n.fi({kind:"toggleNote",event:t,data:e}),!0))},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(t,e){var n=this,i=n.getAutoScrollZone(),r=i/n.getZoom(),o=i/4,a=n._29I,s=n.lp(t),c={x:n.tx(),y:n.ty()};return s&&i>0&&a&&(s.x-a.x<r?n.translate(o,0):a.x+a.width-s.x<r&&n.translate(-o,0),s.y-a.y<r?n.translate(0,o):a.y+a.height-s.y<r&&n.translate(0,-o)),c.x=n.tx()-c.x,c.y=n.ty()-c.y,e&&(e.x+=c.x,e.y+=c.y),c},getMoveMode:function(t,e){var n=e.s("2d.move.mode");return n||(Yn["88"]?"x":Yn["89"]?"y":"xy")},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(t,e,n){var i=this;return"currentSubGraph"===e?{__i:t.getId()}:n.serializeProperty(t,e,i)},deserializeProperty:function(t,e,n){var i=this;if("currentSubGraph"===e){var r=i.dm(),o=r.__idMap;return o[t.__i]}return n.deserializeProperty(t,e,i)},setDefaultCursor:function(t,e){this._defaultCursor=t,!1!==e&&this.setCursor(t)},setCursor:function(t){"default"===t&&(t=this._defaultCursor||t);var e=this.getView().style;e.cursor=t,e.cursor="-webkit-"+t,e.cursor="-moz-"+t},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(t){return!(t!==u&&!f.getConnectAction(null,t))&&(this._currentActionType=t,this.redraw(),!0)},getEditStyle:function(t){var e=this.getEditInteractor();return e?e.getStyle(t):r},setEditStyle:function(t,e,n){var i=this.getEditInteractor();return!!i&&(i.setStyle(t,e,n),!0)},isConnectActionVisible:function(t){var e=f.getConnectAction(this);if(!e)return!1;var n=e.visible;return ki(n)&&(n=n(this,t)),n},isInteractive:function(t){var e=Ss(this.getImage(t));return!(!e||!Jc(e.interactive,t,this))||t.s("interactive")},appendHTML:function(t,e){var n=this.getView();if(!(e||t&&t.parentNode!==n))return!1;var i=t.getView&&t.getView();if(!e&&i&&i.parentNode===n)return!1;(t.getView||t.isSelfViewEvent)&&(t=t.getView());var r=this.getEditInteractor();return r&&r._canvas?n.insertBefore(t,r._canvas):this.isScrollBarVisible()?n.insertBefore(t,this.getView().lastChild):wr(n,t),!0},_layoutHTMLImpl:function(t,e,n){if(arguments.length>1){var i,r=this,o=r._zoom;if(e.getView&&(i=e,e=e.getView()),e.style.position="absolute",n){var a=t.getRect();Lr(i||e,r.tx()+a.x*o,r.ty()+a.y*o,a.width*o,a.height*o)}else{var s=new Aa,c=(a=t.getAnchorRect(),t.getPosition()),l=t.getScale(),u=e.style;Lr(i||e,a),s.appendTranslate(r.tx(),r.ty()),s.appendScale(o,o),s.append(new Aa(t.getRotation(),c.x,c.y,l.x,l.y)),Dr(u,"transform","matrix("+s.a.toFixed(5)+", "+s.b.toFixed(5)+", "+s.c.toFixed(5)+",\n    "+s.d.toFixed(5)+", "+s.tx.toFixed(5)+", "+s.ty.toFixed(5)+")"),Dr(u,"transformOrigin",(-a.x).toFixed(5)+"px "+(-a.y).toFixed(5)+"px"),e.updateAppendMatrix=!0}}else this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(t){return t instanceof Ku?{name:"text",accessType:"s",isMultiline:!1}:void 0},getState:function(t){var e="state",n=t.s(e);if(n)return n;var i=Ss(t._image);return i?Jc(i[e],t,this)||null:void 0}}),i.defineProperties(Nl.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(t){this._layoutHTML=t}}});var cd=function(t,e){var n=this;n.gv=t,n.s=function(t){return e.getStyle(t)},n._data=e,n._87I=new tl};lc(cd,i,{_6I:u,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var t=this,e=t.gv.isSelected(t._data);return!e||t.isShadowed()?0:t.gv.getSelectWidth(t._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(t){var e=this._data,n=this.gv.getBodyColor(e);return n||(t?e.getStyle(t):u)},_2Q:function(t){return this.s(t)},_1Q:function(t,e,n,i){var r=this.s,o=r("2d.gray"),a=r(e+".dash.color");if(o&&(a=f.toGrayColor(a)),t.strokeStyle=a,t.lineWidth=n,t.stroke(),r(e+".dash.3d")){var s=r(e+".dash.3d.color");Do(t,a,o?f.toGrayColor(s):s,n,this.gv._zoom,r(e+".dash.3d.accuracy"))}Nc(t,i)},invalidate:function(){this._6I=u},_79o:function(){var t=this;if(!t._6I){var e=t._data,n=t.gv;t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=u,t._87I.clear(),t.interactiveInfo=n.isInteractive(e)?{}:u,t._3O(),t._55O=n.isEditable(e)?{_42O:n.isRectEditable(e),_43O:n.isPointEditable(e),_56O:n.isRotationEditable(e)}:u,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return ci},_68o:function(t,e){t&&this._87I.add(xo(t,e))},_81o:function(){var t,e=this,n=e.s;if(e._24O($t,"getLabel"),e._24O(Qt,"getLabel2"),e._26O(Jt,"getNote"),e._26O(Kt,"getNote2"),e._15O(),e._55O&&e._48O(),e._87I.each((function(e){t=Xs(t,e)})),t&&e.isShadowed()){var i=Os(t);i.x+=n("shadow.offset.x"),i.y+=n("shadow.offset.y"),tc(i,n("shadow.blur")),t=Xs(t,i)}return e._87I.clear(),t},_42:function(t){var e=this,n=e._data,i=e.gv,r=e.s,o=r("opacity"),a=this.isShadowed();if(a){var s=t.shadowOffsetX,c=t.shadowOffsetY,l=t.shadowBlur,d=t.shadowColor,h=i.getZoom();t.shadowOffsetX=r("shadow.offset.x")*h,t.shadowOffsetY=r("shadow.offset.y")*h,t.shadowBlur=r("shadow.blur")*h,t.shadowColor=e.getSelectColor()}if(o!=u){var f=t.globalAlpha;t.globalAlpha=o}e._80o(t),i.isLabelVisible(n)&&((!i._drawForChecking||r("label.selectable"))&&El(t,e.labelInfo),(!i._drawForChecking||r("label2.selectable"))&&El(t,e.label2Info)),i.isNoteVisible(n)&&(Pl(t,e.noteInfo),Pl(t,e.note2Info)),e._99O(t),o!=u&&(t.globalAlpha=f),a&&(t.shadowOffsetX=s,t.shadowOffsetY=c,t.shadowBlur=l,t.shadowColor=d)},_80o:function(){},_47O:function(){},_24O:function(t,e){var n=this,i=n._data,r=n.gv,o=n.s,a=r[e](i);if(a!=u){var s=o(t+".scale"),c=o(t+".max"),l=o(t+".position"),d=n[t+"Info"]={label:a,scale:s,color:r[e+"Color"](i),font:o(t+".font"),opacity:o(t+".opacity"),align:o(t+".align"),rotation:n.getRotation(o(t+".rotation"),!1,l),background:r[e+"Background"](i)},h=Ir(d,a);c>0&&c<h.width&&(d.labelWidth=h.width,h.width=c),1!==s&&(h.width*=s,h.height*=s);var f=n.getPosition(l,o(t+".offset.x"),o(t+".offset.y"),h,o(t+".position.fixed"));if(h.x=f.x-h.width/2,h.y=f.y-h.height/2,n._68o(d.rect=h,d.rotation),1!==s){var g=h.width/s,p=h.height/s;d.rect={x:f.x-g/2,y:f.y-p/2,width:g,height:p}}}},_26O:function(t,e){var n=this,i=n.gv,r=n._data,o=n.s,a=i[e](r);if(a!=u){var s,c,l=o(t+".scale"),d=n[t+"Info"]={note:a,scale:l,data:r,view:i,expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),opacity:o(t+".opacity"),align:o(t+".align"),icon:o(t+".icon"),backgroundImage:o(t+".backgroundImage"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:i[e+"Background"](r)},h=n.getPosition(o(t+".position"),o(t+".offset.x"),o(t+".offset.y")),f=h.x,g=h.y;if(d.expanded){var p,v=o(t+".max"),y=o(t+".backgroundImage");y?(y=Ss(y),p={width:$c(y,r),height:Qc(y,r)}):p=Ir(d,a),p.width+=6,p.height+=2,v>0&&v<p.width&&(d.labelWidth=p.width,p.width=v),s=p.width,c=p.height+8,d.clickRect={x:f-s*l/2,y:g-c*l,width:s*l,height:c*l*p.height/c}}else{var _=o(t+".icon");_?(_=Ss(_),s=$c(_,r),c=Qc(_,r)):(s=12,c=18),d.clickRect={x:f-s*l/2,y:g-c*l,width:s*l,height:c*l}}d.rect={x:f-s/2,y:g-c*l/2-c/2,width:s,height:c};var m=E(d.borderWidth/2)*l;n._68o({x:f-s*l/2-m,y:g-c*l-m,width:s*l+2*m,height:c*l+2*m})}},_48O:function(){},_99O:function(t){var e=this,n=e._38o;if(n){var i=e.gv,r=e._data,o=n.icons,a=e.interactiveInfo;for(var s in a&&(a._38o={}),o){var c=o[s],l=n.rects[s];if(l){a&&(a._38o[s]=[]);var d=Jc(c.opacity,r,i),h=Jc(c.names,r,i),f=h?h.length:0,g=l.rotation;if(d!=u){var p=t.globalAlpha;t.globalAlpha*=d}for(var v=0;f>v;v++){var y=h[v],_=Ss(y),m=l[v];if(g){var b=m.x+m.width/2,x=m.y+m.height/2;t.save(),Ar(t,b,x),kr(t,g),Ar(t,-b,-x)}a&&a._38o[s].push(t.interactiveInfo={compInfos:[],matrix:g?new Aa(g,b,x).appendTranslate(-b,-x):new Aa}),Ms(t,_,Jc(c.stretch,r,i),m.x,m.y,m.width,m.height,e._data,e.gv),t.interactiveInfo=u,g&&t.restore()}d!=u&&(t.globalAlpha=p)}}}}});var ld=function(t,e){Yi(ld,this,[t,e])};lc(ld,cd,{_checkEmptyRect:!0,_40O:function(t,e){var n=this,i=n.s,r=t.rect;(t.borderColor=n.gv.getBorderColor(n._data))&&(t.borderType=i("border.type"),t.borderWidth=i("border.width"),t.borderPadding=i("border.padding"),e=O(e,t.borderPadding+t.borderWidth/2));var o=n._data.getScale(),a=O(1,O(k(o.x),k(o.y)));if(t.selectWidth=n.getSelectWidth()){var s=n.gv._zoom;t.selectType=i("select.type"),t._97o=n.getSelectColor(),t.selectPadding=i("select.padding"),e=O(e,(t.selectPadding+t.selectWidth/2/s)/a)}e>0&&(e*=a,r=Os(r),tc(r,e)),n._68o(r)},_39O:function(t,e){var n,i=this,r=e.rect;if(e.borderWidth>0&&(n=e.borderPadding,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,Oo(t,e.borderType,{x:r.x-n,y:r.y-n,width:r.width+2*n,height:r.height+2*n}),t.stroke()),e.selectWidth>0){var o=i.gv._zoom;if(n=e.selectPadding,t.strokeStyle=e._97o,t.lineWidth=e.selectWidth/o,e.rotation!=u){t.save(),t.translate(e.position.x,e.position.y),t.rotate(e.rotation);var a=i._data,s=a.getWidth(),c=a.getHeight(),l=e.scale,d=e.anchor;r={x:l.x*-s*d.x,y:l.y*-c*d.y,width:l.x*s,height:l.y*c}}Oo(t,e.selectType,{x:r.x-n,y:r.y-n,width:r.width+2*n,height:r.height+2*n}),e.rotation!=u&&t.restore(),t.stroke()}},dispose:function(){var t=this,e=t._htmlView;ld.superClass._3O.call(t),e&&(e.onHTMLRemoved&&e.onHTMLRemoved(),rc(e))},_3O:function(){var t=this,e=t.s,n=t._data,i=t.gv,r=n.getStyle(kt),o=t.getBodyColor(),a=t._83o=r?{shape:r,_53o:t.getBodyColor("shape.background"),_27Q:Ss(e("shape.repeat.image"),o),shapeGradientPack:e("shape.gradient.pack"),_54o:e("shape.border.width"),_55o:e("shape.border.color"),_56o:e("shape.border.3d"),_57o:e("shape.border.3d.color"),_58o:e("shape.border.3d.accuracy"),shapeGradient:e("shape.gradient"),_59o:e("shape.gradient.color"),_60o:e("shape.border.pattern"),_61o:e("shape.border.cap"),_62o:e("shape.border.join"),shapeForeground:e("shape.foreground"),bodyColor:o,gray:e("2d.gray")}:{img:Ss(i.getImage(n),o),bodyColor:o,gray:e("2d.gray"),stretch:e("image.stretch")};if(W&&!q);else{var s,c=a.img;c&&c.renderHTML?(t._htmlInfo&&t._htmlInfo.img!==c&&(t._htmlInfo=u),t._htmlInfo||(t._htmlInfo={img:c,cache:{}}),s=c.renderHTML(n,i,t._htmlInfo.cache)):t._htmlInfo=u,t._htmlView&&t._htmlView!==s&&(t._htmlView.onHTMLRemoved&&t._htmlView.onHTMLRemoved(),rc(t._htmlView.getView?t._htmlView.getView():t._htmlView)),(t._htmlView=s)&&i.appendHTML(s)&&(s.onHTMLAddedSync&&s.onHTMLAddedSync(),s.onHTMLAdded&&Es(s.onHTMLAdded)),a.rect=n.getRect(),a.position=n.p(),a.scale=n.getScale(),a.anchor=n.getAnchor(),a.rotation=n.getRotation(),r===Pt&&(a._63o=e("shape.depth"));var l=0;if(r)l=bo(u,a._54o/2,a._62o),t.s("shape.dash")&&(l=O(l,(t.s("shape.dash.width")||a._54o)/2));else if(c&&c.boundExtend)if(l=Jc(c.boundExtend,n,i),c.boundExtendAbsolute){var d=n.getScale();l/=i._zoom*O(1,O(k(d.x),k(d.y)))}else if(!Jc(c.fitSize,n,i)){var h=Jc(c.width,n,i),f=Jc(c.height,n,i);l*=O(n.getWidth()/h,n.getHeight()/f)}t._40O(a,l);var g=e("clip.percentage");if(1>g&&(0>g&&(g=0),a.clipRect=ar(n.getAnchorRect(),e("clip.direction"),g)),r){var p=e("shape.fill.clip.percentage");1>p&&(0>p&&(p=0),a.shapeClipRect=ar(n.getAnchorRect(),e("shape.fill.clip.direction"),p));var v=e("shape.foreground.clip.percentage");1>v&&(0>v&&(v=0),a.shapeForegroundClipRect=ar(n.getAnchorRect(),e("shape.foreground.clip.direction"),v))}}},getPosition:function(t,e,n,i){var r=na(t,this._83o.rect,i);return r.x+=e,r.y+=n,r},_80o:function(t){var e=this,n=e.s,i=e.gv,r=e._data,o=e._83o,a=o.rect,s=o.position,c=o.rotation,l=o.anchor,d=o.scale,h=o.shape,g=o.clipRect;if(!e._checkEmptyRect||a.width>0&&a.height>0){var p=r.getSize();if(p.x=-p.width*l.x,p.y=-p.height*l.y,t.save(),Ar(t,s.x,s.y),kr(t,c),Rr(t,d.x,d.y),g&&(t.beginPath(),t.rect(g.x,g.y,g.width,g.height),t.clip()),i._drawForChecking&&o.img&&!1===Jc(o.img.pixelPerfect,r,i))Po(t,p.x,p.y,p.width,p.height,"#888888");else if(e.freeDraw)e.freeDraw(t,p,o);else if(h){var v,y,_,m,b=o._60o,x=zc(t,b),w=o._27Q,I=o._54o,S=o.shapeGradientPack,T=o.gray,C=t.lineJoin,M=t.lineCap,D=function(t){return T?f.toGrayColor(t):t};"roundRect"===h?v=n("shape.corner.radius"):"polygon"===h?v=n("shape.polygon.side"):"arc"===h&&(v=n("shape.arc.from"),y=n("shape.arc.to"),_=n("shape.arc.close"),m=n("shape.arc.oval")),t.lineJoin=o._62o,t.lineCap=o._61o;var E=D(o._53o);if(E||w||S){var P=o.shapeClipRect;P&&(t.save(),t.beginPath(),t.rect(P.x,P.y,P.width,P.height),t.clip()),Oo(t,h,p,v,y,_,m),S?So(t,S):w?ko(t,w,D(o.bodyColor),null,r,i):Ao(t,E,o.shapeGradient,D(o._59o),p),t.fill(),P&&t.restore(),S&&t.restore(),t!==x&&Oo(x,h,p,v,y,_,m)}else Oo(x,h,p,v,y,_,m);var O=o.shapeForeground;if(O){t.save();var A=o.shapeForegroundClipRect;A&&(t.beginPath(),t.rect(A.x,A.y,A.width,A.height),t.clip()),Oo(t,h,p,v,y,_,m),Ao(t,O,n("shape.foreground.gradient"),D(n("shape.foreground.gradient.color")),p),t.fill(),t.restore()}if(I>0){var k=n("shape.border.width.absolute");k&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.lineWidth=I;var R=D(o._55o);t.strokeStyle=R,t.stroke(),k&&t.restore(),o._56o&&Do(t,R,D(o._57o),I,i._zoom,o._58o)}if(Nc(t,b),n("shape.dash")){var z=n("shape.dash.width")||I;if(z>0){b=n("shape.dash.pattern");x=zc(t,b,e._2Q("shape.dash.offset"));x!==t&&Oo(x,h,p,v,y,_,m),e._1Q(t,"shape",z,b)}}Lo(t,E,o._63o,p),t.lineJoin=C,t.lineCap=M}else{var N=e.interactiveInfo;N&&(t.interactiveInfo=N.bodyInfo={compInfos:[],matrix:new Aa(c,s.x,s.y,d.x,d.y)}),o.gray&&(t.compGray=!0);var V=o.img;V&&V.cacheRule!=u&&(V=Bl(t,V,o.stretch,p.width,p.height,r,i,o.bodyColor)),Ms(t,V,o.stretch,p.x,p.y,p.width,p.height,r,i,o.bodyColor),t.compGray=!1,t.interactiveInfo=u}t.restore()}e._39O(t,o)},_48O:function(){},_47O:function(){}});var ud=function(t,e){Yi(ud,this,[t,e])},dd=function(t,e,n,i){var r=Ws(t,e);return n=i?A(n,r):Ol(n,r),r?n/=r:n=0,{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};lc(ud,cd,{_3O:function(){var t,e=this,n=e._data,i=e.gv,o=e.s,a=o(ce),s=n.isLooped(),c=o("edge.width"),l=o("edge.center"),d=o("edge.offset"),h=i.getBorderColor(n),g=h?o("border.width"):0,p=e.getSelectWidth(),v=n._40I,y=n._41I,_=e._78o=v&&y?{looped:s,type:a,width:c,center:l,color:e.getBodyColor("edge.color"),borderColor:h,borderWidth:g,_97o:p?e.getSelectColor():u,selectWidth:p,pattern:o("edge.pattern"),cap:o("edge.cap"),join:o("edge.join"),is3d:o("edge.3d"),_67o:o("edge.3d.color"),_66o:o("edge.3d.accuracy"),gray:o("2d.gray")}:u;if(_){var m=f.getEdgeType(a);if(m){var b=m(n,Rl(e,i,n,s,a),i,e._19Q);b.points&&b.points.size()>1?(_.edgeTypeInfo=b,t=qs(_.edgeTypeInfo.points)):b[ge]&&b.rect&&(_.edgeTypeInfo=b,t=b.rect)}else{var x=o("edge.source.anchor.x"),w=o("edge.source.anchor.y"),I=o("edge.target.anchor.x"),S=o("edge.target.anchor.y"),T=Sl(i,n,"source"),C=Sl(i,n,"target");if(a===Wt){var M=_.points=o(se)||el,D=M.size();_.segments=o("edge.segments");var E=x!==r||w!==r||Li(v),P=I!==r||S!==r||Li(y);if(!l)if(d)E||(T=dd(T,D?M.get(0):C,d,D)),P||(C=dd(C,D?M.get(D-1):T,d,D));else{var A;E||(A=nr(T,D?M.get(0):C,al(i,v)),A&&(T={x:A[0],y:A[1]})),P||(A=nr(D?M.get(D-1):T,C,al(i,y)),A&&(C={x:A[0],y:A[1]}))}t=Xs(qs(_.points),qs(T,C))}else{var k=Rl(e,i,n,s,a);if(e._19Q||(k=-k),s)T=Os(T),T.x=i.getNodeRect(v).x,_.radius=k,t={x:T.x-k,y:T.y-k,width:2*k,height:2*k};else{var R=Ws(T,C),z=Ol(d,R),N={x:z,y:k},V={x:R-z,y:k},L=H(C.y-T.y,C.x-T.x),G=_.mat=new ka(L);if(_.orienAngle=L,_.angle=C.x<T.x?L+B:L,_.rect={x:N.x,y:N.y,width:V.x-N.x,height:0},_.origin=T,N=G.tf(N),N.x+=T.x,N.y+=T.y,V=G.tf(V),V.x+=T.x,V.y+=T.y,l){var F={x:R,y:0};F=G.tf(F),F.x+=T.x,F.y+=T.y,t=qs([T,N,V,F]),_.c1=T,_.c2=F}else t=qs(N,V);T=N,C=V}}_.sourcePoint=T,_.targetPoint=C,n._lastSourcePoint=T,n._lastTargetPoint=C}var j=0;o("edge.dash")&&(j=o("edge.dash.width")||c);var U="square"===_.cap?.71:.5;bo(t,O(j*U,c*U+g+p),_.join),e._68o(t)}},getRotation:function(t,e,n){t=t||0;var i=this._78o;if(i){var r,o=i.angle,a=i.points,s=i.edgeTypeInfo;if(o!=u)return e?i.orienAngle+t:o+t;if(s&&s[ge])return s.getRotation?s.getRotation(this,t,e,n):0;if(s&&s.points){var c=s.points;return r=c.size(),cl[n]?r&&0===r%2?Al(c.get(r/2-1),c.get(r/2),e,t):t:sl[n]?Al(c.get(0),c.get(1),e,t):Al(c.get(r-2),c.get(r-1),e,t)}if(a)return r=a.size(),cl[n]?r&&0===r%2?Al(a.get(r/2-1),a.get(r/2),e,t):t:sl[n]?Al(i.sourcePoint,r?a.get(0):i.targetPoint,e,t):Al(r?a.get(r-1):i.sourcePoint,i.targetPoint,e,t)}return t},getPosition:function(t,e,n,i,r){var o=this._78o;if(o){var a=o.type,s=o.points,c=o.edgeTypeInfo,l=o.sourcePoint,u=o.targetPoint;if(!a)return o.looped?{x:l.x-o.radius+e,y:l.y+n}:(r&&l&&u&&(l.x>u.x||l.x===u.x&&l.y>u.y)&&(t=ea[t],n=-n),d=na(t,o.rect,i),d.x+=e,d.y+=n,d=o.mat.tf(d),d.x+=o.origin.x,d.y+=o.origin.y,d);if(c&&c[ge])return c.getPosition?c.getPosition(this,t,e,n,i,r):{x:(l.x+u.x)/2,y:(l.y+u.y)/2};if(s){var d,h=s.size();if(cl[t]){if(h){var f=h%2;if(0===f)return kl(s.get(h/2-1),s.get(h/2),t,e,n,i,r);d=s.get((h-f)/2)}else d={x:(l.x+u.x)/2,y:(l.y+u.y)/2};return d=na(t,{x:d.x,y:d.y,width:0,height:0},i),d.x+=e,d.y+=n,d}return sl[t]?kl(l,h?s.get(0):u,t,e,n,i,r):kl(h?s.get(h-1):l,u,t,e,n,i,r)}if(c){var g=c.points;h=g.size();if(cl[t]){f=h%2;return 0===f?kl(g.get(h/2-1),g.get(h/2),t,e,n,i,r):(d=g.get((h-f)/2),d=na(t,{x:d.x,y:d.y,width:0,height:0},i),d.x+=e,d.y+=n,d)}return sl[t]?kl(g.get(0),g.get(1),t,e,n,i,r):kl(g.get(h-2),g.get(h-1),t,e,n,i,r)}}return ci},_42:function(t){this._78o&&ud.superClass._42.call(this,t)},drawPath:function(t,e){t.beginPath();var n=e.type,i=e.points,r=e.segments,o=e.edgeTypeInfo;if(!n||i){var a=e.sourcePoint,s=a.x,c=a.y,l=e.targetPoint,u=l.x,d=l.y;if(n)if(r){var h=new tl({x:s,y:c});h.addAll(i),h.add({x:u,y:d}),Co(t,h,r)}else t.moveTo(s,c),i.each((function(e){t.lineTo(e.x,e.y)})),t.lineTo(u,d);else e.looped?t.arc(s,c,e.radius,0,G,!0):e.center?(t.moveTo(e.c1.x,e.c1.y),t.lineTo(s,c),t.lineTo(u,d),t.lineTo(e.c2.x,e.c2.y)):(t.moveTo(s,c),t.lineTo(u,d))}else o&&(o.points?Co(t,o.points,o.segments):o[ge]&&o[ge](t,o))},_80o:function(t){var e=this,n=e.s,i=e._78o,r=i.width,o=i.selectWidth,a=i.borderWidth,s=t.lineJoin,c=t.lineCap,l=i.gray,u=i.pattern;t.lineJoin=i.join,t.lineCap=i.cap,e.drawPath(zc(t,u),i);var d=n("edge.width.absolute");d&&(t.save(),t.setTransform(1,0,0,1,0,0)),o&&(t.strokeStyle=i._97o,t.lineWidth=r+2*(a+o),t.stroke()),a&&(t.strokeStyle=l?f.toGrayColor(i.borderColor):i.borderColor,t.lineWidth=r+2*a,t.stroke());var h=l?f.toGrayColor(i.color):i.color,g=l?f.toGrayColor(i._67o):i._67o;if(t.strokeStyle=h,t.lineWidth=r,t.stroke(),i.is3d&&Do(t,h,g,r,e.gv._zoom,i._66o),d&&t.restore(),Nc(t,u),n("edge.dash")){u=n("edge.dash.pattern");var p=zc(t,u,e._2Q("edge.dash.offset"));p!==t&&e.drawPath(p,i),e._1Q(t,"edge",n("edge.dash.width")||r,u)}t.lineJoin=s,t.lineCap=c},_48O:function(){},_47O:function(){}});var hd=function t(e,n){Yi(t,this,[e,n])};lc(hd,ld,{_3O:function(){var t,e,n=this,i=n.s,r=n._data,o=n.gv;if(n._88I=u,r.isExpanded()&&r.eachChild((function(n){if(Vi(n)){var i=o.getBoundsForGroup(n);i&&(e||(e=[]),e.push(i),t=Xs(t,i))}})),t){var a=o.getLabel(r),s=i("group.type");t=zl(s,e,t),_l(t,r,"group.padding",1);var c=n._88I={type:s,rect:t,_64o:t};if(!s&&a!=u){var l,d=n.labelInfo={label:a,color:i("group.title.color"),font:i("group.title.font"),align:i("group.title.align")},h=Ir(d,a),f=h.width,g=h.height,p=i("group.title.align"),v=i("group.title.orientation");if((v===yt||v===_t)&&f>t.width?t.width=f:(v===pt||v===vt)&&f>t.height&&(t.height=f),d.rect={y:t.y-g,width:h.width,height:g},l=p===pt?t.x:p===vt?t.x+t.width-f:t.x+t.width/2-f/2,d.rect.x=l,v===_t)c.titleRect={x:t.x,y:t.y+t.height,width:t.width,height:g},c.rect={x:t.x,y:t.y,width:t.width,height:t.height+g},d.rect={x:l,y:t.y+t.height,width:f,height:g};else if(v===pt){var y=c.titleRect={x:t.x-g,y:t.y,width:g,height:t.height};c.rect={x:t.x-g,y:t.y,width:t.width+g,height:t.height},d.rect={x:y.x+g/2-t.height/2,y:y.y+t.height/2-g/2,width:t.height,height:g},d.rotation=-Math.PI/2}else if(v===vt){y=c.titleRect={x:t.x+t.width,y:t.y,width:g,height:t.height};c.rect={x:t.x,y:t.y,width:t.width+g,height:t.height},d.rect={x:y.x+g/2-t.height/2,y:y.y+t.height/2-g/2,width:t.height,height:g},d.rotation=Math.PI/2}else c.titleRect={x:t.x,y:t.y-g,width:t.width,height:g+1},c.rect={x:t.x,y:t.y-g,width:t.width,height:t.height+g}}n._40O(c,i("group.border.width")/2)}else hd.superClass._3O.call(n)},getPosition:function(t,e,n,i){var r=this._88I;if(r){var o=na(t,r.rect,i);return o.x+=e,o.y+=n,o}return hd.superClass.getPosition.apply(this,arguments)},_24O:function(t,e){var n=this._88I;(!n||n.type||"label2"===t)&&hd.superClass._24O.call(this,t,e)},_80o:function(t){var e=this,n=e._88I;if(n){var i=e._data,r=e.s,o=e.gv,a=n.type,s=n.rect,c=n._64o,l=n.titleRect,u=e.getBodyColor(),d=Ss(r("group.image"),u),h=r("group.image.stretch"),f=e.getBodyColor("group.background"),g=Ss(r("group.repeat.image"),u),p=r("group.gradient.pack"),v=r("group.gradient"),y=r("group.gradient.color"),_=r("group.border.width"),m=r("group.border.color"),b=r("group.border.pattern"),x=r("group.title.orientation"),w=r("group.depth");if(a){var I=t.lineJoin,S=t.lineCap;if(t.lineJoin=r("group.border.join"),t.lineCap=r("group.border.cap"),d){if(t.save(),Oo(t,a,s),t.clip(),Ms(t,d,h,s.x,s.y,s.width,s.height,i,o,u),t.restore(),_>0){var T=zc(t,b);Oo(T,a,s),t.lineWidth=_,t.strokeStyle=m,t.stroke(),Nc(t,b)}}else{T=zc(t,b);f||g||p?(Oo(t,a,s),p?So(t,p):g?ko(t,g,u,null,i,o):Ao(t,f,v,y,s),t.fill(),p&&t.restore(),t!==T&&Oo(T,a,s)):Oo(T,a,s),_>0&&(t.lineWidth=_,t.strokeStyle=r("group.border.color"),t.stroke()),Nc(t,b),a===Pt&&Lo(t,f,w,s)}t.lineJoin=I,t.lineCap=S}else{var C=r("group.title.background"),M=r("group.border.radius");if(d)Ms(t,d,h,c.x,c.y,c.width,c.height,i,o,e.getBodyColor());else if(f||g)if(g?ko(t,g,u,null,i,o):Ao(t,f,v,y,c),0===_)Oo(t,Pt,c),t.fill(),Lo(t,f,w,c);else{switch(t.beginPath(),x){case _t:No(t,c.x,c.y,c.width,c.height,M,M,0,0);break;case pt:No(t,c.x,c.y,c.width,c.height,0,M,0,M);break;case vt:No(t,c.x,c.y,c.width,c.height,M,0,M,0);break;case yt:No(t,c.x,c.y,c.width,c.height,0,0,M,M)}t.fill()}if(l&&C)if(0===_)Po(t,l.x,l.y,l.width,l.height,C),Lo(t,C,w,l);else{switch(t.beginPath(),t.fillStyle=C,x){case _t:No(t,l.x,l.y,l.width,l.height,0,0,M,M);break;case pt:No(t,l.x,l.y,l.width,l.height,M,0,M,0);break;case vt:No(t,l.x,l.y,l.width,l.height,0,M,0,M);break;case yt:No(t,l.x,l.y,l.width,l.height,M,M,0,0)}t.fill()}if(_>0){T=zc(t,b);if(Oo(T,"roundRect",s,M),t.lineWidth=_,t.strokeStyle=m,l&&r("group.splitLine")){var D=l.x,E=l.y,P=l.width,O=l.height;x===_t?(t.moveTo(D,E),t.lineTo(D+P,E)):x===pt?(t.moveTo(D+P,E),t.lineTo(D+P,E+O)):x===vt?(t.moveTo(D,E),t.lineTo(D,E+O)):(t.moveTo(D,E+O),t.lineTo(D+P,E+O))}t.stroke(),Nc(t,b)}}e._39O(t,n)}else hd.superClass._80o.call(e,t)}});var fd=function t(e,n){Yi(t,this,[e,n])};lc(fd,ld,{_80o:function(t){this._39O(t,this._83o)}});var gd=function(t,e){Yi(gd,this,[t,e])};lc(gd,ld,{_3O:function(){var t=this,e=t._data,n=t.s,i=t.gv,r=e.getPoints(),o=i.getBorderColor(e),a=o?n("border.width"):0,s=t.getSelectWidth(),c=n("shape.border.width"),l=e.getRect(),d=e.getAnchorRect(),h=i.getBodyColor(e),f=t._99o=r.isEmpty()?u:{rect:l,rotation:e.getRotation(),fillRule:n("shape.fill.rule"),scale:e.getScale(),position:e.p(),points:r,segments:e.getSegments(),bodyColor:h,borderColor:o,borderWidth:a,_94o:n("shape.border.3d"),_95o:n("shape.border.3d.color"),_96o:n("shape.border.3d.accuracy"),_97o:s?t.getSelectColor():u,selectWidth:s,_53o:n("shape.background"),_27Q:Ss(n("shape.repeat.image"),h),shapeGradientPack:n("shape.gradient.pack"),_54o:c,_55o:n("shape.border.color"),shapeGradient:n("shape.gradient"),_59o:n("shape.gradient.color"),_60o:n("shape.border.pattern"),_61o:n("shape.border.cap"),_62o:n("shape.border.join"),shapeForeground:n("shape.foreground"),gray:n("2d.gray")};if(f){d.x+=f.position.x,d.y+=f.position.y,f.gradientRect=d;var g=e.getScale(),p=O(1,O(k(g.x),k(g.y)));n("shape.dash")&&n("shape.dash.width")>c&&(c=n("shape.dash.width"));var v=c*("square"===f._61o?.71:.5)+a+s/t.gv._zoom/p;v&&(v*=p,l=Os(l),bo(l,v,f._62o)),t._68o(l);var y=n("clip.percentage");1>y&&(0>y&&(y=0),f.clipRect=ar(e.getAnchorRect(),n("clip.direction"),y));var _=n("shape.fill.clip.percentage");1>_&&(0>_&&(_=0),f.shapeClipRect=ar(e.getAnchorRect(),n("shape.fill.clip.direction"),_));var m=n("shape.foreground.clip.percentage");1>m&&(0>m&&(m=0),f.shapeForegroundClipRect=ar(e.getAnchorRect(),n("shape.foreground.clip.direction"),m))}},getPosition:function(t,e,n,i){var r=this._99o;if(r){var o=na(t,r.rect,i);return o.x+=e,o.y+=n,o}return ci},_42:function(t){this._99o&&gd.superClass._42.call(this,t)},_80o:function(t){var e,n=this,i=n.s,r=n._99o,o=r.position,a=r.scale,s=r.rotation,c=r.borderWidth,l=r.selectWidth/n.gv._zoom,u=r._27Q,d=r.shapeGradientPack,h=r._54o,g=r.clipRect,p=r.shapeClipRect,v=r.points,y=r.segments,_=n._data.isClosePath(),m=r.fillRule,b=r.gray,x=function(t){return b?f.toGrayColor(t):t},w=x(r._53o),I=w||u||d;t.save(),Ar(t,o.x,o.y),kr(t,s),Rr(t,a.x,a.y),g&&(t.beginPath(),t.rect(g.x,g.y,g.width,g.height),t.clip()),I&&p&&(t.save(),t.beginPath(),t.rect(p.x,p.y,p.width,p.height),t.clip()),Ar(t,-o.x,-o.y);var S=r._60o,T=zc(t,S),C=t.lineJoin,M=t.lineCap;t.lineJoin=r._62o,t.lineCap=r._61o;var D=x(r.bodyColor);I?(Co(t,v,y,_),d?So(t,d):u?ko(t,u,D,null,n._data,n.gv):(e=D||w,Ao(t,e,r.shapeGradient,x(r._59o),r.gradientRect)),t.fill(m),p&&(t.restore(),Ar(t,-o.x,-o.y)),d&&t.restore(),T!==t&&Co(T,v,y,_)):Co(T,v,y,_);var E=r.shapeForeground;if(E){t.save();var P=r.shapeForegroundClipRect;P&&(Ar(t,o.x,o.y),t.beginPath(),t.rect(P.x,P.y,P.width,P.height),t.clip(),Ar(t,-o.x,-o.y)),Co(t,v,y,_),Ao(t,E,i("shape.foreground.gradient"),x(i("shape.foreground.gradient.color")),r.gradientRect),t.fill(m),t.restore()}var O=i("shape.border.width.absolute");if(O&&(t.save(),t.setTransform(1,0,0,1,0,0)),l&&(t.strokeStyle=r._97o,t.lineWidth=h+2*(c+l),t.stroke()),c&&(t.strokeStyle=x(r.borderColor),t.lineWidth=h+2*c,t.stroke()),h&&(e=x(r._55o),!w&&D&&(e=D),t.strokeStyle=e,t.lineWidth=h,t.stroke(),r._94o&&Do(t,e,x(r._95o),h,n.gv._zoom,r._96o)),O&&t.restore(),Nc(t,S),i("shape.dash")){var A=i("shape.dash.width")||h;if(A>0){S=i("shape.dash.pattern");T=zc(t,S,n._2Q("shape.dash.offset"));T!==t&&Co(T,v,y,_),n._1Q(t,"shape",A,S)}}t.lineJoin=C,t.lineCap=M,t.restore()},_48O:function(){},_47O:function(){}});var pd=function t(e,n){Yi(t,this,[e,n])};lc(pd,gd,{getRotation:function(t,e,n){t=t||0;var i=this._data.getPoints(),r=i.size();return r>1?cl[n]?r&&0===r%2?Al(i.get(r/2-1),i.get(r/2),e,t):t:sl[n]?Al(i.get(0),i.get(1),e,t):Al(i.get(r-2),i.get(r-1),e,t):t},getPosition:function(t,e,n,i,r){var o=this._data.getPoints(),a=o.size();if(a>1){if(cl[t]){var s=a%2;if(0===s)return kl(o.get(a/2-1),o.get(a/2),t,e,n,i,r);var c=o.get((a-s)/2),l={x:c.x,y:c.y,width:0,height:0};return c=na(t,l,i),c.x+=e,c.y+=n,c}return sl[t]?kl(o.get(0),o.get(1),t,e,n,i,r):kl(o.get(a-2),o.get(a-1),t,e,n,i,r)}return ci}});var vd=function t(e,n){Yi(t,this,[e,n])};lc(vd,ld,{_3O:function(){var t=this;vd.superClass._3O.call(t);var e=t.s,n=t._83o;t._82o=n.img||n.shape?u:{background:t.getBodyColor("grid.background"),depth:e("grid.depth"),rect:n.rect,_88o:e("grid.cell.depth"),cellBorderColor:e("grid.cell.border.color"),_89o:e("grid.row.count"),_90o:e("grid.column.count"),block:e("grid.block"),_91o:e("grid.block.color"),_92o:e("grid.block.padding"),_93o:e("grid.block.width")}},_80o:function(t){var e=this,n=e._82o;if(n){var i,r,o=e._data,a=n.background,s=n.rect,c=n.block,l=n._91o,u=n._92o,d=n._93o,h=n._88o,f=n.cellBorderColor,g=n._89o,p=n._90o;if(a)if(Po(t,s.x,s.y,s.width,s.height,a),Lo(t,a,n.depth,s),h)for(i=0;g>i;i++)for(r=0;p>r;r++)s=o.getCellRect(i,r),s&&Lo(t,a,h,s);else if(f){for(t.beginPath(),i=0;g>i;i++)for(r=0;p>r;r++)s=o.getCellRect(i,r),s&&t.rect(s.x,s.y,s.width,s.height);t.strokeStyle=f,t.lineWidth=1,t.stroke()}if("h"===c)for(i=0;g>i;i++)s=Xs(o.getCellRect(i,0),o.getCellRect(i,p-1)),tc(s,u),Vo(t,l,s.x,s.y,s.width,s.height,d);else if("v"===c)for(r=0;p>r;r++)s=Xs(o.getCellRect(0,r),o.getCellRect(g-1,r)),tc(s,u),Vo(t,l,s.x,s.y,s.width,s.height,d);e._39O(t,e._83o)}else vd.superClass._80o.call(e,t)}});var yd=function t(e,n){Yi(t,this,[e,n])};lc(yd,ld,{_checkEmptyRect:!1,_81o:function(){var t=this._data,e=yd.superClass._81o.call(this),n=t.s("text");if(n!=u){var i,r,o=t.s("text.font"),a=t.s("text.align"),s=t.s("text.vAlign"),c=Vs(o,n),l=c.width,d=c.height,h=t.getAnchor(),f=t.getWidth(),g=t.getHeight();"left"===a?i=-f*h.x:"center"===a?i=-f*h.x+(f-l)/2:"right"===a&&(i=f*(1-h.x)-c.width),"top"===s?r=-g*h.y:"middle"===s?r=-g*h.y+(g-d)/2:"bottom"===s&&(r=g*(1-h.y)-c.height);var p,v=t.getMatrix();if(p=qs([v.tf(i,r),v.tf(i+l,r),v.tf(i+l,r+d),v.tf(i,r+d)]),e=Xs(e,p),e&&t.s("text.shadow")){var y=Os(e);y.x+=t.s("text.shadow.offset.x"),y.y+=t.s("text.shadow.offset.y"),tc(y,t.s("text.shadow.blur")),e=Xs(e,y)}}return e}});var _d=Nl.Interactor=function(t){this.gv=this._graphView=t};Vl("Interactor",i,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(t){this.gv.fi(t)},setCursor:function(t){lt||this.gv.setCursor(t)},startDragging:function(t){var e=this;e._lastClientPoint=Us(t),e._lastLogicalPoint=e.gv.lp(t),ic(e,t)},clearDragging:function(){var t=this;t._lastClientPoint=t._lastLogicalPoint=t._logicalPoint=u},autoScroll:function(t){return this.gv.autoScroll(t,this._lastClientPoint)}});var md=u,bd=function(t){md.handleWindowTouchMove(t)},xd=function t(e){md.handleWindowTouchEnd(e),T(n,In,bd),T(n,Sn,t),md=u},wd=function(t){md.handleWindowMouseMove(t)},Id=function t(e){md.handleWindowMouseUp(e),T(n,mn,wd),T(n,bn,t),md=u},Sd=function(t,e){t!==md&&(md?lt?md.handleWindowTouchEnd(e):md.handleWindowMouseUp(e):lt?(S(n,In,bd),S(n,Sn,xd)):(S(n,mn,wd),S(n,bn,Id)),md=t)},Td=function(t){var e=this;e.gv=t,e._is2d=t instanceof Nl.GraphView,e._eventListeners={},e._is2d&&(e.filter=function(e){return t.isSelectable(e)&&t.isInteractive(e)}),t.getView(),["mousedown","mousemove","mouseleave","touchstart","touchmove",Dn].forEach((function(t){e.addListener(t)})),e.initImageResource()};lc(Td,_d,{enableVR:function(t){var e=this;if(!!e._vrEnable!==t)if(e._vrEnable=t,t)e.gv.vr.mp(e.onVRControllerChange,e);else if(e.gv.vr.ump(e.onVRControllerChange,e),e._vrRayPolyline){var n=e.gv.dm();n.remove(e._vrRayPolyline),n.remove(e._vrRayHitPoint),e._vrRayPolyline=r,e._vrRayHitPoint=r}},onVRControllerChange:function(t){var e=this,n=t.property,i=t.newValue,r=e.gv.vr.getController(i.id),o=r.getRay();o&&("gamepad.button.trigger"===n?"down"===i._62O?e.handle_mousedown(o):e.handleWindowMouseUp(o):"gamepad.pose"===n&&(e.handle_mousemove(o),e.handleWindowMouseMove(o)))},drawVRRay:function(t,e,n){var i,r=this,o=r.gv,a=r._vrRayPolyline,s=!1;if(a)i=r._vrRayHitPoint;else{var c=o.dm();r._vrRayPolyline=a=new d.Polyline,r._vrRayHitPoint=i=new d.Node,i.s({shape3d:"billboard","shape3d.transparent":!0,"shape3d.texture.scale":10,"shape3d.image":"coreInteractorRayHitImage"}),i.setAnchor3d(.5,.5,.499);var l=.2/o.vr.measureOflength;i.s3(l,l,l),a.s("intersect",!1),i.s("intersect",!1),c.add(a),c.add(i),s=!0}if(e){var u=n.world,h=n.worldNormal,f=u.x,g=u.y,p=u.z;a.s("shape.border.color","red"),a.setPoints([{x:t.origin.x,y:t.origin.z,e:t.origin.y},{x:f,y:p,e:g}]),i.s("3d.visible",!0),i.p3(f,g,p),i.lookAtDirection([h.x,h.y,h.z],"front")}else{a.s("shape.border.color","blue");var v=new d.Math.Vector3;v.copy(t.direction).setLength(1e3/r.gv.vr.measureOflength).add(t.origin),a.setPoints([{x:t.origin.x,y:t.origin.z,e:t.origin.y},{x:v.x,y:v.z,e:v.y}]),i.s("3d.visible",!1)}o.fi({kind:"vrRayIntersect",ray:t,data:e,intersect:n,polyline:a,hitNode:i,begin:s})},setPreventEventDefault:function(t,e){var n=this,i=n._eventListeners[t];i?i._prevent=e:n._eventListeners[t]=i={_removal:r,_prevent:e}},removeListener:function(t){var e=this,n=e._eventListeners[t];n&&n._removal&&(n._removal(),n._removal=r)},addListener:function(t){var e=this,n=e._eventListeners[t];if(n||(e._eventListeners[t]=n={_removal:r,_prevent:!0}),!n||!n._removal){var i=function(i){n._prevent&&f.preventDefault(i),e.disabled||e["handle_"+t](i)};S(e.gv.getView(),t,i),n._removal=function(){T(e.gv.getView(),t,i)}}},handleWindowTouchMove:function(t){this.handleWindowMouseMove(t)},handleWindowMouseMove:function(t){this.downInfo&&(this.isDragging?this.handleDownInfo("onDrag",t):(this.handleDownInfo("onBeginDrag",t),this.isDragging=!0))},handleWindowTouchEnd:function(t){this.handleWindowMouseUp(t)},handleWindowMouseUp:function(t){if(this.isDragging&&(this.handleDownInfo("onEndDrag",t),this.isDragging=!1),this.downInfo){var e=this.handle("onUp",t);if(e&&e.data===this.downInfo.data){this.handleMissingUp(t);var n=this,i=2===t.button?"onContextMenu":"onClick";if(!n._dbclickTimer)return void(n._dbclickTimer=J((function(){delete n._dbclickTimer,n.handleClick(t,i,e),this.downInfo=u}),f.clickDelay));K(n._dbclickTimer),delete n._dbclickTimer,i="onDoubleClick",n.handleClick(t,i,e)}else this.handleDownInfo("onUp",t);this.downInfo=u}},handle_mouseleave:function(t){var e=this,n=e.gv,i=e.currentInfo?e.currentInfo.data:u;if(i){i.s("onLeave")&&i.s("onLeave")(t,i,n),e.fire("data","onLeave",t,i);var r=e.currentInfo?e.currentInfo.hits:u;if(r)for(var o in r)e.handleLeave(t,o);e.currentInfo=u}},handle_mousewheel:function(t){t.scrollDelta=t.wheelDelta/40,this.handle("onScroll",t)},handle_DOMMouseScroll:function(t){t.scrollDelta=2===t.axis?-t.detail:0,this.handle("onScroll",t)},handle_touchstart:function(t){this.handle_mousedown(t)},handle_touchmove:function(t){this.handle("onMove",t)},handle_mousedown:function(t){this.isDragging&&(this.handleDownInfo("onEndDrag",t),this.isDragging=!1),this.downInfo=this.handle("onDown",t),this.downInfo&&Sd(this,t)},handle_mousemove:function(t){var e=this,n=e.gv;e._hoverTimer&&(K(e._hoverTimer),delete e._hoverTimer);var i,r,o,a=e.handle("onMove",t),s=this.currentInfo?this.currentInfo.data:u,c=this.currentInfo?this.currentInfo.hits:u;if(a&&(r=a.data,o=a.hits,e._hoverTimer=J((function(){K(e._hoverTimer),delete e._hoverTimer,e.handle("onHover",t,a)}),n.getHoverDelay()||f.hoverDelay)),r!==s){if(s&&(s.s("onLeave")&&s.s("onLeave")(t,s,n),this.fire("data","onLeave",t,s)),r&&(r.s("onEnter")&&r.s("onEnter")(t,r,n),this.fire("data","onEnter",t,r)),c)for(i in c)this.handleLeave(t,i);if(o)for(i in o){var l=o[i];l.target.onEnter&&l.target.onEnter(t,r,n,l.point,l.width,l.height),this.fire(l.type,"onEnter",l.event,l.data,l.image,l.comp,l.point,l)}}else{if(c)for(i in c)o&&o[i]||this.handleLeave(t,i);if(o)for(i in o)if(!c||!c[i]){l=o[i];l.target.onEnter&&l.target.onEnter(t,r,n,l.point,l.width,l.height),this.fire(l.type,"onEnter",l.event,l.data,l.image,l.comp,l.point,l)}}this.currentInfo=a},handle:function(t,n,i){var r,o,a=this,s=a.gv;if(a._is2d){if(i=i||s.getDataInfoAt(n,this.filter),!i)return;if(r=i.ui.interactiveInfo){var c,l=i.data;if(l.s(t)&&l.s(t)(n,l,s),this.fire("data",t,n,l),"body"===i.part&&r.bodyInfo)c="body",i.hits=this.handleImage(c,s.getImage(l),t,n,l,i.point,r.bodyInfo);else if("icons"===i.part&&r._38o){var u=r._38o[i.name];u&&u[i.index]&&(c="icons|"+i.name+"|"+i.index,i.hits=this.handleImage(c,i.icon,t,n,l,i.point,u[i.index]))}}return i}if(!i)if(n&&n instanceof d.Math.Ray){var h=s.vr.intersectWorld(n);if(l=h.data,o=h.intersect,a.drawVRRay(n,l,o),!l)return;var f=s.getData3dUI(l);if(r=f.interactiveInfo,!r)return;i={data:l,part:o.part,ui:f}}else{if(i=s.getDataInfoAt(n),!i)return;i&&(i={data:i.data,part:i.part})}if(s.isInteractive(i.data)){if(!o){l=i.data;f=s.getData3dUI(l);if(i.ui=f,r=f.interactiveInfo,!r)return i;if(o=s.intersectObject(n,l),!o)return}l.s(t)&&l.s(t)(n,l,s),this.fire("data",t,n,l);var g,p=o.part;return"body"!==p&&(g=l.s(p+".image")||l.s("shape3d."+p+".image")),g||(g=l.s("all.image")||l.s("shape3d.image")),r="object"==e(g)?r[g.uuid]:r[g],r&&r.bodyInfo?(i.part="body",i.interactiveInfo=r,i.point=o.uv.multiply({x:r.bodyInfo.rect.width,y:r.bodyInfo.rect.height}),i.image=g,i.hits=this.handleImage("body",g,t,n,l,i.point,r.bodyInfo),i):i}},_handleLeaveOrMissing:function(t,e,n){var i="leave"===t?this.currentInfo:this.downInfo;if(i){var r=i.interactiveInfo||i.ui.interactiveInfo;if(r){var o,a,s=i.data;if(this._is2d){if(a=this.gv.lp(e),"body"===i.part&&r.bodyInfo)o="body","leave"===t?this.handleLeaveImage(n,o,this.gv.getImage(s),e,s,a,r.bodyInfo):this.handleMissingUpImage(o,this.gv.getImage(s),e,s,a,r.bodyInfo);else if("icons"===i.part&&r._38o){var c=r._38o[i.name];c&&c[i.index]&&(o="icons|"+i.name+"|"+i.index,"leave"===t?this.handleLeaveImage(n,o,i.icon,e,s,a,c[i.index]):this.handleMissingUpImage(o,i.icon,e,s,a,c[i.index]))}}else{if(!r.bodyInfo)return;var l=this.gv.intersectObject(e,s);a=l?l.uv.multiply({x:r.bodyInfo.rect.width,y:r.bodyInfo.rect.height}):{x:1/0,y:1/0},"leave"===t?this.handleLeaveImage(n,"body",i.image,e,s,a,r.bodyInfo):this.handleMissingUpImage("body",i.image,e,s,a,r.bodyInfo)}}}},handleClick:function(t,e,n){var i=this,r=this.downInfo;if(r&&n){var o,a=n.interactiveInfo||n.ui.interactiveInfo,s=n.data,c=this.gv;if(s.s(e)&&s.s(e)(t,s,c),i.fire("data",e,t,s),a)if(this._is2d){if(r.part===n.part){var l=c.lp(t);"body"===n.part&&a.bodyInfo&&(o="body",this.handleClickImage(o,c.getImage(s),e,t,s,l,a.bodyInfo,n))}}else{if(!a.bodyInfo)return;var u=c.intersectObject(t,s);if(!u)return;l=u.uv.multiply({x:a.bodyInfo.rect.width,y:a.bodyInfo.rect.height}),this.handleClickImage("body",r.image,e,t,s,l,a.bodyInfo,n)}}},handleDownInfo:function(t,e){if(this.downInfo){var n=this.downInfo,i=this.gv,r=n.interactiveInfo||n.ui.interactiveInfo;if(r){var o,a=n.data;if(a.s(t)&&a.s(t)(e,a,i),this.fire("data",t,e,a),this._is2d){var s=i.lp(e);if("body"===n.part&&r.bodyInfo)o="body",this.handleDownInfoImage(o,i.getImage(a),t,e,a,s,r.bodyInfo);else if("icons"===n.part&&r._38o){var c=r._38o[n.name];c&&c[n.index]&&(o="icons|"+n.name+"|"+n.index,this.handleDownInfoImage(o,n.icon,t,e,a,s,c[n.index]))}}else{if(!r.bodyInfo)return;var l=i.intersectObject(e,a);if(!l)return;s=l.uv.multiply({x:r.bodyInfo.rect.width,y:r.bodyInfo.rect.height}),this.handleDownInfoImage("body",n.image,t,e,a,s,r.bodyInfo)}}}},fire:function(t,e,n,i,o,a,s,c){this.gv.fi({kind:e,type:t,event:n,data:i,image:o,comp:a,view:this.gv,point:s,width:c?c.width:r,height:c?c.height:r})},handleImage:function(t,e,n,i,o,a,s){var c={};if(e&&(e=Ss(e))){var l=this.gv,u=s.rect,d=this.convertPoint(a,s);d.inRect&&(e[n]&&e[n](i,o,l,d,u.width,u.height),this.fire("image",n,i,o,e,r,d,u),c[t+"|image"]={target:e,type:"image",image:e,data:o,event:i,point:d,width:u.width,height:u.height});for(var h=s.compInfos,f=e,g=h.length-1;g>=0;g--){var p=h[g],v=p.comp;d=this.convertPoint(a,p,f,v,l,o),d.inRect&&(u=p.rect,o._interactPrefix=p.prefix,v[n]&&v[n](i,o,l,d,u.width,u.height),this.fire("comp",n,i,o,e,v,d,u),(e=u.image)&&(e[n]&&e[n](i,o,l,d,u.width,u.height),this.fire("image",n,i,o,e,r,d,u)),o._interactPrefix=null,c[t+"|"+g]={target:v,type:"comp",comp:v,image:e,data:o,event:i,point:d,width:u.width,height:u.height},e&&(c[t+"|"+g+"|image"]={target:e,type:"image",image:e,data:o,event:i,point:d,width:u.width,height:u.height}))}}return c},handleLeave:function(t,e){return this._handleLeaveOrMissing("leave",t,e)},handleMissingUp:function(t){return this._handleLeaveOrMissing("missing",t)},handleLeaveImage:function(t,e,n,i,o,a,s){if(n&&(n=Ss(n))){var c=this.gv,l=s.rect,u=this.convertPoint(a,s);t===e+"|image"&&(n.onLeave&&n.onLeave(i,o,c,u,l.width,l.height),this.fire("image","onLeave",i,o,n,r,u,l));for(var d=s.compInfos,h=n,f=d.length-1;f>=0;f--){var g=d[f],p=g.comp;u=this.convertPoint(a,g,h,p,c,o),l=g.rect,o._interactPrefix=g.prefix,t===e+"|"+f&&(p.onLeave&&p.onLeave(i,o,c,u,l.width,l.height),this.fire("comp","onLeave",i,o,n,p,u,l)),(n=l.image)&&t===e+"|"+f+"|image"&&(n.onLeave&&n.onLeave(i,o,c,u,l.width,l.height),this.fire("image","onLeave",i,o,n,r,u,l)),o._interactPrefix=null}}},handleMissingUpImage:function(t,e,n,i,o,a){var s="onUp",c=this.downInfo.hits;if(c&&e&&(e=Ss(e))){var l=this.gv,u=a.rect,d=this.convertPoint(o,a);!d.inRect&&c[t+"|image"]&&(e[s]&&e[s](n,i,l,d,u.width,u.height),this.fire("image",s,n,i,e,r,d,u));for(var h=a.compInfos,f=e,g=h.length-1;g>=0;g--){var p=h[g],v=p.comp;d=this.convertPoint(o,p,f,v,l,i),d.inRect||(u=p.rect,i._interactPrefix=p.prefix,c[t+"|"+g]&&(v[s]&&v[s](n,i,l,d,u.width,u.height),this.fire("comp",s,n,i,e,v,d,u)),(e=u.image)&&c[t+"|"+g+"|image"]&&(e[s]&&e[s](n,i,l,d,u.width,u.height),this.fire("image",s,n,i,e,r,d,u)),i._interactPrefix=null)}}},handleDownInfoImage:function(t,e,n,i,o,a,s){var c=this.downInfo.hits;if(c&&e&&(e=Ss(e))){var l=this.gv,u=s.rect,d=this.convertPoint(a,s);c[t+"|image"]&&(e[n]&&e[n](i,o,l,d,u.width,u.height),this.fire("image",n,i,o,e,r,d,u));for(var h=s.compInfos,f=e,g=h.length-1;g>=0;g--){var p=h[g],v=p.comp;d=this.convertPoint(a,p,f,v,l,o),u=p.rect,o._interactPrefix=p.prefix,c[t+"|"+g]&&(v[n]&&v[n](i,o,l,d,u.width,u.height),this.fire("comp",n,i,o,e,v,d,u)),(e=u.image)&&c[t+"|"+g+"|image"]&&(e[n]&&e[n](i,o,l,d,u.width,u.height),this.fire("image",n,i,o,e,r,d,u)),o._interactPrefix=null}}},handleClickImage:function(t,e,n,i,o,a,s,c){var l=this.downInfo.hits,u=c.hits;if(l&&e&&(e=Ss(e))){var d=this.gv,h=s.rect,f=this.convertPoint(a,s);l[t+"|image"]&&(e[n]&&e[n](i,o,d,f,h.width,h.height),this.fire("image",n,i,o,e,r,f,h));for(var g=s.compInfos,p=e,v=g.length-1;v>=0;v--){var y=g[v],_=y.comp;f=this.convertPoint(a,y,p,_,d,o),h=y.rect,o._interactPrefix=y.prefix,l[t+"|"+v]&&u[t+"|"+v]&&(_[n]&&_[n](i,o,d,f,h.width,h.height),this.fire("comp",n,i,o,e,_,f,h)),(e=h.image)&&l[t+"|"+v+"|image"]&&(e[n]&&e[n](i,o,d,f,h.width,h.height),this.fire("image",n,i,o,e,r,f,h)),o._interactPrefix=null}}},initImageResource:function(){f.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},convertPoint:function(t,e,n,i,o,a){var s=e.rect,c=e.matrix.applyInverse(t).sub(s),l=c.x>=0&&c.y>=0&&c.x<=s.width&&c.y<=s.height;if(!l)return c;if(i&&Jc(i.pixelPerfect,a,o)){var d=1;this._is2d?(d=o.getZoom(),s=Ti(t.x,t.y,r,d)):s=Ti(t.x,t.y);var h=!1,g=s.x,p=s.y,v=s.width,y=s.height,_=f.hitMaxArea,m=v*y*d*d;if(m>_){var b=Math.sqrt(_/m);d*=b}v*=d,y*=d,2>v&&(v=2),2>y&&(y=2),g*=d,p*=d;var x=vo(v,y),w=new Aa(0,-g,-p,d,d);w.append(e.matrix),o._drawForChecking=!0,i.transform=w;var I=n.comps;n.comps=[i],Kc(x,n,0,0,v,y,a,self),n.comps=I,delete i.transform,o._drawForChecking=!1;try{for(var S=0,T=x.getImageData(0,0,v,y).data;S<T.length;S+=4)if(0!==T[S+3]){h=!0;break}x.restore()}catch(D){go=u,h=!1}c.inRect=h}else c.inRect=!0;return c}});var Cd=Nl.DefaultInteractor=function(t){Yi(Cd,this,[t])};Vl("DefaultInteractor",_d,{handle_mousedown:function(t){ws(t);var e=this,n=e.gv,i=n.getDataAt(t);if(n.setFocus(t)&&!n._editing&&!n._scrolling){Fs(t)?n.handleDoubleClick(t,i):n.handleClick(t,i);var r=Bs(t);!co()&&!r&&i&&(n.isMovable(i)||n._39Q(i))||!n.isPannable()||!Ls(t)&&!r||Hs(t)||(e._tx=n.tx(),e._ty=n.ty(),e.startDragging(t))}},handleWindowMouseUp:function(t){var e=this,n=e.gv;n._panning&&(delete n._panning,n.onPanEnded(),e.fi({kind:"endPan",event:t})),delete e._tx,delete e._ty,e.clearDragging()},handle_mousemove:function(t){var e=this,n=e.gv;e._hoverTimer&&(K(e._hoverTimer),delete e._hoverTimer),e._hoverTimer=J((function(){e.fi({kind:"hover",event:t}),K(e._hoverTimer),delete e._hoverTimer}),n.getHoverDelay()||f.hoverDelay)},handle_touchmove:function(t){this.handle_mousemove(t)},handleWindowMouseMove:function(t){var e=this,n=e.gv;e.fi({kind:n._panning?"betweenPan":"beginPan",event:t}),n._panning=1;var i=Dl(n,t,e._lastClientPoint);n.setTranslate(e._tx+i.x,e._ty+i.y)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var Md=Nl.SelectInteractor=function(t){Yi(Md,this,[t])};Vl("SelectInteractor",_d,{_42:function(){var t=this,e=t.gv,n=e.getZoom(),i=t.mark,r=t.div;r||(r=t.div=yr(),wr(t.getView(),r));var o={};o.x=i.x*n+e.tx(),o.y=i.y*n+e.ty(),o.width=i.width*n,o.height=i.height*n,Lr(r,o),this.intersects()?(r.style.border="",r.style.background=e.getRectSelectBackground()):(r.style.background="",r.style.border="1px solid "+e.getRectSelectBorderColor())},handle_mousedown:function(t){var e=this,n=e.gv;if(e._57I=u,e.pendingClickThrough=u,!(n._editing||n._scrolling||co()||Bs(t))){var i=n.getDataAt(t),r=n.sm();i?Hs(t)?r.co(i)?r.rs(i):r.as(i):r.co(i)?i instanceof Qu&&i.isClickThroughEnabled()&&Ls(t)&&(e.pendingClickThrough=Us(t)):r.ss(i):Hs(t)||!n.isPannable()?Ls(t)&&(Hs(t)||r.cs(),n.isRectSelectable()&&(e.startDragging(t),n._77O=1)):Ls(t)&&(e._57I=Us(t))}},handle_mouseup:function(t){var e=this,n=e.gv,i=e._57I;if(i&&(Ws(i,Us(t))<=1&&n.sm().cs(),e._57I=u),e.pendingClickThrough){if(Ws(e.pendingClickThrough,Us(t))<=1){var r=n.getDataAt(t);if(r instanceof Qu&&r.isClickThroughEnabled()){var o=n.getDataAt(t,(function(t){var e=t.getParent()===r&&n.isSelectable(t,!0);return e}));o&&(t.clickThrough=!0,n.sm().ss(o))}}e.pendingClickThrough=u}},handleWindowMouseUp:function(t){this.clear(t)},handleWindowMouseMove:function(t){var e=this,n=e.gv;e._logicalPoint=n.lp(t),e.mark?(e.fi({kind:"betweenRectSelect",event:t}),n.isPannable()&&e.autoScroll(t),e.redraw()):e.fi({kind:"beginRectSelect",event:t}),e.mark=qs(e._lastLogicalPoint,e._logicalPoint),e.redraw()},intersects:function(){var t=this,e=t._lastLogicalPoint,n=t._logicalPoint;return e.x>n.x||e.y>n.y},clear:function(t){var e=this,n=e.gv,i=e.mark;if(e._57I=u,e.pendingClickThrough=u,e._lastLogicalPoint){if(i){if(0!==i.width&&0!==i.height){var r=n.getDatasInRect(i,e.intersects());if(!r.isEmpty()){var o=n.sm(),a=o.toSelection();r.each((function(t){o.co(t)?a.remove(t):a.add(t)})),o.ss(a)}}rc(e.div),delete e.div,delete e.mark,e.redraw(),e.fi({kind:"endRectSelect",event:t}),n.onRectSelectEnded()}e.clearDragging(),delete n._77O}},redraw:function(){var t=this;t._draw||(t._draw=1,J((function(){t.mark&&t._42(),delete t._draw}),16))}});var Dd=Nl.MoveInteractor=function(t){Yi(Dd,this,[t])};Vl("MoveInteractor",_d,{handle_mousedown:function(t){var e=this,n=e.gv;if(Ls(t)&&!n._editing&&!n._scrolling&&!co()){var i=n.getSelectedDataAt(t);!i||n._39Q(i)&&!n.isMovable(i)?n._focusData=u:(e._data=i,n.handleMouseDown&&n.handleMouseDown(t,i),e.startDragging(t),n.isMovable(i)&&(n._moving=1))}},handleWindowMouseUp:function(t){var e=this,n=e.gv;n.handleMouseUp&&n.handleMouseUp(t,e._data),e.clear(t)},handleWindowMouseMove:function(t){var e=this,n=e._data,i=e.gv;if((!i._93O||!i._93O(t,n))&&i._moving){e._logicalPoint||e.fi({kind:"prepareMove",event:t});var r=e._logicalPoint?"betweenMove":"beginMove",o={kind:r,event:t},a=e._logicalPoint=i.lp(t);"beginMove"!==r||e._alreadyBeginTransaction||(e._alreadyBeginTransaction=!0,i.getDataModel().beginTransaction());var s=e._calcShift(r,t),c=s.x,l=s.y,u=e.gv.getMoveMode(t,n);u&&("x"===u?l=0:"y"===u?c=0:"xy"!==u&&(c=l=0)),i.moveSelection(c,l),e._lastLogicalPoint=a,e.autoScroll(t),e.fi(o)}},_calcShift:function(){var t=this,e=t._logicalPoint,n=t._lastLogicalPoint,i=e.x-n.x,r=e.y-n.y;return{x:i,y:r}},clear:function(t){var e=this,n=e.gv;e._lastLogicalPoint&&(e._lastLogicalPoint=e._data=n._moving=u,e._logicalPoint&&(e.fi({kind:"endMove",event:t}),n.onMoveEnded()),e.clearDragging()),e._alreadyBeginTransaction&&(e._alreadyBeginTransaction=!1,n.getDataModel().endTransaction())}});var Ed=Nl.TextEditInteractor=function(t){Yi(Ed,this,[t]),this.init()};Vl("TextEditInteractor",_d,{init:function(){var t=this,e=this.input=l.createElement("input"),n=e.style;e.text="text",n.border="1px solid #d8d8d8",n.position="absolute",n.padding="2px 3px",n.outline="none",n.marginLeft="-90px",n.marginTop="-16px",n.backgroundColor="rgba(255,255,255, 0.9)",n.fontSize="14px",n.width="180px",n.height="32px",n.boxShadow="0 0 13px rgba(16,142,233, 0.5)",n.textAlign="center",n.boxSizing="border-box",S(e,"keyup",(function(e){lo(e)&&t.endTextEdit()})),S(e,"focus",(function(){e.select()}));var i=this.textarea=l.createElement("textarea"),r=this.wrap=l.createElement("div");r.appendChild(i),n=i.style,n.margin=0,n.padding="4px",n.overflow="hidden",n.boxSizing="border-box",n.position="absolute",n.outline="none",n.backgroundColor="transparent",n.resize="none",n.textAlign="center",n.fontSize="14px",n.border="none",n.borderWidth=0,n.width="100%",n.top="50%",n=r.style,n.boxSizing="border-box",n.margin=0,n.padding=0,n.position="absolute",n.boxShadow="0 0 13px rgba(16,142,233, 0.5)",n.border="1px solid #d8d8d8",n.backgroundColor="rgba(255,255,255, 0.9)",n.width="180px",n.marginLeft="-90px",S(i,"keydown",(function(e){return(js()||Hs())&&lo(e)?void t.endTextEdit():void t.calculateTextareaHeight(String.fromCharCode(e.keyCode))})),S(i,"focus",(function(){i.select()}));var o=function(t){t.stopPropagation()};S(e,"mousedown",o),S(e,"touchstart",o),S(i,"mousedown",o),S(i,"touchstart",o),t.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],t.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",t.handleWindowClick=function(e){var n=t._editingDOM,i=n.getBoundingClientRect(),r=Us(e);Ys(i,r)||t.endTextEdit()}},handle_mousedown:function(t){var e=this,n=e.gv;if(Fs(t)&&!n._editing){var i=n.getDataAt(t);if(i){var r=n.getTextEditInfo(i);r&&(this._editInfo=r,this._editTarget=i,n._editing=!0,r.isMultiline?this.handleMultilineEdit():this.handleTextEdit())}}},handleMultilineEdit:function(){var t=this,e=t.gv,i=t._editTarget,o=t.getTargetValue(),a=t.textarea,s=t.wrap;this.hiddenTextarea||this.createHiddenTextarea(),(null===o||o===r)&&(o=""),a.value=o,t._editingDOM=a,e.getView().appendChild(s),this.layoutHTML(s,i),this.calculateTextareaHeight(),J((function(){a.focus(),S(n,"mousedown",t.handleWindowClick),S(n,"touchstart",t.handleWindowClick)}),10)},handleTextEdit:function(){var t=this,e=t.gv,i=t._editTarget,o=t.getTargetValue(),a=t.input;(null===o||o===r)&&(o=""),a.value=o,t._editingDOM=a,e.getView().appendChild(a),this.layoutHTML(a,i),J((function(){a.focus(),S(n,"mousedown",t.handleWindowClick),S(n,"touchstart",t.handleWindowClick)}),10)},layoutHTML:function(t,e){var n=this.gv,i=n.getZoom();if(e instanceof d.Node){var r=e.getRect();t.style.left=(r.x+r.width/2)*i+n.tx()+"px",t.style.top=(r.y+r.height/2)*i+n.ty()+"px"}else if(e instanceof d.Edge){var o=n.getDataUI(e);r=o._6I;t.style.left=(r.x+r.width/2)*i+n.tx()+"px",t.style.top=(r.y+r.height/2)*i+n.ty()+"px"}},endTextEdit:function(){var t=this,e=t._editInfo.isMultiline?t.wrap:t.input,i=t._editInfo.isMultiline?t.textarea:t.input;t.setTargetValue(i.value),t.gv.getView().removeChild(e),t.gv._editing=!1,delete t._editingDOM,T(n,"mousedown",t.handlelick),T(n,"touchstart",t.handleWindowClick)},setTargetValue:function(t){var e=this,n=e._editTarget,i=e._editInfo,r=i.accessType,o=i.name;if(o&&r||(r="p",o="name"),"p"===r){var a=d.Default.setter(o);n[a](t)}else"a"===r?n.a(o,t):n.s(o,t)},getTargetValue:function(){var t=this,e=t._editTarget,n=t._editInfo,i=n.accessType,r=n.name;if(r&&i||(i="p",r="name"),"p"===i){var o=d.Default.getter(r);return e[o]()}return"a"===i?e.a(r):e.s(r)},createHiddenTextarea:function(){this.hiddenTextarea=l.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(t,e){if(e&&this.computedStyleCache)return this.computedStyleCache;var i=this,r=n.getComputedStyle(t),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),s=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),c=i.SIZING_STYLE.map((function(t){return t+":"+r.getPropertyValue(t)})).join(";"),l={sizingStyle:c,paddingSize:a,borderSize:s,boxSizing:o};return e&&(this.computedStyleCache=l),l},calculateTextareaHeight:function(t){t=t||"";var e=this,n=e.textarea,i=e.hiddenTextarea,r=e.wrap,o=32,a=e.calculateHTMLStyle(n,!1),s=a.paddingSize,c=a.borderSize,l=a.boxSizing,u=a.sizingStyle;i.setAttribute("style",u+";"+e.HIDDEN_TEXTAREA_STYLE),i.value=n.value+t;var d=i.scrollHeight;"border-box"===l?d+=c:"content-box"===l&&(d-=s),n.style.height=d+"px",n.style.marginTop=0-.5*d+"px",r.style.height=Math.max(d,o)+"px",r.style.marginTop=-.5*d+"px"}});var Pd=Nl.ScrollBarInteractor=function(t){Yi(Pd,this,[t])};Vl("ScrollBarInteractor",_d,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(t){var e=this.gv.getViewRect();return this._41o()&&(e.x+e.width-this.gv.lp(t).x)*this.gv.getZoom()<ps},isH:function(t){var e=this.gv.getViewRect();return this._40o()&&(e.y+e.height-this.gv.lp(t).y)*this.gv.getZoom()<ps},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!jr&&Ls(t)&&this.gv.isScrollBarVisible()){var e=this,n=e.isV(t),i=e.isH(t);(n||i)&&e.gv.showScrollBar(),e.gv._scrolling=n||i}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=u,this.fi({kind:"endScroll",event:t})},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this;if(e.gv.setFocus(t),ws(t),e.handle_touchmove(t),!(Gs(t)>1)&&e.gv._scrolling&&e.gv.isScrollBarVisible()){e._cp=Us(t),e._tx=e.gv.tx(),e._ty=e.gv.ty();var n=e.isV(t);e._state=n?"vScroll":"hScroll",ic(e,t),e.fi({kind:"beginScroll",event:t})}},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=Us(t),n=this.gv.getViewRect(),i=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-e.y)*i.height/n.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-e.x)*i.width/n.width),this.fi({kind:"betweenScroll",event:t})}});var Od=Nl.TouchInteractor=function(t,e){e=e||{},e.selectable===r&&(e.selectable=!0),e.movable===r&&(e.movable=!0),e.pannable===r&&(e.pannable=!0),e.pinchable===r&&(e.pinchable=!0),e.editable===r&&(e.editable=!0),this.params=e,Yi(Od,this,[t])};Vl("TouchInteractor",_d,{ms_edit:1,setUp:function(){var t=this;Od.superClass.setUp.call(t),lt&&t.params.editable&&t.gv.setEditInteractor(t)},tearDown:function(){var t=this;Od.superClass.tearDown.call(t),lt&&t.params.editable&&t.gv.setEditInteractor(u)},clear:function(t){var e=this,n=e.gv;n._moving&&(e.fi({kind:"endMove",event:t}),delete n._moving,n.onMoveEnded(),n.dm().endTransaction()),n._panning&&(e.fi({kind:"endPan",event:t}),delete n._panning,n.onPanEnded()),n._pinching&&(e.fi({kind:"endPinch",event:t}),delete n._pinching,n.onPinchEnded()),n._editing&&(e._46O(t),e._77I=e._node=e._edge=e._shape=e._rect=e._89I=e._index=n._editing=u),e._moving=e._panning=e._pinching=e._editing=e._57I=e._data=e._beginHistory=u,e.clearDragging()},handle_touchstart:function(t){var e=this;if(!e.gv._editing){ws(t),e._57I=u;var n=e.params,i=e.gv,r=i.sm(),o=i.getDataAt(t),a=Gs(t);if(1===a){if(Fs(t))return void i.handleDoubleClick(t,o);i.handleClick(t,o),o&&(i.handleMouseDown&&i.handleMouseDown(t,o),e._data=o),n.selectable||(o=u),o&&(r.co(o)||r.ss(o),n.editable&&i.isEditable(o)&&e._79I(t,o,!0)?(e._editing=1,e.startDragging(t)):n.movable&&i.isMovable(o)&&(e._moving=1,e.startDragging(t))),o&&i.isMovable(o)||(e._57I=Us(t),n.pannable&&i.isPannable()&&(e._panning=1,e.startDragging(t),e._translate={x:i.tx(),y:i.ty()}))}else if(n.pinchable&&2===a){if(o&&i._39Q(o))return;e._pinching=1,e.startDragging(t);var s=i.getView(),c=i.getZoom(),l=s.getBoundingClientRect(),d=t.touches[0],h=t.touches[1],f={x:(d.clientX+h.clientX)/2-l.left,y:(d.clientY+h.clientY)/2-l.top};f.x-=i.tx(),f.y-=i.ty(),f.x/=c,f.y/=c,e._p=f,e._d=Wo(t)}}},handle_touchend:function(t){var e=this,n=e.gv,i=e._57I,r=e._data;i&&(Ws(i,Us(t))<=1&&!graphView.getDataAt(t)&&n.sm().cs(),e._57I=u),r&&n.handleMouseUp&&n.handleMouseUp(t,r)},handleWindowTouchEnd:function(t){this.clear(t)},handleWindowTouchMove:function(t){var e=this,n=e.gv,i=Gs(t);if(1===i){if(e._editing&&(e._beginHistory||(e._beginHistory=1,n.dm().beginTransaction()),n._editing=1,e._78I(t)),e._moving)e._beginHistory||(e._beginHistory=1,n.dm().beginTransaction()),e.handleMove(t);else if(e._panning){var r=Us(t),o=Dl(n,r,e._lastClientPoint);n.setTranslate(e._translate.x+o.x,e._translate.y+o.y),e.fi({kind:n._panning?"betweenPan":"beginPan",event:t}),n._panning=1}}else if(2===i&&e._pinching){var a=Wo(t);n.handlePinch(e._p,a,e._d),e._d=a,e.fi({kind:n._pinching?"betweenPinch":"beginPinch",event:t}),n._pinching=1}},handleMove:function(t){var e=this,n=e.gv,i=n.lp(t);n._93O&&n._93O(t,e._data)||(n.moveSelection(i.x-e._lastLogicalPoint.x,i.y-e._lastLogicalPoint.y),e._lastLogicalPoint=i,e.autoScroll(t),e.fi({kind:n._moving?"betweenMove":"beginMove",event:t}),n._moving=1)}});d=n.ht;var Ad=d.graph._editor={Math:d.Math,Guide:{}};Ad.getStyle=function(t){var e,n=Ad.StyleMap;return n&&(e=n[t],e!==r)?e:Ad.DefaultStyleMap[t]},Ad.setStyle=function(t,e){var n=Ad.StyleMap;n||(n=Ad.StyleMap={}),n[t]=e},Ad.inEdit=function(t){return!0===t._inXEdit},Ad.startEdit=function(t){t._inXEdit=!0,Ad.Inject.doInject(t)},Ad._46O=function(t){t._inXEdit=!1,Ad.Inject.undoInject(t)},Ad.toScreenPosition=function(t,e){var n=t.tx(),i=t.ty(),r=t._zoom;return new Ad.Math.Vector2(e.x*r+n,e.y*r+i)},Ad.checkHit=function(t,e,n){return t.distanceTo(e)<n},Ad.toWorldPosition=function(t,e){var n=t.tx(),i=t.ty(),r=t._zoom;return{x:(e.x-n)/r,y:(e.y-i)/r}},Ad.setAntialias=function(t,e){for(var n,i=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],r=0,o=i.length;o>r&&(n=i[r],!(n in t));r++);t[n],t[n]=e},Ad.getTargetCornersOnScreen=function(t,e){if(!e)return null;var n,i=[];if(Gi(e,t)){var r=al(t,e);n=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}]}else{if(!e.getCorners)return null;n=e.getCorners()}return n.forEach((function(e){var n=Ad.toScreenPosition(t,e);i.push(n.x,n.y)})),i},Ad.log=function(){};var kd=Ad.Inject={_modules:[]};kd.registAsModule=function(t,e){var n={},i={};for(var r in t){var o=e.prototype[r];n[r]=o}t.getBackup=function(t){return n[t]},t.getBackups=function(){return n},i.doInject=function(){for(var n in t)"getBackup"!==n&&(e.prototype[n]=t[n])},i.undoInject=function(){for(var i in t)"getBackup"!==i&&(e.prototype[i]=n[i])},kd._modules.push(i)},kd.doInject=function(t){for(var e,n=kd._modules,i=0,r=n.length;r>i;i++)e=n[i],e.doInject(t)},kd.undoInject=function(t){for(var e,n=kd._modules,i=0,r=n.length;r>i;i++)e=n[i],e.undoInject(t)};_d=d.graph.EditInteractor=function(t){var e=this,n=l.createElement("canvas");n.className="editCanvas",n.style.position="absolute",e._styleMap={},e._canvas=n,e._context=n.getContext("2d"),_d.superClass.constructor.call(e,t),this._editDetail=!1,Ad.setAntialias(e._context,!1),e._subModules=[new Ad.Anchor(e),new Ad.RotateX(e),new Ad.MoveDummy(e),new Ad.Rect(e),new Ad.Curve(e),new Ad.MoveHelper(e)],e._gridGuide=new Ad.Guide.Grid(e),e._rectGuide=new Ad.Guide.Rect(e),e._hoverGuide=new Ad.Guide.Hover(e)};var Rd=_d;d.Default.def(_d,d.graph.Interactor,{ms_edit:1,ms_fire:1}),i.defineProperties(_d.prototype,{editDetail:{get:function(){var t=!!this._editDetail;return t},set:function(t){var e=this,n=e._editDetail;n!==t&&(e._editDetail=t,e.gv._editing=t,e.fp("editDetail",n,t),e.fp("pointsEditingMode",n,t),e.fi({kind:t?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(t){(!this._editDetail||t)&&(this.gv._editing=t,t||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(t){this._editing=t,this.gvEditing=t}},pointsEditingMode:{get:function(){return this.editDetail},set:function(t){var e=this;e.editDetail!==t&&(t?e._tryEnterEditDetailMode():e._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var t=this._gridEnabled;if(!t)return!1;this.gv;return!0},set:function(t){t!==this._gridEnabled&&(this._gridEnabled=t,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(t){t!==this._agEnabled&&(this._agEnabled=t,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),_d.prototype.getSubModule=function(t){var e,n,i,r=this._subModules;for(n=0,i=r.length;i>n;n++)if(e=r[n],e.catalog===t)return e},_d.prototype.invokeSubModule=function(t,e){var n=this,i=n._subModules;if(i)for(var o,a,s,c=Array.prototype.slice.call(arguments,2),l=0,u=i.length;u>l;l++)if(o=i[l],a=o[t],a&&(s=a.apply(o,c),s!=r&&e))return o},_d.prototype.invokeSubModuleInverse=function(t,e){var n=this,i=n._subModules;if(i)for(var o,a,s,c=Array.prototype.slice.call(arguments,2),l=i.length-1;l>=0;l--)if(o=i[l],a=o[t],a&&(s=a.apply(o,c),s!=r&&e))return o},_d.prototype.setUp=function(){Ad.log("setUp");var t=this,e=t.gv,n=e.getView(),i=t._canvas;_d.superClass.setUp.call(t),e.setEditInteractor(t),e._79O?n.insertBefore(i,e._79O):n.appendChild(i),Ad.startEdit(e),t.invokeSubModule("setUp"),e.dm().mm(t._onDataModelChanged,t),e.dm().md(t._onDataPropertyChanged,t)},_d.prototype.tearDown=function(){Ad.log("tearDown");var t=this,e=t.gv,n=e.getView();t._resetCustomCursorStyle(),_d.superClass.tearDown.call(t),e.dm().umm(t._onDataModelChanged,t),e.dm().umd(t._onDataPropertyChanged,t),e.setEditInteractor(null),n.removeChild(t._canvas),t._drawTimer&&(K(t._drawTimer),t._drawTimer=null),Ad._46O(e),t.invokeSubModule("tearDown")},_d.prototype._onDataModelChanged=function(t){var e=this;("clear"===t.kind||"remove"===t.kind&&e.editDetail&&t.data===e.getSubModule("Curve").target)&&(e.editDetail=!1,e._42())},_d.prototype._onDataPropertyChanged=function(t){var e=this;if(e.editDetail){var n=e.getSubModule("Curve"),i=t.data;i===n.target&&(i._writing||n._handleDataChanged(t))}},_d.prototype.clear=function(){Ad.log("clear")},_d.prototype.redraw=function(){this._42()},_d.prototype._42=function(){var t=this;t._drawTimer||(t._drawTimer=J((function(){t._drawTimer=null,t.drawImpl()}),0))},_d.prototype.drawImpl=function(){var t;for(t in{_42:!0})break;return function(){var e=this,i=e._canvas,r=e.gv,o=r.getWidth(),a=r.getHeight(),s=e._context,c=d.Default.getInternal(),l=n.devicePixelRatio;(i.width!==o||i.height!==a)&&c.setCanvas(i,o,a,l),s.clearRect(0,0,i.width,i.height);var u=e._getValidSelection();s.save(),s.scale(l,l),e._gridGuide._42(),e.invokeSubModuleInverse(t,!1,s,r,u),e._rectGuide._42(),e._hoverGuide._42(),s.restore()}}(),_d.prototype._getValidSelection=function(){var t=this,e=t.gv,n=e.sm().getSelection(),i=[];return n.each((function(t){e.isVisible(t)&&e.isEditable(t)&&i.push(t)})),i},_d.prototype.handle_touchmove=function(t){return this.handle_mousemove(t)},_d.prototype.handle_mousemove=function(t){if(!d.Default.isDragging()){var e=this;if(e.editDetail||!co()&&!Bs(t))if(e.gvEditing=!1,e._checkEdit(t))e.gvEditing=!0;else{if(!e.getStyle("hoverGuideVisible"))return;e.hoverData=e.gv.getDataAt(t),e._42()}}},_d.prototype.handle_touchstart=function(t){return this.handle_mousedown(t)},_d.prototype.handle_mousedown=function(t){ws(t);var e=this;if(e.editDetail||!co()&&!Bs(t)){if(Fs(t)&&!t.clickThrough){if(e.editDetail){if(e._tryQuitEditDetailMode(t))return}else if(e._tryEnterEditDetailMode())return;e.gv.dm().beginTransaction();var n=e.invokeSubModule("handleDoubleClick",!0,t);if(e.gv.dm().endTransaction(),n)return}var i=e._checkEdit(t);i&&(e._downPosition=e._getLogicalPoint(t),e.gv.dm().beginTransaction(),i.startEdit(e,t),e.editing=!0)}},_d.prototype._checkEdit=function(t){var e=this,n=e.gv,i=e._getLogicalPoint(t),r=e.invokeSubModule("check",!0,n,t,i)||null;return e._editMod=r,r},_d.prototype.handleWindowTouchMove=function(t){return this.handleWindowMouseMove(t)},_d.prototype.handleWindowMouseMove=function(t){var e=this,n=e._downPosition;if(n){var i=e._getLogicalPoint(t);if(i.distanceTo(n)<e.getStyle("moveSensitivity"))return;delete e._downPosition}var r=e._editMod;r&&r.handleEdit(e.gv,t)},_d.prototype._getLogicalPoint=function(t){var e=this,n=d.Default.getLogicalPoint(t,e._canvas);return new Ad.Math.Vector2(n)},_d.prototype.handleWindowTouchEnd=function(t){return this.handleWindowMouseUp(t)},_d.prototype.handleWindowMouseUp=function(){var t;for(t in{_46O:!0})break;return function(e){var n=this;n.editing=!1,n.setCursor("default"),n.invokeSubModule(t,!1,e),n._42(),n.gv.dm().endTransaction()}}(),_d.prototype.handle_mousewheel=function(t){var e=this;ws(t),e.invokeSubModule("preHandleScroll",!0)||e.gv.handleScroll(t,t.wheelDelta)},_d.prototype.handleDelete=function(){var t=this;if(!t.editDetail){t.gv.dm().beginTransaction();var e=t.invokeSubModule("handleNormalStateDelete",!0);return t.gv.dm().endTransaction(),void(e||t.gv.removeSelection())}t.gv.dm().beginTransaction(),t.invokeSubModule("handleDelete",!0),t.gv.dm().endTransaction(),t._42()},_d.prototype.handle_keydown=function(t){var e=this;if((t.metaKey||t.ctrlKey)&&e._42(),co(t)&&!e.editing)return e.gvEditing=!1,e.setCursor("default"),void e._42();var n=lo(t);return e.editDetail?((n||uo(t))&&(e.editDetail=!1,e._42()),e.gv.dm().beginTransaction(),e.invokeSubModule("handle_keydown",!0,t),void e.gv.dm().endTransaction()):(e.gv.dm().beginTransaction(),e.invokeSubModule("handleNormalStateKeyDown",!0,t),e.gv.dm().endTransaction(),void(n&&e._tryEnterEditDetailMode()))},_d.prototype.handle_keyup=function(t){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,t),this.gv.dm().endTransaction()},_d.prototype._tryEnterEditDetailMode=function(){var t=this;return!t.editDetail&&t.invokeSubModule("canEnterEditDetailMode",!0)&&1===t._getValidSelection().length?(t.editDetail=!0,t._42(),!0):void 0},_d.prototype._tryQuitEditDetailMode=function(t){var e=this;return!!e.editDetail&&(!(t&&!e.invokeSubModule("canQuitEditDetailMode",!0,t))&&(e.editDetail=!1,e._42(),!0))},_d.prototype.setStyle=function(t,e,n){var i=this;n?Ad.setStyle(t,e):i._styleMap[t]=e,"baseColor"===t&&(Ud=e),i.fp("styleChanged",null,{key:t,value:e,base:n}),i._42()},_d.prototype.getStyle=function(t){var e=this,n=e._styleMap[t];return n!==r?n:Ad.getStyle(t)},_d.prototype.setCursor=function(t){this._resetCustomCursorStyle(),d.graph.EditInteractor.superClass.setCursor.call(this,t)},_d.prototype._resetCustomCursorStyle=function(){var t=this;if(t._customStyle){var e=this.gv.getView();e.classList&&e.classList.remove&&e.classList.remove(t._customStyle),t._customStyle=null}},_d.prototype._setRotateCursor=function(t){var e=this,n=e._cursorFactory;n||(n=e._cursorFactory=new Ad.CursorFactory(e));var i=n.getRotateCursor(t),r=e.gv.getView();e._resetCustomCursorStyle(),e._customStyle=i,r.classList&&r.classList.add&&r.classList.add(i)};var zd=Ad.Group=function(t){var e=this;e._entities=t,e._64O=0,e._position={x:0,y:0},e._scale={x:1,y:1},e._anchor={x:.5,y:.5},e._anchor2={x:.5,y:.5}};zd.prototype={},zd.prototype.constructor=zd;var Nd=null;zd.findOrCreateGroup=function(t){if(Nd&&Nd.checkIsMe(t))return Nd;var e=new Ad.Group(t);return e.getKeyOb()?(Nd=e,e):void 0},zd.prototype.checkIsMe=function(t){var e=this._entities;if(e.length!==t.length)return!1;var n,i={},r=t.length;for(n=0;r>n;n++)i[t[n]._id]=!0;for(n=0;r>n;n++)if(!i[e[n]._id])return!1;return!0},zd.prototype.getRotation=function(){return this._64O},zd.prototype.getPosition=function(){return this._position},zd.prototype.getAnchor=function(){return this._anchor},zd.prototype.getWidth=function(){return this._width},zd.prototype.getScale=function(){return this._scale},zd.prototype.getSize=function(){return{width:this._width,height:this._height}},zd.prototype.getHeight=function(){return this._height},zd.prototype.getKeyOb=function(){for(var t=this._entities,e=t.length-1;e>=0;e--){var n=t[e];if(this.isNode(n))return n}},zd.prototype.getAnchor2=function(){var t=this,e=t.rotateCenter;if(e)return e;var n=t.getKeyOb();if(!n)return t._anchor;var i=t._anchor2,r=n.getMatrix();return r.tf({x:n.getWidth()*(i.x-n.getAnchor().x),y:n.getHeight()*(i.y-n.getAnchor().y)})},zd.prototype.setAnchor2=function(t,e){var n=this,i=n.getKeyOb();if(i){var r,o=i.getMatrix();r="number"==typeof t?{x:t,y:e}:t;var a=o.tfi(r);n._anchor2={x:i.getAnchor().x+a.x/i.getWidth(),y:i.getAnchor().y+a.y/i.getHeight()}}},zd.prototype.setRotation=function(){},zd.prototype.beginRotate=function(t){this.rotateCenter=t.pos,this.rotateMode=t.groupRotateMode},zd.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},zd.prototype.addRotation=function(t,e){return"batch"===e?this._addRotationInBatchMode(t):"block"===e?this._addRotationInBlockMode(t):void 0},zd.prototype._addRotationInBlockMode=function(t){var e=this,n=e.rotateCenter||e.getPosition();e._entities.forEach((function(i){if(e.isNode(i)){var r=i.getMatrix();r.translate(-n.x,-n.y),r.rotate(t),r.translate(n.x,n.y);var o=Math.sign(i.getScale().x);i.setRotation(H(r.b*o,r.a*o)),i.setPosition(r.tx,r.ty)}}))},zd.prototype._addRotationInBatchMode=function(t){var e=this,n=e._anchor2;e._entities.forEach((function(i){if(e.isNode(i)){var r=i.getAnchor(),o=i.getMatrix(),a=o.tf({x:i.getWidth()*(n.x-r.x),y:i.getHeight()*(n.y-r.y)}),s=new Ad.Math.Matrix2d;s.set(o.a,o.b,o.c,o.d,o.tx,o.ty),s.translate(-a.x,-a.y),s.rotate(t),s.translate(a.x,a.y);var c=Math.sign(i.getScale().x);i.setRotation(H(s.b*c,s.a*c)),i.setPosition(s.tx,s.ty)}}))},zd.prototype.setPosition=function(t){var e,n,i,r,o=this,a=o._position,s=t.x-a.x,c=t.y-a.y,l=o._entities;for(n=0,i=l.length;i>n;n++)e=l[n],Vi(e)&&(r=e.getPosition(),e.setPosition(r.x+s,r.y+c));o._position=t},zd.prototype.setScale=function(t,e){var n=this,i=t/n._scale.x,r=e/n._scale.y;n._adjustChildScaleOrSize(i,r,"size"),n._scale={x:t,y:e}},zd.prototype.getRect=function(){var t=this,e=t._position,n=t._width,i=t._height;return{x:e.x-n/2,y:e.y-i/2,width:n,height:i}},zd.prototype.setSize=function(t,e){var n=this,i=(t=Math.max(1,t),e=Math.max(1,e),t/n._width),r=e/n._height;n._adjustChildScaleOrSize(i,r,"size"),n._width=t,n._height=e},zd.prototype._adjustChildScaleOrSize=function(t,e,n){var i,r,o,a,s,c,l,u,d,h,f,g,p,v,y=this,_=y._position,m=y._entities,b=new Ad.Math.Matrix2d;for(r=0,o=m.length;o>r;r++)if(i=m[r],y.isNode(i)){if(a=i.getPosition(),s=i.getRotation(),c=i.getWidth(),l=i.getHeight(),u=i.getScale(),f=u.x*c,g=u.y*l,b.identity().scale(f,g).rotate(s).translate(a.x,a.y).translate(-_.x,-_.y).rotate(-y._64O),s=H(b.b*Math.sign(f),b.a*Math.sign(f)),b.scale(t,e),d=Math.cos(s),h=Math.sin(s),Math.abs(d)<.001?(p=b.b/h,v=-b.c/h):(p=b.a/d,v=b.d/d),"scale"===n)i.setScale(p/c,v/l);else if("size"===n){var x=p/u.x,w=v/u.y;i.setScale(tr(p)*Math.abs(u.x),tr(v)*Math.abs(u.y)),i.setSize(Math.max(.1,Math.abs(x)),Math.max(.1,Math.abs(w)))}b.rotate(y._64O).translate(_.x,_.y),i.setPosition(b.tx,b.ty)}},zd.prototype.getMatrix=function(){var t=this,e=t._position,n=d.Default.getInternal(),i=t._scale;return new n.Mat(t._64O,e.x,e.y,i.x,i.y)},zd.prototype.toGlobal=function(t){return this.getMatrix().tf(t)},zd.prototype.getCorners=function(){var t=this,e=t._width,n=t._height,i=t._anchor,r=-e*i.x,o=-n*i.y,a=t.getMatrix();return[a.tf(r,o),a.tf(r,o+n),a.tf(r+e,o+n),a.tf(r+e,o)]},zd.prototype.calcInfo=function(){var t,e,n,i,r,o,a=this,s=[],c=a._entities,l=a._64O;for(i=0,r=c.length;r>i;i++)o=c[i],a.isNode(o)&&o.getCorners&&s.push.apply(s,o.getCorners());if(s.length){var u=Math.cos(-l),d=Math.sin(-l),h=1/0,f=-1/0,g=1/0,p=-1/0;for(i=0,r=s.length;r>i;i++)n=s[i],t=n.x,e=n.y,n.x=u*t-d*e,n.y=d*t+u*e,h=Math.min(h,n.x),f=Math.max(f,n.x),g=Math.min(g,n.y),p=Math.max(p,n.y);a._width=(f-h)/a._scale.x,a._height=(p-g)/a._scale.y,u=Math.cos(l),d=Math.sin(l);var v=a._anchor;t=h+(f-h)*v.x,e=g+(p-g)*v.y,a._position={x:u*t-d*e,y:d*t+u*e}}},zd.prototype.isNode=function(t){return!!Vi(t)&&!Gi(t)},zd.prototype._42=function(t,e,n){var i,r,o,a,s,c,l,u,d=this,h=d._entities,f=d.rotateMode;for("batch"===f&&(u=d.getKeyOb()),i=0,r=h.length;r>i;i++)o=h[i],d.isNode(o)&&(c=o.getRect(),a=Ad.toScreenPosition(n,{x:c.x,y:c.y}),s=Ad.toScreenPosition(n,{x:c.x+c.width,y:c.y+c.height}),l={min:a,max:s},o===u&&(l.isKeyOb=!0),Ad.Icons.DrawIcon(t,e,Ad.Icons.GroupSubEntityRect,l))};var Vd=Ad.CurveActiving=function(t,e){for(var n in this._curve=t,this._interactor=t._interactor,e)this[n]=e[n]};Vd.prototype={},Vd.prototype.constructor=Vd,i.defineProperties(Vd.prototype,{point:{get:function(){return this._point},set:function(t){var e=this;e._point=t,e.editingCtrl||e._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(t){var e=this;e._pairs=t,e.editingCtrl&&e._firePointChange()}}}),Vd.prototype._firePointChange=function(){var t=this,e=t.getCurrentEditingPoint(),n=t._interactor;if(e){var i=this._curve.target;if(i){var o=Ad.getDataMatrix(i).invert(),a=e.e;e=o.apply(Ad.toWorldPosition(n.gv,e)),e.e=a;var s=t._lastFirePoint;s&&Math.abs(e.x-s.x)<1e-5&&Math.abs(e.y-s.y)<1e-5&&(e.e==r&&s.e==r||Math.abs(e.e-s.e)<1e-5)||(t._lastFirePoint=e,n.fi({kind:"selectPoint",x:e.x,y:e.y,e:e.e}))}}else n.fi({kind:"selectPoint"})},Vd.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},Vd.prototype.getCurrentEditingPoint=function(){var t=this,e=t.editingCtrl;if(e){var n=t.pairs;if(n){var i=n[e.pairId],r=i[e.type];if(r)return r}}return t._point};var Ld=Ad.CursorFactory=function(t){var e=this;e._interactor=t,e._rotateCursorStyles={}};Ld.prototype={},Ld.prototype.constructor=Ld,Ld.prototype.getRotateCursor=function(t){var e=this;0>t&&(t+=2*Math.PI);var n=e._interactor,i=n.getStyle("rotateCursorSize"),r=n.getStyle("rotateCursorRound"),o=Math.round(t/Math.PI*180/r);o*r>=360&&(o=0);var a=e._rotateCursorStyles,s="htCustomRotateStyle_"+i+"_"+r+"_"+o;return a[s]||(e._produceRotateCursor(s,i,r,o),a[s]=!0),s},Ld.prototype._produceRotateCursor=function(t,e,n,i){var r=this;r._interactor;var o=r._canvas;o||(o=r._canvas=l.createElement("canvas")),o.width=o.height=e*devicePixelRatio,o.style.width=o.style.height=e+" px";var a=o.getContext("2d");Ad.setAntialias(a,!1),a.scale(devicePixelRatio,devicePixelRatio);var s,c,u,d,h,f=Math.round(e/2),g=f+" "+f+",auto !important;";s=Math.PI/180*i*n,a.clearRect(0,0,e,e),a.save(),a.scale(e/32,e/32),a.translate(16,16),a.rotate(s+Math.PI/2),a.beginPath(),a.moveTo(-8,0),a.lineTo(-8,3),a.lineTo(-5,3),a.moveTo(8,0),a.lineTo(8,3),a.lineTo(5,3),a.moveTo(-8,3),a.quadraticCurveTo(0,-6,8,3),a.restore(),a.strokeStyle="white",a.lineWidth=4,a.stroke(),a.strokeStyle="black",a.lineWidth=2,a.stroke(),c=JSON.stringify(o.toDataURL()),d="cursor:url("+c+")"+g,1!==devicePixelRatio&&(u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+e+'px" height="'+e+'px"><image xlink:href='+c+' width="'+e+'" height="'+e+'"/></svg>',d+="cursor:url(data:image/svg+xml;base64,"+btoa(u)+")"+g,d+="cursor:-webkit-image-set(url("+c+")"+devicePixelRatio+"x,url("+c+")1x)"+g),h=l.createElement("style"),h.textContent="body."+t+" *, ."+t+"{"+d+"}",l.head.appendChild(h)};Ju=Ad.Guide.Grid=function(t){var e=this;e._interactor=t,e._alignmentGuideId=0,e._xAlignmentGuide=[],e._yAlignmentGuide=[]};Ju.prototype={},Ju.prototype.constructor=Ju,i.defineProperties(Ju.prototype,{gridBlockSize:{get:function(){var t=this;return t._gridBlockSize||t._interactor.getStyle("gridBlockSize")},set:function(t){this._gridBlockSize=t,this._interactor._42()}},gridThickLinesEvery:{get:function(){var t=this;return t._gridThickLinesEvery||t._interactor.getStyle("gridThickLinesEvery")},set:function(t){this._gridThickLinesEvery=t,this._interactor._42()}},gridEnabled:{get:function(){var t=this,e=t._interactor;return e.gridEnabled&&t.isValidGrid()}}}),Ju.prototype._42=function(){var t=this,e=t._interactor;t.gridEnabled&&t.drawGrid(),e.alignmentGuideEnabled&&t.drawAlignmentGuide()},Ju.prototype.makeMatrix=function(){var t=this,e=t._interactor.getStyle("gridAngle"),n=t._interactor.getStyle("gridRotation"),i=new Ad.Math.Matrix2d,r=Math.sin(e),o=Math.cos(e);return i.set(1,0,o,r,0,0),i.rotate(n),i},Ju.prototype.isValidGrid=function(){var t=this,e=Math.PI,n=t._interactor,i=n.gv;if(i._zoom<n.getStyle("gridZoomThreshold"))return!1;var r=n.getStyle("gridAngle"),o=Math.abs(r%e/e*180),a=1-1e-8;return!(a>o||o>180-a)},Ju.prototype.drawAlignmentGuide=function(){var t=this,e=t._interactor,n=e.gv,i=e._canvas,r=e._context,o=i.width,a=i.height,s=n.tx(),c=n.ty(),l=n._zoom;r.beginPath(),r.strokeStyle=e.getStyle("gridAlignmentGuideColor"),r.lineWidth=1,t._xAlignmentGuide.forEach((function(t){var e=t.p*l+s;r.moveTo(e,0),r.lineTo(e,a)})),t._yAlignmentGuide.forEach((function(t){var e=t.p*l+c;r.moveTo(0,e),r.lineTo(o,e)})),r.stroke()},Ju.prototype.drawGrid=function(){function t(t,e,n,i){var r=Ad.toScreenPosition(s,h.apply({x:t,y:e})),o=Ad.toScreenPosition(s,h.apply({x:n,y:i}));l.moveTo(r.x,r.y),l.lineTo(o.x,o.y)}var e=this,n=e._interactor,i=e.gridBlockSize,r=e.gridThickLinesEvery,o=n.getStyle("gridThickColor"),a=n.getStyle("gridLightColor"),s=n.gv,c=n._canvas,l=n._context,u=c.width,d=c.height,h=e.makeMatrix(),f=h.applyInverse(Ad.toWorldPosition(s,{x:0,y:0})),g=h.applyInverse(Ad.toWorldPosition(s,{x:u,y:0})),p=h.applyInverse(Ad.toWorldPosition(s,{x:0,y:d})),v=h.applyInverse(Ad.toWorldPosition(s,{x:u,y:d})),y=Math.min(f.x,g.x,p.x,v.x),_=Math.max(f.x,g.x,p.x,v.x),m=Math.min(f.y,g.y,p.y,v.y),b=Math.max(f.y,g.y,p.y,v.y);u=_-y,d=b-m;var x,w,I,S=Math.ceil(y/i),T=Math.floor(_/i),C=Math.ceil(m/i),M=Math.floor(b/i);for(s.tx(),s.ty(),s._zoom,l.save(),l.lineWidth=1,l.beginPath(),l.strokeStyle=o,I=Math.ceil(S/r)*r;T>=I;I+=r)x=I*i,t(x,m,x,b);for(I=Math.ceil(C/r)*r;M>=I;I+=r)w=I*i,t(y,w,_,w);for(l.stroke(),l.beginPath(),l.strokeStyle=a,I=S;T>=I;I++)0!==I%r&&(x=I*i,t(x,m,x,b));for(I=C;M>=I;I++)0!==I%r&&(w=I*i,t(y,w,_,w));l.stroke(),l.restore()},Ju.prototype.getAlignmentGuides=function(){var t=this;return{x:t._xAlignmentGuide,y:t._yAlignmentGuide}},Ju.prototype.addAlignmentGuide=function(t,e,n){var i=this,r="x"===t?i._xAlignmentGuide:i._yAlignmentGuide,o=(n=n||++i._alignmentGuideId,{p:e,id:n});if(r.length){var a=i._findClosestAlignmentGuide(o.p,r);a.dis<0?r.splice(a.index+1,0,o):r.splice(a.index,0,o)}else r.push(o);return i._interactor._42(),n},Ju.prototype.findClosest=function(t,e,n){var i=this,r=i._interactor,o=r.gv;n&&(t=Ad.toWorldPosition(o,t));var a,s,c,l=1/0,u=1/0,d=t.x,h=t.y;if(i.gridEnabled){var f=i.gridBlockSize,g=i.makeMatrix(),p=g.applyInverse(t);p=g.apply({x:Math.round(p.x/f)*f,y:Math.round(p.y/f)*f}),l=p.x-d,u=p.y-h,c=!0}if(r.alignmentGuideEnabled&&(a=i._findClosestAlignmentGuide(d,i._xAlignmentGuide).dis,s=i._findClosestAlignmentGuide(h,i._yAlignmentGuide).dis,Math.abs(a)<Math.abs(l)&&(l=a,c=!0),Math.abs(s)<Math.abs(u)&&(u=s,c=!0)),c){c=!1;var v=o._zoom,y=r.getStyle("smartGuideThreshold")/v,_={};if(Math.abs(l)<y&&"y"!==e&&(_.x=n?l*v:l,c=!0),Math.abs(u)<y&&"x"!==e&&(_.y=n?u*v:u,c=!0),c)return _}},Ju.prototype._findClosestAlignmentGuide=function(t,e){if(!e.length)return{dis:1/0};for(var n,i=0,r=e.length-1;r-i>1;)n=Math.floor((i+r)/2),e[n].p<t?i=n:r=n;var o=e[i].p-t,a=e[r].p-t;return Math.abs(o)<=Math.abs(a)?{line:e[i],dis:o,index:i}:{line:e[r],dis:a,index:r}},Ju.prototype.removeAllAlignmentGuide=function(t){var e=this;"y"!==t&&(e._xAlignmentGuide=[]),"x"!==t&&(e._yAlignmentGuide=[]),e._interactor._42()},Ju.prototype.removeAlignmentGuide=function(t){for(var e,n,i,r=this,o=r._xAlignmentGuide,a=0;2>a;a++)for(o=0===a?r._xAlignmentGuide:r._yAlignmentGuide,e=0,n=o.length;n>e;e++)if(i=o[e],i.id===t)return o.splice(e,1),r._interactor._42(),{axis:0===a?"x":"y",position:i.p};return!1},Ju.prototype.adjustAlignmentGuide=function(t,e){var n=this,i=n.removeAlignmentGuide(t);return!!i&&(n.addAlignmentGuide(i.axis,e,t),!0)};var Bd=Ad.Guide.Rect=function(t){var e=this;e._interactor=t};Bd.prototype={},Bd.prototype.constructor=Bd,Bd.prototype.gatherRects=function(){var t,e,n,i,r=this,o=r._interactor.gv,a=[],s=[],c={x:a,y:s},l={},u=o.getDataModel(),d=u.a("width"),h=u.a("height");d&&h&&(t=0,e=0,n=d,i=h,a.push({node:u,type:0,p:t},{node:u,type:1,p:t+n/2},{node:u,type:2,p:t+n}),s.push({node:u,type:0,p:e},{node:u,type:1,p:e+i/2},{node:u,type:2,p:e+i}),l[u._id||0]={x:t,y:e,width:n,height:i}),u.each((function(r){if(Vi(r)&&!o.isSelected(r)&&o.isVisible(r)&&o.isValidGuideLineSource(r)){var c=!1;if(o.sm().getSelection().each((function(t){c||(r.isHostOn(t)||r.isDescendantOf(t))&&(c=!0)})),!c){var u=r.getRect();t=u.x,e=u.y,n=u.width,i=u.height,a.push({node:r,type:0,p:t},{node:r,type:1,p:t+n/2},{node:r,type:2,p:t+n}),s.push({node:r,type:0,p:e},{node:r,type:1,p:e+i/2},{node:r,type:2,p:e+i}),l[r._id]=u}}})),a.sort((function(t,e){return t.p-e.p})),s.sort((function(t,e){return t.p-e.p})),r._grid=c,r._87I=l},Bd.prototype.gatherLines=function(t,e,n){var i,r,o,a,s,c,l,u,d,h,f,g,p,v,y=this,_=[y.findClosest({x:t.x,y:t.y},e),y.findClosest({x:t.x+t.w/2,y:t.y+t.h/2},e),y.findClosest({x:t.x+t.w,y:t.y+t.h},e)],m={},b=y._87I;for(n=n||255,y._guideLine=[],i=0;2>i;i++)for(m={},0===i?(a="y",u=t.x,d=u+t.w):(a="x",u=t.y,d=u+t.h),r=0;3>r;r++)s=_[r],s&&isFinite(s[a])&&(p=1<<3*i+r,n&p&&(c=s[a+"Line"],l=c.node,v=l._id||0,m[v]||(m[v]=!0,g=b[v],"y"===a?(h=g.x,f=g.x+g.width):(h=g.y,f=g.y+g.height),o=c.p,y._guideLine.push({type:a,a:u,b:d,c:h,d:f,p:o,center:1===c.type}))))},Bd.prototype._binarySearchClosest=function(t,e){if(!e.length)return{dis:1/0};for(var n,i=0,r=e.length-1;r-i>1;)n=Math.floor((i+r)/2),e[n].p<t?i=n:r=n;var o=e[i].p-t,a=e[r].p-t;return Math.abs(o)<=Math.abs(a)?{line:e[i],dis:o}:{line:e[r],dis:a}},Bd.prototype.findClosest=function(t,e,n){var i=this,r=i._interactor,o=r.gv,a=i._grid;n&&(t=Ad.toWorldPosition(o,t));var s,c=i._binarySearchClosest(t.x,a.x),l=i._binarySearchClosest(t.y,a.y),u=c.dis,d=l.dis,h=o._zoom,f=r.getStyle("smartGuideThreshold")/h,g={};return Math.abs(u)<f&&"y"!==e&&(g.x=n?u*h:u,g.xLine=c.line,s=!0),Math.abs(d)<f&&"x"!==e&&(g.y=n?d*h:d,g.yLine=l.line,s=!0),s?g:void 0},Bd.prototype._42=function(){var t=this,e=t._guideLine;if(e&&!d.Default.isCtrlDown()){var n=t._interactor;if(n.getStyle("guideLineVisible")){var i,r,o,a,s,c,l,u,h,f,g,p,v,y,_,m,b,x=n.gv,w=n._context,I=x.tx(),S=x.ty(),T=x._zoom,C=n.getStyle("guideLineTextSpacing");for(i=0,r=e.length;r>i;i++)o=e[i],u=o.type,h=o.p,f=o.a,g=o.b,p=o.c,v=o.d,y=Math.min(f,p),_=Math.max(g,v),"x"===u?(a=h*T+I,s=y*T+S,c=a,l=_*T+S):(a=y*T+I,s=h*T+S,c=_*T+I,l=s),Ad.Icons.DrawIcon(n,w,Ad.Icons.MoveLineGuide,{rect:[a,s,c,l],center:o.center}),v>=f&&g>=p||(y=f>v?v:g,_=f>v?f:p,b=_-y,"x"===u?(o.center2center||(a-=C,c=a),s=y*T+S,l=_*T+S,m=Ad.Icons.MoveLineGuideDistanceV):"y"===u&&(o.center2center||(s-=C,l=s),a=y*T+I,c=_*T+I,m=Ad.Icons.MoveLineGuideDistanceH),Ad.Icons.DrawIcon(n,w,m,{x0:a,y0:s,x1:c,y1:l,dis:b}))}}},Bd.prototype.clear=function(){this._guideLine=null};var Gd=Ad.Guide.Hover=function(t){var e=this;e._interactor=t};Gd.prototype={},Gd.prototype.constructor=Gd,i.defineProperties(Gd.prototype,{}),Gd.prototype._42=function(){var t=this._interactor;if(t.getStyle("hoverGuideVisible")&&!t.gvEditing){var e=t.hoverData,n=t.gv;if(!Vi(e)||n.isSelected(e))return void(t.hoverData=null);var i=al(n,e),r=Ad.toScreenPosition(n,{x:i.x,y:i.y}),o=Ad.toScreenPosition(n,{x:i.x+i.width,y:i.y+i.height});Ad.Icons.DrawIcon(t,t._context,Ad.Icons.HoverDataRect,{min:r,max:o,color:t.getStyle("hoverGuideColor")||t.getStyle("baseColor")})}},Ad.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var Fd=Ad.Icons={},jd=1e4,Hd=null,Ud=Ad.DefaultStyleMap.baseColor,Zd="rgb(183,232,135)",Wd="rgb(255,204,153)",qd=6;d.Default.setImage("Icons.RectPoint",{width:qd,height:qd,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return Ud}},rect:[0,0,qd,qd]}]}),Fd.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var t=Fd.GroupSubEntityRect.data;if(!t)return[];var e=t.min,n=t.max;return[e.x,e.y,e.x,n.y,n.x,n.y,n.x,e.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return Fd.GroupSubEntityRect.data.isKeyOb,Ud}}}]};var Xd=4;Fd.HoverDataRect={comps:[{type:"shape",points:{func:function(){var t=Fd.HoverDataRect.data;if(!t)return[];var e=t.min,n=t.max,i=Xd;return e.x-=i,e.y-=i,n.x+=i,n.y+=i,[e.x,e.y,e.x,n.y,n.x,n.y,n.x,e.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return Fd.HoverDataRect.data.color}},borderCap:"round",borderPattern:[1,4]}]},Fd.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Fd.Line.data.P1.x,Fd.Line.data.P1.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Fd.Line.data.P2.x,Fd.Line.data.P2.y],qd,qd]}}}]},Fd.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return Fd.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},Fd.Rect={comps:[{type:"shape",points:{func:function(){var t=Fd.Rect.data;if(!t)return[];var e=t.LT,n=t.LB,i=t.RB,r=t.RT;return[e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return Ud}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},rect:{func:function(){return[[Fd.Rect.data.LT.x,Fd.Rect.data.LT.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},rect:{func:function(){return[[Fd.Rect.data.LB.x,Fd.Rect.data.LB.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},rect:{func:function(){return[[Fd.Rect.data.RB.x,Fd.Rect.data.RB.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},rect:{func:function(){return[[Fd.Rect.data.RT.x,Fd.Rect.data.RT.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},visible:{func:function(){return!!Fd.Rect.data.L}},rect:{func:function(){return[[Fd.Rect.data.L.x,Fd.Rect.data.L.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},visible:{func:function(){return!!Fd.Rect.data.R}},rect:{func:function(){return[[Fd.Rect.data.R.x,Fd.Rect.data.R.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},visible:{func:function(){return!!Fd.Rect.data.T}},rect:{func:function(){return[[Fd.Rect.data.T.x,Fd.Rect.data.T.y],qd,qd]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Fd.Rect.data.rotation}},visible:{func:function(){return!!Fd.Rect.data.B}},rect:{func:function(){return[[Fd.Rect.data.B.x,Fd.Rect.data.B.y],qd,qd]}}}]};var Yd=16;d.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return Ud}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return Ud}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),Fd.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[Fd.Anchor.data.POS.x,Fd.Anchor.data.POS.y],Yd,Yd]}}}]},Fd.TipShiftX=12,Fd.TipShiftY=12;var $d=[8,28];Fd.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[Fd.TipHelper.data.helperPos.x,Fd.TipHelper.data.helperPos.y,$d[0]*Fd.TipHelper.data.size,$d[1]]}},background:{func:function(){return Hd.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return Fd.TipHelper.data.text}},rect:{func:function(){return[Fd.TipHelper.data.helperPos.x,Fd.TipHelper.data.helperPos.y,$d[0]*Fd.TipHelper.data.size,$d[1]]}},color:{func:function(){return Hd.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var Qd=7;Fd.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!Fd.ShapePoint.data.dynamicVisible}},rect:{func:function(){var t=Fd.ShapePoint.data.point,e=Fd.ShapePoint.data.size||Qd;return[t,e+10,e+10]}},background:{func:function(){var t=Date.now(),e=Fd.ShapePoint.data.dynamicPeriod||1500,n=Math.sin(t%e/e*Math.PI);return"rgba(27,124,22,"+.5*n+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var t=Fd.ShapePoint.data.point,e=Fd.ShapePoint.data.size||Qd;return[t,e,e]}},background:{func:function(){var t=Fd.ShapePoint.data.isEnd;return t?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return Fd.ShapePoint.data.color||Ud}}},{type:"rect",visible:{func:function(){return!!Fd.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return Ud}},rect:{func:function(){var t=5;return[Fd.ShapePoint.data.point,t,t]}}}]},Fd.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!Fd.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return Fd.ShapeBgCurve.data.P}},segments:{func:function(){return Fd.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var t=Date.now(),e=Fd.ShapeBgCurve.data.dynamicPeriod||1500,n=Math.sin(t%e/e*Math.PI);return"rgba(27,124,22,"+.3*n+")"}}},{type:"shape",points:{func:function(){return Fd.ShapeBgCurve.data.P}},segments:{func:function(){return Fd.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return Fd.ShapeBgCurve.data.color||Ud}}}]};var Jd=8;Fd.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var t=Fd.ShapeHighlighPoint.data;return[[t.x,t.y],Jd,Jd]}},background:{func:function(){return Hd.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var Kd=10;Fd.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var t=Fd.ShapeHighlighRealPoint.data;return[[t.x,t.y],Kd,Kd]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return Ud}}}]};var th=8;Fd.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var t=Fd.ShapeHighlighCtrlPoint.data,e=t.x,n=t.y,i=th/2;return[e-i,n-i,e-i,n+i,e+i,n+i,e+i,n-i]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Hd.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Hd.getStyle("shapeCtrlPointBorderColor")||Ud}}}]};var eh=3;Fd.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return Fd.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:eh,borderColor:{func:function(){return Hd.getStyle("curveHighlightColor")}}}]},Fd.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return Fd.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},Fd.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return Fd.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return Fd.MoveLineGuide.data.center?Zd:Wd}}}]};var nh=5;Fd.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var t=Fd.MoveLineGuideDistanceH.data,e=t.x0,n=t.y0;return[e,n-nh,e,n+nh]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Wd},{type:"shape",points:{func:function(){var t=Fd.MoveLineGuideDistanceH.data,e=t.x1,n=t.y1;return[e,n-nh,e,n+nh]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Wd},{type:"text",text:{func:function(){return Math.round(Fd.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var t=Fd.MoveLineGuideDistanceH.data;return[[(t.x0+t.x1)/2,t.y0-10],20,20]}},color:Wd,font:"12px Arial",align:"center"}]},Fd.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var t=Fd.MoveLineGuideDistanceV.data,e=t.x0,n=t.y0;return[e-nh,n,e+nh,n]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Wd},{type:"shape",points:{func:function(){var t=Fd.MoveLineGuideDistanceV.data,e=t.x1,n=t.y1;return[e-nh,n,e+nh,n]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:Wd},{type:"text",text:{func:function(){return Math.round(Fd.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var t=Fd.MoveLineGuideDistanceV.data;return[[t.x0-10,(t.y0+t.y1)/2],20,20]}},color:Wd,font:"12px Arial",align:"center"}]},d.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),Fd.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var t=Fd.EdgeElevationGuide.data,e=t.x,n=t.y,i=Hd.getStyle("curveElevationIntersectSize"),r=Hd.getStyle("curveElevationGuideShift");return e+=r[0],n+=r[1],[e-i,n-i,2*i,2*i]}}}]},d.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),d.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),Fd.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return Fd.ConnectGuide.data.rotation}},rect:{func:function(){var t=Fd.ConnectGuide.data.connect;t.x,t.y;var e=Hd.getStyle("connectGuideIntersectSize");return[[t.x,t.y],2*e,2*e]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var t=Fd.ConnectGuide.data.cursorPos||Fd.ConnectGuide.data.connect,e=Hd.getStyle("connectGuideIntersectSize");return[[t.x,t.y],2*e-2,2*e-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var t=Fd.ConnectGuide.data.connect,e=Fd.ConnectGuide.data.cursorPos||t;return[t.x,t.y,t.x+.5*(e.x-t.x),t.y,e.x+.5*(t.x-e.x),e.y,e.x,e.y]}}}]},d.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),d.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),Fd.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){var t=Fd.ConnectGuideGarbage.data.hover;return t?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var t=Fd.ConnectGuideGarbage.data,e=Hd.getStyle("connectGuideGarbageIntersectsize");return t.hover&&(e+=5),[[t.x,t.y],2*e,2*e]}}}]};var ih=6;Fd.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return!!Fd.ShapeActivingCtrl.data.c1}},points:{func:function(){var t=Fd.ShapeActivingCtrl.data;return[t.point.x,t.point.y,t.c1.x,t.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return Ud}}},{type:"shape",visible:{func:function(){return!!Fd.ShapeActivingCtrl.data.c2}},points:{func:function(){var t=Fd.ShapeActivingCtrl.data;return[t.point.x,t.point.y,t.c2.x,t.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return Ud}}},{type:"shape",visible:{func:function(){return!!Fd.ShapeActivingCtrl.data.c1}},points:{func:function(){var t=Fd.ShapeActivingCtrl.data.c1,e=t.x,n=t.y,i=ih/2;return"c1"===Fd.ShapeActivingCtrl.data.hl&&(i+=.5),[e-i,n-i,e-i,n+i,e+i,n+i,e+i,n-i]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Hd.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===Fd.ShapeActivingCtrl.data.hl?Hd.getStyle("shapeCtrlPointHighlightBorder")||Ud:Hd.getStyle("shapeCtrlPointBorderColor")||Ud}}},{type:"shape",visible:{func:function(){return!!Fd.ShapeActivingCtrl.data.c2}},points:{func:function(){var t=Fd.ShapeActivingCtrl.data.c2,e=t.x,n=t.y,i=ih/2;return"c2"===Fd.ShapeActivingCtrl.data.hl&&(i+=.5),[e-i,n-i,e-i,n+i,e+i,n+i,e+i,n-i]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Hd.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===Fd.ShapeActivingCtrl.data.hl?Hd.getStyle("shapeCtrlPointHighlightBorder")||Ud:Hd.getStyle("shapeCtrlPointBorderColor")||Ud}}}]},Fd.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return Ud}},rect:{func:function(){return[[Fd.RoundPoint.data.x,Fd.RoundPoint.data.y],qd,qd]}}}]},Fd.AttachPoint={comps:[{type:"rect",background:{func:function(){return Fd.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return Ud}},rect:{func:function(){var t=Fd.AttachPoint.data.isAttach?qd+4:qd;return[[Fd.AttachPoint.data.x,Fd.AttachPoint.data.y],t,t]}}}]},Fd.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return Fd.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return Fd.SimpleRect.data.color||Ud}},rect:{func:function(){var t=Fd.SimpleRect.data;return[t.x,t.y,t.width,t.height]}}}]},d.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),Fd.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var t=Fd.MoveDummy.data;return[[t.pos.x,t.pos.y],2*t.size,2*t.size]}}}]},Ad.Icons.DrawIcon=function(t,e,n,i){n.width=n.height=jd,n.data=i,Hd=t,d.Default.drawImage(e,n,0,0,jd,jd)},Ad.Icons.MapPoints=function(t,e){for(var n=0,i=t.length;i>n;n++)t[n]/=e},Ad.roundTo=function(t,e,n){var i=Math.abs(t%e);return n>i||n>e-i?e*Math.round(t/e):t},Ad.toFixed=function(t){return Math.round(100*t)/100},Ad.getDataMatrix=function(t){if(t instanceof d.Shape){var e=new d.Math.Matrix2d,n=t.getPosition();return e.translate(-n.x,-n.y).scale(t.getScale().x,t.getScale().y).rotate(t.getRotation()).translate(n.x,n.y),e}return t.getMatrix?t.getMatrix():new d.Math.Matrix2d};var rh=Ad.Math.Curve=function(){this._curves=[]};rh.prototype={},rh.prototype.constructor=rh,rh.prototype.createFromHtShape=function(t,e,n){e instanceof d.List&&(e=e.toArray());var i,o,a,s,c,l,u,h=this,f=null,g=null,p=0,v=Ad.Math.Vector2,y=Ad.Math.CubicBezier,_=function(e){return new v(t[e],t[e+1],n?n[e/2]:r)};for(o=0,a=e.length;a>o;o++){switch(s=e[o],c=null,s){case 1:g=_(p),f=g,p+=2;break;case 2:i=_(p),p+=2,c=new y(g,g.clone(),i.clone(),i),g=i;break;case 3:l=_(p),i=_(p+2),p+=4,c=new y(g,l.clone().sub(g).multiplyScalar(2/3).add(g),l.clone().sub(i).multiplyScalar(2/3).add(i),i),g=i;break;case 4:l=_(p),u=_(p+2),i=_(p+4),p+=6,c=new y(g,l,u,i),g=i;break;case 5:if(!f)break;c=new y(g,g.clone(),f.clone(),f),g=null,f=null}c&&(c._index=h._curves.length,h._curves.push(c))}},rh.prototype.checkPoint=function(t,e){var n,i,r,o,a,s=this,c=s._curves;for(n=0,i=c.length;i>n;n++)if(o=c[n],a=o.intersectRect(t,e,e),a.length)return r=0,a.forEach((function(t){r+=t.t})),r/=a.length,t=o.getPointAt(r),t.t=r,{bezier:o,intersection:t}},rh.prototype.insertKnot=function(t,e){var n=t.insertKnot(e),i=this,r=i._curves;r.splice(t._index,1,n[0],n[1])},rh.prototype._isCloseEnough=function(t,e){return Math.abs(t.x-e.x)<1e-6&&Math.abs(t.y-e.y)<1e-6},rh.prototype._isSamePoint=function(t,e){return t===e},rh.prototype.moveRealPoint=function(t,e){var n=this,i=n._curves,r=e.clone().sub(t);i.forEach((function(i){var o=i._p1;i._p2,i._p3;var a=i._p4;n._isSamePoint(o,t)&&(i._p2.add(r),i._p1=e),n._isSamePoint(a,t)&&(i._p3.add(r),i._p4=e)}))},rh.prototype.moveCtrlDueToRealPointMovement=function(t,e){var n=this,i=n._curves,r=function(t){t.add(e),t.e&&e.e&&(t.e+=e.e)};i.forEach((function(e){var i=e._p1;e._p2,e._p3;var o=e._p4;n._isSamePoint(i,t)&&r(e._p2),n._isSamePoint(o,t)&&r(e._p3)}))},rh.prototype.moveCtrlPoint=function(t,e,n){var i=t[n];if(i){i.e!==r&&(e.e=i.e);var o=this,a=o._curves;e.clone().sub(i),a.forEach((function(t){var r;"c2"===n?r="_p2":"c1"===n&&(r="_p3"),o._isSamePoint(t[r],i)&&(t[r]=e)})),t[n]=e}},rh.prototype.deleteRealPoint=function(t,e){var n,i,r,o,a,s,c=this,l=c._curves,u={},d=[],h=Ad.Math.CubicBezier;for(i=0,r=l.length;r>i;i++)n=l[i],o=n._p1,a=n._p2,n._p3,s=n._p4,(u[i]||!c._isSamePoint(o,t))&&(c._isSamePoint(s,t)?r>i+1&&c._isSamePoint(l[i+1]._p1,t)&&(e||d.push(new h(o,a,l[i+1]._p3,l[i+1]._p4))):d.push(n));c._curves=d},rh.prototype.findPairs=function(t,e){var n,i,r,o,a,s,c,l,u=this,d=u._curves,h={},f=[];for(i=0,r=d.length;r>i;i++)n=d[i],o=n._p1,a=n._p2,s=n._p3,c=n._p4,!h[i]&&u._isSamePoint(o,t)&&(e?f.push({point:o,r2:c}):f.push({point:o,c2:a})),u._isSamePoint(c,t)&&(l=e?{point:c,r1:o}:{point:c,c1:s},r>i+1&&u._isSamePoint(d[i+1]._p1,t)&&(e?l.r2=d[i+1]._p4:l.c2=d[i+1]._p2,h[i+1]=!0),f.push(l));return f},rh.prototype.toHtShape=function(){var t=this,e=t._curves,n=[],i=[],r={x:1/0,y:1/0};return e.forEach((function(e){var o=e._p1,a=e._p2,s=e._p3,c=e._p4;return t._isCloseEnough(o,r)||(n.push(1),i.push(o.clone())),r=c,t._isCloseEnough(o,a)&&t._isCloseEnough(s,c)?(n.push(2),void i.push(c.clone())):(n.push(4),void i.push(a.clone(),s.clone(),c.clone()))})),{segments:n,points:i}};var oh=Ad.Math.CubicBezier=function(t,e,n,i){var r=this;r._id=Ad.Math.CubicBezier._globalId++,r._p1=t,r._p2=e,r._p3=n,r._p4=i};oh._globalId=1,oh.prototype={},oh.prototype.constructor=oh,oh.prototype.toString=function(){return this._id},oh.prototype.intersectRect=function(t,e,n){var i=e/2,r=n/2,o=t.x,a=t.y,s=Ad.Math.Vector2,c=new s(-i+o,-r+a),l=new s(i+o,r+a),u=new s(l.x,c.y),d=new s(c.x,l.y),h=this,f=h.intersectLine(c,u),g=h.intersectLine(u,l),p=h.intersectLine(l,d),v=h.intersectLine(d,c),y=f.concat(g).concat(p).concat(v);return y},oh.prototype.intersectLine=function(t,e){var n,i,r,o,a,s,c,l,u,d,h,f,g,p=this,v=t.clone().min(e),y=t.clone().max(e);o=p._p1,a=p._p2,s=p._p3,c=p._p4,n=o.clone().multiplyScalar(-1),i=a.clone().multiplyScalar(3),r=s.clone().multiplyScalar(-3),h=n.add(i).add(r).add(c),n=o.clone().multiplyScalar(3),i=a.clone().multiplyScalar(-6),r=s.clone().multiplyScalar(3),d=n.add(i).add(r),n=o.clone().multiplyScalar(-3),i=a.clone().multiplyScalar(3),u=n.add(i),l=o.clone(),g=new Ad.Math.Vector2(t.y-e.y,e.x-t.x),f=t.x*e.y-e.x*t.y;for(var _=p.getRoots(g.dot(h),g.dot(d),g.dot(u),g.dot(l)+f),m=new Array,b=0,x=_.length;x>b;b++){var w=_[b];if(!(0>w||w>1)){var I=o.clone().lerp(a,w),S=a.clone().lerp(s,w),T=s.clone().lerp(c,w),C=I.lerp(S,w),M=S.lerp(T,w),D=C.lerp(M,w);D.t=w,t.x==e.x?v.y<=D.y&&D.y<=y.y&&m.push(D):t.y==e.y?v.x<=D.x&&D.x<=y.x&&m.push(D):D.x>=v.x&&D.y>=v.y&&D.x<=y.x&&D.y<=y.y&&m.push(D)}}return m},oh.prototype.solveTForPoint=function(t){var e,n,i,o,a=this;e=a._p1.x-t.x,n=a._p2.x-t.x,i=a._p3.x-t.x,o=a._p4.x-t.x;for(var s=a.getRoots(o-3*i+3*n-e,3*i-6*n+3*e,3*n-3*e,e),c=r,l=1/0,u=0,d=s.length;d>u;u++){var h=s[u];if(!(0>h||h>1)){var f=a._p1.clone().lerp(a._p2,h),g=a._p2.clone().lerp(a._p3,h),p=a._p3.clone().lerp(a._p4,h),v=f.lerp(g,h),y=g.lerp(p,h),_=v.lerp(y,h);_.t=h;var m=Math.abs(_.y-t.y);l>m&&(l=m,c=_)}}return c},oh.prototype.getPointAt=function(t){var e=this,n=e._p1,i=e._p2,r=e._p3,o=e._p4,a=n.clone().lerp(i,t),s=i.clone().lerp(r,t),c=r.clone().lerp(o,t),l=a.lerp(s,t),u=s.lerp(c,t);return l.lerp(u,t)},oh.prototype.getRoots=function(t,e,n,i){var r=new Array;if(Math.abs(t)<1e-6){var o=e,a=n/o,s=i/o,c=a*a-4*s;if(c>0){var l=Math.sqrt(c);r.push(.5*(-a+l)),r.push(.5*(-a-l))}else 0==c&&r.push(.5*-a)}e/=t,n/=t,i/=t,o=(3*n-e*e)/3,a=(2*e*e*e-9*n*e+27*i)/27;var u=e/3,d=a*a/4+o*o*o/27,h=a/2;if(Math.abs(d)<=1e-6&&(d=0),d>0){var f;l=Math.sqrt(d);m=-h+l,f=m>=0?Math.pow(m,1/3):-Math.pow(-m,1/3),m=-h-l,m>=0?f+=Math.pow(m,1/3):f-=Math.pow(-m,1/3),r.push(f-u)}else if(0>d){var g=Math.sqrt(-o/3),p=Math.atan2(Math.sqrt(-d),-h)/3,v=Math.cos(p),y=Math.sin(p),_=Math.sqrt(3);r.push(2*g*v-u),r.push(-g*(v+_*y)-u),r.push(-g*(v-_*y)-u)}else{var m;m=h>=0?-Math.pow(h,1/3):Math.pow(-h,1/3),r.push(2*m-u),r.push(-m-u)}return r},oh.prototype._70I=function(){var t=this;return t._p1.distanceToSquared(t._p2)<1e-10&&t._p3.distanceToSquared(t._p4)<1e-10},oh.prototype.insertKnot=function(t){var e=this,n=e._p1,i=e._p2,r=e._p3,o=e._p4,a=n.clone().lerp(i,t),s=i.clone().lerp(r,t),c=r.clone().lerp(o,t),l=a.clone().lerp(s,t),u=s.clone().lerp(c,t),d=l.clone().lerp(u,t);return e._70I()?(n.clone().lerp(o,t),[new Ad.Math.CubicBezier(n,n.clone(),d.clone(),d),new Ad.Math.CubicBezier(d,d.clone(),o.clone(),o)]):[new Ad.Math.CubicBezier(n,a,l,d),new Ad.Math.CubicBezier(d,u,c,o)]};ud=d.Default.getInternal().ui().EdgeUI;var ah={_47O:function(t){var e=this,n=ah.getBackups()._47O;Ad.inEdit(e.gv)||n.call(e,t)}};Ad.Inject.registAsModule(ah,ud);ld=d.Default.getInternal().ui().NodeUI;var sh={_47O:function(t){var e=this,n=sh.getBackups()._47O;Ad.inEdit(e.gv)||n.call(e,t)},getSelectWidth:function(){var t=this,e=t.gv,n=t._data;if(e.isEditable(n)&&Ad.inEdit(e))return 0;var i=sh.getBackup("getSelectWidth");return i.call(t)}};Ad.Inject.registAsModule(sh,ld);var ch=d.graph.GraphView,lh={_editPointSize:function(){var t=d.Default.isTouchable,e=Ad.getStyle("pointSize");return e[t?0:1]}(),isPointEditable:function(t){var e=this;if(Ad.inEdit(e))return!e._pointEditableFunc||e._pointEditableFunc(t);var n=lh.getBackup("isPointEditable");n.call(e,t)},isEditable:function(t){var e,n=this,i=lh.getBackup("isEditable");if(e=t instanceof Ad.Group||i.call(n,t),!Ad.inEdit(n))return e;if(!(t instanceof d.Edge))return e;if(!t.s("2d.editable"))return!1;var r=n.getEditableFunc();return!r||r(t)},_42:function(t,e){var n=this,i=lh.getBackups()._42;if(i.call(n,t,e),Ad.inEdit(n)){var r=n.getEditInteractor();r.drawImpl()}}};Ad.Inject.registAsModule(lh,ch);gd=d.Default.getInternal().ui().ShapeUI;var uh={_47O:function(t){var e=this,n=uh.getBackups()._47O;Ad.inEdit(e.gv)||n.call(e,t)}};Ad.Inject.registAsModule(uh,gd);Cd=d.graph.DefaultInteractor;var dh={handle_mousewheel:function(t){var e=this,n=dh.getBackup("handle_mousewheel");Ad.inEdit(e.gv)||n.call(e,t)}};Ad.Inject.registAsModule(dh,Cd);Dd=d.graph.MoveInteractor;var hh={_calcShift:function(t,e){var n=this,i=hh.getBackup("_calcShift"),r=n.gv;if(!Ad.inEdit(r))return i.call(n,t,e);var o=r.getEditInteractor(),a=o.getSubModule("Move").calcShift(t,e,n);return a||i.call(n,t,e)},clear:function(t){var e=this,n=hh.getBackup("clear");n.call(e,t);var i=e.gv;if(Ad.inEdit(i)){var r=i.getEditInteractor();r.getSubModule("Move").clear(t)}}};Ad.Inject.registAsModule(hh,Dd);Bd=Ad.Rect=function(t){this.catalog="Rect",this._interactor=t};Bd.prototype={},Bd.prototype.constructor=Bd,Bd.prototype.gatherInfo=function(t,e){var n=this;if(1===e.length){var i=e[0];return i instanceof d.Shape&&i._70I()?n.gatherLine(t,i):!Gi(i,t)&&n.gatherSingleTarget(t,i)}return e.length>1&&n.gatherMultiTargets(t,e)},Bd.prototype.gatherSingleTarget=function(t,e){if(e.getCorners){var n,i=this,r=i.info;i.target=e,n=i.screenInfo={};var o=e.getCorners();for(var a in r.LT=new Ad.Math.Vector2(o[0]),r.LB=new Ad.Math.Vector2(o[1]),r.RB=new Ad.Math.Vector2(o[2]),r.RT=new Ad.Math.Vector2(o[3]),r.T=r.LT.clone().add(r.RT).divideScalar(2),r.B=r.LB.clone().add(r.RB).divideScalar(2),r.L=r.LT.clone().add(r.LB).divideScalar(2),r.R=r.RT.clone().add(r.RB).divideScalar(2),r)n[a]=Ad.toScreenPosition(t,r[a]);var s=i._interactor,c=s.getStyle("checkSize"),l=function(t,e,n){var i=e.clone().sub(t).setLength(-c),r=n.clone().sub(t).setLength(-c),o=i.add(r).add(t);return o};return n.rotLT=l(n.LT,n.RT,n.LB),n.rotLB=l(n.LB,n.LT,n.RB),n.rotRB=l(n.RB,n.LB,n.RT),n.rotRT=l(n.RT,n.LT,n.RB),n.rotT=n.rotLT.clone().add(n.rotRT).divideScalar(2),n.rotB=n.rotLB.clone().add(n.rotRB).divideScalar(2),n.rotL=n.rotLT.clone().add(n.rotLB).divideScalar(2),n.rotR=n.rotRT.clone().add(n.rotRB).divideScalar(2),n.rotation=e.getRotation(),i.gatherConnectInfo(),!0}},Bd.prototype.gatherConnectInfo=function(){var t=this,e=t.target,n=t._interactor,i=t.screenInfo,r=n.gv;if(r.isConnectActionVisible(e)&&n.getStyle("connectGuideVisible")){var o;e.s&&(o=e.s("connectGuideShift")),o||(o=n.getStyle("connectGuideShift"));var a=e.getAnchor(),s=e.getSize(),c=e.toGlobal({x:s.width*(o[0]-a.x),y:s.height*(o[1]-a.y)});c=Ad.toScreenPosition(r,c),i.P1?c.add(i.P2.clone().sub(i.P1).setLength(o[2])):(c.add(i.RT.clone().sub(i.LT).setLength(o[2])),c.add(i.LB.clone().sub(i.LT).setLength(o[3]))),i.connect=c}},Bd.prototype.gatherMultiTargets=function(t,e){var n=Ad.Group.findOrCreateGroup(e);if(!n)return!1;var i=this;return i.editing&&"rotate"!==i.editing.mode||n.calcInfo(),i.gatherSingleTarget(t,n)},Bd.prototype.gatherLine=function(t,e){this.target=e;var n=this.screenInfo={},i=e.getPoints(),r=Ad.getDataMatrix(e);return n.P1=Ad.toScreenPosition(t,r.apply(i.get(0))),n.P2=Ad.toScreenPosition(t,r.apply(i.get(1))),this.gatherConnectInfo(),!0},Bd.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Bd.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Bd.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Bd.prototype.check=function(t,e,n){if(d.Default.isLeftButton(e)){var i=this;if(i.editing=null,i.tipInfo=null,i.screenInfo){var r=i.target,o=t.isEditable(r),a=i.screenInfo;if(o&&a.connect){var s=i._checkConnect(n);if(s)return s}if(a.P1)return i._checkLine(n);var c,l,u,h=null,f=i._interactor,g=f.getStyle("checkSize");if(o&&t.isRectEditable(r))for(l=0;l<Ad.Rect.ResizeKeys.length;l++)if(u=Ad.Rect.ResizeKeys[l],Ad.checkHit(n,a[u],g)){h=u,c="resize";break}if(!h&&o&&t.isRotationEditable(r)&&!f.getStyle("rotateAsClock")){var p=f.getStyle("rotateCheckSize");for(l=0;l<Ad.Rect.RotateKeys.length;l++)if(u=Ad.Rect.RotateKeys[l],Ad.checkHit(n,a[u],p)){h=u,c="rotate";break}}if(!h)return void f.setCursor("default");if("rotate"===c){var v,y=t.lp(e);if(r instanceof Ad.Group){var _=f.getStyle("groupRotateModeKey");"string"==typeof _&&(_=[_]);for(var m=!1,b=0,x=_.length;x>b;b++)if(e[_[b]]){m=!0;break}var w=f.getStyle("groupRotateModeDefault");v=m?"batch"===w?"block":"batch":w}var I="batch"===v?r.getAnchor2():r.getPosition(),S=Math.atan2(y.y-I.y,y.x-I.x);f._setRotateCursor(S),i.editing={mode:c,key:h,pos:I,flipY:r.getScale().y<0,rotation:r.getRotation(),hitRot:S},v&&(i.editing.groupRotateMode=v)}else{var T=Ad.Rect.ResizeKeys.indexOf(h),C=Ad.Rect.ResizeDirection[T],M=Math.cos(r.getRotation()),D=Math.sin(r.getRotation()),E=C.x*Math.sign(r.getScale().x),P=C.y*Math.sign(r.getScale().y),O=Math.atan2(-D*E-M*P,M*E-D*P),A=(Math.round(O/(Math.PI/4))+8)%8,k=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][A];this._interactor.setCursor(k);var R=r.getWidth(),z=r.getHeight(),N=r.getAnchor();i.editing={mode:c,key:h,rect:{x:-R*N.x,y:-z*N.y,width:R,height:z},anchor:N,matrix:r.getMatrix()}}return h}}},Bd.prototype._checkLine=function(t){var e=this;e.screenInfo;var n,i=e._interactor.getStyle("checkSize");if(Ad.checkHit(t,e.screenInfo.P1,i))n="P1";else{if(!Ad.checkHit(t,e.screenInfo.P2,i))return void this._interactor.setCursor("default");n="P2"}return e.editing={mode:"line",key:n},n},Bd.prototype._checkConnect=function(t){var e=this,n=e.screenInfo,i=e._interactor,r=i.getStyle("connectGuideIntersectSize"),o=n.connect,a=t.x,s=o.x;if(s>a&&r>s-a&&Math.abs(o.y-t.y)<r||a>=s&&Ad.checkHit(t,o,r)){var c="connect",l=f.getConnectAction(i.gv);if(e.editing={mode:c},l&&l["delete"])if(e.target instanceof Ad.Group){var u=!0;i.gv.sm().getSelection().each((function(t){l["delete"].visible.call(null,i.gv,t)||(u=!1)})),e.editing.hasDeleteAction=u}else l["delete"].visible.call(null,i.gv,e.target)&&(e.editing.hasDeleteAction=!0);return i.setCursor("default"),c}},Bd.prototype._fireEditEvent=function(t,e){var n=this._interactor,i=this.editing;if(i){var r=i.mode;r="rotate"===r?"Rotation":"connect"===r?"Connection":r[0].toUpperCase()+r.slice(1),n.fi({kind:t+"Edit"+r,event:e})}},Bd.prototype.startEdit=function(t,e){t.startDragging(e);var n=this;n._interactor.fi({kind:"prepareEdit",event:e});var i=n.editing,r=n.target;if(i){if(n._fireEditEvent("begin",e),"rotate"===i.mode)return void(i.groupRotateMode&&r.beginRotate(i));if("connect"!==i.mode)("line"===i.mode||r&&0===r.getRotation())&&(n._inSmartGuide=!0,n._interactor.rectGuide.gatherRects());else if(i.hasDeleteAction){var o=t.gv,a=n._interactor.getStyle("connectGuideGarbageShift");i.garbageInfo={x:o.getWidth()*a[0]+a[2],y:o.getHeight()*a[1]+a[3],size:n._interactor.getStyle("connectGuideGarbageIntersectsize")},t._42()}}},Bd.prototype._46O=function(t){var e,n,i=this,o=i.editing,a=i.target;if(o){if("connect"===o.mode&&!o.canceled&&!o.deleted)try{o.garbageInfo&&o.garbageInfo.hover?f.doDeleteConnectionAction(i._interactor.gv,a):f.doConnectAction(i._interactor.gv,a,o.target)}catch(M){console.error(M)}n=o.freezeFlag,e=i.editing.groupRotateMode,i._fireEditEvent("end",t),i.editing=null}i.tipInfo=null,i._inSmartGuide&&(i._interactor.rectGuide.clear(),i._inSmartGuide=!1),e&&a&&a.endRotate(),a instanceof d.Block&&(n===r?delete a._freezeSyncFromChildren:a._freezeSyncFromChildren=n,a.updateFromChildren())},Bd.prototype.handleNormalStateDelete=function(){var t=this,e=t.editing;if(e&&"connect"===e.mode&&!e.canceled&&!e.deleted){if(e.garbageInfo){try{f.doDeleteConnectionAction(t._interactor.gv,t.target)}catch(H){console.error(H)}e.garbageInfo=null}return e.cursorPos=null,e.targetCorners=null,e.deleted=!0,t._interactor._42(),!0}},Bd.prototype.handleNormalStateKeyDown=function(t){var e=this,n=e.editing;return!n||"connect"!==n.mode||n.canceled||n.deleted?void 0:d.Default.isEsc(t)?(n.cursorPos=null,n.targetCorners=null,n.canceled=!0,e._interactor._42(),!0):void 0},Bd.prototype.handleEdit=function(t,e){var n=this,i=n.editing;if(i){var r,o,a,s,c,l=n.target,u=i.key,h=i.mode,f=t.lp(e),g=n._interactor;if("connect"===h){if(i.canceled)return;if(i.deleted)return;i.cursorPos=g._getLogicalPoint(e);var p=i.garbageInfo;return p&&Ad.checkHit(i.cursorPos,p,p.size)?(p.hover=!0,i.target=null,i.targetCorners=null):(p&&(p.hover=!1),i.target=t.getDataAt(f,(function(e){return!!t.isSelectable(e)&&!!Vi(e)}))||null,i.targetCorners=Ad.getTargetCornersOnScreen(t,i.target)),void g._42()}if("rotate"===h){var v,y,_,m,b=i.pos,x=Math.atan2(f.y-b.y,f.x-b.x);if(i.groupRotateMode?y=x-i.hitRot:(v=x-i.hitRot,y=i.rotation+v),y%=2*Math.PI,0>y&&(y+=2*Math.PI),!d.Default.isCtrlDown(e))js(e)?(_=g.getStyle("shiftRotateRound"),m=_/2):(_=g.getStyle("rotateRound"),m=g.getStyle("rotateSensitivity")),y=Ad.roundTo(y,_,m);i.groupRotateMode?(v=y-(i.lastRotation||0),0!==v&&(l.addRotation(v,i.groupRotateMode),i.lastRotation=y)):l.setRotation(y),g._setRotateCursor(x),y>Math.PI&&(y-=2*Math.PI);var w=y/Math.PI*180;w=w.toFixed(2),r=w+"°"}else if("resize"===h){var I=i.rect;a=I.x,s=I.y;var S,T=I.width,C=I.height,M=i.anchor,D=i.matrix,E=l.s&&l.s("keepAspectRatio")||g.getStyle("keepAspectRatio");js(e)&&(E=!E);var P,O,A=n._unionPointMode1,k=n._unionPointMode2;if(n._inSmartGuide&&!d.Default.isCtrlDown(e)&&!E)"L"===u||"R"===u?P="x":("T"===u||"B"===u)&&(P="y"),n._adsorbedToClosest(f,P),c=!0;S=D.tfi(f),"LT"===u?(I=A(S,{x:a+T,y:s+C},T,C,E),O=9):"T"===u?(I=k({x:a,y:S.y},{x:a+T,y:s+C},T,C,E,"v"),O=1):"RT"===u?(I=A(S,{x:a,y:s+C},T,C,E),O=33):"L"===u?(I=k({x:S.x,y:s},{x:a+T,y:s+C},T,C,E,"h"),O=8):"R"===u?(I=k({x:a,y:s},{x:S.x,y:s+C},T,C,E,"h"),O=32):"LB"===u?(I=A(S,{x:a+T,y:s},T,C,E),O=12):"B"===u?(I=k({x:a,y:s},{x:a+T,y:S.y},T,C,E,"v"),O=4):"RB"===u&&(I=A(S,{x:a,y:s},T,C,E),O=36);var z=D.tf(I.x+I.width*M.x,I.y+I.height*M.y);l instanceof d.Block&&(i.hasOwnProperty("freezeFlag")||(i.freezeFlag=l._freezeSyncFromChildren,l._freezeSyncFromChildren=!0)),l.setPosition(z),l.setSize(I.width,I.height),c&&(o=l.getRect(),g.rectGuide.gatherLines({node:l,x:o.x,y:o.y,w:o.width,h:o.height},P,O)),r=Math.round(I.width)+" * "+Math.round(I.height)}else if("line"===h){if(js(e)){var V=l.getPoints(),L="P1"===u?V.get(1):V.get(0),B={x:f.x-L.x,y:f.y-L.y},G=g.getStyle("shiftLineRotateRound"),F=n._shiftDirList;if(!F||n._shiftRotateRound!==G){n._shiftRotateRound=G,n._shiftDirList=F=[];for(var j=0;j<Math.PI;j+=G)F.push({x:N(j),y:R(j)})}for(var H,U=0,Z=0,W=F.length;W>Z;Z++){var q=F[Z],X=q.x*B.x+q.y*B.y;Math.abs(X)>Math.abs(U)&&(U=X,H=q)}f={x:L.x+H.x*U,y:L.y+H.y*U},g.rectGuide.clear()}else n._inSmartGuide&&!d.Default.isCtrlDown(e)&&(n._adsorbedToClosest(f),c=!0);var Y=Ad.getDataMatrix(l).applyInverse(f);l.setPoint("P1"===u?0:1,Y,!0);var $=l.getPoints(),Q=$.get(0),J=$.get(1);a=Q.x-J.x,s=Q.y-J.y,r=" "+Math.round(Math.sqrt(a*a+s*s))+" ",c&&(o=l.getRect(),g.rectGuide.gatherLines({node:l,x:o.x,y:o.y,w:o.width,h:o.height}))}if(r){var K=d.Default.getLogicalPoint(e,g._canvas);K.x+=Ad.Icons.TipShiftX,K.y+=Ad.Icons.TipShiftY,n.tipInfo={helperPos:K,text:r,size:r.length}}n._fireEditEvent("between",e)}},Bd.prototype._unionPointMode1=function(t,e,n,i,r){if(r&&n&&i){var o=t.x-e.x,a=t.y-e.y;Math.abs(o*i)<Math.abs(a*n)?(a=Math.sign(a)*Math.abs(o*i/n),t.y=e.y+a):(o=Math.sign(o)*Math.abs(a*n/i),t.x=e.x+o)}return d.Default.unionPoint(t,e)},Bd.prototype._unionPointMode2=function(t,e,n,i,r,o){var a,s=d.Default.unionPoint(t,e);r&&n&&i&&("v"===o?(a=s.x+s.width/2,s.width=n*s.height/i,s.x=a-s.width/2):(a=s.y+s.height/2,s.height=i*s.width/n,s.y=a-s.height/2));return s},Bd.prototype._adsorbedToClosest=function(t,e){var n=this,i=n._interactor,r=i.rectGuide.findClosest(t,e),o=i.gridGuide.findClosest(t,e),a=1/0,s=1/0;r&&(isFinite(r.x)&&(a=r.x),isFinite(r.y)&&(s=r.y)),o&&(isFinite(o.x)&&Math.abs(o.x)<Math.abs(a)&&(a=o.x),isFinite(o.y)&&Math.abs(o.y)<Math.abs(s)&&(s=o.y)),isFinite(a)&&(t.x+=a),isFinite(s)&&(t.y+=s)},Bd.prototype._42=function(t,e,n){var i=this;i.info={},i.screenInfo=null;var r=i._interactor;if(!r.editDetail&&i.gatherInfo(e,n)){var o=i.editing,a=o?o.groupRotateMode:null,s=i.screenInfo;if("block"!==a){if(s.P1?Ad.Icons.DrawIcon(r,t,Ad.Icons.Line,s):Ad.Icons.DrawIcon(r,t,Ad.Icons.Rect,s),s.connect&&(Ad.Icons.DrawIcon(r,t,Ad.Icons.ConnectGuide,{rotation:s.rotation,connect:s.connect,cursorPos:o?o.cursorPos:null}),o)){if(o.targetCorners){for(var c={x:1/0,y:1/0},l={x:-1/0,y:-1/0},u=0,d=o.targetCorners.length;d>u;u+=2)c.x=Math.min(c.x,o.targetCorners[u]),l.x=Math.max(l.x,o.targetCorners[u]),c.y=Math.min(c.y,o.targetCorners[u+1]),l.y=Math.max(l.y,o.targetCorners[u+1]);Ad.Icons.DrawIcon(r,t,Ad.Icons.HoverDataRect,{min:c,max:l,color:r.getStyle("hoverGuideColor")||r.getStyle("baseColor")})}o.garbageInfo&&Ad.Icons.DrawIcon(r,t,Ad.Icons.ConnectGuideGarbage,o.garbageInfo)}i.tipInfo&&Ad.Icons.DrawIcon(r,t,Ad.Icons.TipHelper,i.tipInfo)}i.target instanceof Ad.Group&&i.target._42(r,t,e)}};var fh=Ad.Anchor=function(t){this.catalog="Anchor",this._interactor=t};fh.prototype={},fh.prototype.constructor=fh,fh.prototype.gatherInfo=function(t,e){var n=this;if(1===e.length){var i=e[0];if(!i.getAnchor)return;if(i instanceof d.Shape&&i._70I())return;if(Gi(i,t))return;return n.gatherSingleTarget(t,e[0])}return e.length>1&&n.gatherMultiTargets(t,e)},fh.prototype.gatherSingleTarget=function(t,e){var n=this;return n.info.POS=e.getPosition(),n.screenInfo.POS=Ad.toScreenPosition(t,n.info.POS),n.target=e,!0},fh.prototype.gatherMultiTargets=function(t,e){var n=this,i=Ad.Group.findOrCreateGroup(e);return!!i&&(n.screenInfo.POS=Ad.toScreenPosition(t,i.getAnchor2()),n.target=i,!0)},fh.prototype.isVisible=function(){var t=this,e=t._interactor;if(!1===e.getStyle("anchorVisible"))return!1;var n=t.target;if(n){if(this.editing)return!0;var i=n.getAnchor(),r=e.getStyle("anchorOutsideVisibleThreshold");if(i.x<-r||i.x>1+r||i.y<-r||i.y>1+r)return!0;var o=n.getSize(),a=n.getScale(),s=Math.min(Math.abs(o.width*a.x),Math.abs(o.height*a.y));if(s*e.gv._zoom<e.getStyle("anchorHideThreshold"))return!1}return!0},fh.prototype.check=function(t,e,n){if(d.Default.isLeftButton(e)){var i=this,r=i._interactor;if(i.isVisible()&&!1!==r.getStyle("anchorMovable")){i.editing=null,i.tipInfo=null;var o,a=i.target;if(a&&t.isAnchorEditable(a)&&t.isEditable(a))if(i.screenInfo&&(o=i.screenInfo.POS)&&Ad.checkHit(n,new Ad.Math.Vector2(o),r.getStyle("checkSize"))){if(a instanceof Ad.Group)return i.editing={},!0;var s=a.getWidth(),c=a.getHeight(),l=a.getAnchor();return i.editing={rect:{x:-s*l.x,y:-c*l.y,width:s,height:c},anchor:l,matrix:a.getMatrix()},!0}}}},fh.prototype.startEdit=function(t,e){t.startDragging(e),t.fi({kind:"beginEditAnchor",event:e})},fh.prototype._46O=function(t){var e=this;e.editing&&(e.editing=null,e._interactor.fi({kind:"endEditAnchor",event:t})),e.tipInfo=null},fh.prototype.handleEdit=function(t,e){var n=this,i=n.target;if(i){var r=n.editing;if(r){var o=t.lp(e),a=n._interactor;if(i instanceof Ad.Group)return i.setAnchor2(o),void a._42();var s=r.matrix,c=s.tfi(o),l=r.rect,u=(c.x-l.x)/l.width,h=(c.y-l.y)/l.height;if(!d.Default.isCtrlDown(e)){var f=a.getStyle("anchorRound"),g=a.getStyle("anchorSensitivity");u=Ad.roundTo(u,f,g),h=Ad.roundTo(h,f,g)}i.setAnchor(u,h,!0);var p=d.Default.getLogicalPoint(e,a._canvas);p.x+=Ad.Icons.TipShiftX,p.y+=Ad.Icons.TipShiftY;var v=u.toFixed(2)+", "+h.toFixed(2);n.tipInfo={helperPos:p,text:v,size:v.length},a.fi({kind:"betweenEditAnchor",event:e})}}},fh.prototype._42=function(t,e,n){var i=this;i.info={},i.screenInfo={};var r=i._interactor;r.editDetail||i.gatherInfo(e,n)&&i.isVisible()&&(Ad.Icons.DrawIcon(r,t,Ad.Icons.Anchor,i.screenInfo),i.tipInfo&&Ad.Icons.DrawIcon(r,t,Ad.Icons.TipHelper,i.tipInfo))};var gh=Ad.MoveDummy=function(t){this.catalog="MoveDummy",this._interactor=t};gh.prototype={},gh.prototype.constructor=gh,gh.prototype.gatherInfo=function(){var t=this,e=this._interactor.getSubModule("Rect");if(e){var n=e.screenInfo;if(n){var i=t._interactor,r=t.getMovableTarget(e.target);if(r){var o=i.getStyle("moveDummyThreshold");if(!1!==o){var a=n.LT||n.P1,s=n.RT||n.P2,c=n.LB||a;if(a){var l=n.P1,u=Math.min(a.distanceTo(c),a.distanceTo(s));if(!(!0!==o&&u>o)){var d=i.getStyle("moveDummyPosition"),h=s.clone().sub(a),f=c.clone().sub(a),g=d[2],p=d[3];if(l){var v=i.getStyle("moveDummyLineExtraShift");v&&(g+=v[0],p+=v[1])}var y=a.clone().add(h.clone().multiplyScalar(d[0])).add(h.setLength(g)).add(f.clone().multiplyScalar(d[1])).add(f.setLength(p));return t.screenInfo.pos=y,t.screenInfo.size=i.getStyle("moveDummySensitivity"),!0}}}}}}},gh.prototype.getMovableTarget=function(t){var e=this._interactor.gv;if(Vi(t)){if(e.isMovable(t))return t}else if(t instanceof Ad.Group)for(var n=t._entities,i=n.length-1;i>=0;i--){var r=n[i];if(Vi(r)&&e.isMovable(r))return r}return null},gh.prototype.getMoveInteractor=function(){for(var t,e=this._interactor.gv,n=e.getInteractors(),i=0,r=n.length;r>i;i++)if(t=n.get(i),t instanceof Dd)return t},gh.prototype.startEdit=function(t,e){t.startDragging(e);var n=this.getMoveInteractor();if(n){var i=this.selectedTarget,r=t.gv;r._moving=1,n._data=i,r.handleMouseDown&&r.handleMouseDown(e,i)}},gh.prototype._46O=function(t){var e=this,n=e.getMoveInteractor();n&&(n.handleWindowMouseUp(t),e.selectedTarget=null)},gh.prototype.handleEdit=function(t,e){var n=this.getMoveInteractor();n&&n.handleWindowMouseMove(e)},gh.prototype.check=function(t,e,n){if(this.selectedTarget=null,d.Default.isLeftButton(e)&&!t._scrolling&&!co()){var i=this;if(i.screenInfo){var r=i.screenInfo.pos;if(r&&!(n.distanceTo(r)>i.screenInfo.size)){var o=i._interactor;return i.selectedTarget=i.getMovableTarget(o.getSubModule("Rect").target),o.setCursor("default"),!0}}}},gh.prototype._42=function(t,e,n){var i=this;i.screenInfo={};var r=i._interactor;r.editDetail||i.gatherInfo(e,n)&&(!r.editing||i.selectedTarget)&&Ad.Icons.DrawIcon(r,t,Ad.Icons.MoveDummy,i.screenInfo)};var ph=Ad.RotateX=function(t){this.catalog="RotateX",this._interactor=t};ph.prototype={},ph.prototype.constructor=ph,ph.prototype.gatherInfo=function(t,e){var n=this;if(1===e.length){var i=e[0];return!(i instanceof d.Shape&&i._70I()||Gi(i,t))&&n.gatherSingleTarget(t,i)}return e.length>1&&n.gatherMultiTargets(t,e)},ph.prototype.gatherSingleTarget=function(){var t=new d.Math.Vector2,e=new d.Math.Vector2,n=new d.Math.Vector2,i=new d.Math.Vector2,r=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i};return function(o,a){if(a.getCorners){var s=this,c=a.getCorners(),l=15,u=a.getPosition();t.copy(c[0]),n.copy(c[1]),i.copy(c[3]),e.copy(t).add(i).divideScalar(2).add(t.sub(n).setLength(l/o.getZoom()));var d=Math.max(r(u,c[0]),r(u,c[1]),r(u,c[2]),r(u,c[3]));return s.info.POS=e.clone(),s.screenInfo.POS=Ad.toScreenPosition(o,s.info.POS),s.screenInfo.LEN=Math.sqrt(d)*o.getZoom()+l,s.screenInfo.CENTER=Ad.toScreenPosition(o,u),s.target=a,!0}}}(),ph.prototype.gatherMultiTargets=function(t,e){var n=this,i=Ad.Group.findOrCreateGroup(e);if(!i)return!1;n=this;return n.gatherSingleTarget(t,i)},ph.prototype.isVisible=function(){var t=this._interactor;if(!t.getStyle("rotateAsClock"))return!1;var e=this.target;if(!e)return!0;var n=t.gv;return!(!n.isEditable(e)||!n.isRotationEditable(e))},ph.prototype.check=function(t,e,n){var i=this,r=i._checkImpl(t,e,n);return(r||i._clockPainted)&&i._interactor._42(),r},ph.prototype._checkImpl=function(t,e,n){if(d.Default.isLeftButton(e)){var i,r=this;if(r.editing=null,r.tipInfo=null,r.screenInfo&&(i=r.screenInfo.POS)&&r.isVisible()){var o=r._interactor;if(Ad.checkHit(n,i,o.getStyle("checkSize"))){var a=r.target,s=t.lp(e),c=a.getPosition(),l=Math.atan2(s.y-c.y,s.x-c.x);return o._setRotateCursor(l),r.editing={pos:c,rotation:a.getRotation(),hitRot:l,groupRotateMode:"block",screenInfo:{CENTER:r.screenInfo.CENTER,LEN:r.screenInfo.LEN}},!0}}}},ph.prototype.startEdit=function(t,e){t.startDragging(e),t.fi({kind:"beginEditRotation",event:e}),this.target instanceof Ad.Group&&this.target.beginRotate(this.editing)},ph.prototype._46O=function(t){var e=this;e.editing&&(e.editing=null,e._interactor.fi({kind:"endEditRotation",event:t})),e.target instanceof Ad.Group&&e.target.endRotate(),e.tipInfo=null},ph.prototype.handleEdit=function(t,e){var n=this,i=n.editing;if(i){var r,o,a,s,c=n.target,l=t.lp(e),u=n._interactor,h=i.pos,f=Math.atan2(l.y-h.y,l.x-h.x),g=c instanceof Ad.Group;if(g?o=f-i.hitRot:(r=f-i.hitRot,o=i.rotation+r),o%=2*Math.PI,0>o&&(o+=2*Math.PI),!d.Default.isCtrlDown(e))js(e)?(a=u.getStyle("shiftRotateRound"),s=a/2):(a=u.getStyle("rotateRound"),s=u.getStyle("rotateSensitivity")),o=Ad.roundTo(o,a,s);g?(r=o-(i.lastRotation||0),0!==r&&(c.addRotation(r,i.groupRotateMode),i.lastRotation=o)):c.setRotation(o),u._setRotateCursor(f),o>Math.PI&&(o-=2*Math.PI);var p=o/Math.PI*180,v=p.toFixed(2)+"°",y=d.Default.getLogicalPoint(e,u._canvas);y.x+=Ad.Icons.TipShiftX,y.y+=Ad.Icons.TipShiftY,n.tipInfo={helperPos:y,text:v,size:v.length},u.fi({kind:"betweenEditRotation",event:e})}},ph.prototype._42=function(t,e,n){var i=this;i._clockPainted=!1,i.info={},i.screenInfo={};var r=i._interactor;r.editDetail||i.gatherInfo(e,n)&&i.isVisible()&&(Ad.Icons.DrawIcon(r,t,Ad.Icons.RoundPoint,i.screenInfo.POS),i.tipInfo&&Ad.Icons.DrawIcon(r,t,Ad.Icons.TipHelper,i.tipInfo),i.editing&&i.drawClock(t))},ph.prototype.drawClock=function(t){t.save();var e=this;e._clockPainted=!0;var n=e.editing||{},i=n.screenInfo||e.screenInfo,r=i.LEN,o=r+8,a=r+18;t.save(),t.translate(i.CENTER.x,i.CENTER.y),t.beginPath(),t.strokeStyle="rgb(150, 150, 150)";for(var s,c,l,u,d,h=0;360>h;h++)s=h*Math.PI/180,0===h%5&&(c=R(s)*r,l=N(s)*r,u=R(s)*o,d=N(s)*o,t.moveTo(c,l),t.lineTo(u,d)),0===h%45&&(c=R(s)*r,l=N(s)*r,u=R(s)*a,d=N(s)*a,t.moveTo(c,l),t.lineTo(u,d));t.stroke(),t.rotate(-F);var f=n.lastRotation||e.target.getRotation();t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.1)",t.strokeStyle="rgb(157, 157, 157)",t.moveTo(0,0),t.arc(0,0,a,0,f,!1),t.fill(),t.beginPath(),t.moveTo(0+a,0),t.arc(0,0,a,0,f,!1),t.stroke(),t.restore()};rh=Ad.Curve=function(t){this.catalog="Curve",this._interactor=t};rh.prototype={},rh.prototype.constructor=rh,i.defineProperties(rh.prototype,{activing:{get:function(){return this._activing},set:function(t){var e=this;if(t)e._activing=new Ad.CurveActiving(this,t);else{var n=e._activing;n&&n.dispose(),e._activing=null}}}}),rh.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},rh.prototype.setUp=function(){var t=this,e=t._interactor;e&&e.gv.mp(t._onGraphviewPropertyChanged,t)},rh.prototype._onGraphviewPropertyChanged=function(t){("zoom"===t.property||"translateX"===t.property||"translateY"===t.property)&&this._handleDataChanged()},rh.prototype.tearDown=function(){var t=this,e=t._interactor;e&&e.gv.ump(t._onGraphviewPropertyChanged,t)},rh.prototype.canEnterEditDetailMode=function(){var t=this,e=t._interactor,n=e._getValidSelection();if(1===n.length){var i=n[0],r=i instanceof d.Edge;if(i instanceof d.Shape||r){if(r){var o=i.s("edge.type");if(o&&"points"!==o)return}var a=e.gv;if(a.isPointEditable(i)&&a.isEditable(i))return t.target=i,!0}}},rh.prototype.canQuitEditDetailMode=function(t){var e=this,n=e._interactor._getLogicalPoint(t);return e._checkEditRealPoint(n)?void 0:e._interactor.gv.getDataAt(t)!==e.target||void 0},rh.prototype.preHandleScroll=function(){var t=this.editing;return!(!t||!t.inEdit)||void 0},rh.prototype.getCurrentSelectintStatus=function(){var t=this;if(t.activing&&!t.activing.selections){if(t.activing.status!=r)return t.activing.status;var e=function(e){var n=t.activing.status;t.activing.status=e,t._interactor.fp("shapePointStatus",n,e)},n=Ad.Curve.PointType,i=t.activing.point,o=t.activing.pairs;if(!o||1!==o.length)return e(n.Mirrored);var a=o[0],s=a.c1&&a.c1.isNearEnough(i),c=a.c2&&a.c2.isNearEnough(i);if(!a.c1||!a.c2)return e(s||c?n.Straight:n.Disconnected);if(s&&c)return e(n.Straight);if(s||c)return e(n.Asymmetric);var l=a.c1.clone().sub(i),u=a.c2.clone().sub(i);return Math.abs(l.x*u.y-l.y*u.x)>1e-5||l.x*u.x>0?e(n.Disconnected):Math.abs(l.length()-u.length())>1e-5?e(n.Asymmetric):e(n.Mirrored)}},rh.prototype.handle_keydown=function(t){var e=this;if(e._interactor.editDetail){var n=Ad.Curve.PointType;"1"===t.key?e._setCurrentSelectionStatus(n.Straight):"2"===t.key?e._setCurrentSelectionStatus(n.Mirrored):"3"===t.key?e._setCurrentSelectionStatus(n.Disconnected):"4"===t.key&&e._setCurrentSelectionStatus(n.Asymmetric)}},rh.prototype.setCurrentSelectionStatus=function(t){var e=this,n=e._interactor;if(n){var i=n.gv;i.dm().beginTransaction(),this._setCurrentSelectionStatus(t),i.dm().endTransaction()}},rh.prototype._setCurrentSelectionStatus=function(t){var e=this,n=e.activing;if(n){var i=e.getCurrentSelectintStatus();if(null!==i&&i!==t){n.status=t;var r=e.activing.point,o=e.activing.pairs;if(o&&1===o.length){var a=o[0],s=e.screenInfo.curve,c=Ad.Curve.PointType,l=function(){e._writeToHt(),e._interactor.fp("shapePointStatus",i,t)};if(t===c.Straight)return s.moveCtrlPoint(a,r,"c1"),s.moveCtrlPoint(a,r,"c2"),void l();if(i===c.Straight){var u=s.findPairs(r,!0),d=u[0],h=d.r1||r,f=d.r2||r,g=f.clone().sub(h).multiplyScalar(.25);return s.moveCtrlPoint(a,r.clone().sub(g),"c1"),s.moveCtrlPoint(a,r.clone().add(g),"c2"),void l()}var p=a.c1,v=a.c2;if(p&&v){if(t===c.Mirrored)return s.moveCtrlPoint(a,r.clone().multiplyScalar(2).sub(v),"c1"),void l();if(t===c.Asymmetric&&i===c.Disconnected){var y=p.clone().sub(r).length();g=r.clone().sub(v).setLength(y).add(r);return s.moveCtrlPoint(a,g,"c1"),void l()}}n._firePointChange(),e._interactor.fp("shapePointStatus",i,t)}}}},rh.prototype._handleDataChanged=function(){var t="points,segments,shape,position,rotation,scale".split(",");return function(e){var n=this;if(n.screenInfo&&n.target){if(e&&t.indexOf(e.property)<0)return;var i=n._interactor;n.gatherSingleTarget(i.gv,n.target,!0),n.check(i.gv,null,new Ad.Math.Vector2(i._lastClientPoint)),i._42()}}}(),rh.prototype.gatherSingleTarget=function(t,e,n){var i,r,o=this;o.screenInfo&&o.screenInfo.curve&&(r=o.screenInfo.curve._curves);var a=o.editing;i=a?o.screenInfo:o.screenInfo={};var s,c,l=e instanceof d.Edge;l?(s=e.s("edge.segments"),c=e.s("edge.points")||new d.List):(s=e._58O,c=e._59O),i.S=s;var u,h=i.P=[],f=Ad.getDataMatrix(e);if(e instanceof d.Polyline&&(u=e.getElevation()||0,i.E=[]),c.each((function(e){i.E&&i.E.push(e.e||u),e=f.apply(e);var n=Ad.toScreenPosition(t,e);h.push(n.x,n.y)})),l){var g=h.length,p=Ad.toScreenPosition(t,e._lastSourcePoint||(g?{x:h[0],y:h[1]}:{x:0,y:0})),v=Ad.toScreenPosition(t,e._lastTargetPoint||(g?{x:h[g-2],y:h[g-1]}:{x:0,y:0}));h.splice(0,0,p.x,p.y),h.push(v.x,v.y)}if(!i.S||!i.S.size()){i.S=new d.List,i.S.add(1);for(var y=0;y<h.length/2-1;y++)i.S.add(2)}if((!a||n)&&o.convertToCubicBezier(r),o.activing&&(n||!o.editing||"realPoint"===o.editing.type)){var _=i.curve.findPairs(o.activing.point);o.activing.pairs=_}l&&"points"!==e.s("edge.type")&&o._writeToHt()},rh.prototype._convertToNewPoint=function(t,e,n,i){var r,o,a;for(r=0,o=e.length;o>r;r++){if(a=e[r],a._p1.isNearEnough(t)&&(!i||i.indexOf(a._p1)<0))return a._p1;if(a._p4.isNearEnough(t)&&(!i||i.indexOf(a._p4)<0))return a._p4}if(n)for(r=0,o=Math.min(n.length,o);o>r;r++){if(a=n[r],a._p1===t&&(!i||i.indexOf(e[r]._p1)<0))return e[r]._p1;if(a._p4===t&&(!i||i.indexOf(e[r]._p4)<0))return e[r]._p4}},rh.prototype.convertToCubicBezier=function(t){var e,n,i=this,r=new Ad.Math.Curve,o=i.screenInfo;if(r.createFromHtShape(o.P,o.S,o.E),o.curve=r,i.activing){var a=r._curves;e=i.activing.point,n=i._convertToNewPoint(e,a,t);var s=[];if(n&&(i.activing.point=n,s.push(n)),i.activing.selections){var c=-1,l=i.activing.selections;l.forEach((function(e){c++,n=i._convertToNewPoint(e,a,t,s),n&&(l[c]=n,s.push(n))}))}}},rh.prototype.check=function(t,e,n){if(!e||Ls(e)||Bs(e)){var i=this;if(i._interactor.setCursor("default"),i.editing=null,i.highlight=null,i.tipInfo=null,i.edgeEditResult=null,i.screenInfo){if(co()||Bs(e))return i._interactor._42(),!0;if(i._checkEditCtrlPoint(n))return i._interactor._42(),!0;if(i._checkEditRealPoint(n))return i._interactor._42(),!0;if(i._checkEditElevation(n))return i._interactor._42(),!0;var r=i.screenInfo.curve,o=r.checkPoint(n,i._interactor.getStyle("curveIntersectSize"));if(o){var a=i.highlight={};a.type="insertKnot",a.bezier=o.bezier,a.point=o.intersection}return i._interactor._42(),!0}}},rh.prototype._checkEditRealPoint=function(t){var e,n,i,r,o,a,s=this,c=s.screenInfo.curve._curves,l=s._interactor.getStyle("curvePointIntersectSize"),u=1/0;for(l*=l,i=0,r=c.length;r>i;i++)e=c[i],o=e._p1,a=t.distanceToSquared(o),u>a&&(u=a,n=o),o=e._p4,a=t.distanceToSquared(o),u>a&&(u=a,n=o);if(u>l)return!1;var d=s.highlight={};return d.type="changeRealPoint",d.point=n,s.editing={type:"realPoint",point:n,shiftGuide:{point:n.clone(),dir:"x",limit:0}},s._interactor.setCursor("crosshair"),!0},rh.prototype._checkEditElevation=function(t){var e=this;if(!e._interactor.getStyle("curveElevationVisible"))return!1;var n=e.activing;if(!n)return!1;var i=n.getCurrentEditingPoint();if(!i)return!1;var r=e._interactor,o=r.getStyle("curveElevationGuideShift"),a=r.getStyle("curveElevationIntersectSize"),s=t.distanceToSquared({x:i.x+o[0],y:i.y+o[1]});if(!(s>a*a)){var c=e.highlight={};c.type="elevation";var l=new Ad.Math.Vector2(t.x,t.y,i.e);return e.editing={type:"elevation",startPoint:l},e._interactor.setCursor("crosshair"),!0}},rh.prototype._checkEditCtrlPoint=function(t){var e=this;if(e.activing&&!e.activing.selections){var n=e.getCurrentSelectintStatus();if(n!==Ad.Curve.PointType.Straight){var i=e.activing.pairs;if(i){var r=e._interactor.getStyle("curvePointIntersectSize");r*=r;var o,a,s,c,l,u,d,h,f,g=1/0;for(d=0,f=i.length;f>d;d++)for(c=i[d],h=0;2>h;h++)l=0===h?"c1":"c2",c[l]&&(u=t.distanceToSquared(c[l]),g>u&&(g=u,o=c,a=d,s=l));if(g>r)return!1;e.activing.hlpair=o,e.activing.hltype=s;var p=e.highlight={};return p.type="changeCtrlPoint",p.point=o[s],e.editing={type:"ctrlPoint",pair:o,pairId:a,ctrlType:s,direction:o[s].clone().sub(e.activing.point).normalize()},e._interactor.setCursor("crosshair"),!0}}}},rh.prototype.startEdit=function(t,e){t.startDragging(e);var n=this;n.highlight&&"insertKnot"===n.highlight.type&&(n.insertKnot(),n.gatherSingleTarget(n._interactor.gv,n.target),n.activing=null,n._checkEditRealPoint(n._interactor._getLogicalPoint(e)));var i=n._activing;if(i){var r=n.editing?n.editing.type:null;"ctrlPoint"===r?i.editingCtrl={pairId:n.editing.pairId,type:i.hltype}:"realPoint"===r&&(i.editingCtrl=!1)}var o=n.highlight,a=d.Default.isCtrlDown(e);if(!o||co()||Bs(e)){var s=n._interactor.gv;if(!s.setFocus(e)||s._scrolling)return;a?n._multiSelect={startPoint:s.lp(e)}:s.isPannable()&&(Ls(e)||Bs(e))&&(n._pan={tx:s.tx(),ty:s.ty()},t.fi({kind:"beginPan",event:e}))}else if("changeRealPoint"===o.type){var c,l=n.activing?n.activing.point:null,u=n.activing?n.activing.selections:null;if(a&&n.activing)l===o.point?(u?(n.activing={point:u[0]},u.length>1&&(u.splice(0,1),n.activing.selections=u)):n.activing=null,n.editing=null):u&&(c=u.indexOf(o.point))>=0?(u.length>1?u.splice(c,1):delete n.activing.selections,n.editing=null):u?(u.push(l),n.activing={point:o.point,selections:u}):n.activing={point:o.point,selections:[l]};else if(u)l===o.point||((c=u.indexOf(o.point))>=0?(u.splice(c,1,l),n.activing={point:o.point,selections:u}):n.activing={point:o.point});else{var h;l===o.point&&(h=n.activing.status),n.activing={point:o.point},h&&(n.activing.status=h)}t.fi({kind:"beginEditPoint",event:e})}},rh.prototype.insertKnot=function(){var t=this,e=t.highlight,n=t.screenInfo.curve;n.insertKnot(e.bezier,e.point.t),t._writeToHt()},rh.prototype._writeToHt=function(){var t,e,n,i,o=this,a=o.screenInfo.curve,s=a.toHtShape(),c=s.points,l=[],u=s.segments,h=o._interactor.gv,f=o.target,g=f instanceof d.Edge,p=Ad.getDataMatrix(f).invert();i=f instanceof d.Polyline,i&&(n=f.getElevation());for(var v=0,y=c.length;y>v;v++)t=c[v],e=Ad.toWorldPosition(h,t),e=p.apply(e),t.e!=r&&t.e!==n&&(e.e=t.e),l.push(e);if(f._writing=!0,g){f.s("edge.type","points"),f.setStyle("edge.segments",u),f.setStyle("edge.points",l.slice(1,l.length-1)),f.setStyle("edge.source.offset.x",0),f.setStyle("edge.source.offset.y",0),f.setStyle("edge.target.offset.x",0),f.setStyle("edge.target.offset.y",0);var _=o._nextChangeEdgeHost;delete o._nextChangeEdgeHost,_&&("source"===_.type?f.setSource(_.host):f.setTarget(_.host)),o._writeEdgeHostAnchor("source",l[0]),o._writeEdgeHostAnchor("target",l[l.length-1])}else l.length?(f.setSegments(u),f.setPoints(l,!0)):f.removeFromDataModel();delete f._writing},rh.prototype._writeEdgeHostAnchor=function(t,e){var n=this,i=n.target,o=n._calcHostAnchor(i,t,e);o.index!==r?(i.setStyle("edge."+t+".index",o.index),i.setStyle("edge."+t+".percent",r),i.setStyle("edge."+t+".anchor.x",r),i.setStyle("edge."+t+".anchor.y",r)):o.percent!==r?(i.setStyle("edge."+t+".percent",o.percent),i.setStyle("edge."+t+".index",r),i.setStyle("edge."+t+".anchor.x",r),i.setStyle("edge."+t+".anchor.y",r)):(i.s("edge."+t+".anchor.x",o.x),i.s("edge."+t+".anchor.y",o.y),o.offsetX||o.offsetY?(i.s("edge."+t+".offset.x",o.offsetX),i.s("edge."+t+".offset.y",o.offsetY)):(i.s("edge."+t+".offset.x",0),i.s("edge."+t+".offset.y",0)))},rh.prototype._calcHostAnchor=function(t,e,n,i){i||(i="source"===e?t.getSource():t.getTarget());var r=this._interactor.gv,o=r.calculateAttachPoint(i,n);if(o)return o.info;if(Li(i)){var a=r.calculateEdgePosition(i,n);return a}var s=i.getRotation(),c=i.getAnchor();Gi(i,r)&&(s=0);var l=i.getScale();if(s||l.x<0||l.y<0){var u=i.getMatrix(),d=u.tfi(n),h=i.getSize();return{x:d.x/h.width+c.x,y:d.y/h.height+c.y}}var f=al(r,i),g={x:(n.x-f.x)/f.width,y:(n.y-f.y)/f.height};return g},rh.prototype._handlePanning=function(t){var e=this,n=e._pan;if(n){n.started=!0;var i=e._interactor,r=i.gv,o=i._lastClientPoint,a=Us(t),s=Dl(r,a,o);r.setTranslate(n.tx+s.x,n.ty+s.y),e.gatherSingleTarget(i.gv,e.target),i._42(),i.fi({kind:"betweenPan",event:t})}},rh.prototype.handleEdit=function(t,e){var n=this,i=n.editing;if(n._pan)n._handlePanning(e);else{if(n._multiSelect)return n._multiSelect.endPoint=t.lp(e),void n._interactor.redraw();if(i){i.inEdit=!0;var o,a,s=n._interactor._getLogicalPoint(e),c=d.Default.isCtrlDown(e),l=d.Default.isShiftDown(e),u=i.type,h=n.activing;if(n._guideInfo=null,"ctrlPoint"===u&&l){var f=n.editing.direction.clone();R=h.point;var g=f.dot(s.clone().sub(R));s=f.setLength(g).add(R)}else if("ctrlPoint"===u||"realPoint"===u){if("realPoint"===u&&l){var p=n.editing.shiftGuide;o=p.point;var v=Math.abs(s.x-o.x),y=Math.abs(s.y-o.y);v>y&&v>p.limit&&"y"===p.dir&&(p.dir="x"),y>v&&y>p.limit&&"x"===p.dir&&(p.dir="y"),f=p.dir,"x"===f?(s.y=o.y,p.limit=Math.max(p.limit,v)):"y"===f&&(s.x=o.x,p.limit=Math.max(p.limit,y))}var _=n._isEditEdgeSourceTarget();if(_){var m=n._editEdgeSourceTarget(_,s,c);m&&(n.edgeEditResult=m,a=m.tipText)}else if(!c){var b=n._guidingToEdit(s,f),x="realPoint"===u?n._interactor.gridGuide.findClosest(s,f,!0):null,w=1/0,I=1/0;x&&(x.x&&(w=x.x),x.y&&(I=x.y));var S=!1;b&&(b.xList&&(Math.abs(b.x)<=Math.abs(w)?(S=!0,w=b.x):delete b.xList),b.yList&&(Math.abs(b.y)<=Math.abs(I)?(S=!0,I=b.y):delete b.yList),S&&(n._guideInfo=b)),isFinite(w)&&(s.x+=w),isFinite(I)&&(s.y+=I),S&&(b.v=s)}}var T=n.screenInfo.curve;if("realPoint"===i.type){R=i.point,R.e!==r&&(s.e=R.e),T.moveRealPoint(R,s),i.point=s,n.highlight.point=s;var C=h.status,M=h.selections;if(n.activing={point:s,status:C},M){var D=s.clone().sub(R),E=0;M.forEach((function(t){var e=t.clone().add(D);T.moveRealPoint(t,e),M[E++]=e})),n.activing.selections=M}}else if("ctrlPoint"===i.type){var P=h.pairs,O=P[i.pairId];T.moveCtrlPoint(O,s,i.ctrlType);var A=h.status,k=Ad.Curve.PointType;if((A===k.Mirrored||A===k.Asymmetric)&&O.c1&&O.c2){var R=new Ad.Math.Vector2(h.point),z="c1"===i.ctrlType?"c2":"c1";if(A===Ad.Curve.PointType.Mirrored)T.moveCtrlPoint(O,R.clone().multiplyScalar(2).sub(s),z);else if(A===k.Asymmetric){g=O[z].clone().sub(R).length();var N=R.clone().sub(O[i.ctrlType]).setLength(g).add(R);isNaN(N.x)||T.moveCtrlPoint(O,N,z)}}h._firePointChange()}else if("elevation"===i.type){o=i.startPoint;var V=o.e+(o.y-s.y)/t._zoom;n._setCurrentPointImpl("e",V),h._firePointChange(),a="E: "+Ad.toFixed(V)}var L=d.Default.getLogicalPoint(e,n._interactor._canvas);if(L.x+=Ad.Icons.TipShiftX,L.y+=Ad.Icons.TipShiftY,!a){var B=Ad.toWorldPosition(t,s);a=Ad.toFixed(B.x)+", "+Ad.toFixed(B.y)}n.tipInfo={helperPos:L,text:a,size:a.length},n._writeToHt(),n._interactor.fi({kind:"betweenEditPoint",event:e})}}},rh.prototype._setCurrentPointImpl=function(t,n){var i=this,o=i._activing;if(!o)return!1;var a=i.target;if(!a)return!1;var s=o.getCurrentEditingPoint();if(!s)return!1;var c=o.editingCtrl;if(!c)var l=s.clone();if("e"===t)s.e=n;else{var u;if("x"===t||"y"===t){var d=o._lastFirePoint;u="x"===t?{x:n,y:d?d.y:0}:{x:d?d.x:0,y:n}}else"object"==e(t)?(u=t,t.e!==r&&(s.e=t.e)):(u={x:arguments[0],y:arguments[1]},arguments[2]!==r&&(s.e=arguments[2]));var h=Ad.getDataMatrix(a);u=Ad.toScreenPosition(i._interactor.gv,h.apply(u)),s.x=u.x,s.y=u.y}if(!c){var f=l.multiplyScalar(-1).add(s);s.e&&l.e&&(f.e=s.e-l.e),i.screenInfo.curve.moveCtrlDueToRealPointMovement(s,f)}return!0},rh.prototype.setCurrentPoint=function(t,e){return!!this._setCurrentPointImpl(t,e)&&(this._writeToHt(),!0)},rh.prototype._isEditEdgeSourceTarget=function(){var t=this,e=t.target;if(!(e instanceof d.Edge))return!1;var n=t.editing.point,i=t.screenInfo.curve._curves;return n===i[0]._p1?"source":n===i[i.length-1]._p4&&"target"},rh.prototype._editEdgeSourceTarget=function(t,e,n){var i,o=this,a=o.target;if(i="source"===t?a.getSource():a.getTarget()){var s,c,l,u,d=o._interactor.gv,h=Ad.toWorldPosition(d,e),f=o._calcHostAnchor(a,t,h,i);if(f.index!==r||f.percent!==r?f.distance*d.getZoom()>o._interactor.getStyle("edgeHostEdgeMaxDistance"):!!o._interactor.getStyle("edgeHostDetectPerFrame")||(f.x<0||f.x>1||f.y<0||f.y>1)){var g=d.getDataAt(h,(function(e){return!!d.isSelectable(e)&&(e!==i&&!!a.canSetSourceTarget(e,t))}));if(g){var p=o._calcHostAnchor(a,t,h,g);i=g,o._nextChangeEdgeHost={type:t,host:g},f=p}}if(n||f.x===r)(f.percent!==r||f.index!==r)&&(c=f.point);else{var v=o._interactor.getStyle("anchorRound"),y=o._interactor.getStyle("anchorSensitivity");s=d.calculateAttachPoint(i,h),s?f=s.info:(f.x=Ad.roundTo(f.x,v,y),f.y=Ad.roundTo(f.y,v,y)),c=i.getAttachPosition(f.x,f.y,f.offsetX,f.offsetY)}return c&&(l=Ad.toScreenPosition(d,c),e.x=l.x,e.y=l.y),o._edgeHostGuideInfo={corners:Ad.getTargetCornersOnScreen(d,i),attach:s?s.index:-1,host:i},f.percent!==r?u="percent: "+f.percent.toFixed(2):f.index!==r?u="index: "+f.index:(u=f.x.toFixed(2)+", "+f.y.toFixed(2),(f.offsetX||f.offsetY)&&(u+=" offset: "+f.offsetX.toFixed(2)+", "+f.offsetY.toFixed(2))),{host:i,anchor:f,tipText:u}}},rh.prototype._guidingToEdit=function(t,e){var n,i,r=this;if(n=r.screenInfo.curve){i=n._curves;var o,a,s,c,l,u,d,h,f=1/0,g=1/0,p=[];for(r.editing&&"realPoint"===r.editing.type&&(h=r.editing.point),l=0,u=2*i.length;u>l;l++)d=i[Math.floor(l/2)][l%2?"_p4":"_p1"],p.indexOf(d)>=0||(p.push(d),h&&h===d||(s=d.x-t.x,c=d.y-t.y,Math.abs(s)<Math.abs(f)?(f=s,o=[d]):s===f&&o.push(d),Math.abs(c)<Math.abs(g)?(g=c,a=[d]):c===g&&a.push(d)));var v=r._interactor.getStyle("smartGuideThreshold");if((Math.abs(f)>v||"y"===e)&&(o=null),(Math.abs(g)>v||"x"===e)&&(a=null),o||a){var y=!1,_={};if(o&&(y=!0,_.xList=o,_.x=f),a&&(y=!0,_.yList=a,_.y=g),y)return _}}},rh.prototype._46O=function(t){var e=this;e.editing&&(e.editing=null,e._interactor.fi({kind:"endEditPoint",event:t})),e._guideInfo=null,e._edgeHostGuideInfo=null,e._pan&&(e._pan=null,e._interactor.fi({kind:"endPan",event:t})),e._multiSelect&&(e._handleMultiSelect(e._multiSelect),e._multiSelect=null),e.tipInfo=null,e.edgeEditResult=null},rh.prototype._handleMultiSelect=function(t){if(t.startPoint&&t.endPoint){var e,n,i,o,a,s=this,c=s._interactor,l=c.gv,u=Ad.toScreenPosition(l,t.startPoint),h=Ad.toScreenPosition(l,t.endPoint),f=d.Default.unionPoint(u,h),g=s.screenInfo.curve._curves,p=[],v=function(t){t.x>=f.x&&t.y>=f.y&&t.x<=f.x+f.width&&t.y<=f.y+f.height&&p.indexOf(t)<0&&p.push(t)};for(e=0,n=g.length;n>e;e++)a=g[e],v(a._p1),v(a._p4);if(p.length){var y=s.activing||{},_=y.selections||[];for(y.point&&_.push(y.point),e=0,n=_.length;n>e;e++)i=_[e],o=p.indexOf(i),o>=0?p[o]=r:p.push(i);var m=p;for(p=[],e=0,n=m.length;n>e;e++)m[e]&&p.push(m[e]);n=p.length,0===n?s.activing=null:1===n?s.activing={point:p[0]}:(i=p[n-1],s.activing={point:i,selections:p.splice(0,n-1)}),c.redraw()}}},rh.prototype._canDeletePoint=function(t,e){var n=this.target;if(!(n instanceof d.Edge))return!0;var i=t._curves[0],r=t._curves[t._curves.length-1];return i._p1!==e&&r._p4!==e},rh.prototype.handleDelete=function(){var t=this;if(t.activing&&t.screenInfo){var e=d.Default.isShiftDown(),n=t.screenInfo.curve;t._canDeletePoint(n,t.activing.point)&&n.deleteRealPoint(t.activing.point,e),t.activing.selections&&t.activing.selections.forEach((function(i){t._canDeletePoint(n,i)&&n.deleteRealPoint(i,e)})),t.activing=null,delete t.editing,delete t.tipInfo,delete t.edgeEditResult,delete t._pan,delete t._multiSelect,t._writeToHt(),t._interactor.fp("deleteShapePoint",!1,!0)}},rh.prototype.handleDoubleClick=function(t){var e=this,n=e._interactor._getLogicalPoint(t);if(e.screenInfo&&e._checkEditRealPoint(n)){var i=e.getCurrentSelectintStatus(),r=Ad.Curve.PointType;return i=i===r.Mirrored?r.Straight:r.Mirrored,e._setCurrentSelectionStatus(i),e._interactor._42(),!0}},rh.prototype._drawHighlight=function(t){var e=this,n=e.highlight;if(n){var i=n.bezier,r=e._interactor;i&&Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeHighlightCurve,[i._p1.x,i._p1.y,i._p2.x,i._p2.y,i._p3.x,i._p3.y,i._p4.x,i._p4.y]);var o=n.point;o&&"insertKnot"===n.type&&Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeHighlighPoint,o)}},rh.prototype._drawGuide=function(t){var e=this,n=e._guideInfo;if(n){var i,r,o,a,s=n.v;for(i=0;2>i;i++)if(a=0===i?n.xList:n.yList)for(r=0,o=a.length;o>r;r++)Ad.Icons.DrawIcon(e._interactor,t,Ad.Icons.ShapeGuideLine,[s.x,s.y,a[r].x,a[r].y])}},rh.prototype._drawCurrentPoint=function(t){var e=this;if(e.activing){var n=e.activing,i=e.getCurrentSelectintStatus(),r=e._interactor;if(i!==Ad.Curve.PointType.Straight){var o=n.pairs;n.hlpair,n.hltype;var a,s,c,l=n.selections,u=n.editingCtrl;if(o&&!l)for(s=0,c=o.length;c>s;s++)a=o[s],u&&s===u.pairId&&a[u.type]?Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeActivingCtrl,{point:a.point,c1:a.c1,c2:a.c2,hl:u.type}):Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeActivingCtrl,a)}Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeHighlighRealPoint,e.activing.point),l&&l.forEach((function(e){Ad.Icons.DrawIcon(r,t,Ad.Icons.ShapeHighlighRealPoint,e)}))}},rh.prototype.clear=function(){var t=this;t.editing=null,t._guideInfo=null,t.activing=null,t.highlight=null},rh.prototype._42=function(t){var e=this;e.info={},e.editing||(e.screenInfo=null);var i=e._interactor;if(i.editDetail){var r=i.gv;if(!e.target||!r.isSelected(e.target)||!r.isVisible(e.target))return i.editDetail=!1,void e.clear();if(e.gatherSingleTarget(r,e.target),Ad.Icons.DrawIcon(i,t,Ad.Icons.ShapeBgCurve,e.screenInfo),e._drawHighlight(t),e._drawCurrentPoint(t),e._getRealPoint().forEach((function(e){Ad.Icons.DrawIcon(i,t,Ad.Icons.ShapePoint,e)})),e._drawGuide(t),e.tipInfo&&Ad.Icons.DrawIcon(i,t,Ad.Icons.TipHelper,e.tipInfo),e._edgeHostGuideInfo){Ad.Icons.DrawIcon(i,t,Ad.Icons.NodeHoverGuide,e._edgeHostGuideInfo.corners);var o=e._edgeHostGuideInfo.host;if(o){var a=r.getAttachPoints(o);if(a&&a.length)for(var s=0,c=a.length;c>s;s++){var l=a[s],u=o.getAttachPosition(l.x,l.y,l.offsetX,l.offsetY);u=Ad.toScreenPosition(r,u),u.isAttach=e._edgeHostGuideInfo.attach===s,Ad.Icons.DrawIcon(i,t,Ad.Icons.AttachPoint,u)}}}if(e._interactor.getStyle("curveElevationVisible")&&e.target instanceof d.Polyline&&e.activing){var h=e.activing.getCurrentEditingPoint();h&&Ad.Icons.DrawIcon(i,t,Ad.Icons.EdgeElevationGuide,h)}if(e.edgeEditResult&&e._drawEdgeHostHighlight(t,e.edgeEditResult.host,e.edgeEditResult.anchor),e._multiSelect&&e._multiSelect.endPoint){var f=d.Default.unionPoint(Ad.toScreenPosition(r,e._multiSelect.startPoint),Ad.toScreenPosition(r,e._multiSelect.endPoint));f.color=r.getRectSelectBorderColor(),t.save(),t.setTransform(1,0,0,1,0,0);var g=n.devicePixelRatio,p=f.borderWidth=Math.round(g);p/=2,f.x=Math.round(f.x*g)+p,f.y=Math.round(f.y*g)+p,f.width=Math.round(f.width*g),f.height=Math.round(f.height*g),Ad.Icons.DrawIcon(i,t,Ad.Icons.SimpleRect,f),t.restore()}}else e.clear()},rh.prototype._drawEdgeHostHighlight=function(t,e,n){this.drawEdgeHostHighlight(t,e,n),this._interactor.redraw()},rh.prototype.drawEdgeHostHighlight=function(t,e,n){if(Li(e)){var i,o,a,s,c=this,l=c._interactor,u=l.gv,d=u.getDataUI(e),h=Hl(d),f=[];for(a=0,s=h.points.length;s>a;a++)o=Ad.toScreenPosition(u,h.points.get(a)),f.push(o.x,o.y);h.segments&&(i=h.segments.toArray());var g=l.getStyle("edgeHostHighlighPeriod"),p=l.getStyle("edgeHostEdgeHighlighColor");Ad.Icons.DrawIcon(l,t,Ad.Icons.ShapeBgCurve,{P:f,S:i,color:p,dynamicVisible:n.index===r,dynamicPeriod:g}),p=l.getStyle("edgeHostPointHighlighColor");var v=Yl(d);for(a=0,s=v.length;s>a;a++){var y=v[a],_=Ad.toScreenPosition(u,y);Ad.Icons.DrawIcon(l,t,Ad.Icons.ShapePoint,{point:{x:_.x,y:_.y},color:p,size:12,dynamicVisible:a===n.index,dynamicPeriod:g})}}},rh.prototype._getRealPoint=function(){var t,e=this.screenInfo,n=e.P,i=e.S,r=-1,o=[],a=-1,s=i.length;return i.each((function(e){a++;var c=1;if(3===e)c=2;else if(4===e)c=3;else if(5===e)return;r+=c,t=a+1>=s||1===i.get(a+1),o.push({point:{x:n[2*r],y:n[2*r+1]},segmentIndex:a,pointIndex:r,isEnd:t})})),o},rh.prototype.getEditingPointsInfo=function(t){var e=this,n=e.activing;if(!n)return!1;var i=n.point;if(!i)return!1;var r=this._getRealPoint(),o=[{screen:i}];n.selections&&n.selections.forEach((function(t){o.push({screen:t})}));var a,s,c=r.length;return o.forEach((function(t){for(a=0;c>a;a++)if(s=r[a],t.screen.isNearEnough(s.point)){t.segmentIndex=s.segmentIndex,t.pointIndex=s.pointIndex,t.point=e.target.getPoints().get(s.pointIndex);break}})),t&&o.sort((function(t,e){return t.segmentIndex-e.segmentIndex})),o};var vh=Ad.MoveHelper=function(t){var e=this;e.catalog="Move",e._interactor=t};vh.prototype={},vh.prototype.constructor=vh,vh.prototype.calcShift=function(t,e,n){var i,r,o=this,a=o._interactor.gv,s=a.lp(e);if("beginMove"===t&&o._gatherGridInfo(n._lastLogicalPoint||s),i=o._target){var c,l=i.downPosition;if(l){var u=o._interactor.getStyle("moveSensitivity")/a._zoom;if(l.distanceTo(s)<u)return{x:0,y:0};delete i.downPosition}r=d.Default.isShiftDown(e),r&&(s=o._dealShiftDown(s),c=i.shiftGuide.dir);var h,f=i.rawPos={x:i.pos.x+s.x-i.lp.x,y:i.pos.y+s.y-i.lp.y};if(d.Default.isCtrlDown(e)){if(h=o._calcShiftByAddon(),o._target.node instanceof Ad.Group){var g=o._target.node;g._position.x+=h.x,g._position.y+=h.y}return h}for(var p,v=i.x+f.x,y=i.y+f.y,_={x:v,y:y},m={x:v+i.w/2,y:y+i.h/2},b={x:v+i.w,y:y+i.h},x=o._interactor.rectGuide,w=o._interactor.gridGuide,I=[x.findClosest(_,c),x.findClosest(m,c),x.findClosest(b,c),w.findClosest(_,c),w.findClosest(m,c),w.findClosest(b,c)],S=1/0,T=1/0,C=0,M=I.length;M>C;C++)p=I[C],p&&(v=p.x,y=p.y,isFinite(v)&&Math.abs(v)<Math.abs(S)&&(S=v),isFinite(y)&&Math.abs(y)<Math.abs(T)&&(T=y));if(isFinite(S)||(S=0),isFinite(T)||(T=0),h=o._calcShiftByAddon(S,T),o._target.node instanceof Ad.Group){g=o._target.node;g._position.x+=h.x,g._position.y+=h.y}var D=i.node;if(!Gi(D,a)){var E=f.x+S,P=f.y+T;o._interactor.rectGuide.gatherLines({node:D,x:i.x+E,y:i.y+P,w:i.w,h:i.h},c)}return h}},vh.prototype._calcShiftByAddon=function(t,e){var n=this._target,i=n.rawPos,r=n.node.getPosition();return t=t||0,e=e||0,{x:i.x-r.x+t,y:i.y-r.y+e}},vh.prototype._dealShiftDown=function(t){var e=this,n=e._target.shiftGuide,i=e._target.lp,r=Math.abs(t.x-i.x),o=Math.abs(t.y-i.y);r>o&&r>n.limit&&"y"===n.dir&&(n.dir="x"),o>r&&o>n.limit&&"x"===n.dir&&(n.dir="y");var a=n.dir;return"x"===a?(t.y=i.y,n.limit=Math.max(n.limit,r)):"y"===a&&(t.x=i.x,n.limit=Math.max(n.limit,o)),t},vh.prototype._gatherGridInfo=function(t){var e,n=this,i=n._interactor,r=i._getValidSelection();if(r.length){if(1===r.length){if(e=r[0],!e.getRect)return void(n._target=null)}else if(e=Ad.Group.findOrCreateGroup(r),!e)return void(n._target=null)}else{r=i.gv.sm().getSelection();if(r.length&&(e=r.get(0),!e.getRect))return void(n._target=null)}var o=e.getPosition(),a=e.getRect();n._target={node:e,x:a.x-o.x,y:a.y-o.y,w:a.width,h:a.height,lp:{x:t.x,y:t.y},pos:{x:o.x,y:o.y},shiftGuide:{dir:"x",limit:0},downPosition:new Ad.Math.Vector2(t)},i.rectGuide.gatherRects()},vh.prototype.clear=function(){var t=this;t._interactor.rectGuide.clear(),t._interactor._42()};var yh="directional",_h="point",mh="spot",bh="light.color",xh={},wh=function(t,e){Ei(e)&&ti.test(e)?Ig(t,e):Ai(e)&&e.modelType?Sg(t,e):qn[t]=e},Ih=function(t){if(Ai(t))return t.modelType?t.uuid?qn[t.uuid]:(t.uuid=d.Math.generateUUID(),Sg(t.uuid,t),r):t;var e=qn[t];return t&&e===r&&ti.test(t)&&(bg&&bg[t]||Ig(t,t)),e},Sh=function(t,e){t.frameStack?t.frameStack.push(e):t.frameStack=[e],t.bindFramebuffer(t.FRAMEBUFFER,e)},Th=function(t){var e=t.frameStack;if(e){if(e.pop(),e.length)return void t.bindFramebuffer(t.FRAMEBUFFER,e[e.length-1]);t.frameStack=null}t.bindFramebuffer(t.FRAMEBUFFER,null)};Wi(f,{graph3dViewAttributes:u,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:B/60,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:oa,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:B/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dMaxVectorCacheTime:50,setShape3dModel:wh,getShape3dModel:Ih,createMatrix:function(t,e){Ri(t)||(t=[t]);for(var n=t.length-1;n>=0;n--){var i=t[n];e=Pc(i.mat,i.s3,i.r3,i.rotationMode,i.t3,e)}return e},transformVec:function(t,e){return Ic(t,e)},glBindFrame:Sh,glUnbindFrame:Th,createBoxModel:function(){return{vs:Eg,ns:Ag,uv:Og,is:Pg}},createRoundRectModel:function(t,e){return Ug.roundRect(t,e)},createStarModel:function(t,e){return Ug.star(t,e)},createRectModel:function(t,e){return Ug.rect(t,e)},createTriangleModel:function(t,e){return Ug.triangle(t,e)},createRightTriangleModel:function(t,e){return Ug.rightTriangle(t,e)},createParallelogramModel:function(t,e){return Ug.parallelogram(t,e)},createTrapezoidModel:function(t,e){return Ug.trapezoid(t,e)},createSmoothSphereModel:function(t,e,n,i,r,o,a){return Jl(new Nu(t,e,n,i,r,o,a))},createSphereModel:function(t,e,n,i,r,o){return t?Ng(t,e,n,i,r,o):f.createSmoothSphereModel()},createSmoothConeModel:function(t,e,n,i,r){return Fg(t,e,n,i,r)},createConeModel:function(t,e,n,i,r,o){return t?jg(t,e,n,i,r,o):Fg(o)},createSmoothCylinderModel:function(t,e,n,i,r,o,a,s){return Jl(new zu(t,e,n,i,r,o,a,s))},createCylinderModel:function(t,e,n,i,r,o,a){return t?Gg(t,e,n,i,r,o,a):Bg(o,a)},createSmoothTorusModel:function(t,e,n,i,r,o){return Jl(new Vu(t,e,n,i,r,o))},createTorusModel:function(t,e,n,i,r,o,a){return t?Lg(t,e,n,i,r,o,a):Vg(o,a)},createExtrusionModel:function(t,e,n,i,r,o,a,s){return Hg(t,e,n,i,r,o,a,s)},createSmoothRingModel:function(t,e,n,i,r,o){for(var a=[],s=0;s<t.length-1;s+=2)a.push({x:t[s],y:t[s+1]});for(t=Mo(a,e,n)[0],a=[],s=0;s<t.length;s++){var c=t[s];a.push(new ru(c.x,0,c.y))}return Jl(new Fu(a,o,i,r))},createTextGeometry:function(t,e){return Jl(new ju(t,e))},loadFontFace:function(t,e){f.xhrLoad(t,(function(t){if(!t)return e();var n;try{n=JSON.parse(t)}catch(K){n=JSON.parse(t.substring(65,t.length-2))}Tu.loadFace(n),e&&e(n.familyName.toLowerCase())}),e?null:{sync:!0})},createRingModel:function(t,e,n,i,r,o,a,s,c,l){for(var d=[],h=0;h<t.length-1;h+=2)d.push({x:t[h],y:t[h+1]});o=o||f.shapeSide,a=a||0,s=s||o;var g,p,v,y,_,m,b,x,w,I,S,T,C,M,D,E,P,O=[],A=[],k=c?[]:u,z=c?[]:u,V=l?[]:u,L=l?[]:u,B=i?[]:u,G=i?[]:u,F=r?[]:u,j=r?[]:u,H=(t=Mo(d,e,n),ur(t)),U=0,Z=2*Math.PI/o;return t.forEach((function(t){if(v=t.length,v>1){if(y=t[0],i)for(m=y.x,x=y.y,h=a;s>h;h++)S=h+1,T=h*Z,C=S*Z,M=R(T),D=N(T),E=R(C),P=N(C),B.push(M*m,x,-D*m,E*m,x,-P*m,0,x,0),G.push(.5-.5*M,.5-.5*D,.5-.5*E,.5-.5*P,.5,.5);for(I=0;v>I;I++){for(_=t[I],m=y.x,b=_.x,x=y.y,w=_.y,g=U/H,U+=Ws(y,_),p=U/H,h=a;s>h;h++)S=h+1,T=h*Z,C=S*Z,M=R(T),D=N(T),E=R(C),P=N(C),O.push(M*b,w,-D*b,E*b,w,-P*b,M*m,x,-D*m,E*b,w,-P*b,E*m,x,-P*m,M*m,x,-D*m),A.push(h/o,p,S/o,p,h/o,g,S/o,p,S/o,g,h/o,g),c&&h===a&&(k.push(0,x,0,0,w,0,M*b,w,-D*b,M*b,w,-D*b,M*m,x,-D*m,0,x,0),z.push(0,.5-x,0,.5-w,2*b,.5-w,2*b,.5-w,2*m,.5-x,0,.5-x)),l&&S===s&&(V.push(0,x,0,E*b,w,-P*b,0,w,0,E*b,w,-P*b,0,x,0,E*m,x,-P*m),L.push(1,.5-x,1-2*b,.5-w,1,.5-w,1-2*b,.5-w,1,.5-x,1-2*m,.5-x));y=_}if(r)for(m=y.x,x=y.y,h=a;s>h;h++)S=h+1,T=h*Z,C=S*Z,M=R(T),D=N(T),E=R(C),P=N(C),F.push(E*m,x,-P*m,M*m,x,-D*m,0,x,0),j.push(.5-.5*E,.5+.5*P,.5-.5*M,.5+.5*D,.5,.5)}})),{vs:O,uv:A,bottom_vs:F,bottom_uv:j,top_vs:B,top_uv:G,from_vs:k,from_uv:z,to_vs:V,to_uv:L}}},!0),Wi(g,{"3d.move.mode":r,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":r,"edge.gradient.color":r,"edge.source.t3":r,"edge.target.t3":r,"light.type":_h,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":B/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":_a,"wf.short":!1,"wf.mat":r,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,batch:r,"transparent.mask":!1,brightness:r,"select.brightness":.7,"repeat.uv.length":r,alphaTest:.4,renderTextureSamples:4,"highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","color.empty":[0,0,0,0],"shape3d.vector.dynamic.maxsize":2048,"label.face":ft,"label.t3":r,"label.r3":r,"label.texture.scale":2,"label.rotationMode":qu,"label.light":!1,"label.blend":r,"label.reverse.flip":!1,"label.reverse.color":ia,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":ft,"label2.t3":r,"label2.r3":r,"label2.texture.scale":2,"label2.rotationMode":qu,"label2.light":!1,"label2.blend":r,"label2.reverse.flip":!1,"label2.reverse.color":ia,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":ft,"note.t3":r,"note.r3":r,"note.texture.scale":2,"note.rotationMode":qu,"note.light":!1,"note.blend":r,"note.reverse.flip":!1,"note.reverse.color":ia,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":ft,"note2.t3":r,"note2.r3":r,"note2.texture.scale":2,"note2.rotationMode":qu,"note2.light":!1,"note2.blend":r,"note2.reverse.flip":!1,"note2.reverse.color":ia,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:r,"shape3d.color":va,"shape3d.top.color":r,"shape3d.bottom.color":r,"shape3d.from.color":r,"shape3d.to.color":r,"shape3d.image":r,"shape3d.top.image":r,"shape3d.bottom.image":r,"shape3d.from.image":r,"shape3d.to.image":r,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":r,"shape3d.side.to":r,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":r,"shape3d.opacity":r,"shape3d.reverse.flip":!1,"shape3d.reverse.color":ia,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":r,"shape3d.uv.scale":r,"shape3d.top.uv.offset":r,"shape3d.top.uv.scale":r,"shape3d.bottom.uv.offset":r,"shape3d.bottom.uv.scale":r,"shape3d.from.uv.offset":r,"shape3d.from.uv.scale":r,"shape3d.to.uv.offset":r,"shape3d.to.uv.scale":r,"shape3d.top.cap":r,"shape3d.bottom.cap":r,"shape3d.start.angle":0,"shape3d.sweep.angle":G,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.autorotate":!1,"shape3d.fixSizeOnScreen":r,"shape3d.image.cache":!1,"shape3d.alwaysOnTop":!1,"all.light":!0,"all.visible":!0,"all.color":va,"all.image":r,"all.blend":r,"all.opacity":r,"all.reverse.flip":!1,"all.reverse.color":ia,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":r,"all.uv.offset":r,"all.uv.scale":r,"all.discard.selectable":!0,mat:r,"left.mat":r,"right.mat":r,"top.mat":r,"bottom.mat":r,"front.mat":r,"back.mat":r},!0);var Ch,Mh=!1,Dh=[0,0,0,0],Eh={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:pt,2:vt,3:yt,4:_t,5:ft,6:gt}},Ph=function(t,e,n,i){if(e.getFaceVisible(t,n)){zf(e,Ec(t,e.getFaceMat(t,n)||e.getMat(t)));var r=e._26I;e.getFaceReverseCull(t,n)?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),Pf(r,e._prg.uFixPickReverseColor,Eh[n]),bf(r),Sf(r,i,6),xf(r),kf(e)}},Oh=function(t){return t instanceof Op},Ah=function(t){return[t.x,t.e||0,t.y]},kh=function(t,e,n){e=_o(e);for(var i=e[0],r=e[1],o=e[2];n--;)t.push(i,r,o)},Rh=function(t,e,n){e=_o(e);for(var i=e[0],r=e[1],o=e[2],a=e[3];n--;)t.push(i,r,o,a)},zh=function(t,e,n){if(e){var i,r,o,a=e[0],s=e[1],c=e[2],l=e[4],u=e[5],d=e[6],h=e[8],f=e[9],g=e[10],p=e[12],v=e[13],y=e[14],_=n.length,m=0;for(m=0;_>m;m+=3)i=n[m],r=n[m+1],o=n[m+2],t.push(a*i+l*r+h*o+p,s*i+u*r+f*o+v,c*i+d*r+g*o+y)}else Ui(t,n)},Nh=function(t,e){var n=e.s("light.intensity"),i=_o(e.s(bh)),r=i[0],o=i[1],a=i[2];1!==n&&(r*=n,o*=n,a*=n),t.push(r,o,a,e.s("light.disabled")?1:0)},Vh=function(t,e,n){Pf(e,n.uHeadlightRange,t._headlightRange);var i=t._headlightIntensity,r=_o(t._headlightColor);1!==i&&(r=[r[0]*i,r[1]*i,r[2]*i]),Pf(e,n.uHeadlightColor,[r[0],r[1],r[2],t._headlightDisabled?1:0]);var o=t._59O,a=t._spots,s=t._dirs;if(o.length){var c=[],l=[],u=[];o.forEach((function(e){Nh(c,e),Ui(l,t._transformPointToViewSpace(e.p3())),u.push(e.s("light.range"))})),e.uniform4fv(n.uPointColor,c),e.uniform1fv(n.uPointRange,u),e.uniform3fv(n.uPointPosition,l)}if(a.length){var d=[],h=[],f=[],g=[],p=[],v=[];a.forEach((function(e){Nh(d,e),Ui(h,t._transformPointToViewSpace(e.p3())),Ui(p,t._transformDirectionToViewSpace(e.p3(),e.s("light.center"))),f.push(e.s("light.range")),g.push(R(e.s("light.angle")/2)),v.push(e.s("light.exponent"))})),e.uniform4fv(n.uSpotColor,d),e.uniform1fv(n.uSpotRange,f),e.uniform1fv(n.uSpotAngle,g),e.uniform1fv(n.uSpotExponent,v),e.uniform3fv(n.uSpotPosition,h),e.uniform3fv(n.uSpotDirection,p)}if(s.length){var y=[],_=[];s.forEach((function(e){Nh(y,e),Ui(_,t._transformDirectionToViewSpace(e.p3()))})),e.uniform4fv(n.uDirColor,y),e.uniform3fv(n.uDirDirection,_)}},Lh=function(t){return t>0&&0===(t-1&t)},Bh=function(t){return t=O(0,A(B,t)),O(hc,A(B-hc,t))},Gh=function(){return.05+U()/2},Fh=function(t,e,n,i){var r,o=t.getEye();return t.isOrtho()?(r=pc(t.getCenter(),o),r[0]+=i[0],r[1]+=i[1],r[2]+=i[2]):r=o,jh(e,n,i,r)},jh=function(t,e,n,i){var r=yc(t,e),o=pc(i,n,!0),a=yc(o,e);if(k(a)<hc)return u;var s=(r-yc(n,e))/a;return[n[0]+o[0]*s,n[1]+o[1]*s,n[2]+o[2]*s]},Hh=function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},Uh=function(t,e,n,i){var r,o;if(!t)return r=H(e.y-n.y,n.x-e.x),{x:e.x+i*N(r),y:e.y+i*R(r)};if(!n)return r=H(t.y-e.y,e.x-t.x),{x:e.x+i*N(r),y:e.y+i*R(r)};var a=pc([t.x,t.y,0],[e.x,e.y,0],!0),s=pc([n.x,n.y,0],[e.x,e.y,0],!0),c=-(a[0]+s[0])/2,l=-(a[1]+s[1])/2,u=P(c*c+l*l);if(hc>u)return r=H(t.y-e.y,e.x-t.x),{x:e.x+i*N(r),y:e.y+i*R(r)};var d=t.x-e.x,h=t.y-e.y,f=n.x-e.x,g=n.y-e.y,p=P(d*d+h*h),v=P(f*f+g*g);r=z(yc(a,s))/2,o=a[1]*s[0]-a[0]*s[1]>0?-1:1,c/=u,l/=u;var y=i/N(r),_=O(p,v)/R(r);u=Math.min(y,_);var m={x:e.x+o*u*c,y:e.y+o*u*l};return n.b&&y>v/R(r)&&(m.adjust=!0),m},Zh=function(t){var e=t[1],n=t[2],i=t[3],r=t[6],o=t[7],a=t[11];t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=r,t[11]=t[14],t[12]=i,t[13]=o,t[14]=a},Wh=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],g=t[12],p=t[13],v=t[14],y=t[15],_=e*a-n*o,m=e*s-i*o,b=e*c-r*o,x=n*s-i*a,w=n*c-r*a,I=i*c-r*s,S=l*p-d*g,T=l*v-h*g,C=l*y-f*g,M=d*v-h*p,D=d*y-f*p,E=h*y-f*v,P=_*E-m*D+b*M+x*C-w*T+I*S;return P?(P=1/P,t[0]=(a*E-s*D+c*M)*P,t[1]=(i*D-n*E-r*M)*P,t[2]=(p*I-v*w+y*x)*P,t[3]=(h*w-d*I-f*x)*P,t[4]=(s*C-o*E-c*T)*P,t[5]=(e*E-i*C+r*T)*P,t[6]=(v*b-g*I-y*m)*P,t[7]=(l*I-h*b+f*m)*P,t[8]=(o*D-a*C+c*S)*P,t[9]=(n*C-e*D-r*S)*P,t[10]=(g*w-p*b+y*_)*P,t[11]=(d*b-l*w-f*_)*P,t[12]=(a*T-o*M-s*S)*P,t[13]=(e*M-n*T+i*S)*P,t[14]=(p*m-g*x-v*_)*P,void(t[15]=(l*x-d*m+h*_)*P)):u},qh=function(t,e){if(e){var n=e[0],i=e[1],r=e[2];t[12]=t[0]*n+t[4]*i+t[8]*r+t[12],t[13]=t[1]*n+t[5]*i+t[9]*r+t[13],t[14]=t[2]*n+t[6]*i+t[10]*r+t[14],t[15]=t[3]*n+t[7]*i+t[11]*r+t[15]}},Xh=function(t,e){if(e){var n=e[0],i=e[1],r=e[2];t[0]=t[0]*n,t[1]=t[1]*n,t[2]=t[2]*n,t[3]=t[3]*n,t[4]=t[4]*i,t[5]=t[5]*i,t[6]=t[6]*i,t[7]=t[7]*i,t[8]=t[8]*r,t[9]=t[9]*r,t[10]=t[10]*r,t[11]=t[11]*r}},Yh=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],g=e[11],p=e[12],v=e[13],y=e[14],_=e[15],m=n[0],b=n[1],x=n[2],w=n[3];return t[0]=m*i+b*s+x*d+w*p,t[1]=m*r+b*c+x*h+w*v,t[2]=m*o+b*l+x*f+w*y,t[3]=m*a+b*u+x*g+w*_,m=n[4],b=n[5],x=n[6],w=n[7],t[4]=m*i+b*s+x*d+w*p,t[5]=m*r+b*c+x*h+w*v,t[6]=m*o+b*l+x*f+w*y,t[7]=m*a+b*u+x*g+w*_,m=n[8],b=n[9],x=n[10],w=n[11],t[8]=m*i+b*s+x*d+w*p,t[9]=m*r+b*c+x*h+w*v,t[10]=m*o+b*l+x*f+w*y,t[11]=m*a+b*u+x*g+w*_,m=n[12],b=n[13],x=n[14],w=n[15],t[12]=m*i+b*s+x*d+w*p,t[13]=m*r+b*c+x*h+w*v,t[14]=m*o+b*l+x*f+w*y,t[15]=m*a+b*u+x*g+w*_,t},$h=function(t,e,n,i){var r,o,a,s,c,l,u,d,h,f,g=e[0],p=e[1],v=e[2],y=i[0],_=i[1],m=i[2],b=n[0],x=n[1],w=n[2];return k(g-b)<hc&&k(p-x)<hc&&k(v-w)<hc?wc(t):(u=g-b,d=p-x,h=v-w,f=1/P(u*u+d*d+h*h),u*=f,d*=f,h*=f,r=_*h-m*d,o=m*u-y*h,a=y*d-_*u,f=P(r*r+o*o+a*a),f?(f=1/f,r*=f,o*=f,a*=f):(r=0,o=0,a=0),s=d*a-h*o,c=h*r-u*a,l=u*o-d*r,f=P(s*s+c*c+l*l),f?(f=1/f,s*=f,c*=f,l*=f):(s=0,c=0,l=0),t[0]=r,t[1]=s,t[2]=u,t[3]=0,t[4]=o,t[5]=c,t[6]=d,t[7]=0,t[8]=a,t[9]=l,t[10]=h,t[11]=0,t[12]=-(r*g+o*p+a*v),t[13]=-(s*g+c*p+l*v),t[14]=-(u*g+d*p+h*v),t[15]=1,t)},Qh=function(t,e,n,i,r){var o=1/j(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t},Jh=function(t,e,n,i,r,o,a){var s=1/(e-n),c=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*c,t[14]=(a+o)*l,t[15]=1,t},Kh=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=o*s,t},tf=function(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t},ef=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=i+i,c=r+r,l=o+o,u=i*s,d=i*c,h=i*l,f=r*c,g=r*l,p=o*l,v=a*s,y=a*c,_=a*l;return t[0]=1-(f+p),t[1]=d+_,t[2]=h-y,t[3]=0,t[4]=d-_,t[5]=1-(u+p),t[6]=g+v,t[7]=0,t[8]=h+y,t[9]=g-v,t[10]=1-(u+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},nf=function(t,e){if(t.vr.enable){var n=t.vr.getViewMatrix(e);if(n)return n}return $h(e||_c(),t._eye,t._center,t._up)},rf=function(t,e){if(t.vr.enable){var n=t.vr.getProjectMatrix();if(n)return n}if(!e&&t._computedProjectMatrix)return bc(t._computedProjectMatrix);var i=t.getAspect(),r=t._near,o=t._far,a=_c();if(t._ortho){var s=t._orthoWidth/2,c=s/i;Jh(a,-s,s,-c,c,r,o)}else Qh(a,t._fovy,i,r,o);return a},of=function(t,e){if(!t)return u;var n=0,i=1,r=2,o=[],a=0,s=t.length,c=s/3;if(e){for(;s>a;a++)o[a]=0;for(a=0;a<e.length;a+=3){var l=[],d=[],h=[];l[n]=t[3*e[a+1]+n]-t[3*e[a]+n],l[i]=t[3*e[a+1]+i]-t[3*e[a]+i],l[r]=t[3*e[a+1]+r]-t[3*e[a]+r],d[n]=t[3*e[a+2]+n]-t[3*e[a+1]+n],d[i]=t[3*e[a+2]+i]-t[3*e[a+1]+i],d[r]=t[3*e[a+2]+r]-t[3*e[a+1]+r],h[n]=l[i]*d[r]-l[r]*d[i],h[i]=l[r]*d[n]-l[n]*d[r],h[r]=l[n]*d[i]-l[i]*d[n];for(var f=0;3>f;f++)o[3*e[a+f]+n]+=h[n],o[3*e[a+f]+i]+=h[i],o[3*e[a+f]+r]+=h[r]}}else for(a=0;c>a;a+=3){l=[],d=[],h=[];l[n]=t[3*(a+1)+n]-t[3*a+n],l[i]=t[3*(a+1)+i]-t[3*a+i],l[r]=t[3*(a+1)+r]-t[3*a+r],d[n]=t[3*(a+2)+n]-t[3*(a+1)+n],d[i]=t[3*(a+2)+i]-t[3*(a+1)+i],d[r]=t[3*(a+2)+r]-t[3*(a+1)+r],h[n]=l[i]*d[r]-l[r]*d[i],h[i]=l[r]*d[n]-l[n]*d[r],h[r]=l[n]*d[i]-l[i]*d[n];for(f=0;3>f;f++)o[3*(a+f)+n]=h[n],o[3*(a+f)+i]=h[i],o[3*(a+f)+r]=h[r]}for(a=0;s>a;a+=3){var g=[];g[n]=o[a+n],g[i]=o[a+i],g[r]=o[a+r];var p=P(g[n]*g[n]+g[i]*g[i]+g[r]*g[r]);0===p&&(p=hc),g[n]=g[n]/p,g[i]=g[i]/p,g[r]=g[r]/p,o[a+n]=g[n],o[a+i]=g[i],o[a+r]=g[r]}return new gc(o)},af=function(t,e,n,i){if(n||(n=t.createTexture()),e){var r=t.TEXTURE_2D,o=t.REPEAT,a=t.CLAMP_TO_EDGE,s=t.TEXTURE_MIN_FILTER;i!==t.NEAREST&&(i=t.LINEAR),df(t,n),t.texImage2D(r,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),hf(t,t.TEXTURE_MAG_FILTER,i);var c=e.naturalWidth||e.width,l=e.naturalHeight||e.height;Lh(c)&&Lh(l)&&!e.clampToEdge?(hf(t,t.TEXTURE_WRAP_S,o),hf(t,t.TEXTURE_WRAP_T,o),hf(t,s,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(r)):(hf(t,t.TEXTURE_WRAP_S,a),hf(t,t.TEXTURE_WRAP_T,a),hf(t,s,i)),df(t,u)}return n},sf=function(t,e){var n=new Uint8Array(4);return e=e||t.createTexture(),df(t,e),hf(t,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n),e},cf=function(t){t._26I&&t._prg&&(t._26I.deleteProgram(t._prg),t._prg=u)},lf=function(t,e,n,i){var r=t.createShader(n);return t.shaderSource(r,i),t.compileShader(r),t.attachShader(e,r),r},uf=function(t){return t.createBuffer()},df=function(t,e){t.bindTexture(t.TEXTURE_2D,e)},hf=function(t,e,n){t.texParameteri(t.TEXTURE_2D,e,n)},ff=function(t,e){t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(e[0],e[1])},gf=function(t){t.disable(t.POLYGON_OFFSET_FILL)},pf=function(t,e){if(e){e=_o(e);t.clearColor(e[0],e[1],e[2],e[3])}},vf=function(t,e){Pf(t,e.uFix,!0),Af(t,e.aNormal)},yf=function(t,e){Pf(t,e.uFix,!1),Of(t,e.aNormal)},_f=function(t,e,n,i,r,o,a,s){t._picking||(n?(Pf(t,e.uBlend,!0),Pf(t,e.uBlendColor,n)):Pf(t,e.uBlend,!1),Pf(t,e.uLight,i==u||i),Pi(r)&&1!==r&&Pf(t,e.uPartOpacity,r),Pf(t,e.uReverseFlip,o!=u&&o),Pf(t,e.uFixPickReverseColor,a||ia)),s?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)},mf=function(t,e){t._picking||Pf(t,e.uPartOpacity,1)},bf=function(){var t=[0,0,1,1];return function(e,n,i,r,o,a,s,c,l){return i?(Pf(e,n.uTexture,!0),Pf(e,n.uDiscardSelectable,!Oi(r)||r),Of(e,n.aUv),Cf(e,o,a,n.aUv,2),l?(Pf(e,n.uBlendTexture,!0),e.activeTexture(e.TEXTURE1),df(e,l),e.uniform1i(n.uBlendSampler,1)):(Pf(e,n.uBlendTexture,!1),e.activeTexture(e.TEXTURE1),df(e,e._emptyBlendTexture)),e.activeTexture(e.TEXTURE0),df(e,i),e.uniform1i(n.uSampler,0),s?(t[0]=s[0],t[1]=s[1]):(t[0]=0,t[1]=0),c?(t[2]=c[0],t[3]=c[1]):(t[2]=1,t[3]=1),void Pf(e,n.uOffsetScale,t)):(e.activeTexture(e.TEXTURE0),df(e,e._emptyTexture),e.activeTexture(e.TEXTURE1),void df(e,e._emptyBlendTexture))}}(),xf=function(t,e,n){t.activeTexture(t.TEXTURE0),df(t,u),t.activeTexture(t.TEXTURE1),df(t,u),n&&(Af(t,e.aUv),Pf(t,e.uTexture,!1),Pf(t,e.uBlendTexture,!1))},wf=function(t,e,n,i,r,o){!n||rt||at||t.lineWidth(n),i&&!t._picking&&Pf(t,e.uFixPickReverseColor,i),r&&Cf(t,r,o,e.aPosition)},If=function(t,e,n,i){Ch&&(i=t[Ch]),t.drawArrays(i==u?t.TRIANGLES:i,e,n);var r=t._renderInfo;r&&(r.calls++,r.vertices+=n,(i==u||i===t.TRIANGLES)&&(r.faces+=n/3),i===t.LINES&&(r.lines+=n/2))},Sf=function(t,e,n,i){Ch&&(i=t[Ch]),t.drawElements(i==u?t.TRIANGLES:i,n,t.UNSIGNED_SHORT,e==u?0:2*e);var r=t._renderInfo;r&&(r.calls++,r.vertices+=n,(i==u||i===t.TRIANGLES)&&(r.faces+=n/3),i===t.LINES&&(r.lines+=n/2))},Tf=function(t,e,n,i,r){var o=t.ARRAY_BUFFER;t.bindBuffer(o,e),n&&t.bufferData(o,n,t.STATIC_DRAW),i!=u&&t.vertexAttribPointer(i,r||3,t.FLOAT,!1,0,0)},Cf=function(t,e,n,i,r){return n?(Ef(t,t.ARRAY_BUFFER,e,n),void(i!=u&&t.vertexAttribPointer(i,r||3,t.FLOAT,!1,0,0))):Tf(t,e,n,i,r)},Mf=function(t,e,n){var i=t.ELEMENT_ARRAY_BUFFER;t.bindBuffer(i,e),n&&t.bufferData(i,n,t.STATIC_DRAW)},Df=function(t,e,n){Ef(t,t.ELEMENT_ARRAY_BUFFER,e,n)},Ef=function(t,e,n,i){var r=i._bufId;r||(r=i._bufId=d.Math.generateIncreasingID());var o=t._bufPool;(n=o[r])&&n._buf?t.bindBuffer(e,n._buf):(n=o[r]={_buf:uf(t)},t.bindBuffer(e,n._buf),t.bufferData(e,i,t.STATIC_DRAW)),n._fid=t._renderInfo.frame},Pf=function(t,e,n){if(n!=u&&e!=u){n=_o(n);var i=n.length;3===i?t.uniform3fv(e,n):4===i?t.uniform4fv(e,n):16===i?t.uniformMatrix4fv(e,!1,n):Oi(n)?t.uniform1i(e,n?1:0):2===i?t.uniform2fv(e,n):t.uniform1f(e,n)}},Of=function(t,e){e!=u&&e>=0&&t.enableVertexAttribArray(e)},Af=function(t,e){e!=u&&e>=0&&t.disableVertexAttribArray(e)},kf=function(t,e){var n=t.getGL(),i=t._prg;t._7O=t._8O.pop(),e&&(Pf(n,i.uMVMatrix,t._7O),t._6O=e,Pf(n,i.uNMatrix,e))},Rf=function(t,e){return e||(e=_c()),xc(e,t),Wh(e),Zh(e),e},zf=function(t,e){var n=t.getGL(),i=t._prg,r=t._7O;e&&(t._8O.push(bc(r)),Pf(n,i.uMMatrix,e),Yh(r,r,e),t._7O=r),Pf(n,i.uMVMatrix,r),Pf(n,i.uNMatrix,Rf(r,t._6O))},Nf=function(t,e,n,i,r,o){if(n){if(i){var a=n.value++,s=2147483648|a,c=[(255&s>>16)/255,(255&s>>8)/255,(255&s)/255,(255&s>>24)/255];n[a]={data:r,part:o}}else c=Dh;return Pf(t,e.uFixPickReverseColor,c),c}},Vf=function(){var t={center:function(t,e,n,i,r){var o=-e[1]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[1]},s=na(t,a,n);return[s.x+i,-s.y-r,Gh()]},front:function(t,e,n,i,r){var o=-e[1]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[1]},s=na(t,a,n);return[s.x+i,-s.y-r,e[2]/2+Gh()]},back:function(t,e,n,i,r){var o=-e[0]/2,a=-e[1]/2,s={x:o,y:a,width:e[0],height:e[1]},c=na(t,s,n);return[-c.x-i,-c.y-r,-e[2]/2-Gh()]},left:function(t,e,n,i,r){var o=-e[1]/2,a={x:-e[2]/2,y:o,width:e[2],height:e[1]},s=na(t,a,n);return[-e[0]/2-Gh(),-s.y-r,s.x+i]},right:function(t,e,n,i,r){var o=-e[2]/2,a=-e[1]/2,s={x:o,y:a,width:e[2],height:e[1]},c=na(t,s,n);return[e[0]/2+Gh(),-c.y-r,-c.x-i]},top:function(t,e,n,i,r){var o={x:-e[0]/2,y:-e[2]/2,width:e[0],height:e[2]},a=na(t,o,n);return[a.x+i,e[1]/2+Gh(),a.y+r]},bottom:function(t,e,n,i,r){var o=-e[2]/2,a={x:-e[0]/2,y:o,width:e[0],height:e[2]},s=na(t,a,n);return[s.x+i,-e[1]/2-Gh(),-s.y-r]}};return function(e,n,i,r,o,a){return t[r](e,n,i,o||0,a||0)}}(),Lf=function(t,e,n,i,r,o,a,s,c,l){if(r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),qh(t,n),s){var u=_c();if(Xu(u,c,l),Ic(e,u),qh(t,e),t.auto=s,t.pos=Ic([0,0,0],t),o){var d=t.mat2=_c();Xu(d,o,a)}}else Xu(t,c,l),qh(t,e),i===pt?Mc(t,-F):i===vt?Mc(t,F):i===yt?Cc(t,-F):i===_t?Cc(t,F):i===gt&&Mc(t,B),Xu(t,o,a);return t},Bf=function(t,e){var n=e.auto,i=e.mat2,r=t.gv;if(n){var o,a=_c(),s=[0,0,0,0];o="string"==typeof n?[n.indexOf("x")<0?r._eye[0]:r._center[0],n.indexOf("y")<0?r._eye[1]:r._center[1],n.indexOf("z")<0?r._eye[2]:r._center[2]]:r._eye,tf(s,$h(_c(),o,r._center,r._up)),ef(a,Kh(s,s),e.pos),i&&Yh(a,a,i),zf(r,a)}else zf(r,e)},Gf=function(t,e,n,i,r){var o=t.s,a=t.gv,s=a.getGL(),c=a._prg,l=a._buffer,u=a._1O;af(s,go,u),Bf(t,n),_f(s,c,o(e+".blend"),o(e+".light"),o(e+".opacity"),o(e+".reverse.flip"),o(e+".reverse.color"),o(e+".reverse.cull")),bf(s,c,u,r,l.uv,Cg),Cf(s,l.vs,i,c.aPosition),Cf(s,l.ns,Mg,c.aNormal),Df(s,l.is,Dg),Sf(s,0,Dg.length),xf(s,c,u),mf(s,c),kf(a)},Ff=function(t,e,n){var i=t.gv,r=t.data,o=t[e]={blend:i.getBodyColor(r)||i.getFaceBlend(r,e),light:i.getFaceLight(r,e),color:i.getFaceColor(r,e),opacity:i.getFaceOpacity(r,e),transparent:i.getFaceTransparent(r,e),reverseFlip:i.getFaceReverseFlip(r,e),reverseColor:i.getFaceReverseColor(r,e),reverseCull:i.getFaceReverseCull(r,e),texture:i.getFaceImage(r,e),blendTexture:i.getFaceBlendImage(r,e),discardSelectable:i.getFaceDiscardSelectable(r,e)};if("csg"!==e){o.uv=i.getFaceUv(r,e)||n&&n[e+"Uv"],o.uvScale=i.getFaceUvScale(r,e)||n&&n[e+"UvScale"],o.uvOffset=i.getFaceUvOffset(r,e)||n&&n[e+"UvOffset"];var a=i.getFaceMat(r,e);a&&(o.mat=Ec(r,a))}return o},jf=function(t,e,n,i,r){if(i){if(!r(i.transparent))return;var o=t.data,a=t.gv,s=a._buffer,c=a.getTexture(i.texture,o),l=a.getTexture(i.blendTexture,o);bf(e,n,c,i.discardSelectable,s.uv,i.tuv,i.uvOffset,i.uvScale,l),_f(e,n,i.blend,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),Pf(e,n.uDiffuse,i.color||g["color.empty"]),Cf(e,s.vs,i.vs,n.aPosition),Cf(e,s.ns,i.ns,n.aNormal),If(e,0,i.vs.length/3),mf(e,n),xf(e,n,c)}},Hf=function(t,e,n,i,r,o){var a,s,c,l,u,d,h,f,g,p,v=[i-e,r-n],y=t?t.length:0;for(s=0;y>s;s++){for(c=2,a=t[s],l=a[0],u=a[1];c+1<a.length;){if(d=a[c],h=a[c+1],ir(e,n,i,r,l,u,d,h,!0)){f=[d-l,h-u],g=Ws(f),f[0]/=g,f[1]/=g,g=yc(v,f),g=g>0?o:-o,p=[f[0]*g,f[1]*g];break}l=d,u=h,c+=2}if(p)break}if(p)for(i=e+p[0],r=n+p[1],s=0;y>s;s++)for(c=2,a=t[s],l=a[0],u=a[1];c+1<a.length;){if(d=a[c],h=a[c+1],ir(e,n,i,r,l,u,d,h,!0))return[0,0];l=d,u=h,c+=2}return p||[i-e,r-n]},Uf=d.graph3d={},Zf=function(t,e,n){lc(c+".graph3d."+t,e,n)},Wf="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh\v!gjeof$!\v~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj\v!ITBE!gfegj$!\v\v!gjeof$!\v~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v~<wVb!>!wVs|*fsvuyfUeofmCv)gj\v~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<**1/2!-opjujtpQb)5dfw!+!yjsubNNv)4dfw!>!emspXw<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<emspXw!4dfw!hojzsbw<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNNv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",qf="~~<eJ!>!spmpDhbsG`mh\v~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!\v\v!gjeof$!\v~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj\v!TTFOUIHJSCIDUBC!gfegj$!\v~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~\v!gjeof$!\v~<zujwjudfmgfSv!+!{zy/spmpDwof!>,!chs/eJ<*!spmpDwof!)sbfojMpUmfyfUqbNwof!>!spmpDwof<*!*!{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv!)fcvDfsvuyfu!>!spmpDwof!5dfw<*!mbnspOemspx!-yfusfWpUbsfnbd!)udfmgfs!>!dfWudfmgfs!4dfw<*!yjsubNxfjWv!-O!)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw<*!opjujtpQbsfnbDv!.!emspXw!)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw|*qbNwoFftVv)!gj\v!QBNWOF`FTV!gfegj$!\v\v!gjeof$!\v<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg\v!HPG!gfegj$!\v\v!gjeof$!\v~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg\v!1!?!SJE`YBN!gj$!\v~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~\v!gjeof$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj\v!ftmf$!\v~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj\v!EOFMCIDUBC!gfegj$!\v~\v~<esbdtje|*1/1!>>!x/eJ)gj\v!gjeof$!\v<ftvggjEv!>!eJ\v!ftmf$!\v~<ftvggjEv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw\v!gjeof$!\v<*yfusfWw.)f{jmbnspo!>!F!4dfw\v!ftmf$!\v<*2!-1!-1)4dfw!>!F!4dfw\v!DJIQBSHPIUSP!gfegj$!\v<*mbnspOw)f{jmbnspo!>!O!4dfw|!ftmf~\v!gjeof$!\v~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj\v!ITBE!gfegj$!\v\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!eJ\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj\v!gjeof$!\v<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh\v!ftmf$!\v~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj\v!SPMPDIDUBC!gfegj$!\v|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw~<*!{zy/*!yjsubn!+!*!1/1!-sje!)5dfw!)!)f{jmbnspo!osvufs|!*!yjsubn!5ubn!oj!-sje!4dfw!oj!)opjudfsjEnspgtobsUftsfwoj!4dfw~!<*!*!SPUDBG`BNNBH!)ubpmg!-fvmbw!)sbfojMpUbnnbH!osvufs!|!*!fvmbw!5dfw!)sbfojMpUmfyfUqbNwof!5dfw~<*!x/fvmbw!-*!*!spudbGbnnbh!)4dfw!-{zy/fvmbw!)xpq!)5dfw!osvufs|!*!spudbGbnnbh!ubpmg!oj!-fvmbw!5dfw!oj!)sbfojMpUbnnbH!5dfw<1/3!>!SPUDBG`BNNBH!ubpmg!utopd\v!gjeof$!\v<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov\v!ITBE!gfegj$!\v\v!gjeof$!\v<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov\v!HPG!gfegj$!\v\v!gjeof$!\v<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov\v!1!?!UPQT`YBN!gj$!\v\v!gjeof$!\v<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov\v!1!?!UOJPQ`YBN!gj$!\v\v!gjeof$!\v<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov\v!1!?!SJE`YBN!gj$!\v\v!gjeof$!\v<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov\v!EOFMCIDUBC!gfegj$!\v\v!gjeof$!\v<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov\v!TTFOUIHJSCIDUBC!gfegj$!\v\v!gjeof$!\v<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov\v!SPMPDIDUBC!gfegj$!\v<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<emspXw!4dfw!hojzsbw<opjujtpQbsfnbDv!4dfw!nspgjov<yjsubNxfjWv!5ubn!nspgjov\v!gjeof$!\v<zujwjudfmgfSv!ubpmg!nspgjov<qbNwoFv!fcvDsfmqnbt!nspgjov<qbNwoFftVv!mppc!nspgjov\v!QBNWOF`FTV!gfegj$!\v<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ\v!gjeof$!\v\v!gjeof$!\v\v!<ubpmg!qnvjefn!opjtjdfsq!\v\v!ftmf$!\v\v!<ubpmg!qihji!opjtjdfsq!\v\v!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!\v\v!TF`MH!gfegj$!\v";Wi(f,{setBatchInfo:function(t,e){Wn[t]=e},getBatchInfo:function(t){return Wn[t]}},!0);var Xf=[1,1,1],Yf=[1,0,0,0,0,1,0,1,1,1,1,0],$f=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Qf=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Jf=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Kf=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],tg=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],eg=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],ng=function(t,e){ig(t,e,"_batchModelMap","_batchIndexMap"),rg(t,e,"_wireframeModelMap","_wireframeIndexMap"),rg(t,e,"_polylineModelMap","_polylineIndexMap"),rg(t,e,"_wireframeModelMapSwap","_wireframeIndexMapSwap"),rg(t,e,"_polylineModelMapSwap","_polylineIndexMapSwap")},ig=function(t,e,n,i){if(!e)return t[n]={},void(t[i]={});var r=e._id,o=t[i],a=o[r];if(a){var s=t[n],c=a.batch,l=s[c],u=l.ds,d=a.index;if(l.invalidate=!0,delete o[r],u.splice(d,1),Qi(u))return void delete s[c];for(var h=a.begin,f=a.size,g=3*h,p=3*f,v=4*h,y=4*f,_=l.vs,m=l.ps,b=l.uv,x=l.cs,w=l.bs,I=l.rs,S=l.ns,T=l.ls;d<u.length;d++)a=o[u[d]._id],a.index--,a.begin-=f;_.splice(g,p),m.splice(v,y),b&&b.splice(2*h,2*f),x&&x.splice(v,y),w&&w.splice(g,p),I&&I.splice(h,f),S&&S.splice(g,p),T&&T.splice(h,f)}},rg=ig,og=function(t,e,n,i){if(!i)return u;var r=e[i];if(!r){var o=Wn[i]||ri,a=o.image?[]:u;r=e[i]={vs:[],ns:[],uv:a,cs:a||o.color?u:[],bs:o.blend?[]:u,ps:[],rs:o.brightness?[]:u,ds:[]}}return r.invalidate=!0,t[n._id]={index:r.ds.length,begin:r.vs.length/3,batch:i},r.ds.push(n),r},ag=function(t,e){return e!=u&&1!==e?[t[0]*e,t[1]*e,t[2]*e,t[3]]:t},sg=function(){var t;return function(e,n,i){var o=e.getData3dUI(n),a=o.shapeModel;a||(a=Kg(o));var s,c=n.s("wf.combineTriangle");if(i.geometry){if(!a&&(n instanceof d.Node&&!(n instanceof d.Shape)?(t||(t={vs:Eg,is:Pg,uv:Og}),a=t):a=[o.left,o.front,o.right,o.back,o.top,o.bottom],!a))return r;if(c?(c=0|Math.min(3,Math.max(1,isNaN(c)?1:c)),s=tu[c-1](a)):s=eu(a),!s||0===s.length)return}else s=i["short"]?zg:Rg;var l=e.getBrightness(n),u=_o(i.color||"white"),h=u[3]<1,f=Math.ceil(i.width)||1,g=(h?"T":"O")+f,p=e._wireframeIndexMap,v=e._wireframeModelMap,y=v[g];y||(y=v[g]={vs:[],cs:[],ps:[],ds:[],T:h,W:f}),y.invalidate=!0;var _=y.vs,m=y.cs,b=y.ds,x=p[n._id]={index:b.length,begin:_.length/3,batch:g};b.push(n);var w=o.mat;if(!w){w=Ec(n,i.mat);var I=o._calcAnchorMat(n);I&&Yh(w,w,I)}zh(_,w,s);var S=x.size=_.length/3-x.begin;Rh(m,ag(u,l),S)}}(),cg=function(t,e,n,i,r,o,a,s,c){var l=t.getBrightness(e);l==u&&(l=1);var d=ag(_o(i),l),h=d[3]<1;o=Math.ceil(o)||1;var f=(h?"T":"O")+o;if(a){var g=a[0],p=(a[1]||g)+g;f+="-"+g+"-"+p,c&&(f+="-"+yo(c)+"-"+l,c=ag(_o(c),l))}var v=t._polylineIndexMap,y=t._polylineModelMap,_=y[f];_||(_=y[f]={vs:[],cs:[],ps:[],ds:[],ls:a?[]:u,T:h,W:o},a&&(_.D=g,_.G=p,_.A=c)),_.invalidate=!0;var m,b=_.vs,x=_.cs,w=_.ds,I=_.ls,S=v[e._id]={index:w.length,begin:b.length/3,batch:f};w.push(e),Ui(b,n);var T,C=S.size=b.length/3-S.begin,M=n.length,D=0,E=[];if(a||r)for(m=0;M>m;m+=6)T=Ws([n[m],n[m+1],n[m+2]],[n[m+3],n[m+4],n[m+5]]),E.push(T),D+=T;if(D&&r){var P,O=ag(_o(r),l),A=[O[0]-d[0],O[1]-d[1],O[2]-d[2],O[3]-d[3]],k=0;for(m=0;M>m;m+=6)P=k/D,Rh(x,[d[0]+A[0]*P,d[1]+A[1]*P,d[2]+A[2]*P,d[3]+A[3]*P],1),k+=E[m/6],P=k/D,Rh(x,[d[0]+A[0]*P,d[1]+A[1]*P,d[2]+A[2]*P,d[3]+A[3]*P],1)}else Rh(x,d,C);if(a)for(k=s||0,m=0;M>m;m+=6)I.push(k),k+=E[m/6],I.push(k)},lg=function(t,e,n){if(e)for(var i=4*e.begin,r=n[e.batch].ps,o=0;o<e.size;o++)r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r[i++]=t[3]},ug=function(t,e){var n=e+["32"],i=t[e],r=t[n];i?r&&r.length===i.length?(r.set(i),r._bufId=null):t[n]=new gc(i):delete t[n]},dg=function t(e,n,i,r,o,a,s,c,l){if(Ri(i))i.forEach((function(i){t(e,n,i,r,o,a,s,c,l)}));else if(Ei(i))t(e,n,Kg(r,i),r,o,a,s,c,l);else if(Ai(i)){var u,d=Jc(i.mat,n,e),h=Jc(i.s3,n,e),f=Jc(i.t3,n,e),g=Jc(i.r3,n,e);if((h||g||f||d)&&(u=Pc(d,h,g,Jc(i.rotationMode,n,e),f),a.push(u)),i.shape3d)t(e,n,i.shape3d,r,o,a,s,c,i);else{var p=r.s;l=l||ri;var v=a[0],y=a.length,_=p("shape3d.color",i.color,l.color);if(o||(o=p("shape3d.blend",i.blend,l.blend)),y>1){v=bc(v);for(var m=1;y>m;m++)Yh(v,v,a[m])}i.vs&&p(Xe,i.visible,l.visible)&&hg(v,s,c,i.vs,i.uv,i.is,o,_),i.top_vs&&p(Qe,i.topVisible,l.topVisible)&&hg(v,s,c,i.top_vs,i.top_uv,i.top_is,o,p("shape3d.top.color",i.topColor,l.topColor)||_),i.bottom_vs&&p(Je,i.bottomVisible,l.bottomVisible)&&hg(v,s,c,i.bottom_vs,i.bottom_uv,i.bottom_is,o,p("shape3d.bottom.color",i.bottomColor,l.bottomColor)||_),i.from_vs&&p(Ye,i.fromVisible,l.fromVisible)&&hg(v,s,c,i.from_vs,i.from_uv,i.from_is,o,p("shape3d.from.color",i.fromColor,l.fromColor)||_),i.to_vs&&p($e,i.toVisible,l.toVisible)&&hg(v,s,c,i.to_vs,i.to_uv,i.to_is,o,p("shape3d.to.color",i.toColor,l.toColor)||_)}u&&a.pop()}},hg=function(t,e,n,i,r,o,a,s){var c,l=e.cs,u=e.uv,d=e.bs;if(o){c=o.length;for(var h=0;c>h;h++){var f=o[h];zh(n,t,[i[3*f],i[3*f+1],i[3*f+2]]),u&&Ui(u,[r[2*f],r[2*f+1]])}}else c=i.length/3,zh(n,t,i),u&&Ui(u,r);l&&Rh(l,s,c),d&&(a?kh(d,a,c):Ui(d,Xf,c))},fg=function(t,e,n,i){var r=[];i?dg(t.gv,t.data,i,t,t.getBodyColor(),[e],n,r):(gg(t,pt,e,n,r),gg(t,vt,e,n,r),gg(t,ft,e,n,r),gg(t,gt,e,n,r),gg(t,yt,e,n,r),gg(t,_t,e,n,r),gg(t,"csg",e,n,r)),r.length&&(Ui(n.vs,r),Ui(n.ns,of(r)))},gg=function(t,e,n,i,r){var o=t[e];if(o){var a=o.tuv;if(a){var s,c,l,d,h=o.uvScale,f=o.uvOffset;if(h)for(s=a.length,c=h[0],l=h[1],d=0;s>d;d+=2)a[d]*=c,a[d+1]*=l;if(f)for(s=a.length,c=f[0],l=f[1],d=0;s>d;d+=2)a[d]+=c,a[d+1]+=l}hg(n,i,r,o.vs,a,u,o.blend,o.color)}},pg=function(t,e,n,i,r,o,a,s){var c,l=n.cs,u=n.uv,d=n.bs;if(t.getFaceVisible(e,o)){var h=t.getFaceMat(e,o);if(h&&(r=Ec(e,h)),zh(a,r,s),l&&Rh(l,t.getFaceColor(e,o),6),u){var f=t.getFaceUv(e,o)||i[o+"Uv"],g=t.getFaceUvScale(e,o)||i[o+"UvScale"],p=t.getFaceUvOffset(e,o)||i[o+"UvOffset"];f=f?[f[6],f[7],f[0],f[1],f[2],f[3],f[2],f[3],f[4],f[5],f[6],f[7]]:Yf;var v=f[0],y=f[1],_=f[2],m=f[3],b=f[4],x=f[5],w=f[6],I=f[7],S=f[8],T=f[9],C=f[10],M=f[11];if(g){var D=g[0],E=g[1];v*=D,y*=E,_*=D,m*=E,b*=D,x*=E,w*=D,I*=E,S*=D,T*=E,C*=D,M*=E}if(p){var P=p[0],O=p[1];v+=P,y+=O,_+=P,m+=O,b+=P,x+=O,w+=P,I+=O,S+=P,T+=O,C+=P,M+=O}u.push(v,y,_,m,b,x,w,I,S,T,C,M)}d&&(c=t.getBodyColor(e)||t.getFaceBlend(e,o),c?kh(d,c,6):Ui(d,Xf,6))}},vg=function(t,e,n,i){var r=t.getGL(),o=t._prg,a=t._buffer;if(!t.drawFilter&&!$i(e)){for(var s in zf(t),vf(r,o),e){var c=e[s];if(!(i&&!c.T||!i&&c.T)){c.invalidate?(c.invalidate=!1,ug(c,"vs"),ug(c,"cs"),ug(c,"ls"),ug(c,"ps")):n&&ug(c,"ps");var l=c.vs32,d=n?c.ps32:c.cs32;wf(r,o,c.W,u,a.vs,l);var h=c.D,f=!t._dashDisabled&&h;Pf(r,o.uAlphaTest,g.alphaTest),f&&(Pf(r,o.uDash,!0),Pf(r,o.uDashDistance,h),Pf(r,o.uDashGapDistance,c.G),Of(r,o.aLineDistance),Cf(r,a.lineDistance,c.ls32,o.aLineDistance,1),Pf(r,o.uDiffuse,c.A||g["color.empty"]));var p=!t._batchColorDisabled;p&&(Pf(r,o.uBatchColor,!0),Of(r,o.aBatchColor),Cf(r,a.batchColor,d,o.aBatchColor,4)),bf(r),If(r,0,l.length/3,r.LINES),xf(r),p&&(Pf(r,o.uBatchColor,!1),Af(r,o.aBatchColor)),f&&(Pf(r,o.uDash,!1),Af(r,o.aLineDistance))}}yf(r,o)}},yg=function(t,e,n){var i,o,a,s,c,l,d,h,f,p,v=t.getGL(),y=t._prg,_=t._buffer,m=t._batchModelMap;if(!$i(m))for(i in zf(t),m)if(o=Wn[i]||ri,!(n&&!o.transparent||!n&&o.transparent)&&(a=m[i],e||!o.transparentMask)){var b=n&&!1!==o.autoSort&&(t._33Q||a.invalidate);if(a.invalidate?(a.invalidate=!1,ug(a,"vs"),ug(a,"ns"),ug(a,"cs"),ug(a,"rs"),ug(a,"ps"),ug(a,"bs"),ug(a,"uv")):e&&ug(a,"ps"),s=a.vs32,c=e?a.ps32:a.cs32,h=a.uv32,l=a.bs32,d=a.rs32,p=s.length/3,b&&(a.is=_g(s,t.getEye())),p){o.light,f=t.getTexture(o.image),_f(v,y,u,o.light,o.opacity,o.reverseFlip,o.reverseColor,o.reverseCull),c?t._batchColorDisabled||(Pf(v,y.uBatchColor,!0),Of(v,y.aBatchColor),Cf(v,_.batchColor,c,y.aBatchColor,4)):Pf(v,y.uDiffuse,o.color||g["color.empty"]);var x=o.alphaTest;Pf(v,y.uAlphaTest,x===r?g.alphaTest:x),o.envmap!==r?(Pf(v,y.uUseEnvMap,!0),Pf(v,y.uReflectivity,o.envmap)):(Pf(v,y.uUseEnvMap,!1),Pf(v,y.uReflectivity,0));var w=l&&!t._batchBlendDisabled;w&&(Pf(v,y.uBatchBlend,!0),Of(v,y.aBatchBlend),Cf(v,_.batchBlend,l,y.aBatchBlend));var I=d&&!t._batchBrightnessDisabled;I&&(Pf(v,y.uBatchBrightness,!0),Of(v,y.aBatchBrightness),Cf(v,_.batchBrightness,d,y.aBatchBrightness,1)),h?bf(v,y,f,o.discardSelectable,_.uv,h,o.uvOffset,o.uvScale):bf(v),Cf(v,_.vs,s,y.aPosition),Cf(v,_.ns,a.ns32,y.aNormal),a.is?(Mf(v,_.is,a.is),Sf(v,0,p)):If(v,0,p),h?xf(v,y,f):xf(v),c&&!t._batchColorDisabled&&(Pf(v,y.uBatchColor,!1),Af(v,y.aBatchColor)),w&&(Pf(v,y.uBatchBlend,!1),Af(v,y.aBatchBlend)),I&&(Pf(v,y.uBatchBrightness,!1),Af(v,y.aBatchBrightness)),mf(v,y)}}},_g=function(t,e){for(var n=t.length/3,i=new Array(n),r=n/3,o=new Array(r),a=0;r>a;a++)o[a]=a;o.sort((function(n,i){var r=9*n,o=[(t[r]+t[r+3]+2*t[r+6])/4,(t[r+1]+t[r+4]+2*t[r+7])/4,(t[r+2]+t[r+5]+2*t[r+8])/4];r=9*i;var a=[(t[r]+t[r+3]+2*t[r+6])/4,(t[r+1]+t[r+4]+2*t[r+7])/4,(t[r+2]+t[r+5]+2*t[r+8])/4],s=Ws(e,o)-Ws(e,a);return s>0?-1:0>s?1:0}));for(a=0;r>a;a++){var s=3*a,c=3*o[a];i[s]=c,i[s+1]=c+1,i[s+2]=c+2}return new fc(i)},mg={obj:function(t,e){var n={mat:t.mat,s3:t.s3,r3:t.r3,rotationMode:t.rotationMode,t3:t.t3,cube:t.cube==u||t.cube,center:t.center==u||t.center,ignoreMtls:t.ignoreMtls,ignoreTransparent:t.ignoreTransparent,ignoreColor:t.ignoreColor,ignoreImage:t.ignoreImage,ignoreNormal:t.ignoreNormal,prefix:t.prefix,flipY:t.flipY,flipFace:t.flipFace,reverseFlipMtls:t.reverseFlipMtls,finishFunc:function(n,i){if(n){i=[];for(var r in n){var o=n[r];i.rawS3=o.rawS3,i.push(o),t.eachModel&&t.eachModel(r,o)}i.json=t,e(i)}else e()}};f.loadObj(t.obj,t.mtl,n)}};f.getModelTypeHandlers=function(){return mg},f.setModelTypeHandler=function(t,e){mg[t]=e},f.getModelTypeHandler=function(t){return mg[t]},f.handleModelLoaded=function(){},f.handleUnfoundModel=function(){};var bg=u,xg=u,wg=function(t){bg&&!t._loadingModelView_&&(xg||(xg={}),xg[t._loadingModelView_=Ds()]=t)},Ig=function(t,e){bg||(bg={});var n=bg[t];if(n){if(n.url===e)return;n.request.onload=oi,n.request.onerror=oi}var i=new sd;if(bg[t]={request:i,url:e},e=f.beforeLoadURL(e),e.data){var r=f.parse(e.data);Sg(t,r,e)}else{i.onload=function(){if(200===this.status||0===this.status){delete bg[t];var n=f.parse(i.getResponseText());Sg(t,n,e)}else Tg(t,f.handleUnfoundModel(t,e)||u)},i.onerror=function(){Tg(t,f.handleUnfoundModel(t,e)||u)};var o={};o.url=encodeURI(e),o.sync=!1,i.send(o)}},Sg=function(t,e,n){var i=e.modelType;if(!i)return Tg(t,e),void f.handleModelLoaded(t,e);var r=f.getModelTypeHandler(i);if(r){if(bg||(bg={}),bg[t])return;bg[t]=!0;var o=function(e){e?(Tg(t,e),f.handleModelLoaded(t,e)):Tg(t,f.handleUnfoundModel(t,n)||u)};r(e,o)}else Tg(t,f.handleUnfoundModel(t,n)||u)},Tg=function(t,e){if(qn[t]=e,delete bg[t],$i(bg)&&(bg=u,xg)){for(var n in xg){var i=xg[n];i.invalidateAll&&i.invalidateAll(r,"modelLoaded",t),i.redraw&&i.redraw(),i.iv(),delete i._loadingModelView_}xg=u}if(e&&xg)for(var n in xg){i=xg[n];i.invalidateAll&&i.invalidateAll(r,"modelLoading",t),i.redraw&&i.redraw(),i.iv()}},Cg=new gc([0,0,0,1,1,1,1,0]),Mg=new gc([0,0,1,0,0,1,0,0,1,0,0,1]),Dg=new fc([0,1,2,2,3,0]),Eg=new gc([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Pg=new fc([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Og=new gc([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Ag=of(Eg,Pg),kg=(new gc([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new fc([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[pt,ft,vt,gt,yt,_t]),Rg=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],zg=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Ng=function(t,e,n,i,r,o){o=o||16,t=t||16,e=e||0,n=n||t;var a,s,c,l,u,d,h,f,g=.5,p=[],v=[],y=G/t,_=B/o;for(a=0;o>a;a++)for(u=a+1,l=a*_,f=u*_,s=e;n>s;s++)d=s+1,c=s*y,h=d*y,p.push(g*N(l)*R(c),g*R(l),-g*N(l)*N(c),g*N(f)*R(h),g*R(f),-g*N(f)*N(h),g*N(l)*R(h),g*R(l),-g*N(l)*N(h),g*N(l)*R(c),g*R(l),-g*N(l)*N(c),g*N(f)*R(c),g*R(f),-g*N(f)*N(c),g*N(f)*R(h),g*R(f),-g*N(f)*N(h)),v.push(s/t,a/o,d/t,u/o,d/t,a/o,s/t,a/o,s/t,u/o,d/t,u/o);if(i){var m=[],b=[];for(c=e*y,a=0;o>a;a++)u=a+1,l=a*_,f=u*_,m.push(0,0,0,g*N(f)*R(c),g*R(f),-g*N(f)*N(c),g*N(l)*R(c),g*R(l),-g*N(l)*N(c)),b.push(0,.5,e/t,u/o,e/t,a/o)}if(r){var x=[],w=[];for(c=n*y,a=0;o>a;a++)u=a+1,l=a*_,f=u*_,x.push(0,0,0,g*N(l)*R(c),g*R(l),-g*N(l)*N(c),g*N(f)*R(c),g*R(f),-g*N(f)*N(c)),w.push(1,.5,n/t,a/o,n/t,u/o)}return{vs:p,uv:v,from_vs:m,from_uv:b,to_vs:x,to_uv:w}},Vg=function(t,e,n){t=t||.17,e=e||12,n=n||18,0>t?t=0:t>.25&&(t=.25);var i,r,o,a,s,c,l,u=.5,d=[],h=[],f=[],g=G/n,p=G/e,v=u-t;for(r=0;e>=r;r++)for(a=r*p-B,c=R(a),s=N(a),i=0;n>=i;i++)o=i*g,l=v+t*c,d.push(R(o)*l,s*t,-N(o)*l),h.push(i/n,1-r/e);for(r=0;e>r;r++){var y=r*(n+1),_=(r+1)*(n+1);for(i=0;n>i;i++)f.push(y+i,_+i+1,_+i,y+i,y+i+1,_+i+1)}return{vs:d,uv:h,is:f}},Lg=function(t,e,n,i,r,o,a){a=a||12,t=t||18,e=e||0,n=n||t,o=o||.17,0>o?o=0:o>.25&&(o=.25);var s,c,l,u,d,h,f,g,p,v,y=.5,_=[],m=[],b=G/t,x=G/a,w=y-o;for(l=0;a>l;l++)for(u=l+1,f=l*x-B,g=u*x-B,s=e;n>s;s++)c=s+1,d=s*b,h=c*b,p=w+o*R(f),v=w+o*R(g),_.push(R(d)*p,N(f)*o,-N(d)*p,R(h)*p,N(f)*o,-N(h)*p,R(h)*v,N(g)*o,-N(h)*v,R(d)*p,N(f)*o,-N(d)*p,R(h)*v,N(g)*o,-N(h)*v,R(d)*v,N(g)*o,-N(d)*v),m.push(s/t,1-l/a,c/t,1-l/a,c/t,1-u/a,s/t,1-l/a,c/t,1-u/a,s/t,1-u/a);if(i){var I=[],S=[];for(l=0;a>l;l++)u=l+1,f=l*x-B,g=u*x-B,d=e*b,p=w+o*R(f),v=w+o*R(g),I.push(R(d)*p,N(f)*o,-N(d)*p,R(d)*v,N(g)*o,-N(d)*v,R(d)*w,0,-N(d)*w),S.push(.5+.5*R(f),.5-.5*N(f),.5+.5*R(g),.5-.5*N(g),.5,.5)}if(r){var T=[],C=[];for(l=0;a>l;l++)u=l+1,f=l*x-B,g=u*x-B,d=n*b,p=w+o*R(f),v=w+o*R(g),T.push(R(d)*p,N(f)*o,-N(d)*p,R(d)*w,0,-N(d)*w,R(d)*v,N(g)*o,-N(d)*v),C.push(.5-.5*R(f),.5-.5*N(f),.5,.5,.5-.5*R(g),.5-.5*N(g))}return{vs:_,uv:m,from_vs:I,from_uv:S,to_vs:T,to_uv:C}},Bg=function(t,e){for(var n,i,r,o=.5,a=16,s=[],c=[],l=[],u=G/a,d=0;a>=d;d++)n=d*u,i=R(n)*o,r=N(n)*o,s.push(i,-o,r,i,o,r),c.push(1-d/a,1,1-d/a,0);for(d=0;a>d;d++)l.push(2*d,2*d+1,2*d+3,2*d,2*d+3,2*d+2);if(e){var h=[],f=[],g=[];for(h.push(0,-o,0),f.push(.5,.5),d=0;a>=d;d++)n=d*u,i=R(n),r=N(n),h.push(i*o,-o,-r*o),f.push(.5+.5*i,.5+.5*r);for(d=0;a>d;d++)g.push(0,d+2,d+1)}if(t){var p=[],v=[],y=[];for(p.push(0,o,0),v.push(.5,.5),d=0;a>=d;d++)n=d*u,i=R(n),r=N(n),p.push(i*o,o,-r*o),v.push(.5+.5*i,.5-.5*r);for(d=0;a>d;d++)y.push(0,d+1,d+2)}return{vs:s,uv:c,is:l,bottom_vs:h,bottom_uv:f,bottom_is:g,top_vs:p,top_uv:v,top_is:y}},Gg=function(t,e,n,i,r,o,a){t=t||12,e=e||0,n=n||t;for(var s,c,l,u,d,h,f,g,p=.5,v=[],y=[],_=G/t,m=e;n>m;m++)s=m+1,c=m*_,l=s*_,u=R(c)*p,d=N(c)*p,h=R(l)*p,f=N(l)*p,v.push(u,-p,-d,h,-p,-f,u,p,-d,h,-p,-f,h,p,-f,u,p,-d),y.push(m/t,1,s/t,1,m/t,0,s/t,1,s/t,0,m/t,0);if(a){var b=[],x=[];for(m=e;n>m;m++)c=_*m,l=_*(m+1),u=R(c),d=N(c),h=R(l),f=N(l),b.push(u*p,-p,-d*p,0,-p,0,h*p,-p,-f*p),x.push(.5+.5*u,.5+.5*d,.5,.5,.5+.5*h,.5+.5*f)}if(o){var w=[],I=[];for(m=e;n>m;m++)c=_*m,l=_*(m+1),u=R(c),d=N(c),h=R(l),f=N(l),w.push(u*p,p,-d*p,h*p,p,-f*p,0,p,0),I.push(.5+.5*u,.5-.5*d,.5+.5*h,.5-.5*f,.5,.5)}if(i){var S=[],T=[];c=_*e,u=R(c)*p,d=N(c)*p,g=e/t,S.push(0,p,0,0,-p,0,u,-p,-d,u,-p,-d,u,p,-d,0,p,0),T.push(0,0,0,1,g,1,g,1,g,0,0,0)}if(r){var C=[],M=[];c=_*n,u=R(c)*p,d=N(c)*p,g=n/t,C.push(0,-p,0,0,p,0,u,p,-d,u,p,-d,u,-p,-d,0,-p,0),M.push(1,1,1,0,g,0,g,0,g,1,1,1)}return{vs:v,uv:y,bottom_vs:b,bottom_uv:x,top_vs:w,top_uv:I,from_vs:S,from_uv:T,to_vs:C,to_uv:M}},Fg=function(t,e,n,i,r){e=e||18,n=n||0,i=i==u?G:i,r=r==u?.5:r;for(var o,a,s,c,l,d,h=[0,.5,.75,.875,.9375],f=[],g=[],p=[],v=i/e,y=0;y<h.length;y++){var _=0===y%2?0:.5;for(o=0;e>=o;o++)a=(o+_)*v+n,s=1-h[y],f.push(R(a)*r*s,-r+2*h[y]*r,-N(a)*r*s),g.push((o+_)/e,s)}for(y=0;y<h.length-1;y++){var m=y*(e+1),b=(y+1)*(e+1);for(o=0;e>o;o++)p.push(m+o,b+o+1,b+o,m+o,m+o+1,b+o+1)}for(d=f.length/3-(e+1),o=0;e>o;o++)f.push(0,r,0),g.push((o+.5)/e,0);for(o=0;e>o;o++)p.push(d+o,d+o+1,d+(e+1)+o);if(t){var x=[],w=[],I=[];for(x.push(0,-r,0),w.push(.5,.5),o=0;e>=o;o++)a=o*v+n,c=R(a),l=N(a),x.push(c*r,-r,-l*r),w.push(.5+.5*c,.5+.5*l);for(o=0;e>o;o++)I.push(0,o+2,o+1)}return{vs:f,uv:g,is:p,bottom_vs:x,bottom_uv:w,bottom_is:I}},jg=function(t,e,n,i,r,o){t=t||16,e=e||0,n=n||t;for(var a=.5,s=[],c=[],l=G/t,u=e;n>u;u++){var d=u+1,h=l*u,f=l*d;s.push(R(h)*a,-a,-N(h)*a,R(f)*a,-a,-N(f)*a,0,a,0),c.push(u/t,1,d/t,1,(u+d)/2/t,0)}if(o){var g=[],p=[];for(u=e;n>u;u++){h=l*u,f=l*(u+1);var v=R(h),y=N(h),_=R(f),m=N(f);g.push(v*a,-a,-y*a,0,-a,0,_*a,-a,-m*a),p.push(.5+.5*v,.5+.5*y,.5,.5,.5+.5*_,.5+.5*m)}}if(i){var b=[],x=[];h=l*e,b.push(0,a,0,0,-a,0,R(h)*a,-a,-N(h)*a),x.push(0,0,0,1,e/t,1)}if(r){var w=[],I=[];h=l*n,w.push(0,-a,0,0,a,0,R(h)*a,-a,-N(h)*a),I.push(1,1,1,0,n/t,1)}return{vs:s,uv:c,bottom_vs:g,bottom_uv:p,from_vs:b,from_uv:x,to_vs:w,to_uv:I}},Hg=function(t,e,n,i,r,o,a,s){for(var c=[],l=0;l<t.length-1;l+=2)c.push({x:t[l],y:t[l+1]});return nu(c,e,n,i,r,o,a,s,!1)},Ug={roundRect:function(t,e){return Hg([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],t,e,3)},star:function(t,e){return Hg([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],t,e)},rect:function(t,e){return Hg([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],t,e)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(t,e){return Hg([0,-.5,.5,.5,-.5,.5],[1,2,2,5],t,e)},rightTriangle:function(t,e){return Hg([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],t,e)},parallelogram:function(t,e){return Hg([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)},trapezoid:function(t,e){return Hg([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,e)}},Zg={sphere:1,cylinder:1,cone:1,torus:1},Wg={torus:1,sphere:1},qg=Wi(Os(Ug),{cylinder:1}),Xg=Wi(Os(Ug),{cylinder:1,cone:1}),Yg=function(t,e,n){var i,r=Jc(t.anchor3d,n,e),o=Jc(t.mat,n,e),a=Jc(t.s3,n,e),s=Jc(t.t3,n,e),c=Jc(t.r3,n,e),l=a||c||s||o;if(r||l){i=bc(e._6O);var u=l?Pc(o,a,c,Jc(t.rotationMode,n,e),s):_c();r&&qh(u,[.5-r[0],.5-r[1],.5-r[2]]),zf(e,u)}return i},$g=function t(e,n,i,r,o,a,s){if(Ri(i))i.forEach((function(i){t(e,n,i,r,o,a,s)}));else if(Ei(i))t(e,n,Kg(r,i),r,o,a,s);else if(Ai(i))if(i.shape3d){var c=Yg(i,e,n);t(e,n,i.shape3d,r,o,a,i),c&&kf(e,c)}else Qg(e,n,i,r.s,o,a,s)},Qg=function(t,e,n,i,r,o,a){if(a=a||ri,!o||o(i("shape3d.transparent",n.transparent,a.transparent))){var s=Yg(n,t,e);tp(n);var c=t._26I,l=t._prg,d=t._buffer,h=i("shape3d.color",n.color,a.color);r||(r=i("shape3d.blend",n.blend,a.blend));var f,g=n.opacity==u?a.opacity:n.opacity,p=i("shape3d.opacity");f=p!=u&&g!=u?g*p:g!=u?g:p,_f(c,l,r,i("shape3d.light",n.light,a.light),f,i("shape3d.reverse.flip",n.reverseFlip,a.reverseFlip),i("shape3d.reverse.color",n.reverseColor,a.reverseColor),i("shape3d.reverse.cull",n.reverseCull,a.reverseCull));var v=i("polygonOffset",n.polygonOffset,a.polygonOffset);n.vs&&i(Xe,n.visible,a.visible)&&Jg(c,l,d,h,t.getTexture(i("shape3d.image",n.image,a.image),e),i("shape3d.discard.selectable",n.discardSelectable,a.discardSelectable),n.vs,n.uv,n.ns,n.is,i("shape3d.uv.offset",n.uvOffset,a.uvOffset),i("shape3d.uv.scale",n.uvScale,a.uvScale),v),n.top_vs&&i(Qe,n.topVisible,a.topVisible)&&Jg(c,l,d,i("shape3d.top.color",n.topColor,a.topColor)||h,t.getTexture(i("shape3d.top.image",n.topImage,a.topImage),e),i("shape3d.top.discard.selectable",n.topDiscardSelectable,a.topDiscardSelectable),n.top_vs,n.top_uv,n.top_ns,n.top_is,i("shape3d.top.uv.offset",n.topUvOffset,a.topUvOffset),i("shape3d.top.uv.scale",n.topUvScale,a.topUvScale),v),n.bottom_vs&&i(Je,n.bottomVisible,a.bottomVisible)&&Jg(c,l,d,i("shape3d.bottom.color",n.bottomColor,a.bottomColor)||h,t.getTexture(i("shape3d.bottom.image",n.bottomImage,a.bottomImage),e),i("shape3d.bottom.discard.selectable",n.bottomDiscardSelectable,a.bottomDiscardSelectable),n.bottom_vs,n.bottom_uv,n.bottom_ns,n.bottom_is,i("shape3d.bottom.uv.offset",n.bottomUvOffset,a.bottomUvOffset),i("shape3d.bottom.uv.scale",n.bottomUvScale,a.bottomUvScale),v),n.from_vs&&i(Ye,n.fromVisible,a.fromVisible)&&Jg(c,l,d,i("shape3d.from.color",n.fromColor,a.fromColor)||h,t.getTexture(i("shape3d.from.image",n.fromImage,a.fromImage),e),i("shape3d.from.discard.selectable",n.fromDiscardSelectable,a.fromDiscardSelectable),n.from_vs,n.from_uv,n.from_ns,n.from_is,i("shape3d.from.uv.offset",n.fromUvOffset,a.fromUvOffset),i("shape3d.from.uv.scale",n.fromUvScale,a.fromUvScale),v),n.to_vs&&i($e,n.toVisible,a.toVisible)&&Jg(c,l,d,i("shape3d.to.color",n.toColor,a.toColor)||h,t.getTexture(i("shape3d.to.image",n.toImage,a.toImage),e),i("shape3d.to.discard.selectable",n.toDiscardSelectable,a.toDiscardSelectable),n.to_vs,n.to_uv,n.to_ns,n.to_is,i("shape3d.to.uv.offset",n.toUvOffset,a.toUvOffset),i("shape3d.to.uv.scale",n.toUvScale,a.toUvScale),v),mf(c,l),s&&kf(t,s)}},Jg=function(t,e,n,i,r,o,a,s,c,l,u,d,h){a&&(h&&ff(t,h),Pf(t,e.uDiffuse,i||g["color.empty"]),s?bf(t,e,r,o,n.uv,s,u,d):bf(t),Cf(t,n.vs,a,e.aPosition),Cf(t,n.ns,c,e.aNormal),l?(Df(t,n.is,l),Sf(t,0,l.length)):If(t,0,a.length/3),s?xf(t,e,r):xf(t),h&&gf(t))},Kg=function(t,e){var n=t.s;if(e||(e=n(We)),!e)return u;var i=Ih(e);if(i)return i;if("text"===e){var o={amount:n("shape3d.text.amount"),size:n("shape3d.text.size"),font:n("shape3d.text.font"),style:n("shape3d.text.style"),weight:n("shape3d.text.weight"),fill:n("shape3d.text.fill"),curveSegments:n("shape3d.text.curveSegments"),spacing:n("shape3d.text.spacing")},a=t.gv.getShape3dText(t.data),s=a;for(var c in o)s+="_"+(o[c]===r?"U":o[c]);return t._cachedTextKey===s?t._cachedTextGeometry:(t._cachedTextKey=s,t._cachedTextGeometry=f.createTextGeometry(a,o))}c=e;if(Zg[e]){var l=n("shape3d.side"),d=n("shape3d.side.from"),h=n("shape3d.side.to"),g=n(Ye),p=n($e);3>l?(l=0,d=0,h=0,g=!1,p=!1):((d==u||0>d)&&(d=0),(h==u||h>l)&&(h=l),0===d&&h===l&&(g=!1,p=!1)),c+="-"+l+"-"+d+"-"+h+"-"+g+"-"+p}if(qg[e]){var v=n(Qe);c+="-"+v}if(Xg[e]){var y=n(Je);c+="-"+y}if("torus"===e){var _=n("shape3d.torus.radius");0>_?_=0:_>.25&&(_=.25),c+="-"+_}if(Wg[e]){var m=n(qe);c+="-"+m}return i=Xn[c],i||("box"===e?i=f.createBoxModel():Ug[e]?i=Ug[e](v,y):"sphere"===e?i=f.createSphereModel(l,d,h,g,p,m):e===At?i=f.createCylinderModel(l,d,h,g,p,v,y):"cone"===e?i=f.createConeModel(l,d,h,g,p,y):"torus"===e&&(i=f.createTorusModel(l,d,h,g,p,_,m)),Xn[c]=i),i},tp=function(){var t=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],e=["is","top_is","bottom_is","from_is","to_is"];return _=Xi(Wf.substr(Wf.indexOf("^#")+2)),Rc(f[Mi(hn+t[15]+"n"+t[16])]())&&po()?function(n){n&&!n._complete_&&(n._complete_=!0,n.vs&&Qi(n.ns)&&(n.ns=of(n.vs,n.is)),n.top_vs&&Qi(n.top_ns)&&(n.top_ns=of(n.top_vs,n.top_is)),n.bottom_vs&&Qi(n.bottom_ns)&&(n.bottom_ns=of(n.bottom_vs,n.bottom_is)),n.from_vs&&Qi(n.from_ns)&&(n.from_ns=of(n.from_vs,n.from_is)),n.to_vs&&Qi(n.to_ns)&&(n.to_ns=of(n.to_vs,n.to_is)),t.forEach((function(t){var e=n[t];Ri(e)&&(n[t]=new gc(e))})),e.forEach((function(t){var e=n[t];Ri(e)&&(n[t]=new fc(e))})))}:void 0}(),ep=function(t,e){var n=t[e];Ri(n)&&(t[e]=new gc(n))};Wi(Wa,{_25Q:function(t){t._16O=function(t,e,n,i,r,o,a,s,c){var l=this.info;if(l){var u,d,h,f,g,p,v=_c();if(cl[e]?(u=l.p3,d=l.c1,h=l.c2):sl[e]?(d=l.s1||l.c1,h=l.s2||l.c2):(d=l.t1||l.c1,h=l.t2||l.c2),u)p=Vf(e,si,n,i,s,c);else{var y=pc(h,d),_=Ws(d,h);f=[0,-H(y[2],y[0]),L(y[1]/_)],g="zyx",u=[(d[0]+h[0])/2,(d[1]+h[1])/2,(d[2]+h[2])/2],p=Vf(e,[_,0,0],n,i,s,c)}return Lf(v,p,u,i,r,o,a,t,f,g)}return mc},t._80o=function(t,e,n){var i=this,r=i.shapeModel;if(r){var o=i.gv;zf(o),$g(o,i.data,r,i,i.getBodyColor(),n)}},t.createLineModel=function(t,e,n,i,r){for(var o=this,a=o.s,s=rp(t,e,a(qe)),c=[],l=0;l<s.length;l++){var d=s[l],h=d.length;if(h>1){var f=d[0];c.push(f.x,f.y,f.z);for(var g=1;h-1>g;g++)f=d[g],c.push(f.x,f.y,f.z),c.push(f.x,f.y,f.z);f=d[h-1],c.push(f.x,f.y,f.z)}}var p,v,y,_=a(i+".color"),m=a(r),b=0;return m&&(v=a(r+".color"),p=a(r+".pattern"),b=a(r+".offset"),y=_),cg(o.gv,o.data,c,v||_,y?u:a(i+".gradient.color"),n,p||a(i+".pattern"),b,y),s},t.createTubeModel=function(t,e,n,i){for(var r=this,o=r.s,a=o("shape3d.side")||cc,s=o("shape3d.start.angle"),c=o("shape3d.sweep.angle"),l=o(Qe)?o("shape3d.top.cap"):u,d=o(Je)?o("shape3d.bottom.cap"):u,h="flat"===l,f="flat"===d,g=h&&(i?i.uv:o("shape3d.top.image")),p=f&&(i?i.uv:o("shape3d.bottom.image")),v=i?i.uv:o("shape3d.image"),y={vs:[],uv:v?[]:u,top_vs:h?[]:u,top_uv:g?[]:u,bottom_vs:f?[]:u,bottom_uv:p?[]:u},_=rp(t,e,o(qe),n),m=0,b=_.length;b>m;m++)ap(y,_[m],o(Ke),n,a,s,c,l,d);if(i){var x=[];dg(r.gv,r.data,y,r,r.getBodyColor(),[],i,x),x.length&&(Ui(i.vs,x),Ui(i.ns,of(x)))}else r.shapeModel=y;return _},t.getCache=function(){var t=this.info;if(t){var e=t.list;if(e){var n=t.cache;return n||(n=t.cache=ip(e)),n}}return u}}});var np=function(t,e){for(var n,i=0,r=t.length,o=0,a=r-1;a>=o;)if(i=D(o+(a-o)/2),n=t[i].length-e,0>n)o=i+1;else{if(!(n>0)){a=i;break}a=i-1}i=a;var s=t[i],c=s.point;return i===r-1||s.length===e||(c=(new ru).subVectors(t[i+1].point,c).normalize().multiplyScalar(e-s.length).add(c)),{point:c,tangent:s.tangent}},ip=function(t){for(var e,n,i=[],r=0,o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++){e=a[s],n&&(r+=n.distanceTo(e));var c=new ru,l=a[s+1];l?c.subVectors(l,e):n?c.subVectors(e,n):c.x=1,c.normalize(),i.push({point:e,length:r,tangent:c}),n=e}n=null}return i},rp=function(t,e,n,i){n=n||ac;for(var r=[],o=0,a=t.size();a>o;o++){var s=t.get(o);r.push(new ru(s.x,s.e||0,s.y))}e&&(zi(e)&&(e=e._as),e.length||(e=null));for(var c,l,d,h,f,g=[],p=0,v=0,y=e?e.length:a;y>v;v++)if(f=e?e[v]:0===v?1:2,1===f)g.push(d=[]),d.push(r[p++]);else if(2===f||5===f)if(h=2===f?r[p++]:d[0],i){var _=e?e[v+1]:y>v+1?2:u;if(2===_||5===_){var m=d[d.length-1],b=2===_?r[p]:d[0],x=(new ru).subVectors(m,h),w=(new ru).subVectors(b,h),I=x.length(),S=w.length();if(I&&S)if(i>I/2&&i>S/2)d.push(h);else for(x.multiplyScalar(A(i,I/2)/I).add(h),w.multiplyScalar(A(i,S/2)/S).add(h),c=new ku(x,h,w).getPoints(n),l=0;n>=l;l++)d.push(c[l])}else d.push(h)}else d.push(h);else if(3===f)for(c=new ku(d[d.length-1],r[p++],r[p++]).getPoints(n),l=1;n>=l;l++)d.push(c[l]);else if(4===f)for(c=new Ru(d[d.length-1],r[p++],r[p++],r[p++]).getPoints(n),l=1;n>=l;l++)d.push(c[l]);return g},op=function(t){for(var e,n,i=new ru,r=[],o=[],a=[],s=0,c=t.length;c>s;s++)e=t[s],n=t[s+1],n?i.subVectors(n,e):i.subVectors(e,t[s-1]),r.push(i.normalize().clone());var l,u,d,h,f=new ru,g=new ru,p=new ou,v=1e-4,y=Number.MAX_VALUE,_=r[0],m=o[0]=new ru,b=a[0]=new ru;for(u=k(_.x),d=k(_.y),h=k(_.z),y>=u&&(y=u,f.set(1,0,0)),y>=d&&(y=d,f.set(0,1,0)),y>=h&&f.set(0,0,1),g.crossVectors(_,f).normalize(),m.crossVectors(_,g),b.crossVectors(_,m),s=1;c>s;s++)o[s]=o[s-1].clone(),a[s]=a[s-1].clone(),g.crossVectors(r[s-1],r[s]),g.length()>v&&(g.normalize(),l=z(Ki(r[s-1].dot(r[s]),-1,1)),o[s].applyMatrix4(p.makeRotationAxis(g,l))),a[s].crossVectors(r[s],o[s]);return{B:a,T:r,N:o}},ap=function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];t.push(n.x,n.y,n.z)}},e=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e].uv;t.push(n[0],n[1])}},n=function(t,e,n,i,r){var o=-i*R(r),a=i*N(r);return new ru(t.x+o*n.x+a*e.x,t.y+o*n.y+a*e.y,t.z+o*n.z+a*e.z)},i=function(t,e,i,r,o,a,s,c){s=s||G;for(var l=[],d=s/o,h=0;o>=h;h++){var f=n(t,e,i,r,h*d+a);l.push(f),c!=u&&(f.uv=[c,h/o])}return l},o=function(e,i,r,o,a,s,c,l,u){u=u||G;var d=i?e.top_vs:e.bottom_vs;if(d)for(var h=i?e.top_uv:e.bottom_uv,f=u/c,g=0;c>g;g++){var p,v;i?(p=g*f+l,v=(g+1)*f+l):(v=g*f+l,p=(g+1)*f+l),t(d,n(r,o,a,s,p),n(r,o,a,s,v),r),h&&h.push(.5-.5*R(p),.5-.5*N(p),.5-.5*R(v),.5-.5*N(v),.5,.5)}};return function(n,a,s,c,l,d,h,f,g){var p=a.length;if(p>1){var v,y,_,m,b,x,w,I=op(a),S=I.T,T=I.N,C=I.B;"flat"===f&&o(n,!0,a[0],C[0],T[0],c,l,d,h),"flat"===g&&o(n,!1,a[p-1],C[p-1],T[p-1],c,l,d,h);var M,D,O=[],A=E(l/2),k="round"===f,R="round"===g,z=a[0],N=S[0],V=C[0],L=T[0],B=a[p-1],G=S[p-1],F=C[p-1],j=T[p-1];if(k){for(_=1;A>=_;_++)T.splice(0,0,L),C.splice(0,0,V),S.splice(0,0,N),D=-_/A*c,a.splice(0,0,N.clone().multiplyScalar(D).add(z)),O[A-_]=P(c*c-D*D);p+=A}if(R){for(_=1;A>=_;_++)T.push(j),C.push(F),S.push(G),D=_/A*c,a.push(G.clone().multiplyScalar(D).add(B)),O[a.length-1]=P(c*c-D*D);p+=A}if(n.uv){var H=0,U=0,Z=[];for(s&&(H=s),b=a[0],Z[0]=0,_=1;p>_;_++)m=a[_],Z[_]=b.distanceTo(m),b=m,s||(H+=Z[_]);for(M=[],_=0;p>_;_++)U+=Z[_],M[_]=H?U/H:0}for(_=0;p>_;_++){if(m=a[_],x=C[_],w=T[_],v=i(m,x,w,O[_]===r?c:O[_],l,d,h,M?M[_]:u),y)for(var W=0;l>W;W++){var q=y[W],X=y[W+1]||y[0],Y=v[W],$=v[W+1]||v[0];t(n.vs,X,q,Y,Y,$,X),n.uv&&e(n.uv,X,q,Y,Y,$,X)}y=v}}}}();Wi(f,{getLineLength:function(t){return t[t.length-1].length},getLineOffset:function(t,e){return np(t,e)},getLineCacheInfo:function(t,e,n,i){return ip(rp(t,e,n,i))}});var sp=d.graph3d.RenderLite={},cp=new Array(0),lp=sp.Buffer=function(t,e,n,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=cp,n&&this.upload(n)};lp.prototype.upload=function(t,e,n){n||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},lp.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},lp.createVertexBuffer=function(t,e,n){return new lp(t,t.ARRAY_BUFFER,e,n)},lp.createIndexBuffer=function(t,e,n){return new lp(t,t.ELEMENT_ARRAY_BUFFER,e,n)},lp.create=function(t,e,n,i){return new lp(t,e,i)},lp.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};var up=sp.Shader=function(t,e,n){this.gl=t,this.program=dp(t,e,n),this.attributes=gp(t,this.program);var i=fp(t,this.program);this.uniforms=Ip(t,i)};up.prototype.bind=function(){this.gl.useProgram(this.program)},up.prototype.destroy=function(){this.gl};var dp=function(t,e,n){var i=hp(t,t.VERTEX_SHADER,e),r=hp(t,t.FRAGMENT_SHADER,n);t.getShaderParameter(r,t.COMPILE_STATUS)||console.error(t.getError());var o=t.createProgram();return t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(console.error("Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(i),t.deleteShader(r),o},hp=function(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)},fp=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;i>r;r++){var o=t.getActiveUniform(e,r),a=o.name.replace(/\[.*?\]/,""),s=_p(t,o.type);n[a]={type:s,size:o.size,location:t.getUniformLocation(e,a),value:xp(s,o.size)}}return n},gp=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;i>r;r++){var o=t.getActiveAttrib(e,r),a=_p(t,o.type);n[o.name]={type:a,size:vp(a),gl:t,location:t.getAttribLocation(e,o.name),pointer:pp}}return n},pp=function(t,e,n,i,r){var o=this.gl;o.enableVertexAttribArray(this.location),o.bindBuffer(t.type,t.buffer),o.vertexAttribPointer(this.location,this.size,e||o.FLOAT,n||!1,i||0,r||0)},vp=function(t){return yp[t]},yp={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},_p=function(t,e){if(!mp){var n=i.keys(bp);mp={};for(var r=0;r<n.length;++r){var o=n[r];mp[t[o]]=bp[o]}}return mp[e]},mp=null,bp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"},xp=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return wp(2*e);case"bvec3":return wp(3*e);case"bvec4":return wp(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},wp=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e},Ip=function(t,e){var n={data:{}};n.gl=t;for(var r=i.keys(e),o=0;o<r.length;o++){var a=r[o],s=a.split("."),c=s[s.length-1],l=Cp(s,n),u=e[a];l.data[c]=u,l.gl=t,i.defineProperty(l,c,{get:Sp(c),set:Tp(c,u)})}return n},Sp=function(t){var e=Mp.replace("%%",t);return new Function(e)},Tp=function(t,e){var n,i=Dp.replace(/%%/g,t);return n=1===e.size?Ep[e.type]:Pp[e.type],n&&(i+="\nthis.gl."+n+";"),new Function("value",i)},Cp=function(t,e){for(var n=e,i=0;i<t.length-1;i++){var r=n[t[i]]||{data:{}};n[t[i]]=r,n=r}return n},Mp=["return this.data.%%.value;"].join("\n"),Dp=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),Ep={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},Pp={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"},Op=d.Light=function(){Yi(Op,this),this.s(bh,g[bh]),this.s(We,"sphere"),this.s3(20,20,20)};uc("Light",Hu,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(t,e,n){Op.superClass.onStyleChanged.apply(this,arguments),t===bh&&this.s("shape3d.color",n)}});var Ap=Uf.Graph3dView=function(t,e){var n=this;n._webGLVersion=1,n._attributes=e||f.graph3dViewAttributes,n._25I={},n._view=vr(1,n);var i=n._canvas=_r(n._view);S(i,"webglcontextlost",(function(t){t.preventDefault(),cf(n),n._26I&&n._doBufferGC(n._26I,!0),n._26I=u,n._1o.texture=u,n._35O=!0})),S(i,"webglcontextrestored",(function(){n._35O=!1,n.iv()})),n._batchIndexMap={},n._batchModelMap={},n._wireframeIndexMap={},n._wireframeModelMap={},n._wireframeIndexMapSwap={},n._wireframeModelMapSwap={},n._polylineIndexMap={},n._polylineIndexMap={},n._polylineIndexMapSwap={},n._polylineIndexMapSwap={},n._8O=[],n._7O=_c(),n._6O=_c(),n._1o=new Bp(n),n._30O=new Up(n),n._31O=new Gp(n),n._32O=new Fp(n),n._raycaster=new ev(n),n._highlightHelper=new jp(n),n._postProcessing=new uv(n),n._cameras=[],n._cameraId=0,n.vr=new sv(n),n._33Q=!0,n._eye=Os(f.graph3dViewEye),n._center=Os(f.graph3dViewCenter),n._up=Os(f.graph3dViewUp),n._lightChanged=!1,n._59O=[],n._spots=[],n._dirs=[],n._frameId=0,n.overlappingBox=new ad(n),n.dm(t||new rl),n._coreInteractor=new Td(this),n.setInteractors([new Vp(n)])},kp={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1,ortho:1},Rp=function(t,e,n,i){t.clearColor(0,0,0,0),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.useProgram(n),Pf(t,n.uBrightness,1),Pf(t,n.uOpacity,1),Pf(t,n.uPartOpacity,1),Pf(t,n.uPick,i._picking),Pf(t,n.uTexture,!1),Pf(t,n.uBlendTexture,!1),Pf(t,n.uAlphaTest,g.alphaTest),Pf(t,n.uTransparent,!1),Pf(t,n.uFix,!1),Pf(t,n.uBatchColor,!1),Pf(t,n.uBatchBlend,!1),Pf(t,n.uBatchBrightness,!1),Pf(t,n.uReflectivity,i._envmapReflectivity),Pf(t,n.uCameraPosition,e.getEye()),Pf(t,n.uPMatrix,i._projectMatrix),Pf(t,n.uViewMatrix,i._viewMatrix),e.bindEnvMap(t),i._picking||(Vh(e,t,n),e._fogDisabled||(Pf(t,n.uFogColor,e._fogColor),Pf(t,n.uFogNear,e._fogNear),Pf(t,n.uFogFar,e._fogFar))),Of(t,n.aPosition),Of(t,n.aNormal),Af(t,n.aUv),Af(t,n.aBatchColor),Af(t,n.aBatchBlend),Af(t,n.aBatchBrightness),Af(t,n.aLineDistance),t.depthMask(!0)},zp=0;Zf("Graph3dView",i,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",ve,_e,"firstPersonMode",De,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",bt,mt,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled","hoverDelay"],_editable:!1,_editHelperDisabled:f.graph3dViewEditHelperDisabled,_devicePixelRatio:r,_boundaries:r,_moveStep:f.graph3dViewMoveStep,_rotateStep:f.graph3dViewRotateStep,_pannable:f.graph3dViewPannable,_rotatable:f.graph3dViewRotatable,_walkable:f.graph3dViewWalkable,_resettable:f.graph3dViewResettable,_zoomable:f.graph3dViewZoomable,_firstPersonMode:f.graph3dViewFirstPersonMode,_mouseRoamable:f.graph3dViewMouseRoamable,_gridVisible:f.graph3dViewGridVisible,_gridSize:f.graph3dViewGridSize,_gridGap:f.graph3dViewGridGap,_gridColor:f.graph3dViewGridColor,_originAxisVisible:f.graph3dViewOriginAxisVisible,_centerAxisVisible:f.graph3dViewCenterAxisVisible,_axisXColor:f.graph3dViewAxisXColor,_axisYColor:f.graph3dViewAxisYColor,_axisZColor:f.graph3dViewAxisZColor,_ortho:f.graph3dViewOrtho,_orthoWidth:f.graph3dViewOrthoWidth,_fovy:f.graph3dViewFovy,_near:f.graph3dViewNear,_far:f.graph3dViewFar,_headlightColor:f.graph3dViewHeadlightColor,_headlightIntensity:f.graph3dViewHeadlightIntensity,_headlightRange:f.graph3dViewHeadlightRange,_headlightDisabled:f.graph3dViewHeadlightDisabled,_rectSelectable:f.graph3dViewRectSelectable,_rectSelectBackground:f.graph3dViewRectSelectBackground,_editSizeColor:f.graph3dViewEditSizeColor,_autoMakeVisible:$a,_fogDisabled:f.graph3dViewFogDisabled,_fogColor:f.graph3dViewFogColor,_fogNear:f.graph3dViewFogNear,_fogFar:f.graph3dViewFogFar,_dashDisabled:f.graph3dViewDashDisabled,_batchColorDisabled:f.graph3dViewBatchColorDisabled,_batchBlendDisabled:f.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:f.graph3dViewBatchBrightnessDisabled,addCamera:function(t){var e=i.freeze({id:this._cameraId++,priority:t.priority||0,ignoreInPick:!!t.ignoreInPick,useDefaultProgram:!!t.useDefaultProgram,render:t.render});this._cameras.push(e),this._cameras.sort((function(t,e){return t.priority!==e.priority?t.priority-e.priority:t.id-e.id}))},setEye:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]);var i=this._eye;i[0]=t,i[1]=e,i[2]=n,this.fp(bt,u,i)},setCenter:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]);var i=this._center;i[0]=t,i[1]=e,i[2]=n,this.fp(mt,u,i)},setUp:function(t,e,n){1===arguments.length&&(e=t[1],n=t[2],t=t[0]);var i=this._up;i[0]=t,i[1]=e,i[2]=n,this.fp("up",u,i)},getDevicePixelRatio:function(){return this._devicePixelRatio||Ya},isTransparentMask:function(t){return t.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){var t=this,e=t._aspect;return e||(e=t.getWidth()/t.getHeight(),e||1.2)},getCanvas:function(){return this._canvas},setDataModel:function(t){var e=this,n=e._dataModel,i=e._selectionModel;n!==t&&(n&&(n.ump(e.handleDataModelPropertyChange,e),n.umm(e.handleDataModelChange,e),n.umd(e.handleDataPropertyChange,e),i||n.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mp(e.handleDataModelPropertyChange,e),t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),i?i._21I(t):t.sm().ms(e.handleSelectionChange,e),e._postProcessing.handleDataModleChange(n,t),e.invalidateAll(!0),e.invalidateLight(),e.fp(He,n,t),e._canvas.style.background=t.getBackground()||"")},handleDataModelPropertyChange:function(t){if("background"===t.property){var e=this._canvas.style.background,n=t.newValue||"";this._canvas.style.background=n,this.fp("canvasBackground",e,n)}else"envmap"===t.property&&this.iv()},handleDataPropertyChange:function(t){var e=t.data;this.invalidateData(e),Oh(e)&&"s:light.type"===t.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(t){var e=this,n=t.property;e.iv(),e._18Q=u,"eye"===n?e._33Q=!0:"devicePixelRatio"===n?e._42(u,e.getDevicePixelRatio()):kp[n]&&cf(e)},_5O:function(t){var e=t._22Q();return e?new e(this,t):u},getData3dUI:function(t){var e=this._25I[t._id];return e===r&&(e=this._5O(t),this._25I[t._id]=e),e},invalidateAll:function(t){var e=this;if(t){for(var n in e._25I){var i=e._25I[n];i&&i.dispose()}e._25I={},e.iv(),ng(e)}else ng(e),e.dm().each((function(t){e.invalidateData(t)}))},invalidateSelection:function(){var t=this;t.sm().each((function(e){t.invalidateData(e)}))},invalidateData:function(t){var e=this,n=e.getData3dUI(t);n&&(n.iv(),e.iv()),ng(e,t)},getShape3dText:function(t){return t.getStyle("shape3d.text")||this.getLabel(t)},invalidateBatch:function(t){var e=this,n=e._batchModelMap,i=n[t],o=[],a={};if(i){i.ds.forEach((function(t){var n=e.getData3dUI(t);n&&n.iv(),delete e._batchIndexMap[t._id],o.push(t._id)})),delete n[t];for(var s,c,l,u,d,h,f,g,p,v=["_wireframeModelMap","_polylineModelMap","_wireframeModelMapSwap","_polylineModelMapSwap"],y=["_wireframeIndexMap","_polylineIndexMap","_wireframeIndexMapSwap","_polylineIndexMapSwap"],_=0;_<v.length;_++){var m=e[v[_]],b=e[y[_]];for(a={},g=0;g<o.length;g++){var x=b[o[g]];if(x){delete b[o[g]],p=x.batch,s=m[p];var w=x.begin,I=x.size,S=3*w,T=3*I,C=4*w,M=4*I;for(c=s.ds,l=s.vs,u=s.cs,d=s.ps,h=s.ls,f=x.index,s.invalidate=!0,c[f]=r,f=S;S+T>f;f++)l[f]=r;for(f=C;C+M>f;f++)u[f]=r;for(f=C;C+M>f;f++)d[f]=r;if(h)for(f=S;S+T>f;f++)h[f]=r;a[p]=!0}}for(p in a){s=m[p],c=s.ds,l=s.vs,u=s.cs,d=s.ps,h=s.ls;var D=[];for(f=0;f<c.length;f++)c[f]!==r&&D.push(c[f]);if(0===D.length)delete m[p];else{for(s.ds=D,D=[],f=0;f<l.length;f++)l[f]!==r&&D.push(l[f]);for(s.vs=D,D=[],f=0;f<u.length;f++)u[f]!==r&&D.push(u[f]);for(s.cs=D,D=[],f=0;f<d.length;f++)d[f]!==r&&D.push(d[f]);if(s.ps=D,h){for(D=[],f=0;f<h.length;f++)h[f]!==r&&D.push(h[f]);s.ls=D}}}}e.iv()}},handleDataModelChange:function(t){var e=this,n=t.kind,i=t.data;if("add"===n)e.invalidateData(i),Li(i)&&i.getEdgeGroup()&&i.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),Oh(i)&&e.invalidateLight();else if(n===Nt){var r=i._id,o=e._25I[r];o&&(o.dispose(),delete e._25I[r],e.iv()),i===e._currentSubGraph&&e.setCurrentSubGraph(u),ng(e,i),Oh(i)&&e.invalidateLight()}else n===Vt&&(e.invalidateAll(!0),e.setCurrentSubGraph(u),ng(e),e.invalidateLight())},toCanvas:function(t,e,n){var i=this,r=i.getGL();if(i.validate(),t){var o=r.getParameter(r.COLOR_CLEAR_VALUE);pf(r,t)}i._42(u,1);var a=i.getWidth(),s=i.getHeight(),c=new Uint8Array(4*a*s),l=_r(),d=l.getContext("2d");r.readPixels(0,0,a,s,r.RGBA,r.UNSIGNED_BYTE,c),xr(l,a,s,1);for(var h=d.getImageData(0,0,a,s),g=h.data,p=0;p<g.length;p+=4){var v=p/4,y=D(v/a),_=v-y*a;v=4*((s-1-y)*a+_),g[v]=c[p],g[v+1]=c[p+1],g[v+2]=c[p+2],g[v+3]=c[p+3]}if(d.putImageData(h,0,0),t&&pf(r,o),i._42(u,i.getDevicePixelRatio()),e&&n){var m=_r(),b=m.getContext("2d");return e=e,n=n,xr(m,e,n,1),f.drawImage(b,l,0,0,e,n),m}return l},toDataURL:function(t,e){var n=this,i=n.getGL();if(n.validate(),t){var r=i.getParameter(i.COLOR_CLEAR_VALUE);pf(i,t)}n._42(u,1);var o=n._canvas.toDataURL(e||"image/png",1);return t&&pf(i,r),n._42(u,n.getDevicePixelRatio()),o},getGL:function(){var t=this._26I;if(t)return this.acquireProgram(),t;var e=this,n=e._canvas,i=e._attributes;try{t=n.getContext("webgl2",i)||n.getContext("experimental-webgl2",i),t&&(e._webGLVersion=2,e._26I=t)}catch(tt){}if(!t)try{t=n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}catch(tt){throw new Error("WebGL not supported")}if(!t)throw new Error("WebGL not supported");e._26I=t,e._glExtensions=new a(t),e._glCapabilities=new s(t,e._glExtensions),e._2O={},t._emptyTexture=sf(t),t._emptyBlendTexture=sf(t),t._bufPool={},t._id=++zp,e._buffer={vs:uf(t),ns:uf(t),is:uf(t),uv:uf(t),batchColor:uf(t),batchBlend:uf(t),batchBrightness:uf(t),lineDistance:uf(t)},e._1O=af(t);var r=e._cube={vs:uf(t),ns:uf(t),is:uf(t),uv:uf(t)};return Tf(t,r.vs,Eg),Tf(t,r.ns,Ag),Tf(t,r.uv,Og),Mf(t,r.is,Pg),e.acquireProgram(),t},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<16?null:this.dm().getEnvmap()},acquireProgram:function(){var t=this,e=t._26I;if(e){var n=!!d.Default.getImage(t.getEnvmap()),i=!(!t._prg||!t._prg.envMapFlag);if(!t._prg||n!==i){var r=t._prg=e.createProgram();if(!r)return u;r.envMapFlag=n;var o=t._dirs.length,a=t._spots.length,s=t._59O.length,c=["uPMatrix","uMVMatrix","uMMatrix","uReflectivity","uViewMatrix","uUseEnvMap","uEnvMap","uCameraPosition","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uAlphaTest","uTransparent","uTexture","uBlendTexture","uSampler","uBlendSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];o&&c.push("uDirColor","uDirDirection"),a&&c.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotDirection"),s&&c.push("uPointColor","uPointRange","uPointPosition"),pf(e,[0,0,0,0]),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),Mh||(Wf=Xi(Wf.substring(0,Wf.indexOf("^#"))),qf=Xi(qf),Mh=!0);var l=["#define MAX_DIR "+o,"#define MAX_SPOT "+a,"#define MAX_POINT "+s,t._fogDisabled?"":"#define FOG",t._dashDisabled?"":"#define DASH",n?"#define USE_ENVMAP":"",t.isOrtho()?"#define ORTHOGRAPHIC":"",t._batchColorDisabled?"":"#define BATCHCOLOR",t._batchBlendDisabled?"":"#define BATCHBLEND",t._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),h=lf(e,r,e.VERTEX_SHADER,Wf.replace("PREFIX",l));e.getShaderParameter(h,e.COMPILE_STATUS)||console.error("compile vs shader faild, error info : ",e.getShaderInfoLog(h));var f=lf(e,r,e.FRAGMENT_SHADER,qf.replace("PREFIX",l));e.getShaderParameter(f,e.COMPILE_STATUS)||console.error("compile fs shader faild, error info : ",e.getShaderInfoLog(f)),rt?c.push("aPosition"):(r.aPosition=0,e.bindAttribLocation(r,0,"aPosition")),e.linkProgram(r),c.forEach((function(t){r[t]=/^u/.test(t)?e.getUniformLocation(r,t):e.getAttribLocation(r,t)})),e.useProgram(r),e.deleteShader(h),e.deleteShader(f)}}},getBrightness:function(t){var e=t.s("brightness"),n=this.isSelected(t)?t.s("select.brightness"):u;return e==u?n:n==u?e:e*n},setHighlightMode:function(t){var e;e="selection"===t?jp.Mode.Selection:"mouseover"===t?jp.Mode.MouseOver:jp.Mode.Disable,this._highlightHelper.mode=e},getHighlightMode:function(){var t=this._highlightHelper.mode;return t===jp.Mode.Selection?"selection":t===jp.Mode.MouseOver?"mouseover":"disable"},bindEnvMap:function(t){var e=this,n=e._prg,i=5,r=e.getEnvmap(),o=d.Default.getImage(r);if(o){if(r!==e._lastEnvMap){e._envMapTexture&&t.deleteTexture(e._envMapTexture);var a=e._envMapTexture=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,a),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+0,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+1,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+2,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+3,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+4,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+5,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.bindTexture(t.TEXTURE_CUBE_MAP,null),e._lastEnvMap=r}t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,e._envMapTexture),t.uniform1i(n.uEnvMap,i)}},getWireframe:function(t){var e=t.s("wf.visible"),n=t.s("wf.width");return!0===e||n>0&&"selected"===e&&this.isSelected(t)?{color:t.s("wf.color"),width:n,short:t.s("wf.short"),mat:t.s("wf.mat")}:void 0},_transformPointToViewSpace:function(t){var e=[t[0],t[1],t[2]];return Ic(e,this._viewMatrix),e},_transformDirectionToViewSpace:function(t,e){var n=[t[0],t[1],t[2]];Ic(n,this._viewMatrix);var i=e?[e[0],e[1],e[2]]:[0,0,0];Ic(i,this._viewMatrix);var r=i[0]-n[0],o=i[1]-n[1],a=i[2]-n[2],s=Math.sqrt(r*r+o*o+a*a);return s?[r/s,o/s,a/s]:[r,o,a]},getWireframeGeometry:function(t){return t.s("wf.geometry")?{color:t.s("wf.color"),width:t.s("wf.width"),mat:t.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function(t){return t.s("body.color")},getMat:function(t){return t.getMat?t.getMat():t.s("mat")},getFaceMat:function(t,e){return t.getFaceMat?t.getFaceMat(e):t.s(e+".mat")},getFaceBlend:function(t,e){return t.s(e+".blend")||t.s("all.blend")},getFaceColor:function(t,e){return t.s(e+".color")||t.s("all.color")},getFaceImage:function(t,e){return t.s(e+".image")||t.s("all.image")},getFaceBlendImage:function(t,e){return t.s(e+".blend.image")||t.s("all.blend.image")},getFaceDiscardSelectable:function(t,e){var n=t.s(e+".discard.selectable");return n==u?t.s("all.discard.selectable"):n},getFaceUv:function(t,e){return t.s(e+".uv")||t.s("all.uv")},getFaceUvOffset:function(t,e){return t.s(e+".uv.offset")||t.s("all.uv.offset")},getFaceUvScale:function(t,e){return t.s(e+".uv.scale")||t.s("all.uv.scale")},getFaceLight:function(t,e){var n=t.s(e+".light");return n==u?t.s("all.light"):n},getFaceVisible:function(t,e){var n=t.s(e+".visible");return n==u?t.s("all.visible"):n},getFaceOpacity:function(t,e){var n=t.s(e+".opacity");return n==u?t.s("all.opacity"):n},getFaceTransparent:function(t,e){var n=t.s(e+".transparent");return n==u?t.s("all.transparent"):n},getFaceReverseColor:function(t,e){return t.s(e+".reverse.color")||t.s("all.reverse.color")},getFaceReverseFlip:function(t,e){var n=t.s(e+".reverse.flip");return n==u?t.s("all.reverse.flip"):n},getFaceReverseCull:function(t,e){var n=t.s(e+".reverse.cull");return n==u?t.s("all.reverse.cull"):n},getTextureMap:function(){return this._2O},deleteTexture:function(t){var e=this,n=e._2O[t];n&&(delete e._2O[t],e.getGL().deleteTexture(n))},invalidateShape3dCachedImage:function(t){var e=this.getData3dUI(t);e.invalidateCachedTexture(this.getGL())},isInteractive:function(t){return t.s("interactive")},getTexture:function(t,n){if(!t)return u;var i=this,r=i.getGL(),o=i._2O[t];if(!o){var a=Ss(t);if(!a)return r._emptyTexture;if(a.uuid||(a.uuid=d.Math.generateUUID()),a.tagName){if(a.dynamic)return af(r,a,i._1O);o=i._2O[t]=af(r,a)}else{var s,c=n&&n.s("shape3d.image.cache")&&!i.isInteractive(n),l=i.vr.isPresenting();if(l&&(n._textureUpdateFrame===r._renderInfo.frame?c=!0:n._textureUpdateFrame=r._renderInfo.frame),c&&(s=i.getData3dUI(n),o=s.getCachedTexture()),!o){if(c){if(r._renderInfo.cacheTimeCost>f.graph3dMaxVectorCacheTime)return i.redraw(),r._emptyTexture;if(!Ts(a,n))return r._emptyTexture}var h,g=n&&n.s("shape3d.fixSizeOnScreen"),p=g?r.NEAREST:r.LINEAR;g||n&&n.s("shape3d.vector.dynamic")&&(s||(s=i.getData3dUI(n)),g=s.getVectorDynamicSize(),g&&(h=i.getDevicePixelRatio(),g[0]*=h,g[1]*=h));var v,y,_=n&&n.s("shape3d.texture.scale")||1;if(g?(h||(h=i.getDevicePixelRatio()),v=g[0]>0?g[0]:_*$c(a,n)*h,y=g[1]>0?g[1]:_*Qc(a,n)*h):(v=_*$c(a,n),y=_*Qc(a,n)),v>=1&&y>=1){var m=0;c&&(m=Date.now());var b=vo(v,y);if(!s&&n&&(s=i.getData3dUI(n)),s&&s.interactiveInfo){var x=t;"object"==e(x)&&(x=x.uuid||(x.uuid=d.Math.generateUUID()));var w=s.interactiveInfo[x]={};b.interactiveInfo=w.bodyInfo={compInfos:[],matrix:new Aa,rect:{x:0,y:0,width:v,height:y}}}Kc(b,a,0,0,v,y,n,i),b.interactiveInfo&&(b.interactiveInfo=null),b.restore(),c||l?(o=af(r,go,null,p),s.setCachedTexture(o),r._renderInfo.cacheTimeCost+=Date.now()-m,go=null):o=af(r,go,i._1O,p)}}}}return o},redraw:function(){this.iv()},validateImpl:function(){var t=this;if(t._lightChanged){t._lightChanged=!1;var e=[],n=[],i=[];t.dm().each((function(t){if(Oh(t)){var r=t.s("light.type");r===_h?e.push(t):r===mh?n.push(t):r===yh&&i.push(t)}})),(e.length!==t._59O.length||n.length!==t._spots.length||i.length!==t._dirs.length)&&cf(t),t._59O=e,t._spots=n,t._dirs=i}t._42(),t._1o.iv()},getRenderInfo:function(){var t=this.getGL();return t?t._renderInfo:void 0},getDebugTip:function(){var t=this,e=t.getRenderInfo();if(e){var n=t.getGL()._validBufCount||0,i="Draw Calls: "+e.calls+"<br/>Vertices: "+e.vertices+"<br/>Faces: "+e.faces+"<br/>Lines: "+e.lines+"<br/>Buffer Count: "+n;return t.vr.isPresenting()&&(i+="<br/>VR fps: "+t.vr.getFps()),i}},_42:function(t,e){var n=this;if(!n._35O&&(!Hn||Ln(Hn))){var i,r;t&&(t instanceof Hu?r=t:i=t);var o=n._canvas,a=n.getGL(),s=n._prg;if(a){var c=n.getWidth(),l=n.getHeight();if(c&&l){e?t||xr(o,c,l,e):(e=n.getDevicePixelRatio(),t||c===o.clientWidth&&l===o.clientHeight||(xr(o,c,l,e),c&&a.drawingBufferWidth!==c*e&&(n.setDevicePixelRatio(e=a.drawingBufferWidth/c),xr(o,c,l,e)))),a.clear(a.COLOR_BUFFER_BIT),n.drawFilter||(a._renderInfo={calls:0,vertices:0,faces:0,lines:0,frame:t?n._frameId:++n._frameId,cacheTimeCost:0});var h,f=this._cameras,g=0,p=f.length,v=!1,y=d.Default.cameraPriority.skybox,_=d.Default.cameraPriority.main,m=d.Default.cameraPriority.top,b=c*e,x=l*e,w=function e(){n.overlappingBox.clear(),n._81O=u,a.clear(a.DEPTH_BUFFER_BIT),a._picking=!!t;var o={_picking:!!t,_envmapReflectivity:n._envmapReflectivity||.5,_projectMatrix:n._projectMatrix=rf(n),_viewMatrix:nf(n,n._7O)};if(n._viewMatrix=bc(n._7O),r){Rp(a,n,s,o);var c=a.getParameter(a.COLOR_CLEAR_VALUE);a.clearColor(0,0,0,0),a.disable(a.BLEND),Af(a,s.aNormal),Tf(a,n._cube.vs,u,s.aPosition),Mf(a,n._cube.is),Ph(r,n,pt,0),Ph(r,n,ft,6),Ph(r,n,vt,12),Ph(r,n,gt,18),Ph(r,n,yt,24),Ph(r,n,_t,30),Of(a,s.aNormal),pf(a,c)}else if(i){for(i.value=2;p>g;g++)if(h=f[g],!h.ignoreInPick){if(h.priority>=_)break;h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n,i)}Rp(a,n,s,o);c=a.getParameter(a.COLOR_CLEAR_VALUE);for(a.clearColor(0,0,0,0),a.disable(a.BLEND),n._95I(a,s,i),yg(n,i),vg(n,n._polylineModelMap,i),vg(n,n._wireframeModelMap,i),Pf(a,s.uTransparent,!0),n._95I(a,s,i,!0),yg(n,i,!0),vg(n,n._polylineModelMap,i,!0),vg(n,n._wireframeModelMap,i,!0),Pf(a,s.uTransparent,!1);p>g;g++)if(h=f[g],!h.ignoreInPick){if(h.priority>=m)break;h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n,i),v=!0}for(v&&(Rp(a,n,s,o),v=!1),a.clear(a.DEPTH_BUFFER_BIT),n._swapLineMap(),n._95I(a,s,i,!1,!0),vg(n,n._polylineModelMap,i),vg(n,n._wireframeModelMap,i),n._swapLineMap(),n._swapLineMap(),n._95I(a,s,i,!1,!0),vg(n,n._polylineModelMap,i),vg(n,n._wireframeModelMap,i),Pf(a,s.uTransparent,!0),n._95I(a,s,i,!0,!0),vg(n,n._polylineModelMap,i,!0),vg(n,n._wireframeModelMap,i,!0),Pf(a,s.uTransparent,!1),n._swapLineMap(),a.disable(a.DEPTH_TEST),n.drawFilter||n._30O._42(a,s,i),a.enable(a.DEPTH_TEST);p>g;g++)h=f[g],h.ignoreInPick||(h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n,i));pf(a,c)}else{for(;p>g&&(h=f[g],!(h.priority>=y));g++)h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n);for(Rp(a,n,s,o),a.disable(a.BLEND),n.drawSky(a,s),n.drawReflectors(a,b,x,e,t)&&(o._projectMatrix=n._projectMatrix=rf(n),o._viewMatrix=nf(n,n._7O),n._viewMatrix=bc(n._7O),Rp(a,n,s,o));p>g&&(h=f[g],!(h.priority>=_));g++)h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n),v=!0;for(v&&(Rp(a,n,s,o),v=!1),n._31O._42(a,s),n._95I(a,s),yg(n),vg(n,n._polylineModelMap),vg(n,n._wireframeModelMap),a.enable(a.BLEND),a.depthMask(!1),Pf(a,s.uTransparent,!0),n._95I(a,s,u,!0),yg(n,u,!0),vg(n,n._polylineModelMap,u,!0),vg(n,n._wireframeModelMap,u,!0),a.depthMask(!0),Pf(a,s.uTransparent,!1);p>g&&(h=f[g],!(h.priority>=m));g++)h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n),v=!0;for(v&&(Rp(a,n,s,o),v=!1),a.clear(a.DEPTH_BUFFER_BIT),n._swapLineMap(),a.disable(a.BLEND),n._95I(a,s,u,!1,!0),vg(n,n._polylineModelMap),vg(n,n._wireframeModelMap),a.enable(a.BLEND),Pf(a,s.uTransparent,!0),a.depthMask(!1),n._95I(a,s,u,!0,!0),vg(n,n._polylineModelMap,u,!0),vg(n,n._wireframeModelMap,u,!0),a.depthMask(!0),Pf(a,s.uTransparent,!1),n._swapLineMap(),a.disable(a.DEPTH_TEST),a.disable(a.BLEND),n._32O._42(a,s),n._30O._42(a,s),n._highlightHelper._42(a,s),a.enable(a.DEPTH_TEST);p>g;g++)h=f[g],h.useDefaultProgram&&Rp(a,n,s,o),h.render(a,n)}Tf(a,u),Mf(a,u)},I=!1,S=n.vr;S.enable&&S._42(a,b,x,w)&&(I=!0);var T=n.envRenderer;T&&T.enable&&T._42(a,b,x,w)&&(I=!0);var C=n._postProcessing;C._42(a,b,x,w,t)&&(I=!0),I||(n.setViewport(a,0,0,c*e,l*e),w()),n._33Q=!1,n.drawFilter||n.countFrame(),n._doBufferGC(a)}}}},drawReflectors:function(t,e,n,i,r){var o,a,s,c=this,l=c._dataModel.getReflectors(),u=!1;for(o in l)a=l[o],c.isVisible(a)&&(s=c.getData3dUI(a),s&&s.drawReflector(t,e,n,i,r)&&(u=!0));return u},enablePostProcessing:function(t,e){return this._postProcessing.enableModule(t,e)},getPostProcessingModule:function(t){return this._postProcessing.getModule(t)},setViewport:function(t,e,n,i,r){this._viewport=[e,n,i,r],t.viewport(e,n,i,r)},getViewport:function(){return this._viewport},setBufferGCInterval:function(t){this._bufferGCInterval=t},_doBufferGC:function(t,e){var n,i,r=t._bufPool,o=0,a=0,s=t._renderInfo.frame,c=this._bufferGCInterval||10;for(n in r)o++,i=r[n],i&&(e||s-i._fid>c?(t.deleteBuffer(i._buf),i._buf=null,r[n]=null):a++);if(o/2>a&&o>128){var l={};for(n in r)r[n]&&(l[n]=r[n]);t._bufPool=l}t._validBufCount=a},_swapLineMap:function(){var t=this;et=t._polylineModelMap,t._polylineModelMap=t._polylineModelMapSwap,t._polylineModelMapSwap=et,et=t._wireframeModelMap,t._wireframeModelMap=t._wireframeModelMapSwap,t._wireframeModelMapSwap=et,et=t._polylineIndexMap,t._polylineIndexMap=t._polylineIndexMapSwap,t._polylineIndexMapSwap=et,et=t._wireframeIndexMap,t._wireframeIndexMap=t._wireframeIndexMapSwap,t._wireframeIndexMapSwap=et},_updateSkyBox:function(t){if(this._skyBox&&t){var e=t.property,n=!1,i=this._skyBox;if("eye"===e||"forceUpdate"===e){var r=this._eye;i.p3(r[0],r[1],r[2]),n=!0}if("near"===e||"far"===e||"forceUpdate"===e){var o=this._near,a=this._far,s=i.getFinalScale3d();if(s[0]/=2,s[1]/=2,s[2]/=2,s[0]<=o||s[0]>=a||s[1]<=o||s[1]>=a||s[2]<=o||s[2]>=a){var c=2*o*a/(o+a),l=Math.min(s[0],s[1],s[2]),u=c/l,d=i.getScale3d();i.setScale3d(d[0]*u,d[1]*u,d[2]*u),n=!0}}n&&this.invalidateData(i)}},getSkyBox:function(){return this._skyBox},setSkyBox:function(t){var e=this._skyBox;e&&(this._skyBoxStyleMap&&e.setStyleMap(this._skyBoxStyleMap),this._skyBoxStyleMap=null,this._skyBoxAnchor3d&&e.setAnchor3d(this._skyBoxAnchor3d),this._skyBoxAnchor3d=null,this._skyBoxP3&&e.p3(this._skyBoxP3),this._skyBoxP3=null),this._skyBox=t,this.ump(this._updateSkyBox,this),t&&(t.dm()&&t.dm().remove(t),this._skyBoxStyleMap=d.Default.clone(t.getStyleMap()),this._skyBoxAnchor3d=t.getAnchor3d(),t.setAnchor3d(.5,.5,.5),this._skyBoxP3=t.p3().slice(0),t.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1}),this.mp(this._updateSkyBox,this),this._updateSkyBox({property:"forceUpdate"})),this.fp("skyBox",e,t)},drawSky:function(t,e,n){var i=this,r=i._skyBox;if(r){var o=i._headlightIntensity,a=_o(i._headlightColor);e=i._prg;1!==o&&(a=[a[0]*o,a[1]*o,a[2]*o]),Pf(t,e.uHeadlightColor,[a[0],a[1],a[2],1]);var s=i.getData3dUI(r);if(s){var c,l=i.isOrtho(),u=l||this._computedProjectMatrix;u&&(c=i._projectMatrix,l&&(i._ortho=!1),Pf(t,e.uPMatrix,i._projectMatrix=rf(i,!0)));var d=r.p3(),h=this._eye;(d[0]!==h[0]||d[1]!==h[1]||d[2]!==h[2])&&(r._position.x=h[0],r._54O=h[1],r._position.y=h[2]),s._42(t,e,n,(function(){return!0})),u&&(l&&(i._ortho=!0),Pf(t,e.uPMatrix,i._projectMatrix=c))}t.clear(t.DEPTH_BUFFER_BIT),Pf(t,e.uHeadlightColor,[a[0],a[1],a[2],i._headlightDisabled?1:0])}},_95I:function(t,e,n,i,r){function o(i){if(!!i.s("shape3d.alwaysOnTop")==!!r&&a.isVisible(i)&&(!W||q)){if(!n&&a.isTransparentMask(i))return;var o=a.getData3dUI(i);o&&o._42(t,e,n,s)}}var a=this,s=function(t){return i?t:!t};a.sky&&t.clear(t.DEPTH_BUFFER_BIT);var c=a.drawFilter;c?a.dm().each((function(t){c(t)||o(t)})):a.dm().each((function(t){o(t)}))},getLogicalPoint:function(t){return ec(t,this._canvas)},isRectOverlapping:function(t){var e=this.getData3dUI(t);return e._rectOverlapping},getHitFaceInfo:function(t){t.target&&(t=this.lp(t));var e=this.getDataInfoAt(t);if(e){var n=this._1o.face(e.data,Ti(t.x,t.y));if(n)return{data:e.data,face:n}}return u},unproject:function(t,e){var n=this,i=n.getWidth(),r=n.getHeight(),o=t.target?n.lp(t):t,a=o.x-i/2,s=o.y-r/2,c=a/i*2,l=-1*s/r*2;e=e||0;var u=_c(),d=rf(n),h=nf(n);Yh(u,d,h),Wh(u);var f=Sc([c,l,e,1],u);return[f[0]/f[3],f[1]/f[3],f[2]/f[3]]},getDataAt:function(t){var e=this.getDataInfoAt(t);return e?e.data:u},getDataInfoAt:function(t,e){return t.target&&(t=this.lp(t)),this._1o.get(Ti(t.x,t.y,e),!0)},getDatasInRect:function(t){return this._1o.get(t)},setEditable:function(t){var e=this,n=e._editable;e._editable=t,this.fp(ke,n,t)},isEditable:function(t){var e=this;return!!e._editable&&(!!Vi(t)&&(!!t.s("3d.editable")&&(!e._editableFunc||e._editableFunc(t))))},isSelectable:function(t){return t.s("3d.selectable")&&this.sm().isSelectable(t)},isMovable:function(t){var e=this;return(!Li(t)||t.getStyle(ce)===Wt)&&(!!t.s("3d.movable")&&(!e._movableFunc||e._movableFunc(t)))},isSizeEditable:function(t){return!!Vi(t)&&(!this._sizeEditableFunc||this._sizeEditableFunc(t))},isRotationEditable:function(t){return!(!Vi(t)||!1===t.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(t))},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(t){this.setZoom(vs,t)},zoomOut:function(t){this.setZoom(1/vs,t)},setZoom:function(t,e){if(1!==t){var n=this;if(n._ortho)return void n.setOrthoZoom(t,e);n._14o&&n._14o.stop(!0);var i=1/t,r=n._eye,o=n._center,a=o[0]+(r[0]-o[0])*i-r[0],s=o[1]+(r[1]-o[1])*i-r[1],c=o[2]+(r[2]-o[2])*i-r[2];if(!(Ws(r,o)<n._moveStep&&1>i)){if(e=Zi(e)){var l=Os(r);return e.action=function(t){n.fi({kind:n._zooming?"betweenZoom":"beginZoom"}),n._zooming=1,r[0]=l[0]+a*t,r[1]=l[1]+s*t,r[2]=l[2]+c*t,n.fp(bt,u,r)},e._37o=function(){delete n._14o,delete n._zooming,n.fi({kind:"endZoom"}),n.onZoomEnded()},n._14o=ks(e)}r[0]+=a,r[1]+=s,r[2]+=c,n.fp(bt,u,r)}}},setOrthoZoom:function(t,e){if(1!==t){var n=this;n._14o&&n._14o.stop(!0);var i=n._orthoWidth,r=i/t-i;if(!(i<n._moveStep&&t>1))return(e=Zi(e))?(e.action=function(t){n.fi({kind:n._zooming?"betweenZoom":"beginZoom"}),n._zooming=1,n.setOrthoWidth(i+r*t)},e._37o=function(){delete n._14o,delete n._zooming,n.fi({kind:"endZoom"}),n.onZoomEnded()},n._14o=ks(e)):void n.setOrthoWidth(i/t)}},getPositionInfo:function(t){var e=this,n=e._eye,i=e._center,r=e.getAspect(),o=t?yc(pc(i,n,!0),pc(t,n)):Ws(n,i);if(e._ortho){var a=e._orthoWidth;return{length:o,height:a/r,width:a}}var s=2*j(e._fovy/2)*o;return{length:o,height:s,width:s*r}},getCenterInfo:function(){var t=this;return t._81O||(t._81O=t.getPositionInfo()),Os(t._81O)},rotate:function(t,e,n,i){var r=this;if(t||e){i==u&&(i=r._firstPersonMode),r._88O&&r._88O.stop(!0);var o=r._center,a=r._eye,s=r.getCenterInfo().length,c=i?o:a,l=i?a:o,d=pc(c,l),h=H(d[0],d[2]),f=H(P(d[0]*d[0]+d[2]*d[2]),d[1]),g=i?mt:bt;return i&&(e=-e),(n=Zi(n))?(n.action=function(n){r.fi({kind:r._rotating?"betweenRotate":"beginRotate"}),r._rotating=1;var i=h+t*n,o=f+e*n;o=Bh(o),d[0]=s*N(o)*N(i),d[1]=s*R(o),d[2]=s*N(o)*R(i),c[0]=l[0]+d[0],c[1]=l[1]+d[1],c[2]=l[2]+d[2],r.fp(g,u,c)},n._37o=function(){delete r._88O,delete r._rotating,r.fi({kind:"endRotate"}),r.onRotateEnded()},r._88O=ks(n)):(h+=t,f+=e,f=Bh(f),d[0]=s*N(f)*N(h),d[1]=s*R(f),d[2]=s*N(f)*R(h),c[0]=l[0]+d[0],c[1]=l[1]+d[1],c[2]=l[2]+d[2],void r.fp(g,u,c))}},pan:function(t,e,n,i){if(t||e){var r=this;i==u&&(i=r._firstPersonMode),r._89O&&r._89O.stop(!0);var o=nf(r),a=[o[0]*t,o[4]*t,o[8]*t],s=[o[1]*e,o[5]*e,o[9]*e],c=a[0]+s[0],l=a[1]+s[1],d=a[2]+s[2],h=r._center,f=r._eye;if(i){var g=Hf(r.getBoundaries(),f[0],f[2],f[0]+c,f[2]+d,P(c*c+d*d));c=g[0],d=g[1]}if(n=Zi(n)){var p=Os(f),v=Os(h);return n.action=function(t){r.fi({kind:r._panning?"betweenPan":"beginPan"}),r._panning=1,h[0]=v[0]+c*t,h[1]=v[1]+l*t,h[2]=v[2]+d*t,f[0]=p[0]+c*t,f[1]=p[1]+l*t,f[2]=p[2]+d*t,r.fp(bt,u,f),r.fp(mt,u,h)},n._37o=function(){delete r._89O,delete r._panning,r.fi({kind:"endPan"}),r.onPanEnded()},r._89O=ks(n)}h[0]+=c,h[1]+=l,h[2]+=d,f[0]+=c,f[1]+=l,f[2]+=d,r.fp(bt,u,f),r.fp(mt,u,h)}},walk:function(t,e,n){if(t){var i=this;n==u&&(n=i._firstPersonMode),i._90O&&i._90O.stop(!0);var r=i._center,o=i._eye,a=pc(r,o,!0);if(n){var s=Hf(i.getBoundaries(),o[0],o[2],o[0]+a[0]*t,o[2]+a[2]*t,k(t));if(t=Ws(s),!t)return;a=[s[0]/t,0,s[1]/t]}if(e=Zi(e)){var c=Os(o),l=Os(r);return e.action=function(e){i.fi({kind:i._walking?"betweenWalk":"beginWalk"}),i._walking=1;var n=t*e;o[0]=c[0]+a[0]*n,o[1]=c[1]+a[1]*n,o[2]=c[2]+a[2]*n,r[0]=l[0]+a[0]*n,r[1]=l[1]+a[1]*n,r[2]=l[2]+a[2]*n,i.fp(bt,u,o),i.fp(mt,u,r)},e._37o=function(){delete i._90O,delete i._walking,i.fi({kind:"endWalk"}),i.onWalkEnded()},i._90O=ks(e)}o[0]+=a[0]*t,o[1]+=a[1]*t,o[2]+=a[2]*t,r[0]+=a[0]*t,r[1]+=a[1]*t,r[2]+=a[2]*t,i.fp(bt,u,o),i.fp(mt,u,r)}},handleScroll:function(t,e){t.preventDefault();var n=this,i=n._moveStep,r=n.getDataInfoAt(t);if(r){var o=r.data;if(o&&n.isInteractive(o)){var a=n.intersectObject(t,o);if(a){var s=a.part,c=Ss(o.s(s+".image")||o.s("shape3d."+s+".image")||o.s("all.image")||o.s("shape3d.image"));if(c&&Jc(c.scrollable,o,n))return}}}n.isFirstPersonMode()?n.isPannable()&&n.pan(0,e>0?i:-i):n.isZoomable()&&n.setZoom(0>e?1/ys:ys)},handlePinch:function(t,e){this.isZoomable()&&this.setZoom(e>t?1/_s:_s)},reset:function(){this.setCenter(f.graph3dViewCenter),this.setEye(f.graph3dViewEye),this.setUp(f.graph3dViewUp)},moveSelection:function(t,e,n){var i=this;i.dm().beginTransaction(),Qo(this.sm().toSelection(this.isMovable,this),t,e,n),i.dm().endTransaction()},getMoveMode:function(t,e){var n=e.s("3d.move.mode");if(n)return n;var i="88",r="89",o="90";return js(t)||Yn[i]&&Yn[r]&&Yn[o]?"xyz":Yn[i]&&Yn[r]?"xy":Yn[i]&&Yn[o]?"xz":Yn[r]&&Yn[o]?"yz":Yn[i]?"x":Yn[r]?"y":Yn[o]?"z":"xz"},handleTick:function(){var t=this,e=!1,n=t._moveStep,i=n,r=!1,o=!0,a=t._rotateStep*(o?-1:1);if(t.isWalkable()||(i=0),t.isPannable()||(n=0),t.isRotatable()||(a=0),t._32Q){var s=(vi()-t._32Q)/50;i*=s,n*=s,a*=s}t._31Q&&(yi(t._31Q),delete t._31Q,delete t._32Q),to()&&(e=!0,t.pan(-n,0,r,o)),no()&&(e=!0,t.pan(n,0,r,o)),io()&&(e=!0,js()?t.pan(0,n,r,o):t.walk(i,r,o)),eo()&&(e=!0,js()?t.pan(0,-n,r,o):t.walk(-i,r,o)),ro()&&(e=!0,t.rotate(-a,0,r,o)),ao()&&(e=!0,t.rotate(a,0,r,o)),oo()&&(e=!0,t.rotate(0,-a/2,r,o)),so()&&(e=!0,t.rotate(0,a/2,r,o)),e&&(t._32Q=vi(),t._31Q=Es(t.handleTick,t))},handleKeyDown:function(t){var e=this;!Hs(t)&&ho[t.keyCode]?e.handleTick():Yr(t)?e.selectAll():$r(t)?e.handleDelete(t):co(t)&&this.isResettable()&&e.reset()},checkDoubleClickOnNote:function(t,e,n){var i=this;if(n===Jt){if(e.s("note.toggleable"))return e.s(re,!e.s(re)),i.fi({kind:"toggleNote",event:t,data:e,part:n}),!0}else if(n===Kt&&e.s("note2.toggleable"))return e.s(oe,!e.s(oe)),i.fi({kind:"toggleNote2",event:t,data:e,part:n}),!0;return!1},checkDoubleClickOnRotation:function(t,e,n){return n===Xp?(e.setRotationX(0),!0):n===Yp?(e.setRotationY(0),!0):n===$p&&(e.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(t){var e=this;if(e.isOrtho())return e.getWidth()/e.getOrthoWidth();var n=e.getCenter(),i=e.getHeight(),r=e.getEye(),o=[n[0]-r[0],n[1]-r[1],n[2]-r[2]],a=[t[0]-r[0],t[1]-r[1],t[2]-r[2]],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),c=1/Math.tan(e.getFovy()/2);return i*s*c/(a[0]*o[0]+a[1]*o[1]+a[2]*o[2])},inViewSpace:function(t){var e,n=this,i=n._transformPointToViewSpace(t),r=n.getAspect(),o=n.getNear(),a=n.getFar();return!(-i[2]<o||-i[2]>a)&&(n.isOrtho()?(e=n.getOrthoWidth()/2,Math.abs(i[0])<=e&&Math.abs(i[1]*r)<=e):(e=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2])*Math.tan(n.getFovy()/2),Math.abs(i[1]<=e)&&Math.abs(i[0])<=e*r))},getPVMatrix:function(){var t=this,e=t.getWidth()/2,n=t.getHeight()/2,i=t._18Q;return i&&i._wh===e/n||(i=rf(t),t._18Q=Yh(i,i,nf(t)),t._18Q._wh=e/n),i},getFrustum:function(){var t=new Ha,e=new ja,n=new Array(16);return function(){for(var i=this.getPVMatrix(),r=!1,o=0;16>o;o++)i[o]!==n[o]&&(r=!0,n[o]=i[o]);return r&&e.setFromMatrix(t.fromArray(i)),e}}(),toViewPosition:function(t){var e=this,n=e.getWidth()/2,i=e.getHeight()/2,r=e.getPVMatrix();return t=Sc([t[0],t[1],t[2],1],r),{x:n+n*t[0]/t[3],y:i-i*t[1]/t[3],z:t[2]/t[3]}},getHitPosition:function(t,e,n){var i=this,r=i.getWidth(),o=i.getHeight(),a=t.target?i.lp(t):t,s=a.x-r/2,c=a.y-o/2,l=i.getCenterInfo(),u=nf(i);e=e||[0,0,0],n=n||[0,1,0],s=s/r*l.width,c=-1*c/o*l.height;var d=[u[0]*s,u[4]*s,u[8]*s],h=[u[1]*c,u[5]*c,u[9]*c],f=[d[0]+h[0],d[1]+h[1],d[2]+h[2]],g=i.getCenter(),p=Fh(i,e,n,[f[0]+g[0],f[1]+g[1],f[2]+g[2]]);return p||[0,0,0]},intersectObject:function(t,e){return this._raycaster.intersectObject(t,e)},intersectObjects:function(t,e,n){return this._raycaster.intersectObjects(t,e,n)},getLineLength:function(t){this.validate();var e=this.getData3dUI(t);if(e&&e.getCache){var n=e.getCache();if(n)return n[n.length-1].length}return 0},getLineOffset:function(t,e){var n=this.getData3dUI(t);if(n&&n.getCache){var i=n.getCache();if(i){var r=np(i,e),o=t.r3();if(0===o[0]&&0===o[1]&&0===o[2])return r;var a=new Na(t.p3()),s=new Na(r.point).sub(a),c=new Na(r.tangent).add(s),l=(new Ra).setFromEuler(new Za(o,t.getRotationMode(),!0));return s.applyQuaternion(l),c.applyQuaternion(l),{point:s.add(a),tangent:c.sub(s).normalize()}}}return u},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0},moveCamera:function(t,e,n){var i=this,r=i.getEye();r=[r[0],r[1],r[2]];var o=i.getCenter();if(o=[o[0],o[1],o[2]],t||(t=r),e||(e=o),i._flyAnim&&i._flyAnim.stop(!0),n=Zi(n),!n)return i.setEye(t[0],t[1],t[2]),i.setCenter(e[0],e[1],e[2]),delete i._flyAnim,!0;var a=[t[0]-r[0],t[1]-r[1],t[2]-r[2]],s=[e[0]-o[0],e[1]-o[1],e[2]-o[2]];return n.action=function(t){i.setCenter(o[0]+s[0]*t,o[1]+s[1]*t,o[2]+s[2]*t),i.setEye(r[0]+a[0]*t,r[1]+a[1]*t,r[2]+a[2]*t)},n._37o=function(){delete i._flyAnim},i._flyAnim=ks(n)},flyTo:function(){function t(t,e,n){if(n instanceof d.Node){s.fromArray(Ec(n,e.getMat(n)));var i=n.getAnchor3d();t.push((new Na).set(0-i.x,0-i.y,0-i.z).applyMatrix4(s)),t.push((new Na).set(0-i.x,0-i.y,1-i.z).applyMatrix4(s)),t.push((new Na).set(0-i.x,1-i.y,0-i.z).applyMatrix4(s)),t.push((new Na).set(0-i.x,1-i.y,1-i.z).applyMatrix4(s)),t.push((new Na).set(1-i.x,0-i.y,0-i.z).applyMatrix4(s)),t.push((new Na).set(1-i.x,0-i.y,1-i.z).applyMatrix4(s)),t.push((new Na).set(1-i.x,1-i.y,0-i.z).applyMatrix4(s)),t.push((new Na).set(1-i.x,1-i.y,1-i.z).applyMatrix4(s))}}var n=new Na,i=new Na,o=new Na,a=new Na,s=new Ha,c=new d.Math.Quaternion,l=new Za;return function(s,u,h){var f=this;if(h!==r)u={animation:u,ratio:h};else{var g=e(u);("boolean"===g||"object"===g&&u.duration)&&(u={animation:u})}u=u||{},n.fromArray(f.getEye()),i.fromArray(f.getCenter());var p,v,y=[],_=u.center,m=u.distance===r;if(_&&o.fromArray(_),s instanceof d.Node)_||o.fromArray(s.p3()),m&&(t(y,f,s),p=y.length);else{if(s||(s=f.dm().getDatas()),!s.length)return;if((m||!_)&&(y=[],s.forEach((function(e){t(y,f,e)})),p=y.length,!p))return;if(!_){for(o.set(0,0,0),v=0;p>v;v++)o.add(y[v]);o.multiplyScalar(1/p)}}if(f.setCenter(o.x,o.y,o.z),a.subVectors(n,i),u.direction||u.worldDirection){!u.worldDirection&&s instanceof d.Node?c.setFromEuler(l.set(s.r3(),s.getRotationMode(),!0)):c.set(0,0,0,1);var b=a.length();a.fromArray(u.worldDirection||u.direction).applyQuaternion(c).setLength(b)}var x=0;if(m){h=u.ratio||.8;var w,I,S,T=u.xRatio||h,C=u.yRatio||h;if(f.isOrtho()){var M=-1/0;for(f._eye[0]=a.x+o.x,f._eye[1]=a.y+o.y,f._eye[2]=a.z+o.z,w=rf(f),Yh(w,w,nf(f)),v=0;p>v;v++)S=y[v],I=Sc([S.x,S.y,S.z,1],w),M=Math.max(M,Math.max(Math.abs(I[0])/T,Math.abs(I[1])/C));x=f.getOrthoWidth()*M,a.add(o)}else{for(var D,E,P=f.getNear(),O=10;O--;){for(f._eye[0]=a.x+o.x,f._eye[1]=a.y+o.y,f._eye[2]=a.z+o.z,w=rf(f),Yh(w,w,nf(f)),D=!0,E=-1/0,v=0;p>v;v++){if(S=y[v],I=Sc([S.x,S.y,S.z,1],w),I[3]<P&&O){a.multiplyScalar(2),D=!1;break}E=Math.max(E,Math.max(Math.abs(I[0])/T,Math.abs(I[1])/C)-I[3])}if(D)break}a.setLength(E+a.length()).add(o)}}else a.setLength(u.distance).add(o);f._flyAnim&&f._flyAnim.stop(!0);var A=Zi(u.animation);if(A){f.setEye(n.x,n.y,n.z),f.setCenter(i.x,i.y,i.z);var k=(new Na).subVectors(a,n),R=(new Na).subVectors(o,i);if(x)var z=f.getOrthoWidth();var N=new Na,V=new Na,L=A.action,B=A._37o;return A.action=function(t,e){N.copy(n).addScaledVector(k,t),V.copy(i).addScaledVector(R,t),f.setCenter(V.x,V.y,V.z),f.setEye(N.x,N.y,N.z),x&&f.setOrthoWidth((x-z)*t+z),L&&L(t,e)},A._37o=function(){delete f._flyAnim,B&&B()},{lastEye:n,lastCenter:i,eye:a,center:o,orthoWidth:x,animation:f._flyAnim=ks(A)}}return f.setEye(a.x,a.y,a.z),x&&f.setOrthoWidth(x),delete f._flyAnim,{lastEye:n,lastCenter:i,eye:a,center:o,orthoWidth:x}}}(),getBoundingBox:function(){function t(t,n,i){e.fromArray(Ec(i,n.getMat(i)));var r=i.getAnchor3d();t.push((new Na).set(0-r.x,0-r.y,0-r.z).applyMatrix4(e)),t.push((new Na).set(0-r.x,0-r.y,1-r.z).applyMatrix4(e)),t.push((new Na).set(0-r.x,1-r.y,0-r.z).applyMatrix4(e)),t.push((new Na).set(0-r.x,1-r.y,1-r.z).applyMatrix4(e)),t.push((new Na).set(1-r.x,0-r.y,0-r.z).applyMatrix4(e)),t.push((new Na).set(1-r.x,0-r.y,1-r.z).applyMatrix4(e)),t.push((new Na).set(1-r.x,1-r.y,0-r.z).applyMatrix4(e)),t.push((new Na).set(1-r.x,1-r.y,1-r.z).applyMatrix4(e))}var e=new Ha;return function(e){if(e=e||this.sm().getSelection(),e instanceof d.Node&&(e=[e]),0===e.length)return u;var n=[];e.forEach((function(e){t(n,this,e)}),this);var i=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];return n.forEach((function(t){i[0]=Math.min(t.x,i[0]),i[1]=Math.min(t.y,i[1]),i[2]=Math.min(t.z,i[2]),r[0]=Math.max(t.x,r[0]),r[1]=Math.max(t.y,r[1]),r[2]=Math.max(t.z,r[2])})),{min:i,max:r}}}()}),Uf.RenderEnv=function(t){this.gv=t,this.enable=!1},i.defineProperties(Uf.RenderEnv.prototype,{debugOn:{get:function(){return this._debugOn},set:function(t){this._debugOn=t,this.capture&&this.capture()}}}),i.assign(Uf.RenderEnv.prototype,{renderEnvToCube:function(t,e,n,i){var r=this,o=r.gv;if(!t||!e||!n)return r.enable=!1,void(r._42=null);r.enable=!0;var a=Math.floor(i/t*e),s=o.getGL(),c=r._renderTargets;c?c.length<n&&(c=r._renderTargets=c.concat(new Array(n-c.length))):c=r._renderTargets=new Array(n);for(var l=0;n>l;l++)c[l]?c[l].setSize(s,i,a):c[l]=new Uf.RenderTarget(o,s,i,a);var u=!1;r.capture=function(){u=!0,o._42(),u=!1};var d=new Na,h=new Na,f=new Na,g=new Na,p=(new Na).setY(0),v=2*Math.PI/n,y=t/2/Math.tan(Math.PI/n),_=2*Math.atan2(e/2,y),m=t/e;r._42=function(t,e,i,a){var s=r._debugOn;if(!u&&!s)return!1;d.copy(o.getEye()),g.copy(o.getCenter()).sub(d);var l=Math.atan2(g.z,g.x),b=o.getNear(),x=o.getFovy(),w=o.getAspect();h.copy(o.getCenter());for(var I,S=0;n>S;S++)if(I=c[S],p.setZ(Math.cos(l)).setX(Math.sin(l)).multiplyScalar(y),l-=v,f.addVectors(d,p),o.setNear(y),o.setCenter([f.x,f.y,f.z]),o.setFovy(_),o.setAspect(m),s){var T=Math.round(e/n);t.viewport(T*S,0,T,i),a()}else Sh(t,I.frame),t.viewport(0,0,I.width,I.height),t.clear(t.COLOR_BUFFER_BIT),a(),Th(t),I.assureTexture();return o.setNear(b),o.setCenter([h.x,h.y,h.z]),o.setFovy(x),o.setAspect(w),!0},r.capture()},getTextureInfo:function(t){var e=this._renderTargets;if(!e)return null;var n=this._renderTargets[t];return n?{index:t,texture:n.texture,textureName:n.uuid}:null}}),i.assign(Uf.Graph3dView.prototype,{renderEnvToCube:function(t,e,n,i){var r=this;r.envRenderer||(r.envRenderer=new Uf.RenderEnv(r)),r.envRenderer.renderEnvToCube(t,e,n,i)}}),Uf.RenderTarget=function(t,e,n,i,r){var o=this;r=r||{},r.samples=Math.min(t._glCapabilities.maxSamples,r.samples&&r.samples>1&&2===t._webGLVersion?r.samples:0),o.options=r,o.uuid=d.Math.generateUUID(),o.gv=t,o.init(t,e,r),o.setSize(e,n,i)},i.assign(Uf.RenderTarget.prototype,{bind:function(t){Sh(t,this.options.samples?this._MSAAFbo:this.frame)},unbind:function(t){Th(t),this.options.samples&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,this._MSAAFbo),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.frame),t.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,t.COLOR_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null))},init:function(t,e,n){var i=this,r=i.texture=e.createTexture();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var o=n.samples,a=o?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n.minFilter||a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.magFilter||a),e.bindTexture(e.TEXTURE_2D,null),i.render=e.createRenderbuffer(),i.frame=e.createFramebuffer(),o&&(i._MSAAFbo=e.createFramebuffer(),i._MSAARbO=e.createRenderbuffer()),t._2O[i.uuid]=r},assureTexture:function(){var t=this,e=t.uuid,n=t.gv._2O;n[e]||(n[e]=t.texture)},setSize:function(t,e,n){var i=this;if(e&&n&&(i.width!==e||i.height!==n)){var r=t.RGBA,o=t.TEXTURE_2D,a=t.RENDERBUFFER,s=t.FRAMEBUFFER,c=i.options.samples;df(t,i.texture),t.texImage2D(o,0,r,e,n,0,r,t.UNSIGNED_BYTE,u),t.bindRenderbuffer(a,i.render),c?t.renderbufferStorageMultisample(a,c,t.DEPTH_COMPONENT16,e,n):t.renderbufferStorage(a,t.DEPTH_COMPONENT16,e,n),Sh(t,i.frame),t.framebufferTexture2D(s,t.COLOR_ATTACHMENT0,o,i.texture,0),c||t.framebufferRenderbuffer(s,t.DEPTH_ATTACHMENT,a,i.render),Th(t),c&&(t.bindRenderbuffer(t.RENDERBUFFER,i._MSAARbO),t.renderbufferStorageMultisample(t.RENDERBUFFER,c,t.RGBA8,e,n),Sh(t,i._MSAAFbo),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,i._MSAARbO),t.framebufferRenderbuffer(s,t.DEPTH_ATTACHMENT,a,i.render),Th(t)),df(t,u),t.bindRenderbuffer(a,u),i.width=e,i.height=n}},toCanvas:function(){var t=this,e=t.gv.getGL();Sh(e,t.frame);var n=t.width,i=t.height,r=new Uint8Array(4*n*i);e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,r),Th(e);var o=l.createElement("canvas");o.width=n,o.height=i;var a=o.getContext("2d"),s=a.createImageData(n,i);return s.data.set(r),a.putImageData(s,0,0),o}});var Np=Uf.Interactor=function(t){this.gv=t};Zf("Interactor",i,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Vp=Uf.DefaultInteractor=function(t){Yi(Vp,this,[t])};Zf("DefaultInteractor",Np,{handle_contextmenu:function(t){ws(t)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){ws(t);var e=this,n=e.gv,i=Ls(t),r=n.getDataInfoAt(t),o=r?r.data:u,a=r?r.part:u,s=n.sm(),c=qr(t),l=Gs(t);n.setFocus(t)&&(e._62O=u,e._57I=u,o?Hs(t)?s.co(o)?s.rs(o):s.as(o):s.co(o)||s.ss(o):i&&(Hs(t)?n.isRectSelectable()&&(e._62O=pe):e._57I=Us(t)),e._31Q&&(yi(e._31Q),delete e._31Q,delete e._32Q),e._62O||(n.isFirstPersonMode()&&(js(t)||Bs(t)||l>2?e._62O="pan":n.isMouseRoamable()||lt?(e._62O="roaming",e.foward=c&&Ls(t),e._32Q=vi(),e._31Q=Es(e.tick,e)):i||(e._62O="roaming")),e._62O||(i&&c&&tv[a]?(e._62O=a,e.p3=o.p3()):i&&c&&Vi(o)&&n.isSelected(o)?n.isMovable(o)?(e._62O="move",e.p3=o.p3(),e.movedata=o):n._39Q(o)&&(e._62O="none"):lt&&(l>2?e._62O="pan":2===l&&(e.dist=Wo(t),e._62O="pinch")))),e.point=n.lp(t),ic(e,t),Fs(t)?n.handleDoubleClick(t,o,a):n.handleClick(t,o,a))},tick:function(){var t=this,e=t.gv,n=e._moveStep;t.point&&e.isWalkable()&&(t._32Q&&(n*=(vi()-t._32Q)/50),e.walk(t.foward?n:-n),t._32Q=vi(),t._31Q=Es(t.tick,t))},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this._57I;e&&(Ws(e,Us(t))<=1&&this.gv.sm().cs(),this._57I=u)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,n,i=this,r=i.gv,o=i._62O,a=i.point,s=r.dm(),c=r.lp(t),l=c.x-a.x,u=c.y-a.y,d=r.getWidth(),h=r.getHeight();if(d&&h){var f=-G*l/d,g=-G*u/h;if("roaming"===o)i.rotate(t,f/2,g/2);else if(o===Xp||o===Yp||o===$p)r._86O||s.beginTransaction(),r.fi({kind:r._86O?"betweenEditRotation":"beginEditRotation",event:t}),r._86O=1,r.sm().each((function(t){if(Vi(t)&&r.isRotationEditable(t)){var e=k(f)>k(g)?f:g;o===Xp?t.setRotationX(t.getRotationX()+e):o===Yp?t.setRotationY(t.getRotationY()+e):o===$p&&t.setRotationZ(t.getRotationZ()+e)}}));else if("move"===o||tv[o]){o===Qp||o===Jp||o===Kp?(r._87O||s.beginTransaction(),r.fi({kind:r._87O?"betweenEditScale":"beginEditScale",event:t}),r._87O=1):(r._moving||s.beginTransaction(),r.fi({kind:r._moving?"betweenMove":"beginMove",event:t}),r._moving=1);var p,v=i.p3,y=r.getPositionInfo(v),_=nf(r);p=o===Zp?"x":o===Wp?"y":o===qp?"z":o===Qp?"sx":o===Jp?"sy":o===Kp?"sz":r.getMoveMode(t,i.movedata),l=l/d*y.width,u=-1*u/h*y.height;var m,b=[_[0]*l,_[4]*l,_[8]*l],x=[_[1]*u,_[5]*u,_[9]*u],w=b[0]+x[0],I=b[1]+x[1],S=b[2]+x[2],T=[v[0]+w,v[1]+I,v[2]+S],C=pc(r.getEye(),T,!0);if("xyz"===p?(m=T,r.moveSelection(w,I,S)):"xz"===p?(m=Fh(r,v,[0,1,0],T),m&&r.moveSelection(m[0]-v[0],0,m[2]-v[2])):"xy"===p?(m=Fh(r,v,[0,0,1],T),m&&r.moveSelection(m[0]-v[0],m[1]-v[1],0)):"yz"===p?(m=Fh(r,v,[1,0,0],T),m&&r.moveSelection(0,m[1]-v[1],m[2]-v[2])):"x"===p||"sx"===p?(C[0]=0,m=Fh(r,v,C,T),m&&(D=m[0]-v[0],"x"===p?r.moveSelection(D,0,0):r.sm().each((function(i){Vi(i)&&r.isSizeEditable(i)&&(e=i.getScaleX()+D/100,n=e/i.getScaleX(),i.setScaleX(e),js(t)&&(i.setScaleY(i.getScaleY()*n),i.setScaleTall(i.getScaleTall()*n)))})))):"y"===p||"sy"===p?(C[1]=0,m=Fh(r,v,C,T),m&&(D=m[1]-v[1],"y"===p?r.moveSelection(0,D,0):r.sm().each((function(i){Vi(i)&&r.isSizeEditable(i)&&(e=i.getScaleTall()+D/100,n=e/i.getScaleTall(),i.setScaleTall(e),js(t)&&(i.setScaleY(i.getScaleY()*n),i.setScaleX(i.getScaleX()*n)))})))):("z"===p||"sz"===p)&&(C[2]=0,m=Fh(r,v,C,T),m&&(D=m[2]-v[2],"z"===p?r.moveSelection(0,0,D):r.sm().each((function(i){Vi(i)&&r.isSizeEditable(i)&&(e=i.getScaleY()+D/100,n=e/i.getScaleY(),i.setScaleY(e),js(t)&&(i.setScaleX(i.getScaleX()*n),i.setScaleTall(i.getScaleTall()*n)))})))),!m)return;i.p3=m}else if(o===pe){var M=i.div;M||(M=i.div=yr(),wr(i.getView(),M),M.op=a,M.style.background=r.getRectSelectBackground()),r.fi({kind:r._rectSelecting?"betweenRectSelect":"beginRectSelect",event:t}),r._rectSelecting=1,M.rect=qs(M.op,c),Lr(M,M.rect)}else if("pinch"===o&&2===Gs(t)){r.fi({kind:r._pinching?"betweenPinch":"beginPinch",event:t}),r._pinching=1;var D=Wo(t);r.handlePinch(D,i.dist),i.dist=D}else"pan"===o||js(t)||Bs(t)?i.pan(t,l,u):"none"===o||r.isFirstPersonMode()||i.rotate(t,f,g);i.point=c}},pan:function(t,e,n){var i=this.gv;if(i.isPannable()){var r=i.getWidth(),o=i.getHeight();if(!r||!o)return;var a=i.getCenterInfo(),s=e/r*a.width,c=-1*n/o*a.height;i.fi({kind:i._panning?"betweenPan":"beginPan",event:t}),i._panning=1,i.pan(-s,-c)}},rotate:function(t,e,n){var i=this.gv;i.isRotatable()&&(i.fi({kind:i._rotating?"betweenRotate":"beginRotate",event:t}),i._rotating=1,i.rotate(e,n))},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,n=e.gv,i=n.dm(),r=e.div;if(r){var o=n.getDatasInRect(r.rect);if(!o.isEmpty()){var a=n.sm(),s=a.toSelection();o.each((function(t){a.co(t)?s.remove(t):s.add(t)})),a.ss(s)}rc(r)}n._moving&&(delete n._moving,n.fi({kind:"endMove",event:t}),n.onMoveEnded(),i.endTransaction()),n._panning&&(delete n._panning,n.fi({kind:"endPan",event:t}),n.onPanEnded()),n._rotating&&(delete n._rotating,n.fi({kind:"endRotate",event:t}),n.onRotateEnded()),n._86O&&(delete n._86O,n.fi({kind:"endEditRotation",event:t}),i.endTransaction()),n._87O&&(delete n._87O,n.fi({kind:"endEditScale",event:t}),i.endTransaction()),n._pinching&&(delete n._pinching,n.fi({kind:"endPinch",event:t}),n.onPinchEnded()),n._rectSelecting&&(delete n._rectSelecting,n.fi({kind:"endRectSelect",event:t}),n.onRectSelectEnded()),n._walking&&(delete n._walking,n.fi({kind:"endWalk",event:t}),n.onWalkEnded()),e.dist=e.point=e._62O=e.p3=e.movedata=e.div=e._57I=e._32Q=e._31Q=e.foward=u}});var Lp=Uf.MapInteractor=function(t){Yi(Lp,this,[t]),this._minPhi=0,this._maxPhi=5*B/12,this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right"};Zf("MapInteractor",Np,{handle_contextmenu:function(t){ws(t)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){ws(t);var e=this,n=e.gv;if(n.setFocus(t)){n.lp(t);var i=n.getDataInfoAt(t),r=i?i.data:u,o=i?i.part:u;if(!r||!n._39Q(r)){var a=e.editing={point:n.lp(t)};lt?a.touch=!0:(a.touch=!1,a.clickLeft=Ls(t),a.pan=!!Bs(t)||"left"===this.panButton===a.clickLeft),ic(e,t)}Fs(t)?n.handleDoubleClick(t,r,o):n.handleClick(t,r,o)}},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(){},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,n=e.gv,i=e.editing;if(i){var r=n.lp(t),o=i.point,a=r.x-o.x,s=r.y-o.y;if(!i.moved){if(Math.abs(a)<e.threshold&&Math.abs(s)<e.threshold&&!(t.touches&&t.touches.length>1))return;i.moved=!0}if(i.point=r,i.touch){var c=t.touches.length;if(2!==c)e.pan(t,a,s);else{if(1>=c)return;var l=t.touches,d={x:l[0].clientX,y:l[0].clientY},h={x:l[1].clientX,y:l[1].clientY},f={x:h.x-d.x,y:h.y-d.y},g=i.lastCenter,p=Math.atan2(f.y,f.x),v=i.theta,y=0;v==u?v=i.theta=p:(y=p-v,i.thetaStarted||Math.abs(y)>e.touchRotateThreshold?(i.thetaStarted=!0,i.theta=p):y=0);var _=B*(d.y+h.y)/2/n.getHeight(),m=i.phi,b=0;m==u?m=i.phi=_:(b=_-m,i.phiStarted||Math.abs(b)>e.touchRotateThreshold?(i.phiStarted=!0,i.phi=_):b=0);var x,w=Math.sqrt(f.x*f.x+f.y*f.y),I=i.vlen;if(I){var S=d.x-g.x,T=d.y-g.y,C=h.x-g.x,M=h.y-g.y,D=Math.sqrt(S*S+T*T),E=Math.sqrt(C*C+M*M),P=I/2,O=e._sign2(D-P),A=e._sign2(E-P);0>O*A||0===O&&0===A?(x=1,i.vlen=w):(x||(x=w/I),i.scaleStarted||Math.abs(x-1)>e.touchScaleThreshold?(i.vlen=w,i.scaleStarted=!0):x=1)}else I=i.vlen=w,x=1;1!==x&&n.setZoom(x),(b||y)&&e.rotate(t,y,-b),i.lastCenter={x:(h.x+d.x)/2,y:(h.y+d.y)/2}}}else if(i.pan)e.pan(t,a,s);else{var k=n.getWidth(),R=n.getHeight();if(!k||!R)return;var z=-G*a/k,N=-G*s/R;e.rotate(t,z,N)}}},_sign2:function(t){return Math.abs(t)<this._touchScaleCheckAccuracy?0:t>0?1:-1},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,n=e.editing;if(e.editing=null,n){var i=e.gv;if(!n.moved&&n.clickLeft){var r=i.getDataAt(t);r?i.sm().setSelection([r]):i.sm().clearSelection()}else i._panning=null,i._rotating=null,i.fi({kind:n.pan?"endPan":"endRotate",event:t})}},pan:function(t,e,n){var i=this,r=i.gv;if(r.isPannable()){var o=r.getWidth(),a=r.getHeight();if(o&&a){var s=r.getCenterInfo(),c=-e/o*s.width,l=1*n/a*s.height;r.fi({kind:r._panning?"betweenPan":"beginPan",event:t}),r._panning=1;var d=i.keepHorizon,h=i.editing.touch;if((h&&t.touches&&t.touches.length>1||!h&&js(t))&&(d=!d),!d)return r.pan(c,l);if(c||l){var f=nf(r),g=[f[0]*c,f[4]*c,f[8]*c],p=[f[1],0,f[9]],v=Math.sqrt(p[0]*p[0]+p[2]*p[2]);v&&(p=[p[0]/v*l,0,p[2]/v*l]);var y=g[0]+p[0],_=g[1]+p[1],m=g[2]+p[2],b=r._center,x=r._eye;b[0]+=y,b[1]+=_,b[2]+=m,x[0]+=y,x[1]+=_,x[2]+=m,r.fp(bt,u,x),r.fp(mt,u,b)}}}},rotate:function(t,e,n){var i=this,r=i.gv;if(r.isRotatable()){var o=r._center,a=r._eye,s=pc(a,o),c=H(P(s[0]*s[0]+s[2]*s[2]),s[1]),l=c+n;l=Math.max(i.minPhi,Math.min(i.maxPhi,l)),n=l-c,r.fi({kind:r._rotating?"betweenRotate":"beginRotate",event:t}),r._rotating=1,r.rotate(e,n)}}}),i.defineProperties(Lp.prototype,{panButton:{get:function(){return this._panButton},set:function(t){this._panButton=t}},minPhi:{get:function(){return this._minPhi},set:function(t){this._minPhi=t}},maxPhi:{get:function(){return this._maxPhi},set:function(t){this._maxPhi=t}},keepHorizon:{get:function(){return this._keepHorizon},set:function(t){this._keepHorizon=t}},threshold:{get:function(){return this._threshold},set:function(t){this._threshold=t}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(t){this._touchScaleThreshold=t}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(t){this._touchRotateThreshold=t}}});var Bp=function(t){this.gv=t};lc(Bp,i,{_iv:!0,iv:function(){this._iv=!0},face:function(t,e){var n=this,i=n.gv.getGL();if(!i||!Vi(t))return u;var r=e.x,o=e.width,a=e.height,s=n.height-e.y-a,c=D(o/2),l=new Uint8Array(4*o*a),d=0;for(n.iv(),n.validate(t),Sh(i,n.frame),i.readPixels(r,s,o,a,i.RGBA,i.UNSIGNED_BYTE,l),Th(i),n.iv();c>=d;d++)for(var h=c-d,f=c+d,g=h;f>=g;g++)for(var p=h;f>=p;p++)if(g===h||g===f||p===h||p===f){var v=Eh.m[l[4*(g*o+p)]];if(v)return v}},get:function(t,e){this.validate();var n=this,i=n.gv.getGL();if(!i)return u;var r,o,a=t.x,s=t.width,c=t.height,l=n.height-t.y-c,d=D(s/2),h=new Uint8Array(4*s*c),f=0,g=h.length,p=e?u:new tl,v=e?u:{};if(Sh(i,n.frame),i.readPixels(a,l,s,c,i.RGBA,i.UNSIGNED_BYTE,h),Th(i),e){for(;d>=f;f++)for(var y=d-f,_=d+f,m=y;_>=m;m++)for(var b=y;_>=b;b++)if((m===y||m===_||b===y||b===_)&&(r=n.info(h,4*(m*s+b))))return r}else for(;g>f;f+=4)r=n.info(h,f),r&&(o=r.data,v[o._id]||(p.add(o),v[o._id]=o));return p},info:function(t,e){return this.colorMap[(t[e]<<16)+(t[e+1]<<8)+t[e+2]+((127&t[e+3])<<24)]},validate:function(t){var e=this,n=e.gv,i=n.getGL();if(i){var r=n.getWidth(),o=n.getHeight(),a=i.RGBA,s=i.TEXTURE_2D,c=i.RENDERBUFFER,l=i.FRAMEBUFFER;e.texture||(e.texture=af(i),e.render=i.createRenderbuffer(),e.frame=i.createFramebuffer()),(e.width!==r||e.height!==o)&&(df(i,e.texture),i.texImage2D(s,0,a,r,o,0,a,i.UNSIGNED_BYTE,u),hf(i,i.TEXTURE_MIN_FILTER,i.LINEAR),i.bindRenderbuffer(c,e.render),i.renderbufferStorage(c,i.DEPTH_COMPONENT16,r,o),Sh(i,e.frame),i.framebufferTexture2D(l,i.COLOR_ATTACHMENT0,s,e.texture,0),i.framebufferRenderbuffer(l,i.DEPTH_ATTACHMENT,c,e.render),df(i,u),i.bindRenderbuffer(c,u),Th(i),e.width=r,e.height=o),e._iv&&(e._iv=!1,Sh(i,e.frame),n._42(t||(e.colorMap={}),1),Th(i))}}});var Gp=function(t){this.gv=t};lc(Gp,i,{gap:0,size:0,_42:function(t,e){var n=this,i=n.gv,r=i._gridGap,o=i._gridSize;if(i._gridVisible){if(n.gap!==r||n.size!==o){for(var a=[],s=i._gridSize/2,c=r*s,l=0;2*s+1>l;l++){var d=6*l,h=6*(2*s+1)+d;a[d]=-c,a[d+1]=0,a[d+2]=l*r-c,a[d+3]=c,a[d+4]=0,a[d+5]=l*r-c,a[h]=l*r-c,a[h+1]=0,a[h+2]=-c,a[h+3]=l*r-c,a[h+4]=0,a[h+5]=c}n.vs=new gc(a),n.gap=r,n.size=o}zf(i),vf(t,e),bf(t),wf(t,e,1,i._gridColor,i._buffer.vs,n.vs),If(t,0,n.vs.length/3,t.LINES),xf(t),yf(t,e)}else n.vs=n.gap=n.size=u}});var Fp=function(t){this.gv=t};lc(Fp,i,{_42:function(t,e){var n=this.gv,i=n._buffer.vs,r=n._axisXColor,o=n._axisYColor,a=n._axisZColor,s=n._originAxisVisible,c=n._centerAxisVisible;if(s||c){var l=rt?t.TRIANGLES:t.TRIANGLE_FAN,d=t.LINES;if(zf(n),vf(t,e),bf(t),s){var h=n.getCenterInfo(),f=A(h.width,h.height)/5,g=.8*f,p=.05*f;wf(t,e,1.5,r,i,new gc([0,0,0,f,0,0,g,p,0,g,0,p,g,-p,0,g,0,-p,g,p,0,0,0,0,0,f,0,p,g,0,0,g,p,-p,g,0,0,g,-p,p,g,0,0,0,0,0,0,f,p,0,g,0,p,g,-p,0,g,0,-p,g,p,0,g])),If(t,0,2,d),If(t,1,6,l),wf(t,e,u,o),If(t,7,2,d),If(t,8,6,l),wf(t,e,u,a),If(t,14,2,d),If(t,15,6,l)}if(c){var v=n._center,y=v[0],_=v[1],m=v[2];h=n.getPositionInfo(v);f=A(h.width,h.height)/20,wf(t,e,1.5,r,i,new gc([y,_,m,y+f,_,m,y,_,m,y,_+f,m,y,_,m,y,_,m+f])),If(t,0,2,d),wf(t,e,u,o),If(t,2,2,d),wf(t,e,u,a),If(t,4,2,d)}xf(t),yf(t,e)}}});var jp=function t(e){this.gv=e,this.onMouseOver=this.onMouseOver.bind(this),this.mode=t.Mode.Disable};jp.Mode={Disable:0,Selection:1,MouseOver:2},lc(jp,i,{onMouseOver:function(t){f.preventDefault(t);var e=this.gv.getDataAt(t);e!==this.mouseOverData&&(this.mouseOverData=e,this.gv.iv())},setFetchTargetFunc:function(t){this.fetchTargetFunc=t},_42:function(t,e){var n,i=this,r=i._mode;if(r!==jp.Mode.Disable&&(r===jp.Mode.Selection?n=i.gv.sm().getSelection().toArray((function(t){return t.s("highlight.visible")})):r===jp.Mode.MouseOver&&i.mouseOverData&&i.mouseOverData.s("highlight.visible")&&(n=[i.mouseOverData]),i.fetchTargetFunc&&(n=i.fetchTargetFunc(n)),n&&n.length)){var o=i.gv,a=o.vr.isPresenting(),s=o.getWidth();if(a){var c=o.getWidth;s/=2,o.getWidth=function(){return s};var l=o.getViewport()}var u,d=o.getDevicePixelRatio(),h=s*d,f=o.getHeight()*d;(u=i._renderTarget)?u.setSize(t,h,f):i._renderTarget=u=new Uf.RenderTarget(o,t,h,f),Sh(t,u.frame),o.drawFilter=function(t){return n.indexOf(t)<0||void 0},o._42({}),o.drawFilter=null,Th(t),a&&(o.getWidth=c,o.setViewport(t,l[0],l[1],l[2],l[3])),i.shader||(i.shader=new sp.Shader(t,Hp.vs,Hp.fs));var p=i.shader;if(i.shader.bind(),t.enable(t.BLEND),t.activeTexture(t.TEXTURE0+0),t.bindTexture(t.TEXTURE_2D,u.texture),p.uniforms.image=0,p.uniforms.textureSize=[h,f],p.uniforms.edgeWidth=g["highlight.width"],i.highlightColor!==g["highlight.color"]){var v=yo(i.highlightColor=g["highlight.color"]);i.highlightColorData=[v[0]/255,v[1]/255,v[2]/255,v[3]/255]}p.uniforms.edgeColor=i.highlightColorData,i.ibuffer?(i.ibuffer.upload(),i.vbuffer.upload()):(i.ibuffer=sp.Buffer.createIndexBuffer(t,new Uint16Array([0,2,1,1,2,3])),i.vbuffer=sp.Buffer.createVertexBuffer(t,new Float32Array([0,0,1,0,0,1,1,1]))),p.attributes.pos.pointer(i.vbuffer),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.disable(t.BLEND),t.bindTexture(t.TEXTURE_2D,null),t.useProgram(e)}}}),i.defineProperties(jp.prototype,{mode:{get:function(){return this._mode},set:function(t){var e=this._mode;t!==e&&(this._mode=t,t===jp.Mode.MouseOver?S(this.gv.getView(),"mousemove",this.onMouseOver):e===jp.Mode.MouseOver&&T(this.gv.getView(),"mousemove",this.onMouseOver))}}});var Hp={vs:["attribute vec2 pos;","varying vec2 vUv;","void main(void) {","gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);","vUv = vec2(pos.x, 1.0 - pos.y);","}"].join("\n"),fs:["precision highp float;","uniform sampler2D image;","uniform vec2 textureSize;","uniform float edgeWidth;","uniform vec4 edgeColor;","varying vec2 vUv;","float getCol(vec2 coord) {","return texture2D(image, coord).a;","}","void main() {","vec2 cc = vUv;","float center = getCol(cc);","float dx = edgeWidth / textureSize.x;","float dy = edgeWidth / textureSize.y;","vec2 coord;","float topLeft = getCol(cc+vec2(-dx, -dy));","float top = getCol(cc+vec2(0.0, -dy));","float topRight = getCol(cc+vec2(dx, -dy));","float left = getCol(cc+vec2(-dx, 0.0));","float right = getCol(cc+vec2(dx, 0.0));","float bottomLeft = getCol(cc+vec2(-dx, dy));","float bottom = getCol(cc+vec2(0.0, dy));","float bottomRight = getCol(cc+vec2(dx, dy));","float v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;","float h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;","float edge = sqrt(h * h + v * v);","edge = smoothstep(0.9, 1.0, edge);","if (edge < 0.5) {","discard;","}","gl_FragColor = edgeColor;","}"].join("\n")},Up=function(t){this.gv=t},Zp="edit_tx",Wp="edit_ty",qp="edit_tz",Xp="edit_rx",Yp="edit_ry",$p="edit_rz",Qp="edit_sx",Jp="edit_sy",Kp="edit_sz",tv={};tv[Zp]=1,tv[Wp]=1,tv[qp]=1,tv[Xp]=1,tv[Yp]=1,tv[$p]=1,tv[Qp]=1,tv[Jp]=1,tv[Kp]=1,lc(Up,i,{_42:function(t,e,n){var i=this,r=i.gv,o=r.sm().ld();if(o&&r.isEditable(o)&&!r.isEditHelperDisabled()&&Vi(o)&&(!r.isFirstPersonMode()||!r.isMouseRoamable()&&!lt)){zf(r);var a,s,c=r.isMovable(o),l=r.isRotationEditable(o),u=r.isSizeEditable(o),d=r._axisXColor,h=r._axisYColor,f=r._axisZColor,g=r._editSizeColor,p=o.p3(),v=Ws(r.getEye(),p)/10,y=v/(n?5:10),_=.7*v,m=.4*_,b=p[0],x=p[1],w=p[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],c&&i._17O(t,e,o,n,Zp,d,a,[b,x-y,w,b+_,x-y,w,b+_,x,w,b+_,x,w,b,x,w,b,x-y,w,b,x-y,w+y,b+_,x-y,w+y,b+_,x-y,w,b+_,x-y,w,b,x-y,w,b,x-y,w+y]),s=b+_,u&&i._17O(t,e,o,n,Qp,g,a,[s,x-y,w,s+m,x-y,w,s+m,x,w,s+m,x,w,s,x,w,s,x-y,w,s,x-y,w+y,s+m,x-y,w+y,s+m,x-y,w,s+m,x-y,w,s,x-y,w,s,x-y,w+y]),s+=m,l&&i._17O(t,e,o,n,Xp,d,a,[s,x-y,w,s+m,x-y,w,s+m,x,w,s+m,x,w,s,x,w,s,x-y,w,s,x-y,w+y,s+m,x-y,w+y,s+m,x-y,w,s+m,x-y,w,s,x-y,w,s,x-y,w+y]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],c&&i._17O(t,e,o,n,Wp,h,a,[b,x,w,b,x+_,w,b-y,x+_,w,b-y,x+_,w,b-y,x,w,b,x,w,b,x,w,b,x,w-y,b,x+_,w-y,b,x+_,w-y,b,x+_,w,b,x,w]),s=x+_,u&&i._17O(t,e,o,n,Jp,g,a,[b,s,w,b,s+m,w,b-y,s+m,w,b-y,s+m,w,b-y,s,w,b,s,w,b,s,w,b,s,w-y,b,s+m,w-y,b,s+m,w-y,b,s+m,w,b,s,w]),s+=m,l&&i._17O(t,e,o,n,Yp,h,a,[b,s,w,b,s+m,w,b-y,s+m,w,b-y,s+m,w,b-y,s,w,b,s,w,b,s,w,b,s,w-y,b,s+m,w-y,b,s+m,w-y,b,s+m,w,b,s,w]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],c&&i._17O(t,e,o,n,qp,f,a,[b,x,w,b,x,w+_,b,x-y,w+_,b,x-y,w+_,b,x-y,w,b,x,w,b,x-y,w,b-y,x-y,w,b-y,x-y,w+_,b-y,x-y,w+_,b,x-y,w+_,b,x-y,w]),s=w+_,u&&i._17O(t,e,o,n,Kp,g,a,[b,x,s,b,x,s+m,b,x-y,s+m,b,x-y,s+m,b,x-y,s,b,x,s,b,x-y,s,b-y,x-y,s,b-y,x-y,s+m,b-y,x-y,s+m,b,x-y,s+m,b,x-y,s]),s+=m,l&&i._17O(t,e,o,n,$p,f,a,[b,x,s,b,x,s+m,b,x-y,s+m,b,x-y,s+m,b,x-y,s,b,x,s,b,x-y,s,b-y,x-y,s,b-y,x-y,s+m,b-y,x-y,s+m,b,x-y,s+m,b,x-y,s])}},_17O:function(t,e,n,i,r,o,a,s){var c=this.gv._buffer;Nf(t,e,i,!0,n,r),_f(t,e,u,!0,u,!0,u,!1),Pf(t,e.uDiffuse,o),Tf(t,c.vs,new gc(s),e.aPosition),Tf(t,c.ns,new gc(a),e.aNormal),bf(t),If(t,0,12),xf(t),mf(t,e)}});var ev=d.Raycaster=function(t){this.gv=t,this.maxTriangleTest=1/0};uc("Raycaster",i,{intersect:function(t){var e=this,n=e.gv,i=n.getDataAt(t);return i?e.intersectObject(t,i):null},intersectObjects:function(t,e,n){var i,r,o,a,s=this,c=1/0,l=t.origin||(new Na).fromArray(s.gv.getEye()),u=s.maxTriangleTest,d=[];return e.forEach((function(t){n&&!1===n(t)||!1!==t.s("intersect")&&d.push(t)})),d.sort((function(t,e){return l.distanceToSquared2(t.p3())-l.distanceToSquared2(e.p3())})),s.countTriangles=0,d.forEach((function(e){s.countTriangles>u||(i=s.intersectObject(t,e),i&&(r=l.distanceToSquared(i.world),c>r&&(o=e,a=i,c=r)))})),s.countTriangles=0,{data:o,intersect:a}},intersectObject:function(t,e){if(t instanceof Ba)return this._intersectObjectImpl(t,e);var n=this,i=n.gv,r=i.unproject(t),o=new Na,a=i.getEye(),s=new Na;if(i.isOrtho()){var c=new Na(a);s.copy(i.getCenter()).sub(c).normalize();var l=o.copy(r).sub(c).dot(s);o.copy(s).setLength(-l).add(c.copy(r))}else o.copy(a),s.copy(r).sub(o).normalize();var u=new d.Math.Ray(o,s);return n._intersectObjectImpl(u,e)},_intersectObjectImpl:function(){function t(){var t=new Na;return t.subVectors(f,h),y.subVectors(u,h),t.cross(y).normalize(),t}function e(t,e,n,i,r,o,a){return Ua.barycoordFromPoint(t,e,n,i,m),r.multiplyScalar(m.x),o.multiplyScalar(m.y),a.multiplyScalar(m.z),r.add(o).add(a),r.clone()}var n=new Ha,i=new Ha,r=new Ba,o=new Na,a=new Na,s=new Na,c=new Na,l=new Na,u=new Na,h=new Na,f=new Na,g=new Va,p=new Va,v=new Va,y=new Na,_={vs:Eg,is:Pg,uv:Og},m=new Na;return function(y,m){var b=this.gv.getData3dUI(m),x=m.mat||b.mat;if(x){n.fromArray(x),i.getInverse(n),r.copy(y).applyMatrix4(i);var w,I,S="body",T=b.shapeModel;if(T||(T=Kg(b)),T||(m instanceof d.Node&&!(m instanceof d.Shape)?(w=!0,T=_):(I=!0,T=[b.left,b.front,b.right,b.back,b.top,b.bottom])),!T)return console.log("Can not find shape model."),null;Ri(T)||(T=[T]);var C,M,D,E,P,O,A,k,R,z,N,V,L,B,G,F=1/0,j=["","top_","bottom_"],H=!1;for(C=0,M=T.length;M>C;C++)if(V=T[C])for(D=0,E=j.length;E>D;D++)if(L=j[D],A=V[L+"vs"],k=V[L+"is"],R=V[L+"uv"]||V[L+"tuv"],A){if(B=V[L+"boundingBox"]){var U=r.intersectBox(B);if(!U)continue;if(r.origin.distanceTo(U)>F)continue;G=!1}else V[L+"boundingBox"]=B=new d.Math.Box3,G=!0;for(P=0,O=k?k.length:A.length/3;O>P;P+=3)this.countTriangles++,k?(a.fromArray(A,3*k[P]),s.fromArray(A,3*k[P+1]),c.fromArray(A,3*k[P+2])):(a.fromArray(A,3*P),s.fromArray(A,3*(P+1)),c.fromArray(A,3*(P+2))),G&&(B.expandByPoint(a),B.expandByPoint(s),B.expandByPoint(c)),z=r.intersectTriangle(a,s,c,!0,o),z&&(N=r.origin.distanceTo(z),F>N&&(F=N,l.copy(z),u.copy(a),h.copy(s),f.copy(c),""!==L?S=L.slice(0,-1):w?S=kg[Math.floor(P/6)]:I&&(S=kg[C]),R&&(H=!0,k?(g.fromArray(R,2*k[P]),p.fromArray(R,2*k[P+1]),v.fromArray(R,2*k[P+2])):(g.fromArray(R,2*P),p.fromArray(R,2*(P+1)),v.fromArray(R,2*(P+2))))))}if(!isFinite(F))return null;var Z,W=l.clone().applyMatrix4(n);H&&(Z=e(l,u,h,f,g,p,v));var q=t(u,h,f),X=t(u.applyMatrix4(n),h.applyMatrix4(n),f.applyMatrix4(n)),Y=r.direction.dot(q);return Y>0&&(q.multiplyScalar(-1),X.multiplyScalar(-1)),{world:W,local:l.clone(),worldNormal:X,normal:q,uv:Z,part:S}}}}()});var nv=function(t,e){this.gv=t,this.s=function(n,i,r){return i==u&&(i=r),i==u?e.getStyle(n):Jc(i,e,t)},this.data=e};lc(nv,i,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(t,e,n,i){var r=this,o=r.data;if(!(o instanceof Qu)){var a,s,c,l,d,h,f,g=r.gv,p=o._id,v=r.s("shape3d.alwaysOnTop")?null:r.s("batch"),y=g._batchIndexMap,_=g._batchModelMap,m=g.isSelectable(o),b=g.getBrightness(o),x=b!=u&&1!==b;if(r.needValidate(t)){if(c=og(y,_,o,v),r.validate(c,v?Wn[v]||ri:u),c&&(l=y[p],d=l.size=c.vs.length/3-l.begin,f=c.rs))for(b=x?b:1,h=0;d>h;h++)f.push(b);if(Vi(o)){var w=g.getWireframeGeometry(o);if(w)sg(g,o,w);else{var I=g.getWireframe(o);I&&sg(g,o,I)}}r.labelInfo=r.label2Info=r.noteInfo=r.note2Info=r._38o=u,r._24O($t,"getLabel"),r._24O(Qt,"getLabel2"),r._26O(Jt,"getNote"),r._26O(Kt,"getNote2"),r._15O(),r.interactiveInfo=g.isInteractive(o)?{}:u,r._iv=!1}x&&Pf(t,e.uBrightness,b),Pf(t,e.uAlphaTest,r.s("alphaTest")),Pf(t,e.uUseEnvMap,!!o.s("envmap")),Pf(t,e.uReflectivity,o.s("envmap")||.01),s=Nf(t,e,n,m,o,Yt),s&&(lg(s,y[p],_),lg(s,g._polylineIndexMap[p],g._polylineModelMap),lg(s,g._wireframeIndexMap[p],g._wireframeModelMap)),y[p]||r._80o(t,e,i),g.isLabelVisible(o)&&((a=r.labelInfo)&&(Nf(t,e,n,m,o,$t),r._28O(a,$t,i)),(a=r.label2Info)&&(Nf(t,e,n,m,o,Qt),r._28O(a,Qt,i))),g.isNoteVisible(o)&&((a=r.noteInfo)&&(Nf(t,e,n,m,o,Jt),r._29O(a,Jt,i)),(a=r.note2Info)&&(Nf(t,e,n,m,o,Kt),r._29O(a,Kt,i))),(a=r._38o)&&r._99O(t,e,a,n,m,i),x&&Pf(t,e.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return mc},_80o:function(){},dispose:function(){},_calcAnchorMat:function(t){if(t.hasOwnProperty("_anchor")||t.hasOwnProperty("_anchorElevation")){var e=t.getAnchor3d(),n={x:e.x-.5,y:e.y-.5,z:e.z-.5},i=_c();return qh(i,[-n.x,-n.y,-n.z]),i}},getBodyColor:function(t){var e=this.data,n=this.gv.getBodyColor(e);return n||(t?e.getStyle(t):u)},_24O:function(t,e){var n=this,i=n.data,r=n.gv,o=n.s,a=r[e](i);if(a!=u){var s=o(t+".scale"),c=o(t+".max"),l=n[t+"Info"]={label:a,textureScale:o(t+".texture.scale"),color:r[e+"Color"](i),font:o(t+".font"),align:o(t+".align"),background:r[e+"Background"](i)},d=l.rect=Ir(l,a);c>0&&c<d.width&&(l.labelWidth=d.width,d.width=c),d.x=d.y=0,d.width*=s,d.height*=s,l.mat=n._16O(o(t+".autorotate"),o(t+".position"),d,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode"));var h=d.width/2,f=d.height/2;l.vs=new gc([-h,f,0,-h,-f,0,h,-f,0,h,f,0]),d.width/=s,d.height/=s}},_26O:function(t,e){var n=this,i=n.data,r=n.gv,o=n.s,a=r[e](i);if(a!=u){var s=o(t+".scale"),c=this[t+"Info"]={note:a,textureScale:o(t+".texture.scale"),expanded:o(t+".expanded"),font:o(t+".font"),color:o(t+".color"),align:o(t+".align"),borderWidth:o(t+".border.width"),borderColor:o(t+".border.color"),background:r[e+"Background"](i)};if(c.expanded){var l=o(t+".max"),d=Ir(c,a);d.width+=6,d.height+=2,l>0&&l<d.width&&(c.labelWidth=d.width,d.width=l);var h={x:-d.width/2,y:-8-d.height,width:d.width,height:d.height+8}}else h={x:-6,y:-18,width:12,height:18};c.mat=n._16O(o(t+".autorotate"),o(t+".position"),u,o(t+".face"),o(t+".t3"),o(t+".r3"),o(t+".rotationMode")),c.rect=h,1!==s&&(h=Os(h),h.x*=s,h.height*=s,h.y=-h.height,h.width*=s);var f=h.x,g=h.y,p=h.width,v=h.height;c.vs=new gc([f,-g,0,f,-g-v,0,f+p,-g-v,0,f+p,-g,0])}},_28O:function(t,e,n){if(n(this.s(e+".transparent"))){var i=t.rect,r=t.textureScale,o=i.width*r,a=i.height*r;if(o>=1&&a>=1){var s=vo(o,a);1!==r&&(s.translate(s,i.x,i.y),s.scale(r,r),s.translate(s,-i.x,-i.y)),El(s,t),s.restore(),Gf(this,e,t.mat,t.vs,!0)}}},_29O:function(t,e,n){if(n(this.s(e+".transparent"))){var i=t.rect,r=t.textureScale,o=i.x,a=i.y,s=i.width*r,c=i.height*r;if(s>=1&&c>=1){i.x=i.y=0;var l=vo(s,c);1!==r&&l.scale(r,r),Pl(l,t),l.restore(),i.x=o,i.y=a,Gf(this,e,t.mat,t.vs,!1)}}},_99O:function(t,e,n,i,r,o){if(n){var a=this,s=a.gv,c=a.data,l=s._buffer,d=s._1O,h=n.icons;for(var f in h){var g=h[f],p=n.rects[f];if(p&&o(Jc(g.transparent,c,s))){Nf(t,e,i,r,c,f);var v=Jc(g.shape3d,c,s),y=v?[v]:Jc(g.names,c,s),_=y?y.length:0,m=Jc(g.textureScale,c,s)||1,b=Jc(g.light,c,s);b==u&&(b=!!v),_f(t,e,Jc(g.blend,c,s),b,Jc(g.opacity,c,s),Jc(g.reverseFlip,c,s),Jc(g.reverseColor,c,s),Jc(g.reverseCull,c,s));for(var x=0;_>x;x++){var w=y[x],I=p[x];if(Bf(a,I.mat),v)$g(s,c,Kg(a,v),a);else{var S=Ss(w);if(S){var T=I.width*m,C=I.height*m;if(T>=1&&C>=1){var M=vo(T,C);Ms(M,S,Jc(g.stretch,c,s),0,0,T,C,c,s),M.restore(),af(t,go,d),bf(t,e,d,Jc(g.discardSelectable,c,s),l.uv,Cg),Tf(t,l.vs,I.vs,e.aPosition),Cf(t,l.ns,Mg,e.aNormal),Df(t,l.is,Dg),Sf(t,0,Dg.length),xf(t,e,d)}}}kf(s)}mf(t,e)}}}}});var iv=function t(e,n){Yi(t,this,[e,n])};lc(iv,nv,{_16O:function(t,e,n,i,r,o,a,s,c){var l=this.data,u=l.getFinalScale3d(),d=Vf(e,u,n,i,s,c);if(l.hasOwnProperty("_anchor")||l.hasOwnProperty("_anchorElevation")){var h=l.getAnchor3d();d[0]-=(h.x-.5)*u[0],d[1]-=(h.y-.5)*u[1],d[2]-=(h.z-.5)*u[2]}return Lf(_c(),d,l.p3(),i,r,o,a,t,l.getFinalRotation3d(),l.getRotationMode())},clear:function(){var t=this;t.faceMat=t.mat=t.shapeModel=t.left=t.right=t.front=t.back=t.top=t.bottom=t.csg=u},needValidate:function(t){if(this._iv)return this._validateFrameId=t._renderInfo.frame,!0;if(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")||this.s("hide.overlapping.group")){var e=t._renderInfo.frame;if(this._validateFrameId!==e)return this._validateFrameId=e,!0}return!1},validate:function(t,e){var n=this,i=n.gv,r=n.data,o=n.shapeName=n.s(We),a=Kg(n,o);n._updateAutoRotation(),n._updateFixSize2d(),n._updateOverlapping(),(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen"))&&(rg(i,r,"_wireframeModelMap","_wireframeIndexMap"),rg(i,r,"_wireframeModelMapSwap","_wireframeIndexMapSwap"));var s=Ec(r,i.getMat(r),!a||n.s("shape3d.scaleable")),c=n._calcAnchorMat(r);if(c&&Yh(s,s,c),r.mat=s,n.clear(),a||!o)if(t){var l=[];a?dg(i,r,a,n,n.getBodyColor(),[s],t,l):(pg(i,r,t,e,s,pt,l,$f),pg(i,r,t,e,s,vt,l,Qf),pg(i,r,t,e,s,yt,l,Jf),pg(i,r,t,e,s,_t,l,Kf),pg(i,r,t,e,s,ft,l,tg),pg(i,r,t,e,s,gt,l,eg)),l.length&&(Ui(t.vs,l),Ui(t.ns,of(l)))}else n.mat=s,(n.shapeModel=a)||(n._cubeUvs=null,n.vf(pt,0),n.vf(vt,16),n.vf(ft,8),n.vf(gt,24),n.vf(yt,32),n.vf(_t,40))},_updateAutoRotation:function(){var t=new Za,e=new Ha,n=new Na,i=new Na,r=new Na;return function(){var o=this,a=o.data,s=o.s("shape3d.autorotate");if(s){var c,l=o.gv;r.copy(o.s("shape3d.autorotate.up")||l._up),c="string"==typeof s?[s.indexOf("x")<0?l._eye[0]:l._center[0],s.indexOf("y")<0?l._eye[1]:l._center[1],s.indexOf("z")<0?l._eye[2]:l._center[2]]:l._eye;var u=l._center,d=a.p3();n.copy(d),i.set(c[0]-u[0],c[1]-u[1],c[2]-u[2]).add(n),e.lookAt(i,n,r),t.set(0,0,0,a.getRotationMode(),!0).setFromRotationMatrix(e);var h=a._dynamicRotation;h&&Math.abs(h[0]-t.x)<1e-5&&Math.abs(h[1]-t.y)<1e-5&&Math.abs(h[2]-t.z)<1e-5||(a._dynamicRotation=[t.x,t.y,t.z])}else a._dynamicRotation&&delete a._dynamicRotation}}(),_updateFixSize2d:function(){var t=this,e=t.data,n=t.s("shape3d.fixSizeOnScreen");if(n){var i=t.gv;e.getFinalScale3d();var r=Ec(e,i.getMat(e)),o=Ic([0,0,0],r),a=i.toViewPosition(o);if(!isNaN(a.x)&&!isNaN(a.y)){var s=Ic([1,0,0],r),c=i.toViewPosition(s),l=Ic([0,1,0],r),u=i.toViewPosition(l),d=c.x-a.x,h=u.y-a.y;if(d&&h){var f=e._dynamicScale3d||[1,1,1],g=Ss(e.s("shape3d.image")),p=n[0]>0?n[0]:g?$c(g,e):20,v=n[1]>0?n[1]:g?Qc(g,e):20,y=Math.abs(d/p),_=Math.abs(h/v);Math.abs(y-1)<.001&&Math.abs(_-1)<.001||(e._dynamicScale3d=[f[0]/y,f[1]/_,f[2]])}}}else e._dynamicScale3d&&delete e._dynamicScale3d},_updateOverlapping:function(){var t=this,e=t.s("hide.overlapping.group");if(e){var n,i,o,a=t.gv,s=t.data,c=Ec(s,a.getMat(s)),l=1/0,u=1/0,d=-1/0,h=-1/0,f=s.getAnchor3d(),g=f.x,p=f.y,v=f.z;for(n=0;8>n;n++){if(i=Ic([(n>>2)-g,(1&n>>1)-p,(1&n)-v],c),o=a.toViewPosition(i),isNaN(o.x)||isNaN(o.y))return;l=Math.min(l,o.x),d=Math.max(d,o.x),u=Math.min(u,o.y),h=Math.max(h,o.y)}var y={x:l,y:u,w:d-l,h:h-u};t._rectOverlapping=a.overlappingBox.isOverlapping(e,y)}else t._rectOverlapping&&(t._rectOverlapping=r)},getVectorDynamicSize:function(){var t,e=this,n=e.s("shape3d"),i=e.data;if("billboard"===n||"plane"===n||(t=i._currentCubeElementId)!=u){var r,o,a=e.gv,s=Ec(i,a.getMat(i)),c=i.getAnchor3d(),l=.5-c.x,d=.5-c.y,h=.5-c.z,f=e.s("shape3d.vector.dynamic.maxsize"),g=function(t,e){t[0]+=l,t[1]+=d,t[2]+=h,e[0]+=l,e[1]+=d,e[2]+=h;var n=a.toViewPosition(Ic(t,s)),i=a.toViewPosition(Ic(e,s)),r=n.x-i.x,o=n.y-i.y;return Math.min(f,Math.sqrt(r*r+o*o))};if("billboard"===n)r=g([-.5,0,0],[.5,0,0]),o=g([0,-.5,0],[0,.5,0]);else if("plane"===n)r=g([-.5,0,0],[.5,0,0]),o=g([0,0,-.5],[0,0,.5]);else if(i._currentCubeElementId!=u){var p=3*Pg[t+1],v=3*Pg[t],y=3*Pg[t+2];r=g([Eg[p],Eg[p+1],Eg[p+2]],[Eg[y],Eg[y+1],Eg[y+2]]),o=g([Eg[p],Eg[p+1],Eg[p+2]],[Eg[v],Eg[v+1],Eg[v+2]])}return[r,o]}},getCachedTexture:function(){var t=this,e=t.data,n=e._currentCubeElementId;return n!=u?t._cubeCachedImage?t._cubeCachedImage[n]:null:t._shape3dCachedImage},setCachedTexture:function(t){var e=this,n=e.data,i=n._currentCubeElementId;i!=u?(e._cubeCachedImage||(e._cubeCachedImage={}),e._cubeCachedImage[i]=t):e._shape3dCachedImage=t},invalidateCachedTexture:function(t){var e,n,i,r=this;if((i=r._shape3dCachedImage)&&(t.deleteTexture(i),r._shape3dCachedImage=null),n=r._cubeCachedImage){for(e in n)t.deleteTexture(n[e]);r._cubeCachedImage=null}},vf:function(t,e){var n=this;if(n.gv.getFaceVisible(n.data,t)){var i=Ff(n,t);i.mat&&(n.faceMat=!0);var r=i.uv;if(r){var o=n._cubeUvs;o||(o=n._cubeUvs=new gc([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var a=0;8>a;a++)o[e+a]=r[a]}return i}},_billboardInView:function(){var t=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],e=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],n=new Ga,i=new Na,r=new Ha;return function(o){var a=this;if(!a.mat)return!0;var s=a.gv.getFrustum(),c="billboard"===o?t:e;n.makeEmpty(),r.fromArray(a.mat);for(var l=0,u=c.length;u>l;l+=3)n.expandByPoint(i.fromArray(c,l).applyMatrix4(r));return s.intersectsBox(n)}}(),_80o:function(t,e,n){var i=this;if(i._rectOverlapping)return!0;var r=i.shapeModel;if(r||!i.shapeName){var o=i.s("shape3d");if(("billboard"===o||"plane"===o)&&!i._billboardInView(o))return!0;var a=i.gv,s=i.data,c=a._cube;zf(a,i.mat),i.s("shape3d.reflector")&&!t._picking||(r?$g(a,s,r,i,i.getBodyColor(),n):(Tf(t,c.vs,u,e.aPosition),Tf(t,c.ns,u,e.aNormal),Mf(t,c.is),i._18O(t,e,i.left,0,n),i._18O(t,e,i.front,6,n),i._18O(t,e,i.right,12,n),i._18O(t,e,i.back,18,n),i._18O(t,e,i.top,24,n),i._18O(t,e,i.bottom,30,n))),kf(a),i.faceMat&&(i._18O(t,e,i.left,0,n,!0),i._18O(t,e,i.front,6,n,!0),i._18O(t,e,i.right,12,n,!0),i._18O(t,e,i.back,18,n,!0),i._18O(t,e,i.top,24,n,!0),i._18O(t,e,i.bottom,30,n,!0))}},_18O:function(t,e,n,i,r,o){if(n){if(!r(n.transparent))return;if(o&&!n.mat||!o&&n.mat)return;var a=this.data.s("polygonOffset");a&&ff(t,a),o&&zf(this.gv,n.mat);var s=this,c=s.data;c._currentCubeElementId=i;var l=s.gv,d=l.getTexture(n.texture,c),h=n.uv,f=n.uvScale,p=n.uvOffset,v=n.discardSelectable;d?h?bf(t,e,d,v,l._buffer.uv,s._cubeUvs,p,f):bf(t,e,d,v,l._cube.uv,u,p,f):bf(t),_f(t,e,n.blend,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),Pf(t,e.uDiffuse,n.color||g["color.empty"]),Sf(t,i,6),mf(t,e),xf(t,e,d),o&&kf(l),a&&gf(t),c._currentCubeElementId=null}},drawReflector:function(){var t=new Na,e=new Na,n=new Za,i=new Ha,o=new Na,a=new Na,s=new Na,c=new Na,l=new Ha,d=new Ha,h=new La,f=new za,g=new za,p=function(t,e,n){t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2]},v=function(t,e){p(t,e.getEye(),0),p(t,e.getCenter(),3),p(t,e.getUp(),6)},y=function(t,e){e._eye=[t[0],t[1],t[2]],e._center=[t[3],t[4],t[5]],e._up=[t[6],t[7],t[8]],e._18Q=u;var n=e._skyBox;n&&(n.p3([t[0],t[1],t[2]]),e.getData3dUI(n).iv())};return function(p,_,m,b,x){var w=this;w._reflectorInfo=null;var I=w.data;if(I._reflecting)return!1;var S=w.gv;if(x)return!1;var T=w._reflectorRenderTarget;if(T?T.setSize(p,_,m):T=w._reflectorRenderTarget=new Uf.RenderTarget(S,p,_,m),t.copy(I.p3()),e.copy(S.getEye()),i.makeRotationFromEuler(n.set(I.r3(),I.getRotationMode(),!0)),!w._reflectNormal){var C=Kg(w,w.s("shape3d"));if(!C)return!1;if(!C.ns&&C.length&&(C=C[0]),!C.ns||!C.vs)return!1;w._reflectNormal=[C.ns[0],C.ns[1],C.ns[2]],w._reflectorVbuffer=sp.Buffer.createVertexBuffer(p,new Float32Array(C.vs))}if(o.copy(w._reflectNormal),o.applyMatrix4(i),a.subVectors(t,e),a.dot(o)>0)return!1;a.reflect(o).negate(),a.add(t),s.copy(S.getCenter()).negate().add(t),s.reflect(o).negate(),s.add(t),c.copy(S.getUp()),c.reflect(o);var M=[0,0,0,0,0,0,0,0,0];v(M,S),S._eye=a.toArray(),S._center=s.toArray(),S._up=c.toArray(),S._18Q=u;var D=S._skyBox;D&&(D.p3(S._eye),S.getData3dUI(D).iv()),Sh(p,T.frame),p.viewport(0,0,T.width,T.height),p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var E=rf(S),P=nf(S);h.setFromNormalAndCoplanarPoint(o,t),h.applyMatrix4(d.fromArray(P)),f.set(h.normal.x,h.normal.y,h.normal.z,h.constant),g.x=(Math.sign(f.x)+E[8])/E[0],g.y=(Math.sign(f.y)+E[9])/E[5],g.z=-1,g.w=(1+E[10])/E[14],f.multiplyScalar(2/f.dot(g));var O=I.s("shape3d.reflector.clip"),A=O===r?.003:O;E[2]=f.x,E[6]=f.y,E[10]=f.z+1-A,E[14]=f.w;var k=S._computedProjectMatrix;S._computedProjectMatrix=E,I._reflecting=!0,b(),S._computedProjectMatrix=k,l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(d.fromArray(S._projectMatrix)),l.multiply(d.fromArray(S._viewMatrix)),Th(p),y(M,S);var R=xh.Reflector.shader;return R||(R=xh.Reflector.shader=new sp.Shader(p,xh.Reflector.vs,xh.Reflector.fs)),R.bind(),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,T.texture),R.uniforms.tDiffuse=0,R.uniforms.color=_o(I.s("shape3d.reflector.color")||"rgb(128,128,128)"),R.uniforms.textureMatrix=l.toArray(),R.uniforms.modelMatrix=Ec(I),R.uniforms.viewMatrix=nf(S),R.uniforms.projectionMatrix=rf(S),w._reflectorVbuffer.upload(),R.attributes.pos.pointer(w._reflectorVbuffer),p.drawArrays(p.TRIANGLES,0,6),I._reflecting=!1,p.useProgram(S._prg),!0}}()}),xh.Reflector={vs:["attribute vec3 pos;","uniform mat4 textureMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat4 projectionMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * modelMatrix * vec4( pos, 1.0 );","\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( pos, 1.0 );","}"].join("\n"),fs:["precision highp float;","uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","   vec2 tUv = vUv.xy / vUv.w;","   if (tUv.x < .0 || tUv.y < .0 || tUv.x > 1. || tUv.y > 1.) discard;","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var rv=function t(e,n){Yi(t,this,[e,n])};lc(rv,nv,{_25Q:1,validate:function(t){var e=this,n=e.gv,i=e.data,r=e.s,o=r("edge.width"),a=i._40I,s=i._41I;if(e.shapeModel=e.info=u,a&&s){var c,l,d,h,g,p,v,y,_,m,b=i.isLooped(),x=r(ce),w=f.getEdgeType(x);if(w){var I=w(i,Rl(e,n,i,b,x),n,e._19Q);if(!I.points||I.points.isEmpty())return;p=e.info={},v=I.segments,g=I.points,y=g.size();for(var S=a.getElevation(),T=s.getElevation(),C=0;y>C;C++){var M=g.get(C);M.e==u&&(M.e=S+(T-S)*C/(y-1))}_=Ah(g.get(0)),m=Ah(g.get(y-1));var D=y%2;0===D?(p.c1=Ah(g.get(y/2-1)),p.c2=Ah(g.get(y/2))):p.p3=Ah(g.get((y-D)/2)),p.s1=_,p.s2=Ah(g.get(1)),p.t1=Ah(g.get(y-2)),p.t2=m}else{g=new tl,p=e.info={};var E=r("edge.offset"),P=r("edge.center"),O=r("edge.source.t3"),k=r("edge.target.t3"),R=e._getEdge3dHostPoint(a,"source"),z=e._getEdge3dHostPoint(s,"target");if(O&&(R[0]+=O[0],R[1]+=O[1],R[2]+=O[2]),k&&(z[0]+=k[0],z[1]+=k[1],z[2]+=k[2]),x===Wt){v=r("edge.segments");var N=p.points=r(se)||el;if(y=N.size()){_=Ah(N.get(0)),m=Ah(N.get(y-1)),!P&&E&&(d=pc(_,R,!0),E=A(E,Ws(R,_)),R=[R[0]+d[0]*E,R[1]+d[1]*E,R[2]+d[2]*E],d=pc(z,m,!0),E=A(E,Ws(m,z)),z=[z[0]-d[0]*E,z[1]-d[1]*E,z[2]-d[2]*E]);D=y%2;0===D?(c=Ah(N.get(y/2-1)),l=Ah(N.get(y/2))):p.p3=Ah(N.get((y-D)/2)),p.s1=R,p.s2=_,p.t1=m,p.t2=z}else!P&&E&&(d=pc(z,R,!0),h=Ws(R,z),E=Ol(E,h),R=[R[0]+d[0]*E,R[1]+d[1]*E,R[2]+d[2]*E],z=[z[0]-d[0]*E,z[1]-d[1]*E,z[2]-d[2]*E]),c=R,l=z;g.add({x:R[0],y:R[2],e:R[1]}),g.addAll(N),g.add({x:z[0],y:z[2],e:z[1]})}else{var V=Rl(e,n,i,b,x);if(e._19Q||(V=-V),b){var L=R[0],B=R[1],G=R[2],F=a.getTall()/2+V;c=[L-V,B+F,G],l=[L+V,B+F,G],g.add({x:L-V,y:G,e:B}),g.add({x:L-V,y:G,e:B+F}),g.add({x:L+V,y:G,e:B+F}),g.add({x:L+V,y:G,e:B})}else{d=pc(z,R,!0),h=Ws(R,z);var j={x:R[0],y:R[2]},H={x:z[0],y:z[2]},U=Uh(u,j,H,V),Z=U.x-j.x,W=U.y-j.y;E=Ol(E,h),d[0]*=E,d[1]*=E,d[2]*=E,c=[R[0]+d[0]+Z,R[1]+d[1],R[2]+d[2]+W],l=[z[0]-d[0]+Z,z[1]-d[1],z[2]-d[2]+W],P?(g.add({x:R[0],y:R[2],e:R[1]}),g.add({x:c[0],y:c[2],e:c[1]}),g.add({x:l[0],y:l[2],e:l[1]}),g.add({x:z[0],y:z[2],e:z[1]})):(g.add({x:c[0],y:c[2],e:c[1]}),g.add({x:l[0],y:l[2],e:l[1]}))}}p.c1=c,p.c2=l}p.list=r(We)===At?e.createTubeModel(g,v,o/2,t):e.createLineModel(g,v,o,"edge","edge.dash")}},_getEdge3dHostPoint:function(t,e){if(!Vi(t))return t.p3();var n=this;e="edge."+e+".anchor.";var i=n.s(e+"x"),o=n.s(e+"elevation"),a=n.s(e+"y");if(i===r&&o===r&&a===r)return t.p3();var s=Ec(t,n.gv.getMat(t)),c=t.getAnchor3d();return Ic([(i===r?.5:i)-c.x,(o===r?.5:o)-c.y,(a===r?.5:a)-c.z],s)}});var ov=function t(e,n){Yi(t,this,[e,n])};lc(ov,iv,{_80o:function(t,e,n){var i=this,r=i.gv,o=i.shapeModel;zf(r,i.mat),o?$g(r,i.data,o,i,i.getBodyColor(),n):(jf(i,t,e,i.left,n),jf(i,t,e,i.front,n),jf(i,t,e,i.right,n),jf(i,t,e,i.back,n),jf(i,t,e,i.top,n),jf(i,t,e,i.bottom,n)),kf(r)},validate:function(t,e){var n,i,r=this,o=r.s,a=r.data,s=a.p3(),c=a._thickness/2,l=a.isClosePath(),d=a.getPoints(),h=a.getSegments(),f=o(qe),g=t&&t.uv;if(r.clear(),0>c)i=r.shapeModel=nu(d,h,o(Qe),o(Je),f,o(Ke),a.getTall(),a.getShapeElevation(),l),o(Xe)?o("shape3d.image")||delete i.uv:(delete i.vs,delete i.ns,delete i.uv),o("shape3d.top.image")||delete i.top_uv,o("shape3d.bottom.image")||delete i.bottom_uv;else if(o(We)===At)n=Mo(d,h,f,l),i=r.shapeModel={vs:[]},o("shape3d.image")&&(i.uv=[],i.sum=o(Ke)||ur(n)||1,i.len=0),o(Qe)&&!l&&(i.top_vs=[],o("shape3d.top.image")&&(i.top_uv=[])),o(Je)&&!l&&(i.bottom_vs=[],o("shape3d.bottom.image")&&(i.bottom_uv=[])),r._12O(n,c);else{var p,v,y,_,m,b,x,w,I,S;if(n=Mo(d,h,f,l),m=r.vf(ft,g,!1,e),c&&(b=r.vf(gt,g,!1,e),x=l?u:r.vf(pt,g,!1,e),w=l?u:r.vf(vt,g,!1,e),I=r.vf(yt,g,!1,e),S=r.vf(_t,g,!1,e)),c){for(var T=0,C=n.length;C>T;T++)n[T]=r._tryRemoveBezierPoints(n[T],c);r._12O(n,c)}else m&&n.forEach((function(t){if(_=t.length,_>0)for(p=t[0],y=1;_>y;y++)v=t[y],r.addV(m.vs,p,v),p=v}));r._20Q(n),t||(m&&(m.ns=of(m.vs),ep(m,"vs"),ep(m,he)),c&&(b&&(b.ns=of(b.vs),ep(b,"vs"),ep(b,he)),x&&(x.ns=of(x.vs),ep(x,"vs"),ep(x,he)),w&&(w.ns=of(w.vs),ep(w,"vs"),ep(w,he)),I&&(I.ns=of(I.vs),ep(I,"vs"),ep(I,he)),S&&(S.ns=of(S.vs),ep(S,"vs"),ep(S,he))))}var M=r.mat=_c();qh(M,s),Xu(M,a.getFinalRotation3d(),a.getRotationMode());var D=a.getScale3d(),E=a._dynamicScale3d;E&&(D[0]*=E[0],D[1]*=E[1],D[2]*=E[2]),Xh(M,D),qh(M,vc(s)),t&&(fg(r,M,t,i),r.clear())},_20Q:function(t){var e,n,i,r,o,a,s,c=this,l=c.front,d=c.back,h=c.top,f=c.bottom,g=l?l.tuv:u,p=d?d.tuv:u,v=h?h.tuv:u,y=f?f.tuv:u,_=0;(g||p||v||y)&&(e=c.s(Ke)||ur(t)||1,t.forEach((function(t){if(n=t.length,n>0)for(a=t[0],i=1;n>i;i++)s=t[i],r=_/e,_+=Ws(a,s),o=_/e,c._14O(l,r,o),c._14O(d,1-o,1-r),c._14O(h,r,o),c._14O(f,r,o),a=s})))},_14O:function(t,e,n){if(t){var i=t.uv,r=t.tuv;if(r){if(i)var o=i[0]+(i[6]-i[0])*e,a=i[1]+(i[7]-i[1])*e,s=i[2]+(i[4]-i[2])*e,c=i[3]+(i[5]-i[3])*e,l=i[2]+(i[4]-i[2])*n,u=i[3]+(i[5]-i[3])*n,d=i[0]+(i[6]-i[0])*n,h=i[1]+(i[7]-i[1])*n;else o=e,a=0,s=e,c=1,l=n,u=1,d=n,h=0;r.push(s,c,l,u,d,h,d,h,o,a,s,c)}}},_13O:function(t){var e=t.uv,n=t.tuv;n&&(e?n.push(e[2],e[3],e[4],e[5],e[6],e[7],e[6],e[7],e[0],e[1],e[2],e[3]):n.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(t,e){var n=t.length;if(4>n)return t;var i,r,o,a,s,c,l=!1,u=function(e){return t[e]},d=function(e){return t[n-1-e]};for(s=0;1>=s;s++)for(c=s?d:u,r=c(0),o=c(1),i=2;n-1>i;i++)if(a=c(i),!a.remove)if(a.b){var h=Uh(r,o,a,e);h.adjust?(a.remove=!0,l=!0):(r=o,o=a)}else r=o,o=a;if(!l)return t;var f=[];for(i=0;n>i;i++)t[i].remove||f.push(t[i]);return f},_12O:function(t,e){var n,i,r,o,a,s=this.s("shape3d.point.epsilon"),c=this;t.forEach((function(t){if(a=t.length,a>0)for(n={p:t[0],n:!0},o=1;a>o;o++)i=t[o],r=a-1>o?t[o+1]:u,r&&Math.abs(i.x-r.x)<s&&Math.abs(i.y-r.y)<s||c.addPoint(n,i,r,e,t)}))},addPoint:function(t,e,n,i,r){var o,a,s,c,l,d,h,f,g,p=this,v=t.p,y=t.f,_=t.b,m=p.s("shape3d.side")||cc,b=p.s("shape3d.start.angle"),x=p.s("shape3d.sweep.angle"),w=p.shapeModel,I=p.data.isClosePath();if(t.n&&(t.n=!1,y=I&&r.length>2?Uh(r[r.length-2],v,e,i):Uh(u,v,e,i),_=Hh(v,y),w?w.top_vs&&p._10O(_,y,m,b,x,w.top_vs,w.top_uv):(o=p.left)&&(p.addV(o.vs,_,y),p._13O(o))),a=n?Uh(v,e,n,i):I&&r.length>2?Uh(v,e,r[1],i):Uh(v,e,u,i),s=Hh(e,a),w){var S,T,C=w.vs,M=w.uv,D=w.sum;for(M&&(S=w.len/D,w.len+=Ws(v,e),T=w.len/D),d=p._9O(_,y,m,b,x),h=p._9O(s,a,m,b,x),f=0;m>f;f++)g=f+1,Ui(C,d[g]),Ui(C,h[f]),Ui(C,d[f]),Ui(C,h[f]),Ui(C,d[g]),Ui(C,h[g]),M&&(c=f/m,l=g/m,M.push(S,l,T,c,S,c,T,c,S,l,T,l));!n&&w.bottom_vs&&p._10O(s,a,m,b,x,w.bottom_vs,w.bottom_uv,!0)}else!n&&(o=p.right)&&(p.addV(o.vs,a,s),p._13O(o)),(o=p.front)&&p.addV(o.vs,y,a),(o=p.back)&&p.addV(o.vs,s,_),(o=p.top)&&p.addH(o.vs,y,a,s,_,!0),(o=p.bottom)&&p.addH(o.vs,_,s,a,y);t.p=e,t.f=a,t.b=s},_10O:function(t,e,n,i,r,o,a,s){var c,l,u=this,d=u.data,h=u._9O(t,e,n,i,r),f=(t.x+e.x)/2,g=(t.y+e.y)/2,p=d.getShapeElevation(),v=0;for(v=0;n>v;v++)s?(Ui(o,h[v]),Ui(o,h[v+1])):(Ui(o,h[v+1]),Ui(o,h[v])),Ui(o,[f,p,g]),a&&(s?(c=G*(v+1)/n+i,l=G*v/n+i):(c=G*v/n+i,l=G*(v+1)/n+i),a.push(.5-.5*R(l),.5-.5*N(l),.5-.5*R(c),.5-.5*N(c),.5,.5))},_9O:function(t,e,n,i,r){var o,a,s=this,c=s.data,l=[],u=(t.x+e.x)/2,d=(t.y+e.y)/2,h=c.getTall()/2,f=c.getShapeElevation(),g=0;for(r=r||G;n>=g;g++)o=r*g/n+i,a=R(o),l.push([u+(t.x-u)*a,f+h*N(o),d+(t.y-d)*a]);return l},addV:function(t,e,n){var i=e.x,r=e.y,o=n.x,a=n.y,s=this.data,c=s.getShapeElevation(),l=s.getTall()/2;t.push(i,c-l,r,o,c-l,a,o,c+l,a,o,c+l,a,i,c+l,r,i,c-l,r)},addH:function(t,e,n,i,r,o){var a=this.data,s=a.getTall()/2,c=a.getShapeElevation()+(o?s:-s);t.push(e.x,c,e.y,n.x,c,n.y,i.x,c,i.y,i.x,c,i.y,r.x,c,r.y,e.x,c,e.y)},vf:function(t,e,n,i){var r,o=this,a=o.gv.getFaceVisible(o.data,t);return(n||a)&&(r=Ff(o,t,i),r.vs=[],r.tuv=a&&(r.texture||e)?[]:u,r.visible=a),r}});var av=function t(e,n){Yi(t,this,[e,n])};lc(av,nv,{_25Q:1,validate:function(t){var e=this,n=e.data,i=e.s,r=n.getPoints(),o=r.size();if(e.shapeModel=e.info=u,o>1){var a=e.info={},s=n.getSegments(),c=n.getThickness(),l=Ah(r.get(0)),d=Ah(r.get(o-1)),h=o%2;0===h?(a.c1=Ah(r.get(o/2-1)),a.c2=Ah(r.get(o/2))):a.p3=Ah(r.get((o-h)/2)),a.s1=l,a.s2=Ah(r.get(1)),a.t1=Ah(r.get(o-2)),a.t2=d,a.list=i(We)===At?e.createTubeModel(r,s,c/2,t):e.createLineModel(r,s,c,"shape.border","shape.dash")}var f=n.p3(),g=e.mat=_c();qh(g,f),Xu(g,n.getFinalRotation3d(),n.getRotationMode());var p=n.getScale3d(),v=n._dynamicScale3d;v&&(p[0]*=v[0],p[1]*=v[1],p[2]*=v[2]),Xh(g,p),qh(g,vc(f))},_80o:function(t,e,n){var i=this,r=i.shapeModel;if(r){var o=i.gv;zf(o,i.mat),$g(o,i.data,r,i,i.getBodyColor(),n),kf(o)}}});var sv=d.graph3d.VR=function(t){var e=this;e.gv=t,e._controllers=[],e["switch"]=new lv(e),e._enable=!1,e._defaultCallLater=d.Default.callLater,e._defaultCancelLater=yi,"undefined"!=typeof n&&"VRFrameData"in n&&(e._frameData=new n.VRFrameData),e.measureOflength=1,e.eyesOffset=[0,0,0],e._orientation=new d.Math.Quaternion,e._lastHeadPose=[0,0,0],e._offsetToBeAdd=[0,0,0],e._fpsInfo={time:0,fps:0,frames:0}};lc(sv,i,{ms_fire:!0,_42:function(t,e,n,i){var r=this,o=r.gv;if(!o.drawFilter&&r._deviceInAction){var a=r._device;if(a){var s=r._measureOflength;a.depthNear=o.getNear()*s,a.depthFar=o.getFar()*s;var c=r._offsetToBeAdd;if(r.eyesOffset[0]+=c[0],r.eyesOffset[1]+=c[1],r.eyesOffset[2]+=c[2],c[0]=0,c[1]=0,c[2]=0,!1===a.isPresenting)return r._controllers.forEach((function(t){t&&t.update()})),o.iv(),!1;var l=r._frameData;a.getFrameData(l);var u=l.pose.position;if(u){var h=r.toViewPosition(u);o.setEye(h),r._orientation.fromArray(l.pose.orientation);var f=new d.Math.Vector3(0,0,-10*r._scaleFactor);f.applyQuaternion(r._orientation),o.setCenter([h[0]+f.x,h[1]+f.y,h[2]+f.z])}r._controllers.forEach((function(t){t&&t.update()})),o.setViewport(t,0,0,e/2,n),r._viewMatrix=r._copyViewMatrix(l.leftViewMatrix),r._projectMatrix=r._copyProjectMatrix(l.leftProjectionMatrix),i(),o.setViewport(t,e/2,0,e/2,n),r._viewMatrix=r._copyViewMatrix(l.rightViewMatrix),r._projectMatrix=r._copyProjectMatrix(l.rightProjectionMatrix),i(),r._lastViewMatrix=r._viewMatrix,r._lastProjectMatrix=r._projectMatrix,r._viewMatrix=null,r._projectMatrix=null,r.submitFrame();var g=Date.now(),p=r._fpsInfo;return g-p.time>1e3?(p.fps=Math.round(1e3*(p.frames+1)/(g-p.time)),p.time=g,p.frames=0):p.frames++,!0}}},onVRDisplayPresentChange:function(){var t=this.isPresenting();this._injectGraphView(t),this.fp("present",!t,t)},getOrientation:function(){return this._orientation},addController:function(t){t=t||0;var e=this,n=e.getController(t);return n||(n=new cv(e,t),e._controllers.push(n),n)},getController:function(t){t=t||0;for(var e=this._controllers,n=0,i=e.length;i>n;n++)if(e[n]&&e[n].id===t)return e[n];return null},removeController:function(t){t=t||0;for(var e=this._controllers,n=0,i=e.length;i>n;n++)if(e[n]&&e[n].id===t)return e.splice(n,1),!0;return!1},getLastHeadPose:function(){return this._lastHeadPose},toViewPosition:function(t,e){var n=this,i=n._scaleFactor,r=n._eyesOffset,o=n._lastHeadPose;return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,e?(e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e):[o[0]+r[0],o[1]+r[1],o[2]+r[2]]},addEyesOffset:function(t,e,n){var i=this._offsetToBeAdd;i[0]+=t,i[1]+=e,i[2]+=n},_copyViewMatrix:function(t){var e=this.dup(t),n=this._scaleFactor;e[12]*=n,e[13]*=n,e[14]*=n;var i=this._eyesOffset;if(i&&(i[0]||i[1]||i[2])){var r=i[0],o=i[1],a=i[2];e[12]-=e[0]*r+e[4]*o+e[8]*a,e[13]-=e[1]*r+e[5]*o+e[9]*a,e[14]-=e[2]*r+e[6]*o+e[10]*a}return e},shutdown:function(){var t=this._device;t&&t.isPresenting&&t.exitPresent()},isPresenting:function(){var t=this._device;return t&&t.isPresenting},_copyProjectMatrix:function(t){var e=this.dup(t),n=this._scaleFactor;return e[14]*=n,e},dup:function(t,e){for(var n=t.length,i=e||new Array(n);n--;)i[n]=t[n];return i},getViewMatrix:function(t){var e=this._viewMatrix;return e?this.dup(e,t):void 0},getProjectMatrix:function(){var t=this._projectMatrix;return t?this.dup(t):void 0},submitFrame:function(){var t=this;if(t._enable&&t._deviceInAction){var e=t._device;e&&e.isPresenting&&(e.submitFrame(),t.gv.iv())}},getFps:function(){return this._fpsInfo.fps},intersectWorld:function(t){var e=this.gv;return e.intersectObjects(t,e.dm().getDatas())},setDevice:function(t){var e=this;e._device=t},_injectGraphView:function(){var t,e,n;return function(i){var r=this.gv;if(i){var o=this._device,a=o.getEyeParameters("left"),s=a.renderWidth,c=a.renderHeight;t=r.getWidth,e=r.getHeight,n=r.getDevicePixelRatio,r.getWidth=function(){return 2*s},r.getHeight=function(){return c},r.getDevicePixelRatio=function(){return 1}}else t&&(r.getWidth=t,r.getHeight=e,r.getDevicePixelRatio=n)}}(),_injectCallLaterFunc:function(t){var e=this;if(!t)return Es=d.Default.callLater=e._defaultCallLater,void(yi=d.Default.cancelLater=e._defaultCancelLater);e=this;Es=d.Default.callLater=function(t,n,i,r){var o=e._device;return o&&o.isPresenting?r?J((function(){Es(t,n,i)}),r):o.requestAnimationFrame((function(){e._deviceInAction=!0,t.apply(n,i),e._deviceInAction=!1})):e._defaultCallLater(t,n,i,r)},yi=d.Default.cancelLater=function(t,n){var i=e._device;return i&&i.isPresenting?n?K(t):i.cancelAnimationFrame(t):e._defaultCancelLater(t,n)}}}),i.defineProperties(sv.prototype,{enable:{get:function(){return this._enable},set:function(t){var e=this;e._enable!==t&&(e._enable=t,t?(e["switch"].showButton(),e._injectCallLaterFunc(!0)):(e.shutdown(),e["switch"].hideButton(),e._injectCallLaterFunc(!1)),e.fp("enable",!t,t))}},measureOflength:{get:function(){return this._measureOflength},set:function(t){this._measureOflength=t;var e=this._scaleFactor=1/t;this._controllers.forEach((function(t){t&&t._setScaleFactor(e)}))}},eyesOffset:{get:function(){return this._eyesOffset},set:function(t){this._eyesOffset=t}},controllerModel:{get:function(){return this._controllerModel},set:function(t){var n;"object"==e(t)?(n=t.mtl,t=t.obj):(n=t+".mtl",t+=".obj");var i=this,r=i._controllerModel;r&&r.obj===t&&r.mtl===n||(r=i._controllerModel={obj:t,mtl:n},f.loadObj(t,n,{finishFunc:function(t,e){i._controllerModel===r&&f.setShape3dModel("vrControllerModel",e)}}))}},interactive:{get:function(){return!!this._interactive},set:function(t){!!t!=!!this._interactive&&(this._interactive=t,t&&this.addController(0),this.gv.getCoreInteractor().enableVR(t))}}});var cv=function(t,e){function n(t){var e=navigator.getGamepads&&navigator.getGamepads();if(e)for(var n=0,i=0,r=e.length;r>n;n++){var o=e[n];if(o){var a=o.id;if("OpenVR Gamepad"===a||"OpenVR Controller"===a||0===a.indexOf("Oculus Touch")||0===a.indexOf("Spatial Controller")){if(i===t)return o;i++}}}}function i(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[2]-e[2])<n}var o=this;o.vr=t,o.id=e;var a,s,c=[0,0],l=[{id:"thumbpad",pressed:!1},{id:"trigger",pressed:!1},{id:"grips",pressed:!1},{id:"menu",pressed:!1}],u=new Hu;u.s("shape3d","vrControllerModel"),u.isController=!0,u.s("intersect",!1),o.getGamepad=function(){return s},o.isButtonPressed=function(t){for(var e,n=0,i=l.length;i>n;n++)if(e=l[n],e.id===t)return e.pressed;return!1},o.getNode=function(){return u};var d=.003;o.setRotationEpsilon=function(t){d=t};var h=5e-4,g=h;o.setPositionEpsilon=function(t){h=t,g=t*o.vr._scaleFactor},o._setScaleFactor=function(t){u.s3(t,t,t),g=h*t},o._setScaleFactor(o.vr._scaleFactor);var p,v=new Ra,y=new Ha,_=[0,0,0],m=[0,0,0],b=new Za,x=new Na,w=new Ba;o.getRay=function(){return p?(w.origin.fromArray(_),w.direction.copy(x),p=!1,w):w},o.update=function(){if(a=s,s=n(e),a!=s&&console.log("gamepad changed",s),!s||s.pose===r)return s=null,void u.s("3d.visible",!1);if(f.getShape3dModel("vrControllerModel")){u.dm()||t.gv.dm().add(u),u.s("3d.visible",!0);var h=s.pose;if(null!==h){h.position&&(o.vr.toViewPosition(h.position,_),i(u.p3(),_,g)||(p=!0,u.p3(_))),h.orientation&&(v.fromArray(h.orientation),x.set(0,0,-1).applyQuaternion(v).normalize(),y.makeRotationFromQuaternion(v),b.set(0,0,0,u.getRotationMode(),!0).setFromRotationMatrix(y),m[0]=b.x,m[1]=b.y,m[2]=b.z,i(u.r3(),m,d)||(p=!0,u.r3(m))),p&&t.fp("gamepad.pose",null,{position:_,rotation:m,id:e});var w=s.axes;(c[0]!==w[0]||c[1]!==w[1])&&(c=[w[0],w[1]],t.fp("gamepad.axes",null,{id:e,axes:c}));var I,S,T,C,M=s.buttons;for(I=0,S=M.length;S>I;I++)if(T=M[I],C=T.pressed,C!==l[I].pressed){l[I].pressed=C;var D={id:e},E="state";D[E]=D._62O=C?"down":"up",t.fp("gamepad.button."+l[I].id,null,D)}}}}},lv=function(t){this.vr=t,this._button=null};lc(lv,i,{showButton:function(){var t=this.assureButton();if(!t.parentNode){var e=this.vr.gv,n=e.getView();e._79O?n.insertBefore(t,e._79O):n.appendChild(t)}},hideButton:function(){var t=this._button;t&&t.parentNode&&t.parentNode.removeChild(t)},assureButton:function(){var t=this._button;return t||(this._button=this.createButton(this.vr.gv))},createButton:function(t){function e(t,e){t.textContent=e&&e.isPresenting?"关闭 VR 显示":"开启 VR 显示"}function i(n){a.style.display="",a.style.cursor="pointer",a.style.left="calc(50% - 50px)",a.style.width="100px",e(a,n),a.onmouseenter=function(){a.style.opacity="1.0"},a.onmouseleave=function(){a.style.opacity="0.5"},a.onclick=function(){n.isPresenting?n.exitPresent():n.requestPresent([{source:t.getCanvas()}])},t.vr.setDevice(n)}function r(){a.style.display="",a.style.cursor="auto",a.style.left="calc(50% - 75px)",a.style.width="150px",e(a,null),a.onmouseenter=null,a.onmouseleave=null,a.onclick=null,t.vr.setDevice(null)}function o(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.color="#000",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("getVRDisplays"in navigator){var a=this._button=l.createElement("button");return a.style.display="none",o(a),S(n,"vrdisplayconnect",(function(t){i(t.display)})),S(n,"vrdisplaydisconnect",(function(){r()})),S(n,"vrdisplaypresentchange",(function(n){e(a,n.display),t.vr.onVRDisplayPresentChange()})),navigator.getVRDisplays().then((function(t){t.length>0?i(t[0]):r()})),a}var s=l.createElement("a");return s.href="https://webvr.info",s.innerHTML="当前不支持 webvr",s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",o(s),s}}),i.defineProperties(lv.prototype,{});var uv=d.graph3d.PostProcessing=function(t){function e(){if(!n){var e=t.getGL();n=new Uf.RenderTarget(t,e,null,null,{samples:g.renderTextureSamples||1}),r=new sp.Shader(e,u.vs,u.fs),o=sp.Buffer.createIndexBuffer(e,new Uint16Array([0,2,1,1,2,3])),a=sp.Buffer.createVertexBuffer(e,new Float32Array([0,0,1,0,0,1,1,1]))}}var n,r,o,a,s=this,c={},l=!1;!function(){i.keys(uv).forEach((function(e){c[e]=new uv[e](t)}))}(),s.getModule=function(t){return t?c[t]:s},s.getModuleList=function(){return i.keys(c)},s.handleDataModleChange=function(t,e){t&&(t.setPostProcessingData(s.serialize()),t.removeSerializeListener(s.onDataModelSerialize,s)),e&&(e.addSerializeListener(s.onDataModelSerialize,s),s.deserialize(e.getPostProcessingData()))},s.onDataModelSerialize=function(e){"serialize"===e.type?t.dm()._postProcessingData=s.serialize():"deserialize"===e.type&&s.deserialize(t.dm().getPostProcessingData())},s.serialize=function(){var t,e,n,i,r={};for(t in c)n=c[t],e=t.toLowerCase(),r[e]={enable:n.enable},i=n.serializeProperties,i&&i.forEach((function(t){r[e][t]=n[t]}));return r},s.deserialize=function(t){var e,n,i,r,o;if(t){for(e in t)if(e&&(r=e[0].toUpperCase()+e.slice(1),o=c[r]))for(i in n=t[e],s.enableModule(r,n.enable),n)"enable"!==i&&(o[i]=n[i])}else for(r in c)o=c[r],o.enable=!1,o.resetProperties&&o.resetProperties()},s.decodeShader=function(t){var e,n,i,r="",o="";for(i=0;i<t.length;i++)e=t[i],"%"===e?e="'":"a"===e?e='"':"]"===e&&(e="\\"),n=String.fromCharCode(e.charCodeAt(0)-1),i%2?o+=n:r=n+r;return o+r},s.createShader=function(t,e,n){var i=e.indexOf("^#"),r=s.decodeShader(e.substr(0,i)),o=s.decodeShader(e.substr(i+2));if(n){var a=n(r,o);a&&a.vs&&(r=a.vs),a&&a.fs&&(o=a.fs)}return new sp.Shader(t,r,o)},s.enableModule=function(t,n){var i,r,o,a=t.split(",");for(i=0,r=a.length;r>i;i++)o=a[i].trim(),c[o]&&(c[o].enable=n);for(o in l=!1,c)if(c[o].enable){l=!0;break}l&&e()};var u={vs:["attribute vec2 pos;","varying vec2 vUv;","void main(void) {","gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);","vUv = vec2(pos.x, 1.0 - pos.y);","}"].join("\n"),fs:["precision highp float;","uniform sampler2D image;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D(image, vUv);","}"].join("\n")};s._42=function(e,i,s,u,d){if(l&&!d){n.setSize(e,i,s),n.bind(e),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),t.setViewport(e,0,0,i,s),u(),n.unbind(e);for(var h=0,f=t._glCapabilities.maxAttributes;f>h;h++)e.disableVertexAttribArray(h);var g,p=n;for(g in c)p=c[g]._42(e,p)||p;return t.setViewport(e,0,0,i,s),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),r.bind(),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,p.texture),r.uniforms.image=0,o.upload(),a.upload(),r.attributes.pos.pointer(a),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindTexture(e.TEXTURE_2D,null),e.useProgram(t._prg),!0}}},dv=d.graph3d.PostProcessing.Bloom=function(t){function e(){var e=t.getGL();if(e)for(var n=t._postProcessing,i=0;b>i;i++)w[i]=n.createShader(e,dv._35Q,(function(t,e){return{fs:e.replace(/DEFINE_VALUE/g,x[i]).replace("%OVERRIDE_ALPHA_DEFINE%",s?"#define OVERRIDE_ALPHA":"")}}))}function n(){var n=t.getWidth(),i=t.getHeight();if(n&&i){y=[n,i],h=!0;var r,o=t.getGL(),a=Math.round(y[0]/2),s=Math.round(y[1]/2);for(f=new Uf.RenderTarget(t,o,a,s),r=0;b>r;r++)_.push(new Uf.RenderTarget(t,o,a,s)),m.push(new Uf.RenderTarget(t,o,a,s)),a=Math.round(a/2),s=Math.round(s/2);var u=t._postProcessing;g=u.createShader(o,dv._34Q),e(),p=u.createShader(o,dv._36Q,(function(t,e){return{fs:e.replace(/NUM_MIPS/g,b)}})),v=u.createShader(o,dv.finalShader),c=sp.Buffer.createIndexBuffer(o,new Uint16Array([0,2,1,1,2,3])),l=sp.Buffer.createVertexBuffer(o,new Float32Array([0,0,1,0,0,1,1,1]))}}var r,o,a,s,c,l,u=this,d=!1,h=!1;this.serializeProperties="strength,threshold,radius,overrideAlpha".split(","),this.resetProperties=function(){r=1.5,o=.55,a=.4,s=!1},i.defineProperties(u,{enable:{get:function(){return d},set:function(t){!!d!=!!t&&(d=t,t&&!h&&n())}},strength:{get:function(){return r},set:function(t){r=t}},threshold:{get:function(){return o},set:function(t){o=t}},radius:{get:function(){return a},set:function(t){a=t}},overrideAlpha:{get:function(){return s},set:function(t){!!s!=!!t&&(s=t,h&&e())}}}),this.resetProperties();var f,g,p,v,y=[256,256],_=[],m=[],b=5,x=[3,5,7,9,11],w=[];u._42=function(e,i){function s(n,i,r,o){Sh(e,i.frame),t.setViewport(e,0,0,i.width,i.height),o?o(e):e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),u!==n&&n.bind();var a=0;for(var s in r){var d=r[s];d instanceof WebGLTexture&&(e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,d),d=a,a++),n.uniforms[s]=d}for(u!==n&&(c.upload(),l.upload(),n.attributes.pos.pointer(l),u=n),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);a--;)e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,null);Th(e)}if(d&&(h||(n(),h))){var u;s(g,f,{smoothWidth:.01,luminosityThreshold:o,tDiffuse:i.texture});var x,I=f,S=Math.round(y[0]/2),T=Math.round(y[1]/2);for(x=0;b>x;x++)s(w[x],_[x],{colorTexture:I.texture,direction:[1,0],texSize:[S,T]}),s(w[x],m[x],{colorTexture:_[x].texture,direction:[0,1],texSize:[S,T]}),S=Math.round(S/2),T=Math.round(T/2),I=m[x];return s(p,_[0],{blurTexture1:m[0].texture,blurTexture2:m[1].texture,blurTexture3:m[2].texture,blurTexture4:m[3].texture,blurTexture5:m[4].texture,bloomStrength:r,bloomRadius:a,bloomTintColor:[1,1,1]}),s(v,i,{image:_[0].texture},(function(t){t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)})),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),i}}};dv._34Q="~b\vu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t\vpwqb)s3zdjfowh!!>w!fwdV3w!\vw<V*w1</\v2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!\v+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~q\vs<f*d!jbtijqpmob!!i-jmhfiyqf!ug!m-psbpum<p\vDvuovjqgupvspn!!)tybjnnq!m>f!ss3pEm!puDEhjbgsgGv`tmfh<\v\v<v*o!jwg!p-sinu!egjmXpibuup!pmnvtn!j,o!petmjpuiztUfissifUtziupjmtep<o\vjvnovjmg!p-senm!pgimtpfbsui!UtznupjptupioXjjnevumi!<)\vqwfbustzijuophp!nwtf!d>3!!bwiVqwm<b\v!wupbjpem!gn\vb<j*o1)/*1!!|-\v1w/f1d!5-!1u/f1y!f-m1!/>1!)u5fdyfuwv!s>f!3sEp)m!puDEujvgqguvvtpf!-5!dwfVww\v!<**<!\vbwnfvdm4!!-m{vznyb/!m>f!ywffud!4))u!p1e/!3>:!:w-!!u1b/p6m9g8\v-<!*1!/522",dv._35Q="~b\vu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t\vpwqb)s3zdjfowh!!>w!fwdV3w!\vw<V*w1</\v2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!\v+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~q\vsgfjdejotfj$p\vo<!*ibj/hyijqQ!fgsmvpubyuf<u\v!w-bnsvzTjuoihh!jwffxd03n!vwTVfwt<v\vgvgojjeg)p5sdnf!wt!b>n!qsmpfmsp3DEh!bdspGm`pmshU\vffytumvfs$f\v<<\v*v1o/j2g!p-snnv!Twufidh3j!fuxf0ynTvjT{fft<v\vgvgojjeg)p5sdnf!ww!f>d!3s!pemjpsDfhdbusjGp`om<h\v\v$BeIfQgMjBo`fF!ELJFSSSOFFWMP`!SgBfEeJgVjT$!\vE~F\vG<JxO!F+`!W1B/M3V!F>\v,$!enfvgTjuoifh!jTfJxH\vN<Bx!!E+F!G*J3OfFm`qWnBbMtV!F,\v!&2PfWmFqSnSbJtE)F!`>B,M!QnIvBT`fEtFvGgJgOjFe&\v\v<gcmhpsb/u*!uhfbtvgtgtPjwbvo!Q.e!gw)Vjwo!!-gfmspvbuuy!fyU-s!pjmop!dg!m)pEb3uf!stvjuhynfbu*!!>|!\v3sffmuqvnsbot!!14/d4f:w9\v:<5c!h+s!/f*yuqf)t!g.g1P/w6v!!+,!!yw!V+w!!y-0f)s!vtujyhfnUbs!p+m!ptdj!h)nEb3*f*s0vtujyhfnub!<>\v!~2\vfwmpqjneb!tn!b4jdof)w*\v!<|y\v!w+f!df3{!jjTowwoTjj!{+f!!o>p!j2u/d1f!s0j!eu!f>y!Tujf{tfg<g\vPgwmvp!b3ud!fgwT\vj<h*nbbn!h>j!Tggm!p-byu))gTeJQHoNbBj*t<t\vvgbmhp!b>u!!xx!fujbhpimugT\vv<n*!j>)!uhbbpvmtgt!j>b!oyQ!eugb)p1m/g1\v-|!!g*T!j,h,n!bj*!<<\vTwVfJdE5B!Su`fMyFuOvSsFfLQ!j=y!!j>!!<u2f!y>u!vjs!fu3oEj)!!)dsppmgp\vs<UnfvyTuuvishfj-f!xw!V+w!*c<h\vsw/fydj4Q!fesjvgugyvftuf!T>v!n",dv._36Q="~b\vu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t\vpwqb)s3zdjfowh!!>w!fwdV3w!\vw<V*w1</\v2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!\v+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~q\vs<f*d!j*twjVpwo!!-i6jfhsivqu!ygfmUpsbvum<c\v)wEb3sfzsjvouhy!fwuf!d+3!!*w1V/w2<!\v-vsopjmgppDsuno!jtUbnnpqpmmfcs)35Ed!fcwm!v+s!U*f3y/u1v)ssfp2u<d\vbvGonjpgppmsCnq!stfbmn\vq!m,f!s*3wEV!wc!m-v5sfUsfvyuuyvfsUfs3v<m\vcv)oEj3gfpssvnu!ytfbun!q+m!f*s13/E2!!c-msvpsmUpfDyuuovjsUfn4p<p\vmvco)j5gdpfswn!!+t!b*n5q/m1f)ss3pEu!dcbmGvnspUpfmyCuqvssffm5\v<!\v,v!o*jwgVpws!n-!4tfbsnvqumyffsU3sEv!mccm)vEs3Uffsyvuuvysffu6!<+\v!v*o1j/g2p!s-ns!ptmbpnDqumofjsU3nEp!pemjcs)u5Udffywu!v+s!f*<7\v/v1o)jsgppusdnb!GgnmpppbmuC!qcsmfpmp\vn!T,u!s*fwoVhwu!i-<3\vfvsovjugypfsUns!vgmmcp)bEu3!fcsmvpupynfSub!e+j!v*t1</\v2v!o-jsgppmspnD!uwofjdU4n!pcpmmpcp)n5Udjfowu!D+p!m*p9s/<1\v)gsmppubdub!GmnfpspqmCCmqpspfnmG\vb!d,u!p*sw)Vdwp!o-t2uf!sjvou!ygfmUpsbvum!cg)bEd3ufpssv*u!y|f\vug!m+p!b*u1!/n2j!s-ssppsmGpbDduuopjsU!n>p!p2m/c3)!5.d!fgwb!d+u!p*s1</\v2s)fsupvusdob!Gnnjpyp)mgCbqdsufpms!-)!!n+j!sisuphsoGfbsduuTpnsp-p!mccm!p>p!nsSpbmepjDvhtb*s<G\v`~m\vhw\vp|j!e*!)nobj",dv.finalShader="~b\vu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t\vpwqb)s3zdjfowh!!>w!fwdV3w!\vw<V*w1</\v2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!\v+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~q\vs<f*dwjVtwj!p-of!hibjnhji)qE!3gfmspvbuuy<f\vuv!o>j!gsppsmnp!DthbbnsqGm`fmsh3\vE|!!j*n)bohjfb<n\v!webjspzwj\vo<hw!Vwwf!d3";var hv=d.graph3d.PostProcessing.Dof=function(t){function e(){f=!0;var e=t.getGL();n=new Uf.RenderTarget(t,e),r=t._postProcessing.createShader(e,hv._38Q),o=sp.Buffer.createIndexBuffer(e,new Uint16Array([0,2,1,1,2,3])),a=sp.Buffer.createVertexBuffer(e,new Float32Array([0,0,1,0,0,1,1,1]))}var n,r,o,a,s,c,l,u,d=this,h=!1,f=!1;this.serializeProperties="aperture,maxblur,image".split(","),this.resetProperties=function(){this.aperture=.025,this.maxblur=1,this.image=null},i.defineProperties(d,{enable:{get:function(){return h},set:function(t){!!h!=!!t&&(h=t,t&&!f&&e())}},image:{get:function(){return c},set:function(e){c!==e&&(c=e,s&&(t.getGL().deleteTexture(s),s=null),t.iv())}},maxblur:{get:function(){return l},set:function(e){l!==e&&(l=e,t.iv())}},aperture:{get:function(){return u},set:function(e){u!==e&&(u=e,t.iv())}}}),this.resetProperties(),d._42=function(i,c){function l(e,n,r,s){Sh(i,n.frame),t.setViewport(i,0,0,n.width,n.height),s?s(i):i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),u!==e&&e.bind();var c=0;for(var l in r){var d=r[l];d instanceof WebGLTexture&&(i.activeTexture(i.TEXTURE0+c),i.bindTexture(i.TEXTURE_2D,d),d=c,c++),e.uniforms[l]=d}for(u!==e&&(o.upload(),a.upload(),e.attributes.pos.pointer(a),u=e),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0);c--;)i.activeTexture(i.TEXTURE0+c),i.bindTexture(i.TEXTURE_2D,null);Th(i)}if(h){var u;if(f||e(),!s){var d=Ss(this.image);if(!d||!d.tagName)return c;s=af(i,d)}var g=c.width,p=c.height;if(g&&p)return n.setSize(i,g,p),l(r,n,{tColor:c.texture,tDepth:s,aspect:g/p,aperture:this.aperture,maxblur:this.maxblur}),n}}};hv._38Q="~b\vu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t\vpwqb)s3zdjfowh!!>w!fwdV3w!\vw<V*w1</\v2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!\v+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~q\vs<f1d/j2t!j>p!ob!/isjphmipqD!hgbmspGb`um<h\v\vw<b1s/z2j5o!h0!!wmfpdd3!!>w!Vswp<m\vpvDohjbgspGs`nm!hc\vp<p*m!!5vstvfmEcfgqpuei!<+\v!v*o!jugdpfssns!ptdbundqfmqftsb3!E+!!u*D!p5m/p1s!<-\v1v/o1j!g)p3sdnf!wt!b)n!q,m!fzsy3/Ew!VuwE!f-qsupim<p\vDvuo!j)gEp3sfns!vgumypfbuu!!>n,b!ymcpmdv\vs<<*\v!v5osjvgmpcsgnp!eg!m+p!b*u!!ubdqffsssupvdsufd<f\vqvtobj!g+p!s*n!!:g3m/p1b.u!!-o:f3b/s1D.m!j)q3<d\vfvwo!j)g!p,s!nz!yg/mwpVbwu!!-gsbpsmDpmDjuq!<)\vEv3ofjsgvpusynf!ug!m>p,b!um!pgdp\vd<v*t!<5\vsvvomjcggppsen!!+g!m*p!buud!fbstsqpfdduud<f\vqdtpbo!t+u!!*g!m1p/b1u!!-V5o/q1b.d!l)E3pdxfowt!d)b!m,f!!z>y!/3w6V6w/!!-0s!p3m6p7D/u<!!)0E03!f1s/v/u2y!f.u?!!>g,s!bmdpudj\vp<o*!!)5fsyvdmmcvgepjeo!h+!!2**!\vuddpfostsup!dwufddf4q!tQbb!d+l!G*b!d:u3p/s1t!!->:!3w/f1d.4!))!33d6f7w/!!)+!!,3!6z7y//!w+V!w3!6-7s/p-m!p3D6u7!/)!E+3!f3s6v7u/y-f!u3!6>7,/!!m*p<d\v\vd<p*o!t5us!vwmfcdg5p!eV!o+q!b*d!luGdbfdsusppsdtu!d>f!qVtobq!b+d!l*E!p5x/o1t.d!b-m1f/!10!!)w3fddf5w)!!)Q!b,d!lzGyb/dwuVpws!t--s!p2m/p!D*u<!\v)gEm3pfbsuv!uvyofqub!d>l,S!HmCpBdU\vp<E*f!q5usiv)m!cdgppoet!u+!!j*o!!uwdffds5s!pwd!u*d!f|q\vt!bs!f+u!v*s!o:!3e/p1u.)!!-w:-3!/V1o!q)b3ddlfGwb!d)u!p,s!tz!y*/<w\vV~w\v!g-msppbmup!Dhuf!u)EEf3qfusiv)u!ydfpuo!t>u,!!jmop!dw\vf<d*3!!5tsdvsmfcfgopQep!t+j!u*j!puod!f*s!s|p\vd\nusdffuqvtsbo!!+v!o*q!b1d/l1S!H-C5B/U1p!E)f3qdufiw)!!)u!f,y!uzvys/fw3VEw)!!-usEpfmqpuDiu-!!)tEd3sffsfvouQypftuj!u>j,p!om!p*d!\v*<<*\v!~5\vsgvmmpcbgup!eq!f+s!t*q!fuddufjswsfpEdfuqdufiqUtpbW!j+f!x*[!):!3d/p1o!t-u:!3j/o1!!g)m3pdbfuw!!j)o!w,D!mzjyq/[w-V!wd!p-ostpum!pjDou!!g)mEp3bfus!voufybfsu-!!>d,p!omtpud!\vj<o*!!g8mspvbmuc!ggpbes!!+*!!*|!\vu!dsffsusvpsdou!d)f!qotfbb!s+!!+*!!g5b/s1!!*-!10/!1)!!))3!dgfbws!!).!!,o!fzbys/!w*V!w+!!-jsopwmDpmDjuq![)!E.3!fgsbvsu!y*f<u\v!~>\v,g!mmppbdu\v!<h*f!u8Wsjvfmxc[g)p!ed!p+o!t*u!!ujdof!sgsmppdbuud!feqftqbu!i+!!**!!|:\v3\n/s1f.u!v-s:o3!/q1f.s!t)q3fddfuwj!w)f!E,f!qzuyi/UwpVWwj!f-xs[p)m!peDfuq!u)iE-3!fosfvbusyDfmuj!q>-,!!gmbpsdD\vm<j*q!!8*s<v\vm~c\vgwppej!e+!!n*b!juod)f*s!s|p\vdwufddf3q!tebp!g+c!m*v!s1</\v1w!f-d53/!1b.t!q)f3ddufdwp!s)s!f,d!uz!y>/!wwVfwd!3-)s!p2m/p1D-u!!b)tEq3ffdsuv!u*y<f\vuj!g>!,)!vmtpfdE\vf<q*u!i8*s!v|m\vc!ggpmep!b+u!!*w!jufdxf[s!s>p!dhufdufWqjtfbx![+)!!*h!f:u3E/f1q!u-i:)3!/w1V.w!!)*3!d*f<w\v!!)g!m,p!bzuy!/gwbVdwu!p-ss!p>m!p)D!ug!p)dEv3tf!s,v!uwyjffux![>!,*!<m\vp!de\vp<g*c!m8vssv!m>c!gwpfed!3+!!)*!!dumdbfnsqs)p!dgubddfuqptsb!!++!!b*q!f5s/u1v.s!f--1!/.1n!b)y3cdmfvws!-)!!n,b!yzcym/vwsV!w*!!-*s<p\vm~p\vDfum!t)fE!3|f\vs!veupygfcum!v>s,!!>m!pwdf\vd<3*!!)8!sdvmmbcngqp)e!!u+f!y*u!vusdff3sEs)p!duuEdffqqutib-!!+w!f*d!3:)3w/V1w./!y--:!32//11!!).3!dwfVww!/)z!*,!!*z/yb/!w+V!wb!q-fsspumvpsDfu-!!).En3bfyscvmuvysf-u!!n>b,y!cmmpvds\v!<**!!*8<s\vv~m\vcwgfpde3!!+e!p*g!cumdvfss:s!p>d!uedpfgqctmbv!s+!!+*!!11//:1<!\v-w1f5d/31!!e)p3gdcfmwv!s)8!!,>!!zeyp/gwcVmwv!s-!s+p!m1p/D8u<!\v)wEf3df3s!veupygfcum!v>s,5!!m>p!de\vp<g*c!m8vssv!m+c!g1p/e5!<+\v!w*f!du5d!fdspsmp!d>u!dwffqdt5b)!!+1!/*1!!:*3</\v1d!p-m:!3,/>1!!u)f3ydufvws!f)3!E,)!!zuyD/pwmVpws!--!swpVmwp/Dyuz!!)*E<3\vfdspvmu!y,f>u!!u>f,y!umvpsdf\v3<E*)!!:usDvpmmcpgsp-e!!w+V!w*/!yuzd!f,s!s)p!dwufddf3q)t!b1!/+1!-*!!18/45/!1*.!!+-!6b2t/q1f!d)u3ddpfsws!f)d!u,!!*z!y+/!weVpwg!c-msvpsm!p*D<u\v!d)pEm3!f,s>v!uuyffyuu!v>s,f!3mEp)d!\vu<D*p!m:pssv-m!cwgVpwe/!y+z!!*,!!u)d!fwsfsdp3d)u!d1f/q2t6b-!!+1!/*4!86!2*/!1+.!!b-t8q4f/d1u.d!p)s3sdffdwu!!)*!!,+!!zeyp/gwcVmwv!s-!s*p<m\vpdDpum!!),E>3!fusfvyuuyvfsuf!3>E,)!!mupDdp\vm<p*s!-:!swvVmwc/gypze!!,+!!)*!!wufddf3s)s!p1d/u3d:f-q!t1b/!3+:!!**!!6+2!/b1t!q-f8d4u/d1p!s)s3fddfuw!!*)!!+,!!ezpyg/cwmVvws!!-*s<p\vmdppDmu!!,)>E!3uffsyvuuvysffu3!E>),!!umDppdm\vp<s*-!!:wsVvwm/cygzp!e,!!+)!!*w!fudd3f)s!s.p1d/u4d8f-q!t1b/!2+6!!**!!8+4!/b1t!q-f6d2u/d1p.s!s)f3dduf!w*!!)+!!,e!pzgyc/mwvVsw!!*-<s\vpdmppmD!u,!>)!Eu3ffysuvvusyff3uE!)>!,u!Dmppmdp\vs<-*!!w:Vswv/myczg!p,e!!)+!!w*f!du3d)f!s1s/p5d1u-d!f1q/t1b!!*+!!+*!!b8t4q/f1d.u!d-p6s2s/f1d.u!!)*3!d+f!we!p)g!c,m!vzsy!/*w<V\vwd!p-ms!p,m>p!Duuf!y)uEv3sffs3vEu)y!fuuD!p>m,p!sm-p!dw\vV<w*/!y:zs!v,m!c)g!pwef!d+3!)*!!1u/d4f8s-s!p.d1u/d2f6q!t*b!!++!!b*t!q6f2d/u1d.p!s-s8f4d/u1!!*)!3+d!fewp!g)c!m,v!sz!y*/<w\vVdwp!m-!s,p>m!puDfuy!u)vEs3ff3sEv)u!yufDup!m>p,s!-m!pwdV\vw</*y!z:!s,v!m)c!gwpfed!3+)!!*1!/u3d:f-s!s.p1d/u3d:f!q*t!b+!!+b!t*q!f6d2u/d1p!s-s8f4d/u1!.*!!)+3!defpwg!c)m!v,s!!z*y</\vwdVpwm!!-,s>p!mupfDyuu!v)sEf33fEs)v!uuyDfpum!p>s,-!!mwpVdw\v/<y*z!!:,s!v)m!cwgfpde3!)+!!.*1!/u2d6f-s!s.p1d/u4d8f!q*t!b+!!+b!t*q!f8d4u/d1p!s-s6f2d/u1!!*)!3+d!fewp!g)c!m,v!sz!y*/<w\vVdwp!m-!s,p>m!puDfuy!u)vEs3ff3sEv)u!yufDup!m>p,s!-m!pwdV\vw</*y!zs!v,m!c)g!pwef!d+3!)*!!1u/d1f-s!s.p1d/u5d!f*q!t+b!!b+t!q*f!d8u4d/p1s.s!f-d6u2!/*1!!+)!3edpfgwc!m)v!s,!!*z<y\v/dwpVmw!!,->s!pumfpyDuuv!s)fE33Ef)s!vuuDypfmup!s>-,!!wmVpwd/\vy<z*!!,s!v)m!cwgfpde3!)+!!.*1!/u2d6f-s!s1p/d4u8d!f*q!t+b!!b+t!q*f!d:u3d/p1s.s!f-d:u3!/*1!.+!!)e3pdgfcwm!v)s!!,*!<z\vyd/pwmV!w,!>-!supfmypuDvus!f)3EE3)f!suvDupymfpus!->!,w!Vmwp/dy\vz<!*,!!s)v!mwcfgdp3e)!!+.!1*/!3u:d-f!s1s/p3d:u!d*f!q+t!bb!t+q!f*d!u6d2p/s1s.f!d-u8!4*/!1+.!!e)p3gdcfmwv!s)!!*,<!\vzdyp/mw!V,w>!!-usfpymupvDsuf!3)EE)3!fusDvpumypfsu-!!>w,V!wm/pydz\v!<,*!!)s!vwmfcdg3p)e!!1+/!4*8!-u!d1f/s2s6p!d*u!d+f!qbttbq!f+d!u*d!p1s/s1f!d-u5!/*1!.+!!)e3pdgfcwm!v)s!!,*!<z\vyd/pwmV!w,!>-!supfmypuDvus!f)3E",Wi(f,{accordionViewExpandIcon:bi(ca),accordionViewCollapseIcon:bi(ca,!0),accordionViewLabelColor:os,accordionViewLabelFont:as,accordionViewTitleBackground:sa,accordionViewSelectBackground:_a,accordionViewSelectWidth:3,accordionViewSeparatorColor:r,splitViewDividerSize:1,splitViewDividerBackground:sa,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Et,rect:[2,2,12,12],background:ca}]},propertyViewLabelColor:rs,propertyViewLabelSelectColor:os,propertyViewLabelFont:as,propertyViewExpandIcon:bi(ua),propertyViewCollapseIcon:bi(ua,!0),propertyViewBackground:la,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:ga,propertyViewColumnLineColor:ga,propertyViewSelectBackground:_a,listViewLabelColor:rs,listViewLabelSelectColor:os,listViewLabelFont:as,listViewRowLineVisible:!1,listViewRowLineColor:ga,listViewSelectBackground:_a,treeViewLabelColor:rs,treeViewLabelSelectColor:os,treeViewLabelFont:as,treeViewExpandIcon:bi(fa),treeViewCollapseIcon:bi(fa,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:ga,treeViewSelectBackground:_a,treeViewDoubleClickToToggle:!0,tableViewLabelColor:rs,tableViewLabelSelectColor:os,tableViewLabelFont:as,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:ga,tableViewColumnLineColor:ga,tableViewSelectBackground:_a,treeTableViewLabelColor:rs,treeTableViewLabelSelectColor:os,treeTableViewLabelFont:as,treeTableViewExpandIcon:bi(fa),treeTableViewCollapseIcon:bi(fa,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:ga,treeTableViewColumnLineColor:ga,treeTableViewSelectBackground:_a,tableHeaderLabelColor:rs,tableHeaderLabelFont:as,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:ha,tableHeaderBackground:la,tableHeaderMoveBackground:ra,tableHeaderInsertColor:_a,tableHeaderSortDescIcon:xi(ua,!0),tableHeaderSortAscIcon:xi(ua),tabViewTabGap:1,tabViewLabelColor:os,tabViewLabelFont:as,tabViewTabBackground:sa,tabViewSelectWidth:3,tabViewSelectBackground:_a,tabViewMoveBackground:ra,tabViewInsertColor:_a,toolbarLabelColor:rs,toolbarLabelSelectColor:os,toolbarLabelFont:as,toolbarBackground:la,toolbarSelectBackground:_a,toolbarItemGap:8,toolbarSeparatorColor:da},!0);var fv={translateX:1,sortColumn:1},gv={sortable:1,sortOrder:1,sortFunc:1},pv={focusData:1},vv={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},yv={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},_v=function t(e,n){n.add(e),e.hasChildren()&&e.eachChild((function(e){t(e,n)}))},mv=function(t,e,n,i,r,o,a,s,c,l,d){var h,g=n.getValueType(l),p=n.getAlign(l);if(n.getEnumValues(l)){var v=n.toEnumLabel(e,l),y=ss||0,_=0,m=o,b=f.getTextSize(i,v).width;return h=Ss(n.toEnumIcon(e,l)),h&&(_=o+ss/2,"center"===p?_+=(s-(y+b))/2:"right"===p&&(_=_+s-(y+b)),Cs(t,h,_,a+c/2,l,d),m=_+ss/2),void(v!=u&&(h?Ns(t,v,i,r,m,a,s-(m-o),c):Ns(t,v,i,r,o,a,s,c,p)))}return e=n.formatValue(e),e!=u?g===dn?void Po(t,o,a,s,c,e):g===un||!g&&Oi(e)?(h=Ss(e?Ft:jt),void Cs(t,h,o+s/2,a+c/2,l,d)):void Ns(t,e,i,r,o,a,s,c,p):void 0},bv=function(t,e){var n=e.view,i=Vr(t),r=e.column||e.property;n.getDataModel().beginTransaction(),e.editor=t,t.info=e,n.setCurrentEditor(t),n.getView().insertBefore(i,n._79O),Lr(t,e.editorRect),t.setFocus?t.setFocus():Nr(t),t.commitValue=function(o,a){t._17Q&&(t=t._17Q),a||n.setValue(e.data,r,t.getValue?t.getValue():t.value),t.close&&t.close(),rc(i)},r.onEditorCreated&&r.onEditorCreated(e)},xv=function(t,e,n,i,r){var o=oc(t,n),a=e.value,s=e.view,c=r.getValueType(e.data);return o.onblur=o.onchange=function(){s.endEditing()},"input"===t?(a=r.formatValue(a),a!=u&&(o.value=a),o.onkeydown=function(t){lo(t)?s.endEditing():uo(t)&&s.endEditing(!0)},(c===hn||c===fn)&&S(o,Tn,f.numberListener)):t===pe&&i.forEach((function(t){var e=l.createElement("option");e.innerHTML=r.toEnumLabel(t),e.value=t,r.isEnumEqual(a,t)&&(e.selected=!0),wr(o,e)})),bv(o,e),o},wv=d.widget={},Iv=function(t,e,n){lc(c+".widget."+t,e,n)};Wi(Wa,{ms_value:function(t){t.getValue=function(t){var e=this.getItemById(t),n=e.element;return Ei(n)?n:n?n.getValue?n.getValue():n.value:e.selected},t.setValue=function(t,e){var n=this.getItemById(t);if(n){var i=n.element;i&&!Ei(i)?i.setValue?i.setValue(e):i.value=e:Oi(e)?(n.selected=e,this.iv()):(n.element=e,this.iv())}},t.v=function(t,e){var n=this;if(2===arguments.length)n.setValue(t,e);else{if(!Ai(t))return n.getValue(t);for(var i in t)n.setValue(i,t[i])}return n}},_46o:function(t){t._icon=u,t._accessType=u,t._valueType=u,t._editable=!1,t._batchEditable=!0,t._align=pt,t._nullable=!0,t._emptiable=!1,t.setParent=ai,t.formatValue=function(t){var e=this,n=e._valueType;return e.getEnumValues()?e.toEnumLabel(t):n===un?!!t:t!=u&&n===hn?M(t):t},t.setEnum=function(t,e,n,i,r,o,a){var s=this;t&&!Ri(t)&&t.values&&(i=t.editable,n=t.icons,e=t.labels,r=t.strict,o=t.maxHeight,a=t.dropDownWidth,t=t.values),zi(t)&&(t=t._as),zi(e)&&(e=e._as),zi(n)&&(n=n._as),s._enumValues=t,s._enumLabels=e,s._enumIcons=n,s._enumEditable=i,s._enumStrict=r==u||r,s._enumMaxHeight=o,s._enumDropDownWidth=a,t&&t.length&&Pi(t[0])&&(s._valueType=fn),s.fp("enum",!1,!0)},t.getEnumDropDownWidth=function(){return this._enumDropDownWidth},t.getEnumMaxHeight=function(){return this._enumMaxHeight},t.isEnumEditable=function(){return this._enumEditable},t.getEnumValues=function(){return this._enumValues},t.getEnumLabels=function(){return this._enumLabels},t.getEnumIcons=function(){return this._enumIcons},t.isEnumStrict=function(){return this._enumStrict},t.isEnumEqual=function(t,e){return this._enumStrict?t===e:t==e},t.toEnumLabel=function(t,e){var n=this,i=n.getEnumValues(e),r=n.getEnumLabels(e);if(i&&r)for(var o=0;o<i.length;o++)if(n.isEnumEqual(t,i[o]))return r[o];return t},t.toEnumIcon=function(t,e){var n=this,i=n.getEnumValues(e),o=n.getEnumIcons(e);if(i&&o)for(var a=0;a<i.length;a++)if(n.isEnumEqual(t,i[a]))return o[a];return r}},_45o:function(t){t._87o=function(t,e,n,i,r,o){if(t){var a=this,s=a._90I,c=yr(1);a._columnLineVisible&&(r-=1),a._rowLineVisible&&(o-=1),0>=r||0>=o||(a._90I||(s=a._90I={}),s[e]||(s[e]=new tl),Lr(c,a.tx()+n,a.ty()+i,r,o),wr(c,t),a._view.insertBefore(c,a._79O),t.onParentAdded&&t.onParentAdded(c),s[e].add(c))}},t._76o=function(){var t=this,e=t._90I;if(e){for(var n in e)e[n].each((function(t){rc(t)}));delete t._90I}},t._77o=function(t){var e=this;if(e._90I){var n=e._90I[t];n&&(n.each((function(t){rc(t)})),delete e._90I[t])}}},_47o:function(t){t.getValue=function(t,e){return e.getValue?e.getValue(t,e,this):rr(t,e.getAccessType(),e.getName())},t.setValue=function(t,e,n){if(e.isEmptiable(t)||""!==n||(n=r),e.isNullable(t)||n!=u){var i=this,o=e.getName(t),a=e.getAccessType(t),s=e.getValueType(t);s===hn&&Ei(n)?n=X(n):s===fn&&Ei(n)?n=parseFloat(n):s===un&&Ei(n)&&(n="true"===n),i._batchEditable&&e._batchEditable&&i.isSelected(t)?i.sm().each((function(t){e.setValue?e.setValue(t,e,n,i):or(t,a,o,n)})):e.setValue?e.setValue(t,e,n,i):or(t,a,o,n)}},t.setCurrentEditor=function(t){this.endEditing(),this._currentEditor=t,this.redraw()},t.isEditing=function(t,e){var n=this,i=n._currentEditor;if(!i)return!1;if(e){var r=i.info;return!!r&&((r.column||r.property)===e&&r.data===t)}return!0},t.endEditing=function(t){var e=this,n=e._currentEditor;n&&(delete e._currentEditor,n.commitValue&&n.commitValue(n.info,t),e.redraw(),e.getDataModel().endTransaction())},t.beginEditing=function(t){this.endEditing();var e=this,n=t.column||t.property;if(n.beginEditing)n.beginEditing(t);else{var i=t.data,r=t.value,o=e.getSelectBackground(i),a=n.getEnumValues(i),s=n.getSlider(i),c=n.getColorPicker(i);if(s){var l=xs(wv.Slider,s);return l.setValue(r),l.getView().onblur=function(){e.endEditing()},l.isInstant()&&(l.onValueChanged=function(){e.setValue(i,n,l.getValue())}),void bv(l,t)}if(c||n.getValueType(i)===dn){var d=xs(wv.ColorPicker,c);return d.setValue(r),d.onClosed=function(){e.endEditing()},d.isInstant()&&(d.onValueChanged=function(t,r){e.setValue(i,n,r)}),bv(d,t),void d.open()}if(a){if(wv.ComboBox){var h=new wv.ComboBox;h.setValue(r),h.setValues(a),h.setLabels(n.getEnumLabels(i)),h.setIcons(n.getEnumIcons(i)),h.setEditable(n.isEnumEditable(i)),h.setStrict(n.isEnumStrict(i)),h.setMaxHeight(n.getEnumMaxHeight(i)),h.setDropDownWidth(n.getEnumDropDownWidth(i)),h.onClosed=function(){e.endEditing()},bv(h,t),h.open()}else xv(pe,t,o,a,n);return}var f=n.getValueType(i);if(f===un||Oi(r))return void e.setValue(i,n,!r);if(n.getItemEditor(i)){var g=As(n.getItemEditor(i)),p=new g(i,n,e,t),v=p.getView();return v._17Q=p,p.setValue(r),br(v),bv(v,t),void(p.editBeginning&&p.editBeginning())}xv("input",t,o,u,n)}}},_44o:function(t){t.init=function(t){var e=this,n=e.th=new Lv(t),i=e._view=vr(1,e);e.tv=e._tableView=t,wr(i,n.getView()),wr(i,t.getView()),n.mp((function(t){t.property===Bt&&e.iv()})),e.iv()},t.getTableView=function(){return this.tv},t.getTableHeader=function(){return this.th},t.getDataModel=function(){return this.tv.dm()},t.getColumnModel=function(){return this.tv.getColumnModel()},t.setColumns=function(t){this.tv.setColumns(t)},t.addColumns=function(t){this.tv.addColumns(t)},t.endEditing=function(){this.tv.endEditing()},t.validateImpl=function(){var t=this,e=t.th,n=Mr(e),i={x:0,y:0,width:t.getWidth(),height:n};Lr(e,i),i.y=n,i.height=O(0,t.getHeight()-n),Lr(t.tv,i)}},ms_vs:function(t){t._41o=function(){return this._29I.height<this._59I},t._43o=function(){var t=this;t._41o()&&(t._58I||(J((function(){t._94O()}),fs),t.iv()),t._58I=new Date)},t._94O=function(){var t=this;if(t._58I){var e=new Date;e.getTime()-t._58I.getTime()>=fs?(delete t._58I,t.iv()):J((function(){t._94O()}),fs)}},t._93I=function(){var t=this,e=t._27I;if(t._58I||!t._autoHideScrollBar){e||wr(t._79O,e=t._27I=yr());var n=t._29I,i=n.height,r=t._59I,o=t.getScrollBarSize(),a=n.width-o-2,s=i*(-t.ty()/r),c=i*(i/r),l=e.style;r>i?(gs>c&&(s=s+c/2-gs/2,0>s&&(s=0),s+gs>i&&(s=i-gs),c=gs),l.visibility=de,l.background=t.getScrollBarColor(),l.borderRadius=o/2+Ct,Lr(e,a,s,o,c)):l.visibility=ue}else e&&(e.style.visibility=ue)}},ms_hs:function(t){t._40o=function(){return this._29I.width<this._91I},t._42o=function(){var t=this;t._40o()&&(t._95O||(J((function(){t._94I()}),fs),t.iv()),t._95O=new Date)},t._94I=function(){var t=this;if(t._95O){var e=new Date;e.getTime()-t._95O.getTime()>=fs?(delete t._95O,t.iv()):J((function(){t._94I()}),fs)}},t._92I=function(){var t=this,e=t._28I;if(t._95O||!t._autoHideScrollBar){e||wr(t._79O,e=t._28I=yr());var n=t._29I,i=n.width,r=t._91I,o=t.getScrollBarSize(),a=n.height-o-2,s=i*(-t.tx()/r),c=i*(i/r),l=e.style;r>i?(gs>c&&(s=s+c/2-gs/2,0>s&&(s=0),s+gs>i&&(s=i-gs),c=gs),l.visibility=de,l.background=t.getScrollBarColor(),l.borderRadius=o/2+Ct,Lr(e,s,a,c,o)):l.visibility=ue}else e&&(e.style.visibility=ue)}}}),Is(Ft,_i(16,16,[{type:Pt,rect:[1,1,14,14],background:_a},{type:Dt,rect:[1,1,14,14],width:1,color:pa},{type:kt,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Is(jt,_i(16,16,{type:Dt,rect:[1,1,14,14],width:1,color:pa})),Is(Ut,_i(16,16,[{type:Ot,rect:[2,2,12,12],borderWidth:1,borderColor:pa,background:"#FFF"},{type:Ot,rect:[4,4,8,8],background:_a}])),Is(Zt,_i(16,16,{type:Ot,rect:[2,2,12,12],borderWidth:1,borderColor:pa})),Wa._15Q=function(t){t._29I=ci,t._59I=0,t._91I=0,t._5o=function(t){var e=this;e._30I=new tl,e._rows=new tl,e._rowMap={},e._31I=0,e._14I=0,e._view=vr(1,e),e._canvas=_r(e._view),wr(e._view,e._79O=yr()),e.dm(t||new rl)},t.getCheckIcon=function(t){var e=this.sm(),n=e.co(t);return e.sg()?Ss(n?Ut:Zt):Ss(n?Ft:jt)},t.checkData=function(t){var e=this.sm(),n=e.co(t);e.sg()&&n||(this._32o=1,n?e.rs(t):e.as(t),delete this._32o)},t.getDataAt=function(t){t.target&&(t=this.lp(t));var e=D(t.y/this._rowHeight),n=this._rows;return 0>e||e>=n.size()?u:n.get(e)},t.onDataDoubleClicked=function(){},t.onDataClicked=function(){},t.adjustTranslateX=function(){return 0},t.adjustTranslateY=function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:M(t)},t.onPropertyChanged=function(t){var e=this,n=t.property;vv[n]?e.ivm():pv[n]||e.redraw(),n===Fe?e._42o():n===je&&e._43o()},t.getLabel=function(t){return t.toLabel()},t.getLabelFont=function(){return this._labelFont},t.getLabelColor=function(t){var e=this;if(e.isCheckMode()){if(e._focusData===t)return e._labelSelectColor}else if(e.isSelected(t))return e._labelSelectColor;return e._labelColor},t.getStartRowIndex=function(){return this._31I},t.getEndRowIndex=function(){return this._14I},t.getRowDatas=function(){return this._rows},t.getRowIndex=function(t){return this._rowMap[t._id]},t.getRowSize=function(){return this._rows.size()},t.getViewRect=function(){return Os(this._29I)},t.isVisible=function(t){return!this._visibleFunc||this._visibleFunc(t)},t.getCurrentSortFunc=function(){return this._sortFunc},t.setDataModel=function(t){var e=this,n=e._dataModel,i=e._selectionModel;n!==t&&(n&&(n.umm(e.handleDataModelChange,e),n.umd(e.handleDataPropertyChange,e),n.umh(e.handleHierarchyChange,e),i||n.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.mm(e.handleDataModelChange,e),t.md(e.handleDataPropertyChange,e),t.mh(e.handleHierarchyChange,e),i?i._21I(t):t.sm().ms(e.handleSelectionChange,e),e.fp("dataModel",n,t))},t.validateModel=function(){var t=this;t._rows.clear(),t._rowMap={},t.buildChildren(t._dataModel._roots);var e=t._rows=t._rows.toList(t.isVisible,t),n=0,i=t.getCurrentSortFunc(),r=e.size();for(i&&e.sort(i);r>n;n++)t._rowMap[e.get(n)._id]=n},t.buildChildren=function(t){var e=this;t.each((function(t){e._rows.add(t),e.buildChildren(t._children)}))},t.handleDataModelChange=function(){this.ivm()},t.handleDataPropertyChange=function(t){"parent"===t.property?this.ivm():this.invalidateData(t.data)},t.handleHierarchyChange=function(){this.ivm()},t.handleSelectionChange=function(t){t.datas.each(this.invalidateData,this),this.onSelectionChanged(t)},t.onSelectionChanged=function(t){var e=this,n=e.sm();!e.isAutoMakeVisible()||1!==n.size()||"set"!==t.kind&&"append"!==t.kind||e._32o||e.makeVisible(n.ld())},t.handleBackgroundClick=function(t){Ls(t)&&!this.isCheckMode()&&this.sm().cs()},t.makeVisible=function(t){t&&(this._23I=t,this.iv())},t.scrollToIndex=function(t){var e=this,n=e._29I,i=n.height,r=e._rowHeight,o=r*t;t>=0&&t<e._rows.size()&&i>0&&(o+r>n.y+i?e.ty(-o+i-r):o<n.y&&e.ty(-o))},t.autoScroll=function(t,e){var n=this,i=n._rowHeight,r=i,o=i/4,a=n._29I,s=n.lp(t),c={x:n.tx(),y:n.ty()};return i>0&&a&&(s.x-a.x<r?n.translate(o,0):a.x+a.width-s.x<r&&n.translate(-o,0),s.y-a.y<r?n.translate(0,o):a.y+a.height-s.y<r&&n.translate(0,-o)),c.x=n.tx()-c.x,c.y=n.ty()-c.y,e&&(e.x+=c.x,e.y+=c.y),c},t.getTopRowOrderSelection=function(){var t=this.sm().getTopSelection(),e={},n=new tl;return t.each((function(t){e[t._id]=t})),this._rows.each((function(t){e[t._id]&&n.add(t)})),n},t.getRowOrderSelection=function(){var t=new tl;return this._rows.each((function(e){this.isSelected(e)&&t.add(e)}),this),t},t.ivm=function(){this.invalidateModel()},t.invalidateModel=function(){var t=this;t._96I||(t._96I=1,t._32I=1,delete t._24I),t.iv()},t.redraw=function(){var t=this;t._32I||(t._32I=1,delete t._24I,t.iv())},t.invalidateData=function(t){var e=this;ot?e.redraw():e._32I||(e._24I||(e._24I={}),e._24I[t._id]=t,e.iv())},t.getFocusData=function(){return this._focusData},t.setFocusDataById=function(t){this.setFocusData(this.dm().getDataById(t))},t.setFocusData=function(t){var e=this,n=e._focusData;n!==t&&(e._focusData=t,e.fp("focusData",n,t),n&&e.invalidateData(n),t&&(e.invalidateData(t),e.isAutoMakeVisible()&&e.makeVisible(t)))},t.drawRowBackground=function(t,e,n,i,r,o,a){var s=this,c=s.isCheckMode();(e===s._focusData&&c||n&&!c)&&Po(t,i,r,o,a,s.getSelectBackground(e))},t.drawData=function(t,e,n){var i=this,r=i._rowHeight,o=r*n,a=i._29I,s=a.x,c=a.width;t.save(),t.beginPath(),t.rect(s,o,c,r),t.clip(),i._87o(i.drawRow(t,e,i.isSelected(e),s,o,c,r),n,s,o,c,r),t.restore(),i._rowLineVisible&&Po(t,s,o+r-1,c,1,i._rowLineColor)},t._12I=function(t){var e=this,n=e._31I,i=e._29I,r=i.x,o=i.y,a=i.width,s=i.height;for(t.beginPath(),t.rect(r,o,a,s),t.clip(),t.clearRect(r,o,a,s),e._76o(),e._93db(t);n<e._14I;n++)e.drawData(t,e._rows.get(n),n);e._92db(t)},t._13I=function(t){for(var e,n=this,i=n._rowHeight,r=n._29I,o=r.x,a=r.width,s=n._31I,c=n._30I;s<n._14I;s++)e=n._rows.get(s),n._24I[e._id]&&c.add({data:e,index:s});c.isEmpty()||(t.beginPath(),c.each((function(e){t.rect(o,e.index*i,a,i)})),t.clip(),c.each((function(e){t.clearRect(o,e.index*i,a,i)})),c.each((function(t){n._77o(t.index)})),n._93db(t),c.each((function(e){n.drawData(t,e.data,e.index)})),n._92db(t),c.clear())},t.preValidateModel=function(){this.endEditing&&this.endEditing()},t.validateImpl=function(){var t=this,e=t._canvas,n=t.getWidth(),i=t.getHeight(),r=t._rowHeight,o=t._32I;(n!==e.clientWidth||i!==e.clientHeight)&&(xr(e,n,i),o=1);var a=W&&!q;t._96I&&!a&&(t.preValidateModel(),t.validateModel());var s=t._29I,c={x:-t.tx(),y:-t.ty(),width:n,height:i},l=t._rows.size(),d=Pr(e),h=t._23I;o||Ji(c,s)||(o=1),t._29I=c,t._59I=l*r+t.getScrollBarSize(),t._31I=D(c.y/r),t._14I=E((c.y+c.height)/r),t._31I<0&&(t._31I=0),t._14I>l&&(t._14I=l),t._99I&&o&&t._99I(),Or(d,t.tx(),t.ty(),1),o?t._12I(d):t._24I&&t._13I(d),t._93I(),t._92I(),d.restore(),t._32I=t._24I=t._96I=u,h&&(t.scrollToIndex(t.getRowIndex(h)),delete t._23I),t.tx(t.tx()),t.ty(t.ty())}},Wa._48o=function(t){t._rootVisible=!0,t._rootData=u,t._35o=function(){this._expandMap={},this._levelMap={}},t.validateModel=function(){var t=this,e=t._rootData;t._rows.clear(),t._levelMap={},t._rowMap={},t._currentLevel=0,e?t._rootVisible?t.isVisible(e)&&t.buildData(e):t.buildChildren(e):t.buildChildren(),delete t._currentLevel},t.buildData=function(t){var e=this,n=t._id,i=e._rows;e._rowMap[n]=i.size(),i.add(t),e._levelMap[n]=e._currentLevel,e.isExpanded(t)&&(e._currentLevel++,e.buildChildren(t),e._currentLevel--)},t.buildChildren=function(t){var e=this,n=t?t._children:e._dataModel._roots,i=e.getCurrentSortFunc();i&&e.isChildrenSortable(t)?n.toList(e.isVisible,e).sort(i).each(e.buildData,e):n.each((function(t){e.isVisible(t)&&e.buildData(t)}))},t.getLevel=function(t){return this._levelMap[t._id]},t.getToggleIcon=function(t){var e=this,n=e._loader,i=e._collapseIcon;return n&&!n.isLoaded(t)?i:t.hasChildren()?e.isExpanded(t)?e._expandIcon:i:u},t.isCheckMode=function(){return this._checkMode!=u},t.isChildrenSortable=function(){return!0},t.handleDataModelChange=function(t){var e=this;t.kind===Nt?delete e._expandMap[t.data._id]:t.kind===Vt&&(e._expandMap={}),e.ivm()},t.toggle=function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},t.isExpanded=function(t){return 1===this._expandMap[t._id]},t.expand=function(t){var e=this,n=e._loader;e.isExpanded(t)||(n&&!n.isLoaded(t)&&n.load(t),e._expandMap[t._id]=1,e.ivm(),e.onExpanded(t))},t.onExpanded=function(){},t.collapse=function(t){var e=this;e.isExpanded(t)&&(delete e._expandMap[t._id],e.ivm(),e.onCollapsed(t))},t.onCollapsed=function(){},t.expandAll=function(t){if(t)this.expand(t),t.eachChild((function(t){this.expandAll(t)}),this);else{var e=this;e._dataModel.each((function(t){t.hasChildren()&&(e._expandMap[t._id]=1)})),e.ivm()}},t.collapseAll=function(){this._expandMap={},this.ivm()},t.makeVisible=function(t){if(t){var e=this;if(!e._rootData||t.isDescendantOf(e._rootData)){for(var n=t._parent;n;)e.expand(n),n=n._parent;e._23I=t,e.iv()}}},t.checkData=function(t){var e,n=this,i=n._checkMode,r=n.sm(),o=r.co(t);if(!r.sg()||!o){if(n._32o=1,i===ut)o?r.rs(t):r.as(t);else if(i===Ge)e=new tl(t),e.addAll(t._children);else if("descendant"===i)e=new tl,_v(t,e);else if("all"===i&&(e=new tl,_v(t,e),!o))for(var a=t._parent;a;)e.add(a),a=a._parent;e&&(o?r.rs(e):r.as(e)),delete n._32o}},t._97I=function(t,e,n,i,r,o,a){var s=this,c=s._indent,l=s._levelMap[e._id],u=s.getIconWidth(e),d=Ss(s.getToggleIcon(e));d?(i+=c*l,Cs(t,d,i+c/2,r+a/2,e,s),i+=c):i+=c*(l+1),s._checkMode&&(Cs(t,s.getCheckIcon(e),i+c/2,r+a/2,e,s),i+=c),s.drawIcon(t,e,i,r,u,a),s.drawLabel(t,e,i+u,r,a)}},Wa._14Q=function(t){t.getIcon=function(t){return t.getIcon()},t.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},t.drawIcon=function(t,e,n,i,r,o){if(r){var a=this,s=a.getBodyColor(e),c=Ss(a.getIcon(e),s);c&&(o-=a.isRowLineVisible()?1:0,Ms(t,c,nn,n,i,r,o,e,a,s),Vo(t,a.getBorderColor(e),n,i,r,o))}},t.drawLabel=function(t,e,n,i,r){var o=this;Ns(t,o.getLabel(e),o.getLabelFont(e),o.getLabelColor(e),n,i,0,r)}},Wa._50o=function(t){t._98I=function(){var t=this,e=t._39o=new rl;t._60I=new tl,e.mm(t._17o,t),e.md(t._18o,t),e.mh(t._19o,t)},t.setColumns=function(t){this._39o.clear(),this.addColumns(t)},t.addColumns=function(t){var e=this._39o;t.forEach((function(t){if(!(t instanceof Tv)){var n=As(t.className);t=xs(n||Tv,t)}e.add(t)}))},t.onColumnClicked=function(){},t.onCheckColumnClicked=function(){},t._3Q=function(t){for(var e,n=0,i=this._60I,r=i.size();r>n;n++)if(e=i.get(n),e.column===t)return e;return u},t.getColumnAt=function(t){var e=this._4Q(t);return e?e.column:u},t._4Q=function(t){for(var e=this,n=t.target?e.lp(t).x:t.x,i=e._60I,r=0;r<i.size();r++){var o=i.get(r),a=o.startX;if(n>=a&&n<a+o.column.getWidth())return o}return u},t.getToolTip=function(t){var e=this,n=e.getDataAt(t),i=e.getColumnAt(t);return n&&i?i.getToolTip(n,e):u},t.adjustTranslateX=function(t){var e=this.getWidth()-this._91I;return e>t&&(t=e),t>0?0:M(t)},t._99I=function(){var t=this,e=t._29I,n=t._60I;n.clear(),t._91I=0,t._39o._roots.each((function(i){if(i.isVisible()){var r=t._91I+i.getWidth();t._91I<=e.x+e.width&&r>=e.x&&n.add({column:i,startX:t._91I}),t._91I=r}})),t._91I+=t.getScrollBarSize()},t.drawData=function(t,e,n){var i=this,r=i._rowHeight,o=r*n,a=i.isSelected(e),s=i._29I,c=s.x,l=s.width;i.drawRowBackground(t,e,a,c,o,l,r),i._60I.each((function(s){var c=s.column,l=s.startX,u=c.getWidth();u>0&&!i.isEditing(e,c)&&(t.save(),t.beginPath(),t.rect(l,o,u,r),t.clip(),i._87o(i.drawCell(t,e,a,c,l,o,u,r),n,l,o,u,r),i._columnLineVisible&&Po(t,l+u-1,o,1,r,i._columnLineColor),t.restore())})),i._rowLineVisible&&Po(t,c,o+r-1,l,1,i._rowLineColor)},t.drawCell=function(t,e,n,i,r,o,a,s){var c=this;if(i.drawCell)return i.drawCell(t,e,n,i,r,o,a,s,c);var l=c.getValue(e,i);mv(t,l,i,c.getLabelFont(e,i,l),c.getLabelColor(e,i,l),r,o,a,s,e,c)},t.getColumnModel=function(){return this._39o},t._17o=function(){this.redraw()},t._18o=function(t){var e=this;t.data===e._sortColumn&&gv[t.property]?e.ivm():(e._42o(),e.redraw())},t._19o=function(){this.redraw()},t.getCurrentSortFunc=function(){var t=this,e=t._sortColumn;if(e&&e.isSortable()){var n=e.getSortFunc(),i=Ne===e.getSortOrder()?1:-1;return n||(n=Ps),function(r,o){return n.call(t,t.getValue(r,e),t.getValue(o,e),r,o)*i}}return t._sortFunc},t.isCellEditable=function(t,e,n){return!(!e.isEditable()||!this.isEditable())&&(!e.isCellEditable||e.isCellEditable(t,e,n,this))},t._37O=function(t,e){if(Ls(e))for(var n=this,i=n.lp(e),r=n._60I,o=n._rowHeight,a=n._29I,s=a.x,c=a.y,l=a.width,u=a.height,d=0;d<r.size();d++){var h=r.get(d),f=h.startX,g=h.column,p=g.getWidth();if(g!==n._31o&&g!==n._4o&&i.x>=f&&i.x<f+p&&n.isCellEditable(t,g,e)){var v={x:f,y:n.getRowIndex(t)*o,width:p,height:o},y={x:v.x+n.tx(),y:v.y+n.ty(),width:v.width,height:v.height},_=0,m=0;return v.x<s?_=v.x-s:v.x+v.width>s+l&&(_=v.x+v.width-s-l),_&&(n.tx(n.tx()-_),y.x-=_),v.y<c?m=v.y-c:v.y+o>c+u&&(m=v.y+o-c-u),m&&(n.ty(n.ty()-m),y.y-=m),void n.beginEditing({data:t,column:g,value:n.getValue(t,g),event:e,rect:v,editorRect:y,view:n})}}}},wv.BaseItemEditor=function(t,e,n,i){this._data=t,this._column=e,this._master=n,this._editInfo=i},Iv("BaseItemEditor",i,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Sv=d.Tab=function(){Yi(Sv,this)};uc("Tab",il,{ms_ac:["view","closable","disabled","visible"],_icon:u,_closable:!1,_disabled:!1,_visible:!0,setParent:ai});var Tv=d.Column=function(){Yi(Tv,this)};uc("Column",il,{_46o:1,ms_ac:["accessType","valueType",de,ke,Re,Lt,"align",dn,"sortOrder",Ae,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Ne,_sortFunc:u,_sortable:!0,_clickable:!0,setWidth:function(t){16>t&&(t=16);var e=this._width;this._width=t,this.fp(Lt,e,t)},getToolTip:function(t,e){return this.formatValue(e.getValue(t,this))}});var Cv=d.Property=function(){Yi(Cv,this)};uc("Property",il,{_46o:1,ms_ac:["accessType","valueType",ke,Re,"categoryName",dn,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:u,getToolTip:function(t,e,n){var i=this;return e?i.formatValue(n.getValue(t,i)):n.getPropertyName(i)}}),wv.AccordionView=function(){var t=this;t._20o={},t._21o=new tl,t._10o=u,t._9o=u,t._11o=u,t._view=vr(0,t),t.iv()},Iv("AccordionView",i,{ms_v:1,ms_fire:1,ms_ac:[Ee,Pe,"titleHeight",ne,ee,"titleBackground","selectWidth",ye,"orientation","separatorColor"],_expandIcon:f.accordionViewExpandIcon,_collapseIcon:f.accordionViewCollapseIcon,_titleHeight:us,_labelColor:f.accordionViewLabelColor,_labelFont:f.accordionViewLabelFont,_titleBackground:f.accordionViewTitleBackground,_selectBackground:f.accordionViewSelectBackground,_selectWidth:f.accordionViewSelectWidth,_orientation:"v",_separatorColor:f.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(t,e,n,i){var r=this,o=yr();if(r._20o[t])throw t+" already exists";o.onmousedown=ws,o.style.cursor=vn,S(o,lt?wn:_n,(function(t){ws(t)})),S(o,lt?Sn:bn,(function(e){ws(e),Ls(e)&&(r._10o===t?r.collapse():r.expand(t))})),wr(r._view,o),r._20o[t]={content:e,div:o,canvas:_r(o),icon:i},r._21o.add(t),n&&r.expand(t),r.iv()},remove:function(t){var e=this,n=e._20o[t];n&&(rc(n.div),delete e._20o[t],e._21o.remove(t),e.iv())},clear:function(){var t=this;t._21o.toArray().forEach(t.remove,t),t._20o={},t._21o.clear(),t.iv()},isExpanded:function(t){return this._10o===t},expand:function(t){var e=this;e._20o[t]&&e._10o!==t&&(e._10o=t,e.onExpanded(t),e.iv())},onExpanded:function(){},collapse:function(){var t=this;t._10o&&(t.onCollapsed(t._10o),delete t._10o,t.iv())},onCollapsed:function(){},initCanvas:function(t,e,n){xr(t,e,n);var i=Pr(t);return Or(i,0,0,1),i.clearRect(0,0,e,n),i},drawTitle:function(t,e,n,i,r){var o=this,a=Ss(r.icon),s=o.isExpanded(e),c=o._titleHeight,l=o._titleBackground,u=o._selectWidth,d=o._separatorColor,h=Ss(s?o._expandIcon:o._collapseIcon),f=u+4;Po(t,0,0,n,i,l),s&&u&&Po(t,0,0,u,i,o._selectBackground),(s||o._21o.get(o._21o.size()-1)!==e)&&Po(t,0,i-1,n,1,d||Rs(l)),a&&(Cs(t,a,f+$c(a)/2,c/2),f+=$c(a)+2),Ns(t,e,o.getLabelFont(e),o.getLabelColor(e),f,0,0,c),h&&Cs(t,h,n-$c(h)/2-4,c/2)},validateImpl:function(){var t=this,e=t._view,n=0,i=0,r=t.getWidth(),o=t.getHeight(),a=t._titleHeight,s=t._21o.size()*a,c=t._11o,l=t._9o;delete t._11o,delete t._9o,t._21o.each((function(e){var c,l,u=t._20o[e],d=u.content,h=t._10o===e;wi(t)?(Lr(u.div,n,0,a,o),c=t.initCanvas(u.canvas,a,o),Ar(c,0,o),kr(c,-F),t.drawTitle(c,e,o,a,u),c.restore(),h?(l=O(0,r-s),d&&(t._11o=d,t._9o=Vr(d),Lr(d,n+a,0,l,o)),n+=a+l):n+=a):(Lr(u.div,0,i,r,a),c=t.initCanvas(u.canvas,r,a),t.drawTitle(c,e,r,a,u),c.restore(),h?(l=O(0,o-s),d&&(t._11o=d,t._9o=Vr(d),Lr(d,0,i+a,r,l)),i+=a+l):i+=a)}));var u=t._9o;c&&c!==t._11o&&c.endEditing&&c.endEditing(),u&&u!==l&&wr(e,u),l&&l!==u&&rc(l)}}),wv.SplitView=function(t,e,n,i){var r=this,o=r._dividerDiv=yr(),a=r._60O=_r(),s=r._61O=_r(),c=a.style,l=s.style;r._view=vr(1,r),wr(r._view,o),c.msTouchAction=yn,c.pointerEvents=yn,c.cursor=vn,l.msTouchAction=yn,l.pointerEvents=yn,l.cursor=vn,t&&r.setLeftView(t),e&&r.setRightView(e),n&&r.setOrientation(n),i!=u&&r.setPosition(i),r.setStatus(zt),new Mv(r)},Iv("SplitView",i,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:f.splitViewDividerSize,_dividerBackground:f.splitViewDividerBackground,_dragOpacity:f.splitViewDragOpacity,_toggleIcon:f.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){var n=this,i=n._position;isNaN(t)||(e||(n._82O=0>t?-1:t>1?1:0),n._position=t,n.fp(Le,i,t))},getLeftView:function(){return this._leftView},setLeftView:function(t){var e=this,n=e._leftView,i=e._view;if(e._leftView!==t){if(n&&n!==e._rightView){var r=Vr(n);r.parentNode===i&&rc(r)}if(e._leftView=t,t){var o=Vr(t);o.parentNode!==i&&i.insertBefore(o,e._dividerDiv)}e.fp("leftView",n,t)}},getRightView:function(){return this._rightView},setRightView:function(t){var e=this,n=e._rightView,i=e._view;if(e._rightView!==t){if(n&&n!==e._leftView){var r=Vr(n);r.parentNode===i&&rc(r)}if(e._rightView=t,t){var o=Vr(t);o.parentNode!==i&&i.insertBefore(o,e._dividerDiv)}e.fp("rightView",n,t)}},validateImpl:function(){var t=this,e=t._draggable,n=t._position,i=t.getWidth(),r=t.getHeight(),o=t._dividerSize,a=t._dividerBackground,s=lt?18:8,c=t._dividerDiv,l=t._82O,u=t._60O,d=t._61O,h=t._toggleIcon,f=t._status,g=c.style,p=null,v=lt?20:4,y=h.comps[0];o>=s||0===o?t._coverDiv&&(rc(t._coverDiv),delete t._coverDiv):t._coverDiv||(t._coverDiv=yr(),rt&&(t._coverDiv.style.background=on),wr(c,t._coverDiv)),t._togglable?u.parentNode||(wr(c,u),wr(c,d)):(rc(u),rc(d));var _=t._coverDiv,m=t._leftView,b=t._rightView;if(wi(t)){if(o>i&&(o=i),f===zt)if(1===l)var x=A(n,i),w=O(0,i-o-x);else-1===l?(w=A(-n,i),x=O(0,i-o-w)):(x=M((i-o)*n),w=O(0,i-o-x));else"cl"===f?(x=0,w=O(0,i-o)):"cr"===f&&(w=0,x=O(0,i-o));m&&Lr(m,0,0,x,r),b&&Lr(b,x+o,0,w,r),Lr(c,x,0,o,r),t._22o=x,_&&(Lr(_,o/2-s/2,0,s,r),_.style.cursor=e?gn:""),c.style.cursor=e?gn:"";var I=c.clientHeight/2,S=c.clientWidth;xr(u,S,S),Lr(u,0,I-S-v,S,S),p=Pr(u),Or(p,0,0,1),y.rotation=-F,Kc(p,h,0,0,S,S),p.restore(),xr(d,S,S),Lr(d,0,I+v,S,S),p=Pr(d),Or(p,0,0,1),y.rotation=F,Kc(p,h,0,0,S,S),p.restore()}else{if(o>r&&(o=r),f===zt)if(1===l)var T=A(n,r),C=O(0,r-o-T);else-1===l?(C=A(-n,r),T=O(0,r-o-C)):(T=M((r-o)*n),C=O(0,r-o-T));else"cl"===f?(T=0,C=O(0,r-o)):"cr"===f&&(C=0,T=O(0,r-o));m&&Lr(m,0,0,i,T),b&&Lr(b,0,T+o,i,C),Lr(c,0,T,i,o),t._22o=T,_&&(Lr(_,0,o/2-s/2,i,s),_.style.cursor=e?pn:""),g.cursor=e?pn:"";var D=c.clientWidth/2;S=c.clientHeight;xr(u,S,S),Lr(u,D-S-v,0,S,S),p=Pr(u),Or(p,0,0,1),y.rotation=0,Kc(p,h,0,0,S,S),p.restore(),xr(d,S,S),Lr(d,D+v,0,S,S),p=Pr(d),Or(p,0,0,1),y.rotation=B,Kc(p,h,0,0,S,S),p.restore()}g.background=a}});var Mv=function(t){this.sv=t,this.addListeners()};lc(Mv,i,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(t){var e=this,n=e.sv,i=n._dividerDiv,r=n._60O,o=n._61O,a=n._status,s=t.target;if(s===r)a===zt?n.setStatus("cl"):"cr"===a&&n.setStatus(zt);else if(s===o)a===zt?n.setStatus("cr"):"cl"===a&&n.setStatus(zt);else if(qr(t)&&(s===i||s===n._coverDiv)&&(ws(t),n.isDraggable())){n.getLeftView(),n.getRightView();var c=e.maskDiv=yr();if(c.style.left=0,c.style.top=0,c.style.width=n.getWidth()+"px",c.style.height=n.getHeight()+"px",n.getView().appendChild(c),!n.isContinuousLayout()){var l=e.resizeDiv=yr();l.style.left=i.style.left,l.style.top=i.style.top,l.style.width=i.style.width,l.style.height=i.style.height,l.style.opacity=n.getDragOpacity(),l.style.background=n.getDividerBackground(),wr(e.getView(),l)}e._lastAbsPosition=n._22o,e._86o=wi(n)?Us(t).x:Us(t).y,ic(e,t)}},handleWindowTouchMove:function(t){qr(t)&&this.update(t,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(t){var e=this;e.update(t,!0),e.sv.setStatus(zt),e.maskDiv&&rc(e.maskDiv),e.resizeDiv&&rc(e.resizeDiv),e.maskDiv=e.resizeDiv=u},handle_mousedown:function(t){Ls(t)&&this.handle_touchstart(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},update:function(t,e){var n=this,i=n.sv,r=wi(i)?i.getWidth():i.getHeight(),o=i._dividerSize,a=n._lastAbsPosition-n._86o;wi(i)?(a+=Us(t).x,a>r-o&&(a=r-o),0>a&&(a=0),n.resizeDiv&&(n.resizeDiv.style.left=a+Ct)):(a+=Us(t).y,a>r-o&&(a=r-o),0>a&&(a=0),n.resizeDiv&&(n.resizeDiv.style.top=a+Ct)),e&&r!==o&&(1===i._82O?i.setPosition(a,1):-1===i._82O?i.setPosition(a-r+o,1):i.setPosition(a/(r-o),1))}}),wv.TabView=function(){var t=this,e=t._view=vr(1,t),n=t._91O=yr(1),i=t._tabModel=new rl,r=i.sm(),o=t.invalidate;t._7o=new tl,t._canvas=_r(n),wr(e,n),wr(e,t._92O=yr(1)),r.setSelectionMode(dt),r.ms(t.handleSelectionChange,t),i.mm(o,t),i.mh(o,t),i.md(o,t),t._interactor=new Dv(t),t.iv()},Iv("TabView",i,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",ne,ee,"tabHPadding","tabBackground","selectWidth",ye,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:yt,_tabHeight:us,_tabGap:f.tabViewTabGap,_labelColor:f.tabViewLabelColor,_labelFont:f.tabViewLabelFont,_tabBackground:f.tabViewTabBackground,_selectWidth:f.tabViewSelectWidth,_selectBackground:f.tabViewSelectBackground,_moveBackground:f.tabViewMoveBackground,_insertColor:f.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(t,e,n){var i,r=this._tabModel;return t instanceof Sv?(i=t,e&&i.setView(e)):(i=new Sv,i.setName(t),i.setView(e)),r.add(i),n&&r.sm().ss(i),i},getLabel:function(t){return t.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(t){this._23o=t,this.iv()},get:function(t){var e,n=this,i=n._tabModel;return Pi(t)?i._roots.get(t):Ei(t)?(i.each((function(i){t===n.getLabel(i)&&(e=i)})),e):t instanceof Sv?t:u},select:function(t){this._tabModel.sm().ss(this.get(t))},remove:function(t){var e=this;if(t=e.get(t)){var n=e._tabModel,i=n._roots.indexOf(t);e._tabModel.remove(t),e.selectByIndex(--i)}},getCurrentTab:function(){return this._8o},hideTabView:function(t,e){e.parentNode===this._92O&&(ji(e)?(e.style.display=Tt,e._tab_=t):rc(e),ts())},showTabView:function(t,e){ji(e)&&(e.style.display="block",e._tab_=t),e.parentNode!==this._92O&&(wr(this._92O,e),ts())},_24o:function(){var t,e=this,n=e._8o,i=e._9o,r=e._tabModel.sm().ld();r&&(t=Vr(r.getView())),t!==i&&(i&&(n.getView()&&n.getView().endEditing&&n.getView().endEditing(),e.hideTabView(n,i)),t&&e.showTabView(r,t)),e._8o=r,e._9o=t,n!==r&&e.onTabChanged(n,r)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(t,e){this.selectByIndex(--e)},selectByIndex:function(t){var e=this,n=e._tabModel,i=n.size();if(i&&!n.sm().ld()){t==u&&(t=0),t>=i&&(t=i-1),0>t&&(t=0);for(var r=t;r>=0;r--){var o=e.get(r);if(!o.isDisabled())return e.select(o),o}for(r=t+1;i>r;r++)if(o=e.get(r),!o.isDisabled())return e.select(o),o}},getTabWidth:function(t){var e=this.getTabHPadding(),n=4+2*e,i=Ss(t.getIcon());i&&(n+=$c(i,t)+4);var r=this.getLabel(t);return r&&(n+=Vs(this.getLabelFont(t),r).width+4),t.isClosable()&&(n+=10),n},drawTab:function(t,e,n,i,r,o,a){var s,c=this,l=c._tabPosition,u=this.getTabHPadding(),d=n+4+u,h=c._selectWidth,f=Ss(e.getIcon()),g=e.isDisabled(),p=c.getLabelColor(e),v=c.getLabelFont(e),y=c.getLabel(e),_=c._selectBackground,m=l===pt+"-vertical",b=l===vt+"-vertical";(m||b)&&(d=i+4+u),g&&(t.globalAlpha=qa),Po(t,n,i,r,o,a),e===c._8o&&h&&(l===yt?Po(t,n,i+o-h,r,h,_):l===pt?Po(t,n+r-h,i,h,o,_):l===vt?Po(t,n,i,h,o,_):m?Po(t,n+r-h,i,h,o,_):b?Po(t,n,i,h,o,_):Po(t,n,i,r,h,_));var x=r/2;if(m&&(Ar(t,x,i+o/2),kr(t,B),Ar(t,-x,-i-o/2)),f){var w=Qc(f,e),I=$c(f,e);if(m||b){var S=n+r/2,T=d+w/2;Ar(t,S,T),kr(t,F),Ar(t,-S,-T),Cs(t,f,n+r/2,d+w/2,e,c),Ar(t,S,T),kr(t,-F),Ar(t,-S,-T),d+=w+4}else Cs(t,f,d+I/2,i+o/2,e,c),d+=I+4}return m||b?(Ar(t,r/2,d+r/2),kr(t,F),Ar(t,-r/2,-d-r/2),Ns(t,y,v,p,n,d,o,r),Ar(t,r/2,d+r/2),kr(t,-F),Ar(t,-r/2,-d-r/2)):Ns(t,y,v,p,d,i,r,o),m&&(Ar(t,x,i+o/2),kr(t,-B),Ar(t,-x,-i-o/2)),e.isClosable()&&(s=b?{x:n+r-12,y:i+o-12,width:12,height:12}:{x:n+r-12,y:i+2,width:12,height:12},this.drawCloseIcon(e,t,p,s)),g&&(t.globalAlpha=1),s},drawCloseIcon:function(t,e,n,i){var r=i.x,o=i.y;e.strokeStyle=n,e.lineWidth=1,e.beginPath(),e.moveTo(r+2,o+8),e.lineTo(r+8,o+2),e.moveTo(r+8,o+8),e.lineTo(r+2,o+2),e.stroke()},getTabAt:function(t){var e=this._interactor._8Q(t);return e?e.tab:null},validateImpl:function(){var t=this;t._24o();var e,n=t._canvas,i=t._tabPosition,r=t._91O,o=t._92O,a=t._tabModel,s=t.getWidth(),c=t.getHeight(),l=t._tabHeight,u=t._7o,d=t._tabGap,h=i===yt,f=i===pt,g=i===vt,p=i===pt+"-vertical",v=i===vt+"-vertical",y=t._23o,_=0;if((f||g)&&a._roots.each((function(e){_=O(t.getTabWidth(e),_)})),h?(Lr(r,0,0,s,l),e={x:0,y:l,width:s,height:O(0,c-l)}):f?(Lr(r,0,0,_,c),e={x:_,y:0,width:O(0,s-_),height:c}):g?(Lr(r,s-_,0,_,c),e={x:0,y:0,width:O(0,s-_),height:c}):p?(Lr(r,0,0,l,c),e={x:l,y:0,width:O(0,s-l),height:c}):v?(Lr(r,s-l,0,l,c),e={x:0,y:0,width:O(0,s-l),height:c}):(Lr(r,0,c-l,s,l),e={x:0,y:0,width:s,height:O(0,c-l)}),Lr(o,e),p||v){t._9o&&(e.x=0,Lr(t._8o.getView(),e)),xr(n,l,c);var m=Pr(n),b=0;if(Or(m,0,t.ty(),1),m.clearRect(0,0,l,c),u.clear(),a._roots.each((function(e){if(e.isVisible()){var n,i=t.getTabWidth(e);y&&y.tab===e||(n=t.drawTab(m,e,0,b,l,i,t._tabBackground)),u.add({_75o:n,tab:e,startY:b,endY:b+i,height:i}),b+=i+d}})),t._23Q=O(0,b-d),y){var x=y.position;t.drawTab(m,y.tab,0,y.startY,l,y.height,t._moveBackground),Po(m,0,x,l,1,t._insertColor)}if(m.restore(),t._selectionChanged){t._selectionChanged=!1;for(var w=t.ty(),I=0;I<u.size();I++){var S=u.get(I);if(S.tab===t._8o){if(S.endY+w<0){t.ty(-S.startY);break}if(S.startY+w>c){t.ty(c-S.endY);break}}}}t.ty(t.ty())}else if(f||g){t._9o&&(e.x=0,Lr(t._8o.getView(),e)),xr(n,_,c);m=Pr(n),b=0;if(Or(m,0,t.ty(),1),m.clearRect(0,0,_,c),u.clear(),a._roots.each((function(e){var n;e.isVisible()&&(y&&y.tab===e||(n=t.drawTab(m,e,0,b,_,l,t._tabBackground)),u.add({_75o:n,tab:e,startY:b,endY:b+l,height:l}),b+=l+d)})),t._23Q=O(0,b-d),y){x=y.position;t.drawTab(m,y.tab,0,y.startY,_,y.height,t._moveBackground),Po(m,0,x,_,1,t._insertColor)}if(m.restore(),t._selectionChanged){t._selectionChanged=!1;for(w=t.ty(),I=0;I<u.size();I++){S=u.get(I);if(S.tab===t._8o){if(S.endY+w<0){t.ty(-S.startY);break}if(S.startY+w>c){t.ty(c-S.endY);break}}}}t.ty(t.ty())}else{t._9o&&(e.y=0,Lr(t._8o.getView(),e)),xr(n,s,l);m=Pr(n);var T=0;if(Or(m,t.tx(),0,1),m.clearRect(0,0,s,l),u.clear(),a._roots.each((function(e){if(e.isVisible()){var n,i=t.getTabWidth(e);y&&y.tab===e||(n=t.drawTab(m,e,T,0,i,l,t._tabBackground)),u.add({_75o:n,tab:e,startX:T,endX:T+i,width:i}),T+=i+d}})),t._64I=O(0,T-d),y){x=y.position;t.drawTab(m,y.tab,y.startX,0,y.width,l,t._moveBackground),sr(m,t._insertColor,x,0,l)}if(m.restore(),t._selectionChanged){t._selectionChanged=!1;var C=t.tx();for(I=0;I<u.size();I++){S=u.get(I);if(S.tab===t._8o){if(S.endX+C<0){t.tx(-S.startX);break}if(S.startX+C>s){t.tx(s-S.endX);break}}}}t.tx(t.tx())}var M=[],D=o.children;for(I=0;I<D.length;I++){var E=D[I],P=E._tab_;P&&!a.contains(P)&&M.push(E)}M.forEach((function(t){o.removeChild(t)}))}});var Dv=function(t){this.tv=t,this.addListeners()};lc(Dv,i,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){ws(t);var n=this.tv,i=n._tabPosition;!n._40o()||i!==yt&&i!==_t||n.tx(this.tv.tx()+e),!n._41o()||i!==pt&&i!==vt&&i!==pt+"-vertical"&&i!==vt+"-vertical"||n.ty(this.tv.ty()+e)},_8Q:function(t){var e,n,i=this.tv,r=i._tabPosition,o=i._7o;if(r===yt||r===_t){var a=i.lp(t).x;for(e=0;e<o.size();e++)if(n=o.get(e),n.startX<=a&&a<=n.endX)return n}else if(r===pt||r===vt||r===pt+"-vertical"||r===vt+"-vertical"){var s=i.lp(t).y;for(e=0;e<o.size();e++)if(n=o.get(e),n.startY<=s&&s<=n.endY)return n}return u},isClickable:function(t){var e=this.tv,n=e._tabPosition,i=this._73o=this._8Q(t);return!(!e._40o()||n!==yt&&n!==_t)||(!(!e._41o()||n!==pt&&n!==vt&&n!==pt+"-vertical"&&n!==vt+"-vertical")||i&&(!i.tab.isDisabled()||e.isMovable()))},handle_mousemove:function(t){var e=this;jr?e._74o=e._8Q(t):e.getView().style.cursor=e.isClickable(t)?vn:""},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,n=e.tv,i=n._tabPosition;ws(t),Ls(t)&&e.isClickable(t)&&(i===yt||i===_t?(e.x=Us(t).x,e.lp=n.lp(t),e.tx=n.tx()):(e.y=Us(t).y,e.lp=n.lp(t),e.ty=n.ty()),ic(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e,n=this,i=n.tv,r=i._tabPosition,o=n._73o;if(r===yt||r===_t){if(e=Us(t).x-n.x,!n._25o&&!n.moving&&k(e)>2&&(i._40o()&&!Hs(t)?n._25o=1:o&&i.isMovable()&&(n.moving=1)),n._25o)i.tx(n.tx+e);else if(n.moving){var a=n.lp.x+e,s=i._tabGap/2;i._7o.each((function(t){var n=t.endX,r=a-t.startX<n-a;a>=t.startX&&n>=a&&i._7Q({tab:o.tab,startX:o.startX+e,width:o.width,front:r,insertTab:t.tab,position:r?O(0,t.startX-s):A(i._64I,n+s)})}))}}else if(e=Us(t).y-n.y,!n._25o&&!n.moving&&k(e)>2&&(i._41o()&&!Hs(t)?n._25o=1:o&&i.isMovable()&&(n.moving=1)),n._25o)i.ty(n.ty+e);else if(n.moving){var c=n.lp.y+e;s=i._tabGap/2;i._7o.each((function(t){var n=t.endY,r=c-t.startY<n-c;c>=t.startY&&n>=c&&i._7Q({tab:o.tab,startY:o.startY+e,height:o.height,front:r,insertTab:t.tab,position:r?O(0,t.startY-s):A(i._23Q,n+s)})}))}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var t=this,e=t.tv,n=e._tabPosition,i=e.getTabModel(),r=i._roots,o=t._73o;if(t.moving){var a=e._23o;if(a&&a.insertTab!==a.tab){var s=a.tab,c=r.remove(s),l=r.indexOf(a.insertTab);l>=0&&(a.front||l++,l<=r.size()&&(r.add(s,l),i._38I(s,c,l)))}e._7Q(u),delete t.moving}else if(!t._25o&&o){s=o.tab;var d=t._74o;if(!d||d.tab===s)if(!s.isDisabled()&&Ys(o._75o,t.lp)){var h=function(){var t=r.indexOf(s);i.remove(s),e.onTabClosed(s,t)};e.onTabClosing(s,h)&&h()}else s.isDisabled()||e._8o===s||i.sm().ss(s)}t._25o=t._73o=t._74o=n===yt||n===_t?t.x=t.lp=t.tx=u:t.y=t.lp=t.ty=u}}),wv.PropertyView=function(t){var e=this;e._view=vr(1,e),e._canvas=_r(e._view),wr(e._view,e._79O=yr()),e._rows=new tl,e._28o=new tl,e._26o={},e._26Q={};var n=e._propertyModel=new rl,i=e.ivm;n.mm(i,e),n.md(i,e),n.mh(i,e),e.dm(t||new rl),new Ev(e)},Iv("PropertyView",i,{ms_ac:[ne,ie,ee,ke,Re,"categorizable",we,Ae,De,Ee,Pe,be,xe,me,"selectRowIndex",ye,"background",Ie,Me,Te,Ce,Se],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:ci,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:ss,_background:f.propertyViewBackground,_expandIcon:f.propertyViewExpandIcon,_collapseIcon:f.propertyViewCollapseIcon,_scrollBarColor:ds,_scrollBarSize:hs,_autoHideScrollBar:Qa,_selectBackground:f.propertyViewSelectBackground,_rowHeight:cs,_rowLineVisible:f.propertyViewRowLineVisible,_rowLineColor:f.propertyViewRowLineColor,_10I:.5,_columnLineVisible:f.propertyViewColumnLineVisible,_columnLineColor:f.propertyViewColumnLineColor,_labelColor:f.propertyViewLabelColor,_labelSelectColor:f.propertyViewLabelSelectColor,_labelFont:f.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(t){0>t&&(t=0),t>1&&(t=1);var e=this,n=e._10I;e._10I=t,e.fp("columnPosition",n,t)},getPropertyName:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t,e,n){return n===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(t,e){return e===this._selectRowIndex?this._labelSelectColor:t.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var e=this.getHeight()-this._59I;return e>t&&(t=e),t>0?0:M(t)},isExpanded:function(t){if(!t)return!0;var e=this._26o[t];return e?e.isExpanded:!(!1===this._26Q[t])},toggle:function(t){var e=this;e.isExpanded(t)?e.collapse(t):e.expand(t)},expandAll:function(){for(var t in this.validate(),this._26o)this.expand(t)},expand:function(t){if(t&&t!==Tt){var e=this,n=e._26o[t];n&&!n.isExpanded&&(n.isExpanded=!0,e.onExpanded(t),e.ivm())}},onExpanded:function(){},collapseAll:function(){for(var t in this.validate(),this._26o)this.collapse(t)},collapse:function(t){if(t&&t!==Tt){var e=this,n=e._26o[t];n&&n.isExpanded&&(n.isExpanded=!1,e.onCollapsed(t),e.ivm())}},onCollapsed:function(){},getCategoryName:function(t){if(!this.isCategorizable())return Tt;var e=t.getCategoryName();return e||Tt},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(t){var e=this,n=e._dataModel;n!==t&&(n&&(n.umd(e.handlePropertyChange,e),e._selectionModel||n.sm().ums(e.handleSelectionChange,e)),e._dataModel=t,t.md(e.handlePropertyChange,e),e._selectionModel?e._selectionModel._21I(t):t.sm().ms(e.handleSelectionChange,e),e.fp(He,n,t))},isVisible:function(t){return!this._visibleFunc||this._visibleFunc(t)},onPropertyChanged:function(t){var e=this,n=t.property;yv[n]?e.ivm():e.iv(),n===je&&e._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:el},handlePropertyChange:function(t){this._27o===t.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var t=this;t._96I||(t.setSelectRowIndex(-1),t._96I=1,t.iv())},redraw:function(){this.iv()},validateModel:function(){var t=this,e=t._rows,n=t._28o,i={},o=new tl,a=t._27o;for(var s in t.updateCurrentData(),a!==t._27o&&t.endEditing(),e.clear(),n.clear(),t.getRawProperties().each((function(e){if(t.isVisible(e)){o.add(e);var a=t.getCategoryName(e);i[a]||(n.add(a,a===Tt?0:r),i[a]={isExpanded:t.isExpanded(a),properties:new tl})}})),t._sortFunc&&o.sort(t._sortFunc),t._26o)t._26Q[s]=t.isExpanded(s);t._26o=i,n.each((function(n){n!==Tt&&e.add(n);var r=i[n];r.isExpanded&&o.each((function(i){t.getCategoryName(i)===n&&(r.properties.add(i),e.add({property:i,data:t._27o}))}),t)}))},validateImpl:function(){var t=this;t._76o(),t._96I&&(t.validateModel(),delete t._96I);var e=t._canvas,n=t.getWidth(),i=t.getHeight(),r=-t.ty(),o=t._rowHeight,a=t._indent,s=n-a,c=t._rows,l=c.size(),d=t._9I=a+s*t._10I,h=t._59I=l*o;xr(e,n,i),t._29I={x:0,y:r,width:n,height:i},t._31I=D(r/o),t._14I=E((r+i)/o),t._31I<0&&(t._31I=0),t._14I>l&&(t._14I=l);var f=Pr(e),g=t._background;Or(f,0,-r,1),f.beginPath(),f.rect(0,r,n,i),f.clip(),f.clearRect(0,r,n,i),t._93db(f),g&&Po(f,0,0,a,h,g);for(var p=t._31I;p<t._14I;p++){var v=c.get(p);r=o*p;if(Ei(v))g&&Po(f,a,r,s,o,g),m=Ss(t.isExpanded(v)?t._expandIcon:t._collapseIcon),m&&Ms(f,m,nn,0,r,a,o),f.save(),f.beginPath(),f.rect(a,r,s,o),f.clip(),t.drawCategoryName(f,v,p,a,r,s,o),f.restore();else{var y=v.property,_=v.data,m=Ss(y.getIcon()),b=t._selectRowIndex===p?t.getSelectBackground():u;if(m&&Ms(f,m,nn,0,r,a,o),b&&Po(f,a,r,s,o,b),f.save(),f.beginPath(),f.rect(a,r,d-a,o),f.clip(),t.drawPropertyName(f,y,p,a,r,d-a,o),f.restore(),!t.isEditing(_,y)){var x=d+1,w=n-d-1;f.save(),f.beginPath(),f.rect(x,r,w,o),f.clip(),t._87o(t.drawPropertyValue(f,y,t.getValue(_,y),p,x,r,w,o,_),p,x,r,w,o),f.restore()}}t._rowLineVisible&&Po(f,a,r+o-1,s,1,t._rowLineColor)}t._columnLineVisible&&(Po(f,d,0,1,h,t._columnLineColor),Po(f,n-1,0,1,h)),t._92db(f),t._93I(),f.restore(),t.ty(t.ty())},drawCategoryName:function(t,e,n,i,r,o,a){Ns(t,e,this.getCategoryFont(e),this.getCategoryColor(e),i,r,o,a)},drawPropertyName:function(t,e,n,i,r,o,a){return e.drawPropertyName?void e.drawPropertyName(t,e,n,i,r,o,a,this):void Ns(t,this.getPropertyName(e),this.getPropertyFont(e,n),this.getPropertyColor(e,n),i,r,o,a)},drawPropertyValue:function(t,e,n,i,r,o,a,s,c){return e.drawPropertyValue?e.drawPropertyValue(t,e,n,i,r,o,a,s,c,this):void mv(t,n,e,this.getLabelFont(e,n,i),this.getLabelColor(e,n,i),r,o,a,s,c,this)},isPropertyEditable:function(t){return t.isEditable()&&this.isEditable()},setProperties:function(t){this._propertyModel.clear(),this.addProperties(t)},addProperties:function(t){if(t){var e=this._propertyModel;t.forEach((function(t){if(!(t instanceof Cv)){var n=As(t.className);t=xs(n||Cv,t)}e.add(t)}))}},getRowIndexAt:function(t){var e=this,n=D(e.lp(t).y/e._rowHeight);return n>=0&&n<e._rows.size()?n:-1},getPropertyAt:function(t){var e=this,n=e.getRowIndexAt(t);return n>=0?e._rows.get(n).property:u},getToolTip:function(t){var e=this,n=e.getPropertyAt(t),i=e._27o;return n&&i?n.getToolTip(i,e._9I<e.lp(t).x,e):u}});var Ev=function(t){this.pv=t,this.addListeners()};lc(Ev,i,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(t){this.getView().style.cursor=t},clear:function(){var t=this;t._62O=t.cp=t.ty=t.p=u,t.setCursor(ut)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,n=e.pv;ws(t),n.setFocus(t)&&(Ls(t)?(e.cp=Us(t),e.ty=n.ty(),e.p=n.getColumnPosition(),e.handle_touchmove(t)):n.setSelectRowIndex(n.getRowIndexAt(t)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this;if(e.cp&&!e._62O){var n=e.pv,i=n.lp(t),r=i.x,o=i.y,a=n._indent,s=n.getRowIndexAt(t),c=n._9I;if(s>=0){var l=n._rowHeight,u=l*s,d=n._rows.get(s),h=d.property;if(Ei(d))(Ss(n.isExpanded(d)?n._expandIcon:n._collapseIcon)&&r>=0&&a>=r&&o>=u&&u+l>=o||Fs(t))&&n.toggle(d);else if(r>c&&n.isPropertyEditable(h,t)){var f={x:c+1,y:u,width:n.getWidth()-c-1,height:l},g={x:f.x+n.tx(),y:f.y+n.ty(),width:f.width,height:f.height},p=0,v=n._29I;f.y<v.y?p=f.y-v.y:f.y+l>v.y+v.height&&(p=f.y+l-v.y-v.height),p&&(n.ty(n.ty()-p),g.y-=p),n.beginEditing({data:d.data,property:h,value:n.getValue(d.data,h),event:t,rect:f,editorRect:g,view:n})}}n.setSelectRowIndex(s)}e.clear()},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,n=e.pv,i=e.ty,r=e.cp,o=Us(t),a=e._62O;if("p"===a)n.setTranslateY(i+o.y-r.y);else if("c"===a){var s=n.getWidth()-n._indent;if(s>16){var c=e.p-(r.x-o.x)/s,l=16/s;l>c&&(c=l),c>1-l&&(c=1-l),n.setColumnPosition(c)}}else"s"===a&&n.setTranslateY(i+(r.y-o.y)*n._59I/n._29I.height)},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!jr&&Ls(t)){var e=this,n=e.pv,i=k(n.lp(t).x-n._9I)<=(lt?8:3);e.cp?e._62O||(i?(e._62O="c",ic(e)):k(Us(t).y-e.cp.y)>=2&&(e._62O=e.isV(t)?"s":"p",ic(e))):(i?e.setCursor(gn):e.setCursor(ut),e.isV(t)&&n._43o())}},isV:function(t){var e=this.pv,n=e._29I;return e._41o()&&n.x+n.width-e.lp(t).x<ps},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.handleScroll(t,-t.detail)},handleScroll:function(t,e){var n=this.pv;ws(t),n.endEditing(),n.translate(0,e*n.getRowHeight())},handle_keydown:function(t){var e=this.pv,n=e._rows.size(),i=e._selectRowIndex+(oo(t)?-1:1);(oo(t)||so(t))&&(0>i&&(i=0),i>=n&&(i=n-1),e.setSelectRowIndex(i))}}),wv.ListView=function(t){this._5o(t),new Pv(this)},Iv("ListView",i,{ms_ac:[ne,ie,ee,Ie,we,Me,Te,Ae,De,be,xe,me,_e,ye],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:ss,_rowHeight:cs,_rowLineVisible:f.listViewRowLineVisible,_rowLineColor:f.listViewRowLineColor,_scrollBarColor:ds,_scrollBarSize:hs,_autoMakeVisible:$a,_autoHideScrollBar:Qa,_selectBackground:f.listViewSelectBackground,_labelColor:f.listViewLabelColor,_labelSelectColor:f.listViewLabelSelectColor,_labelFont:f.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){var e=this,n=e._checkMode;e._checkMode=t,e.fp(Oe,n,t)},drawRow:function(t,e,n,i,r,o,a){var s=this,c=0,l=s._indent,u=s.getIconWidth(e);s.drawRowBackground(t,e,n,i,r,o,a),s._checkMode&&(Cs(t,Ss(s.getCheckIcon(e)),c+l/2,r+a/2,e,s),c+=l),s.drawIcon(t,e,c,r,u,a),s.drawLabel(t,e,c+u,r,a)}});var Pv=function(t){this.list=t,this._lastSelectDataTime=vi(),this.addListeners()};lc(Pv,i,{ms_listener:1,getView:function(){return this.list._view},clear:function(t){var e=this,n=e.list;t&&"d"===e._62O&&!e.dragCancel&&n.handleDragAndDrop(t,"end"),n.draggingData&&(n.draggingData=null,n.redraw()),e.dragCancel=e._62O=e._isV=e._isH=e.cp=e.tx=e.ty=u},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,n=e.list;if(ws(t),n.setFocus(t)){var i=n.getDataAt(t);e.cp=Us(t),e.tx=n.tx(),e.ty=n.ty(),Ls(t)?i&&n.handleDragAndDrop&&!e.isV(t)&&!e.isH(t)&&(n.draggingData=i,n.redraw(),n.handleDragAndDrop(t,"prepare")):(i&&e._33o(t,i),e.clear(t))}},handleWindowMouseUp:function(t){this.clear(t)},handleWindowTouchEnd:function(t){this.clear(t)},handle_mouseup:function(t){this.handle_touchend(t)},handle_touchend:function(t){var e=this,n=e.list;if(!e._isV&&!e._isH&&e.cp&&!e._62O){var i=n.getDataAt(t);i?(n.isCheckMode()?e._34o(t,i):e._33o(t,i),Fs(t)?n.onDataDoubleClicked(i,t):n.onDataClicked(i,t)):n.handleBackgroundClick(t)}e.clear(t)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,n=e.list,i=e._62O,r=e.tx,o=e.ty,a=e.cp,s=Us(t),c=n._29I;"p"===i?n.setTranslate(r+s.x-a.x,o+s.y-a.y):"v"===i?n.ty(o+(a.y-s.y)*n._59I/c.height):"h"===i?n.tx(r+(a.x-s.x)*n._91I/c.width):"d"===i&&(e.dragCancel||n.handleDragAndDrop(t,"between"))},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(t){if(!jr&&Ls(t)){var e=this,n=e.list;if(e._isV=e.isV(t),e._isH=e.isH(t),e.cp){if(!e._62O){if(Ws(Us(t),e.cp)<2)return;e._isV?e._62O="v":e._isH?e._62O="h":n.draggingData&&!this.dragCancel?(e._62O="d",n.handleDragAndDrop(t,"begin")):e._62O="p",e._62O&&"d"!==e._62O&&n.draggingData&&(n.draggingData=null,n.redraw()),ic(e)}}else e._isV&&n._43o(),e._isH&&n._42o()}},isV:function(t){var e=this.list,n=e._29I;return e._41o()&&n.x+n.width-e.lp(t).x<ps},isH:function(t){var e=this.list,n=e._29I;return e._40o()&&n.y+n.height-e.lp(t).y<ps},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40,t.wheelDelta!==t.wheelDeltaX)},handle_DOMMouseScroll:function(t){this.handleScroll(t,-t.detail,1)},handleScroll:function(t,e,n){var i=this.list;ws(t),i.endEditing&&i.endEditing(),n&&i._41o()?i.translate(0,e*i.getRowHeight()):i._40o()&&i.translate(10*e,0)},handle_keydown:function(t){if(!f.isInput(t.target)){var e,n=this.list,i=n.sm(),r=n._rows,o=r.size();if(Yr(t))n.selectAll();else if($r(t))n.handleDelete&&n.handleDelete(t);else if(uo(t))"d"!==this._62O||this.dragCancel||(n.handleDragAndDrop(t,"cancel"),this.dragCancel=!0);else if(co(t))n.isCheckMode()&&(e=n.getFocusData(),e&&n.checkData(e));else if(oo(t)||so(t)){var a=n.isCheckMode();if(e=a?n.getFocusData():i.ld()){var s=n.getRowIndex(e);s>=0&&(oo(t)?0!==s&&(e=r.get(s-1),a?n.setFocusData(e):i.ss(e)):s!==o-1&&(e=r.get(s+1),a?n.setFocusData(e):i.ss(e)))}else o>0&&(e=r.get(0),a?n.setFocusData(e):i.ss(e))}}},_34o:function(t,e){var n=this.list,i=n.lp(t).x;return i>=0&&i<=n._indent?void n.checkData(e):void n.setFocusData(e)},_33o:function(t,e){var n=this.list,i=n.sm(),r=i.ld();if(Hs(t))n.isSelected(e)?i.rs(e):i.as(e);else if(js(t))if(r)for(var o=n.getRowIndex(r),a=n.getRowIndex(e);o!==a;)o+=a>o?1:-1,i.as(n._rows.get(o));else i.ss(e);else if(Ls(t)){var s=vi();if(i.contains(e)){var c=s-this._lastSelectDataTime;n.handleDataDoubleSelect&&c>500&&1500>c&&n.handleDataDoubleSelect(t,e)}i.ss(e),this._lastSelectDataTime=s}else i.contains(e)||i.ss(e)}}),wv.TreeView=function(t){var e=this;e._35o(),e._5o(t),new Ov(e)},Iv("TreeView",i,{ms_ac:[ne,ie,ee,"rootVisible",Oe,"rootData",Ae,De,be,xe,me,we,Ie,Me,Te,Ee,Pe,_e,ye,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:u,_indent:ss,_rowHeight:cs,_rowLineVisible:f.treeViewRowLineVisible,_rowLineColor:f.treeViewRowLineColor,_scrollBarColor:ds,_scrollBarSize:hs,_autoHideScrollBar:Qa,_expandIcon:f.treeViewExpandIcon,_collapseIcon:f.treeViewCollapseIcon,_autoMakeVisible:$a,_selectBackground:f.treeViewSelectBackground,_labelColor:f.treeViewLabelColor,_labelSelectColor:f.treeViewLabelSelectColor,_labelFont:f.treeViewLabelFont,_doubleClickToToggle:f.treeViewDoubleClickToToggle,drawRow:function(t,e,n,i,r,o,a){var s=this;s.drawRowBackground(t,e,n,i,r,o,a),s._97I(t,e,n,0,r,o,a)},isOnToggleIcon:function(t){var e=this.getDataAt(t);if(e){var n=this.getIndent(),i=this.lp(t).x;if(Ss(this.getToggleIcon(e))){var r=n*this.getLevel(e);if(i>=r&&r+n>=i)return!0}}return!1}});var Ov=function t(e){Yi(t,this,[e])};lc(Ov,Pv,{toggle:function(t,e,n,i){var r=this.list,o=r.lp(t).x;if(Ss(r.getToggleIcon(e))){var a=n*i;if(o>=a&&a+n>=o)return r.toggle(e),!0}return!(!r.isDoubleClickToToggle()||!Fs(t))&&(r.toggle(e),!0)},_34o:function(t,e){var n=this.list,i=n.lp(t).x,r=n._levelMap[e._id],o=n._indent,a=o*(r+1);return i>=a&&a+o>=i?void n.checkData(e):void(this.toggle(t,e,o,r)||n.setFocusData(e))},_33o:function(t,e){var n=this,i=n.list;if(!n.toggle(t,e,i._indent,i.getLevel(e)))if(js(t)){var r=i.sm();if(r.size()>0){for(var o=i._rows,a=null,s=0,c=o.size();c>s;s++)if(i.isSelected(o.get(s))){a=s;break}var l=null;for(s=o.size()-1;s>=0;s--)if(i.isSelected(o.get(s))){l=s;break}var u,d,h=i.getRowIndex(e);for(a>h?(u=h-1,d=a):h>l?(u=l,d=h):(u=a,d=l);u!==d;)u++,r.as(i._rows.get(u))}else r.ss(e)}else Ov.superClass._33o.call(n,t,e)},handle_keydown:function(t){if(ro(t)||ao(t)){var e=this.list,n=e._rows,i=e.isCheckMode(),r=e.sm(),o=i?e.getFocusData():r.ld();o?o.hasChildren()&&(ro(t)?e.collapse(o):e.expand(o)):n.size()>0&&(o=n.get(0),i?e.setFocusData(o):r.ss(o))}else Ov.superClass.handle_keydown.call(this,t)}});var Av=wv.TableView=function(t){this._98I(),this._5o(t),new kv(this)};Iv("TableView",i,{ms_ac:[ne,ie,ee,"sortMode",ke,Re,Ie,Me,Te,Ce,Se,"sortColumn",Ae,De,be,xe,me,_e,ye],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:ze,_editable:!0,_batchEditable:!1,_rowHeight:cs,_rowLineVisible:f.tableViewRowLineVisible,_rowLineColor:f.tableViewRowLineColor,_columnLineVisible:f.tableViewColumnLineVisible,_columnLineColor:f.tableViewColumnLineColor,_scrollBarColor:ds,_scrollBarSize:hs,_autoHideScrollBar:Qa,_autoMakeVisible:$a,_selectBackground:f.tableViewSelectBackground,_labelColor:f.tableViewLabelColor,_labelSelectColor:f.tableViewLabelSelectColor,_labelFont:f.tableViewLabelFont,getCheckColumn:function(){var t=this;if(!t._31o){var e=t._31o=new Tv;e.setEditable(!0),e.setWidth(40),e.getValue=t.getCheckColumValue,e.drawCell=t.drawCheckColumnCell}return t._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var e=this,n=e._39o,i=e.getCheckColumn();t!==e.isCheckMode()&&(t?n.add(i,0):n.remove(i),e.fp(Oe,!t,t))},getCheckColumValue:function(t,e,n){return n.isSelected(t)},drawCheckColumnCell:function(t,e,n,i,r,o,a,s,c){Cs(t,c.getCheckIcon(e),r+a/2,o+s/2,e,c)}});var kv=function t(e){Yi(t,this,[e])};lc(kv,Pv,{_34o:function(t,e){var n=this.list,i=n._31o;if(n.isCellEditable(e,i,t)){var r=n._3Q(i),o=n.lp(t).x;if(r&&o>=r.startX&&o<r.startX+i.getWidth())return void n.checkData(e)}n._37O(e,t),n.setFocusData(e)},_33o:function(t,e){this.list._37O(e,t),kv.superClass._33o.apply(this,arguments)}});var Rv=wv.TreeTableView=function(t){var e=this,n=e._4o=new Tv;e._35o(),e._98I(),e._5o(t),n.setDisplayName("Name"),n.setEditable(!0),n.setWidth(180),n.drawCell=zv,n.getValue=Nv,e._39o.add(n),new Vv(e)},zv=function(t,e,n,i,r,o,a,s,c){c._97I(t,e,n,r,o,a,s)},Nv=function(t,e,n){return n.getLabel(t)};Iv("TreeTableView",i,{ms_ac:[ne,ie,ee,"sortMode",ke,Re,we,Oe,"rootData","rootVisible",Ae,De,"sortColumn",Ee,Pe,be,xe,me,_e,Te,Ie,Me,Ce,Se,ye,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:ze,_checkMode:u,_editable:!0,_batchEditable:!1,_indent:ss,_rowHeight:cs,_rowLineVisible:f.treeTableViewRowLineVisible,_rowLineColor:f.treeTableViewRowLineColor,_columnLineVisible:f.treeTableViewColumnLineVisible,_columnLineColor:f.treeTableViewColumnLineColor,_expandIcon:f.treeTableViewExpandIcon,_collapseIcon:f.treeTableViewCollapseIcon,_scrollBarColor:ds,_scrollBarSize:hs,_autoHideScrollBar:Qa,_autoMakeVisible:$a,_selectBackground:f.treeTableViewSelectBackground,_labelColor:f.treeTableViewLabelColor,_labelSelectColor:f.treeTableViewLabelSelectColor,_labelFont:f.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Vv=function t(e){Yi(t,this,[e])};lc(Vv,Pv,{_34o:function(t,e){var n=this.list,i=n._4o,r=n._3Q(i),o=n.lp(t).x;if(r){var a=n._indent,s=r.startX+a*n.getLevel(e);if(Ss(n.getToggleIcon(e))&&o>=s&&s+a>=o)return void n.toggle(e);if(n.isCellEditable(e,i)&&(s+=a,o>=s&&s+a>=o))return void n.checkData(e)}n._37O(e,t),n.setFocusData(e)},_33o:function(t,e){var n=this.list,i=n.lp(t).x;if(Ss(n.getToggleIcon(e))){var r=n._3Q(n._4o);if(r){var o=n._indent,a=r.startX+o*n.getLevel(e);if(i>=a&&a+o>=i)return void n.toggle(e)}}n._37O(e,t),Vv.superClass._33o.apply(this,arguments)}});var Lv=wv.TableHeader=function(t){var e=this,n=e._view=vr(1,e),i=e._39o=t.getColumnModel(),r=e.iv;e.tv=e._tableView=t,e._60I=new tl,e._canvas=_r(n),n.style.background=f.tableHeaderBackground||"",n.style.height=ls+Ct,i.mm(r,e),i.md(r,e),i.mh(r,e),t.mp((function(t){fv[t.property]&&e.iv()}),e),new Bv(e),e.iv()};Iv("TableHeader",i,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",ne,ee,we,"moveBackground","insertColor",Ce,Se,"resizable","movable"],_checkIcon:jt,_movable:!0,_resizable:!0,_labelColor:f.tableHeaderLabelColor,_labelFont:f.tableHeaderLabelFont,_columnLineColor:f.tableHeaderColumnLineColor,_columnLineVisible:f.tableHeaderColumnLineVisible,_sortDescIcon:f.tableHeaderSortDescIcon,_sortAscIcon:f.tableHeaderSortAscIcon,_moveBackground:f.tableHeaderMoveBackground,_insertColor:f.tableHeaderInsertColor,_indent:ss,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(t){return t.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t){return t.getColor()||this._labelColor},getLabelAlign:function(t){return t._align},onPropertyChanged:function(){this.iv()},_5Q:function(t){this._61I=t,this.iv()},getLogicalPoint:function(t){return ec(t,this._canvas,this.tv.tx())},validateImpl:function(){var t=this,e=t._canvas,n=t.getWidth(),i=t.getHeight(),r=t.tv,o=t._60I,a=t._61I,s=-r.tx(),c=0;(n!==e.clientWidth||i!==e.clientHeight)&&xr(e,n,i),o.clear(),t._39o._roots.each((function(t){if(t.isVisible()){var e=c+t.getWidth();s+n>=c&&e>=s&&o.add({column:t,startX:c}),c=e}}));var l=Pr(e);if(Or(l,-s,0,1),l.beginPath(),l.rect(s,0,n,i),l.clip(),l.clearRect(s,0,n,i),o.each((function(e){var n=e.column,r=e.startX,o=n.getWidth();o>0&&(l.save(),l.beginPath(),l.rect(r,0,o,i),l.clip(),a&&a.column===n||t.drawColumn(l,n,r,0,o,i),t._columnLineVisible&&Po(l,r+o-1,0,1,i,t._columnLineColor),l.restore())})),a){var u=a.column,d=(c=a.startX,a.position),h=u.getWidth();l.save(),l.beginPath(),l.rect(c,0,h,i),l.clip(),l.fillStyle=t._moveBackground,l.fill(),t.drawColumn(l,u,c,0,h,i),l.restore(),sr(l,t._insertColor,d,0,i)}l.restore()},_6Q:function(t){var e=this.tv;return e._31o===t&&e.sm().getSelectionMode()===ht},drawColumn:function(t,e,n,i,r,o){var a=this,s=a.tv,c=Ss(e.getIcon()),l=a.getLabelAlign(e);if(a._6Q(e)){var u=Ss(a._checkIcon);Cs(t,u,n+r/2,i+o/2,e,a)}else{var d=a.getLabel(e),h=a.getLabelFont(e),f=a.getLabelColor(e),g=Vs(h,d).width,p=c?a._indent:0;l===pt?(c&&Ms(t,c,nn,n,i,p,o),Ns(t,d,h,f,n+p,i,r,o,pt)):l===vt?(c&&Ms(t,c,nn,n+r-g-p,i,p,o),Ns(t,d,h,f,n,i,r,o,vt)):(c&&Ms(t,c,nn,n+(r-g-p)/2,i,p,o),Ns(t,d,h,f,n+(r-g+p)/2,i,0,o,pt))}if(e.isSortable()&&s.getSortColumn()===e&&(c=Ss(e.getSortOrder()===Ne?a._sortAscIcon:a._sortDescIcon))){var v=$c(c,e)/2+2;Cs(t,c,l===vt?n+v:n+r-v,i+o/2,e,s)}}});var Bv=function(t){var e=this;e.th=t,e.tv=t._tableView,e.addListeners()};lc(Bv,i,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(t){this.getView().style.cursor=t},handle_mousemove:function(t){if(!jr){var e=this;delete e._29o,e.setCursor(ut);for(var n=e.th,i=n._60I,r=n.lp(t).x,o=i.size()-1;o>=0;o--){var a=i.get(o),s=a.column,c=a.startX+s.getWidth();if(n.isResizable()&&k(c-r)<=(lt?10:3))return e._29o=a,void e.setCursor(gn);r>a.startX&&c>r&&(e._29o=a),(s.isClickable()||s.isSortable()||n.isMovable()||e.tv.getCheckColumn&&s===e.tv.getCheckColumn())&&r>a.startX&&c>r&&e.setCursor(vn)}}},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(t){var e=this;ws(t),e.tv.endEditing(),e.handle_mousemove(t),e._29o&&(e.x=Us(t).x,e.lx=e.th.lp(t).x,e.w=e._29o.column.getWidth(),ic(e,t))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,n=e.th,i=e.getView().style.cursor,r=e._29o,o=Us(t).x-e.x;if(e.resizing||e.moving||(i===gn?e.resizing=1:n.isMovable()&&i===vn&&k(o)>2&&(e.moving=1)),e.resizing)r.column.setWidth(e.w+o);else if(e.moving){var a=e.lx+o;n._60I.each((function(t){var e=t.startX,i=e+t.column.getWidth();if(a>=e&&i>=a){var s={column:r.column,startX:r.startX+o,front:i-a>a-e,insertColumn:t.column};s.position=s.front?e:i,n._5Q(s)}}))}},_16Q:function(t,e){var n=this,i=n.tv,r=n.th,o=r._checkIcon;if(r._6Q(t)){var a=Ss(o),s=n.lx,c=t.getWidth(),l=$c(a,t);if(s>=e+c/2-l&&e+c/2+l>=s){r.setCheckIcon(o===Ft?jt:Ft);var u=i.sm(),d=i._rows;return o===Ft?u.rs(d):u.ss(d),i.onCheckColumnClicked(t),!0}}return!1},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,n=e.tv,i=e.th,r=e._29o;if(e.moving){var o=i._61I;if(o&&o.insertColumn!==o.column){var a=o.column,s=n.getColumnModel()._roots,c=s.remove(a),l=s.indexOf(o.insertColumn);l>=0&&(o.front||l++,l<=s.size()&&(s.add(a,l),n.getColumnModel()._38I(a,c,l)))}i._5Q(u),delete e.moving}else if(!e.resizing&&r){a=r.column;var d=i.lp(t).x,h=r.startX,f=!0;if(i.onColumnClicked){var g=i.onColumnClicked(a,t,h);!1===g&&(f=!1)}if(f&&d>=h&&d<=h+a.getWidth()&&!e._16Q(a,h)){if(a.isSortable()){var p=n.getSortMode(),v=a.getSortOrder();p===ze?n.getSortColumn()===a?(v===Ve&&n.setSortColumn(u),a.setSortOrder(v===Ne?Ve:Ne)):n.setSortColumn(a):"bistate"===p&&(n.getSortColumn()===a?a.setSortOrder(v===Ne?Ve:Ne):n.setSortColumn(a))}n.onColumnClicked(a,t,h)}}e._29o=e.resizing=e.x=e.lx=e.w=u}}),wv.TablePane=function(t){this.init(new Av(t))},Iv("TablePane",i,{ms_v:1,_44o:1}),wv.TreeTablePane=function(t){this.init(new Rv(t))},Iv("TreeTablePane",i,{ms_v:1,_44o:1}),wv.Toolbar=function(t){var e=this,n=e._view=vr(1,e),i=n.style;i.background=f.toolbarBackground||"",i.height=us+Ct,e._canvas=_r(n),e._30o=new tl,e._90I=new tl,e.setItems(t||[]),n.handleGroupSelectedChanged=function(t){if(t.isSelected()){var n=t.getGroupId();null!=n&&e._items.forEach((function(e){var i=e.element;i&&i!==t&&i.setSelected&&i.getGroupId&&i.getGroupId()===n&&i.setSelected(!1)}))}},new Gv(e)},Iv("Toolbar",i,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Rt,ne,ee,ie,ye,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:f.toolbarLabelColor,_labelSelectColor:f.toolbarLabelSelectColor,_labelFont:f.toolbarLabelFont,_selectBackground:f.toolbarSelectBackground,_itemGap:f.toolbarItemGap,_separatorColor:f.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(t){var e=this.getItemInfoAt(t);return e?e.item.toolTip:u},getLabelColor:function(t){return t&&t.selected&&t.type!==Ft&&t.type!==Ht?this._labelSelectColor:this._labelColor},onPropertyChanged:function(t){this.iv(),t.property===Rt&&this._items.forEach((function(t){pr(t)}))},redraw:function(){this.iv()},addItem:function(t,e){var n=this._items;e==u?n.push(t):n.splice(e,0,t),this.fp(Rt,u,n)},removeItem:function(t){if(t)for(var e=this._items,n=0;n<e.length;n++)t===e[n]&&(e.splice(n,1),this.fp(Rt,u,e))},removeItemById:function(t){if(t!=u)for(var e=this._items,n=0;n<e.length;n++)if(t===e[n].id){var i=e.splice(n,1)[0];return this.fp(Rt,u,e),i}},getItemById:function(t){if(t!=u)for(var e=this._items,n=0;n<e.length;n++){var i=e[n];if(t===i.id)return i}},setItemVisible:function(t,e){var n=this.getItemById(t);n&&(n.visible=e)},getItemInfos:function(){return this._30o},getItemInfoAt:function(t){var e=this,n=0,i=e._30o,r=e.lp(t),o=r.x,a=r.y;if(a>=0&&a<=e.getHeight())for(;n<i.size();n++){var s=i.get(n);if(s.startX<=o&&o<=s.endX)return s}return u},drawItem:function(t,e,n,i,r){if(!1===e.visible)return 0;if(ki(e.visible)&&!e.visible())return 0;var o=this,a=e.disabled;a&&(t.globalAlpha=qa);var s=o.drawItemImpl(t,e,n,i,r),c=o._itemGap;return a&&(t.globalAlpha=1),this._currentItem!==e||"separator"===e||!0===e.separator||e.unfocusable||Vo(t,o._separatorColor,n-c/2,0,s+c,i),s},drawItemImpl:function(t,e,n,i,r){var o=this,a=o._view,s=o._itemGap,c=i/2,l=e.type,d=e.element,h=e.label;Ei(d)&&(h=d,d=u);var f,g=o.getLabelFont(e),p=o.getLabelColor(e),v=e.selected,y=Ss(e.icon),_=$c(y,e),m=0,b=_+(h?Vs(g,h).width:0);if("separator"===e||!0===e.separator)return sr(t,o._separatorColor,n,i/4,c),1;if(d){y&&Cs(t,y,n+_/2,c,e,o),Ns(t,h,g,p,n+_,0,0,i);var x=Vr(d);r||o._90I.add(x),x.parentNode!==a&&wr(a,x),d.iv&&d.iv(),d.validate&&d.validate();var w=x.getBoundingClientRect(),I=w.width,S=x.style;return br(x),S.left=o.tx()+n+b+Ct,S.top=(i-w.height)/2+Ct,b+I}return l===Ht?f=Ss(v?Ut:Zt):l===Ft&&(f=Ss(v?Ft:jt)),f?(m=$c(f,e),Cs(t,f,n+m/2,c,e,o),n+=m,b+=m):v&&Po(t,n-s/2,0,b+s,i,o.getSelectBackground(e)),y&&Cs(t,y,n+_/2,c,e,o),Ns(t,h,g,p,n+_,0,0,i),b},validateImpl:function(){var t=this,e=t._canvas,n=t.getWidth(),i=t.getHeight(),r=t._30o,o=t._items;xr(e,n,i);var a=Pr(e),s=t._itemGap,c=s/2;Or(a,t.tx(),0,1),a.clearRect(0,0,n,i);var l=t._90I;t._90I=new tl,r.clear(),o.forEach((function(e){var n=t.drawItem(a,e,c,i);r.add({item:e,startX:c,endX:c+n,width:n}),n&&(c+=n+s)})),l.each((function(e){t._90I.contains(e)||rc(e)}));var u=t._64I;t._64I=O(0,c),a.restore(),t._stickToRight?(t._65O=0,a=Pr(e),c=n-t._64I+s,Or(a,0,0,1),a.clearRect(0,0,n,i),r.clear(),o.forEach((function(e){var n=t.drawItem(a,e,c,i,!0);r.add({item:e,startX:c,endX:c+n,width:n}),n&&(c+=n+s)})),a.restore()):t.tx(t.tx()),u!==t._64I&&t.onSumWidthChanged(u,t._64I)},onSumWidthChanged:function(){},handleClick:function(t,e){var n=this,i=t.type,r=t.action,o=t.groupId,a=t.selected;t.disabled||(o!=u?a||(t.selected=!0,this._items.forEach((function(e){e.groupId===o&&t!==e&&(e.selected=!1)})),r&&t.action(t,n,e)):i===Ft||"toggle"===i?(t.selected=!a,r&&t.action(t,n,e)):r&&t.action(t,n,e)),ts(),n.iv()}});var Gv=function(t){this.tb=t,this.addListeners()};lc(Gv,i,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(t){this.handleScroll(t,t.wheelDelta/40*10)},handle_DOMMouseScroll:function(t){this.handleScroll(t,10*-t.detail)},handleScroll:function(t,e){ws(t);var n=this.tb;n.isScrollable()&&!n._stickToRight&&(n.tx(n.tx()+e),Fr())},handle_mousemove:function(t){var e=this;jr||e.setItem(t)},handle_mouseout:function(t){var e=this;t.target===e.getView()?e.tb.setCurrentItem(u):e.handle_mousemove(t)},handle_mousedown:function(t){this.handle_mousemove(t),this.handle_touchstart(t)},handle_touchstart:function(t){var e=this,n=e.tb,i=t.target;Ls(t)&&(i===e.getView()||i===n._canvas)&&(ws(t),n.setFocus(t)&&(this.setItem(t,!0),(n.isScrollable()||e.info&&!e.info.item.disabled)&&(e.x=Us(t).x,e.tx=n.tx(),ic(e,t))))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(t){var e=this,n=e.tb;if(!n._stickToRight){var i=Us(t).x-e.x;!e._25o&&k(i)>2&&n.isScrollable()&&(e._25o=1),e._25o&&n.tx(e.tx+i)}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(t){var e=this,n=e.tb,i=e.info,r=e.tb.getItemInfoAt(t);if(!e._25o&&i){var o=i.item;r&&r.item===o&&n.handleClick(o,t)}e._25o=e.x=e.tx=u,e.setItem()},setItem:function(t,e){var n=this,i=n.tb,r=n.info=t?i.getItemInfoAt(t):u,o=r?r.item:u;i.setCurrentItem(o),e&&o&&ki(o.onDown)&&o.onDown(t)}}),wv.BorderPane=function(){this._view=vr(1,this),this.iv()},Iv("BorderPane",i,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(t,e){this._12o("leftView",t),e!=u&&this.setLeftWidth(e)},getRightView:function(){return this._rightView},setRightView:function(t,e){this._12o("rightView",t),e!=u&&this.setRightWidth(e)},getTopView:function(){return this._topView},setTopView:function(t,e){this._12o("topView",t),e!=u&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(t,e){this._12o("bottomView",t),e!=u&&this.setBottomHeight(e)},getCenterView:function(){return this._centerView},setCenterView:function(t){this._12o("centerView",t)},_12o:function(t,e){var n=this,i="_"+t,r=n._view,o=n[i];o!==e&&(o&&(o.getView?rc(o.getView()):rc(o)),n[i]=e,e&&(e.getView?wr(r,e.getView(),1):wr(r,e,1)),n.fp(t,o,e))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var t=this,e=t._topView,n=t._bottomView,i=t._leftView,r=t._rightView,o=t._centerView,a=t.getWidth(),s=t.getHeight(),c=0,l=0,d=a,h=s,f=0,g=0,p=0,v=0;e&&(f=t._topHeight==u?Mr(e):t._topHeight,l=f),n&&(g=t._bottomHeight==u?Mr(n):t._bottomHeight,h=s-g),i&&(p=t._leftWidth==u?Cr(i):t._leftWidth,c=p),r&&(v=t._rightWidth==u?Cr(r):t._rightWidth,d=a-v);var y=O(0,d-c),_=O(0,h-l);e&&Lr(e,0,0,a,f),n&&Lr(n,0,h,a,g),i&&Lr(i,0,l,p,_),r&&Lr(r,d,l,v,_),o&&Lr(o,c,l,y,_)}})}}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object)}).call(this,n("9edd"))},d77f:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},d9cf:function(t,e,n){},db0a:function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").filter,o=n("ef4c"),a=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod;c("filter",(function(t){var e=r(a(this),t,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),i=0,c=e.length,l=new(s(n))(c);while(c>i)l[i]=e[i++];return l}))},db23:function(t,e,n){function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=i=function(t){return typeof t}:t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}n("f3dd"),n("0a51"),n("9b11"),n("a133"),n("e18c"),n("96db"),n("af86"),t.exports=i},dbb3:function(t,e,n){"use strict";var i=n("1c8b"),r=n("5dfd").filter,o=n("1ea7"),a=n("ff9c"),s=o("filter"),c=a("filter");i({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},de6c:function(t,e,n){"use strict";var i=n("1c8b"),r=n("efe2"),o=n("3553"),a=n("9f67"),s=r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));i({target:"Date",proto:!0,forced:s},{toJSON:function(t){var e=o(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},e026:function(t,e){var n=1/0,i=Math.abs,r=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,c=function(t,e,c){var l,u,d,h=new Array(c),f=8*c-e-1,g=(1<<f)-1,p=g>>1,v=23===e?r(2,-24)-r(2,-77):0,y=t<0||0===t&&1/t<0?1:0,_=0;for(t=i(t),t!=t||t===n?(u=t!=t?1:0,l=g):(l=o(a(t)/s),t*(d=r(2,-l))<1&&(l--,d*=2),t+=l+p>=1?v/d:v*r(2,1-p),t*d>=2&&(l++,d/=2),l+p>=g?(u=0,l=g):l+p>=1?(u=(t*d-1)*r(2,e),l+=p):(u=t*r(2,p-1)*r(2,e),l=0));e>=8;h[_++]=255&u,u/=256,e-=8);for(l=l<<e|u,f+=e;f>0;h[_++]=255&l,l/=256,f-=8);return h[--_]|=128*y,h},l=function(t,e){var i,o=t.length,a=8*o-e-1,s=(1<<a)-1,c=s>>1,l=a-7,u=o-1,d=t[u--],h=127&d;for(d>>=7;l>0;h=256*h+t[u],u--,l-=8);for(i=h&(1<<-l)-1,h>>=-l,l+=e;l>0;i=256*i+t[u],u--,l-=8);if(0===h)h=1-c;else{if(h===s)return i?NaN:d?-n:n;i+=r(2,e),h-=c}return(d?-1:1)*i*r(2,h-e)};t.exports={pack:c,unpack:l}},e1d9:function(t,e,n){var i=n("2118");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},e62b:function(t,e,n){"use strict";var i=n("e349"),r=n("3553"),o=n("69c5"),a=n("98a9"),s=n("d88d"),c=n("1bbd"),l=n("b60f");t.exports=function(t){var e,n,u,d,h,f,g=r(t),p="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,_=void 0!==y,m=l(g),b=0;if(_&&(y=i(y,v>2?arguments[2]:void 0,2)),void 0==m||p==Array&&a(m))for(e=s(g.length),n=new p(e);e>b;b++)f=_?y(g[b],b):g[b],c(n,b,f);else for(d=m.call(g),h=d.next,n=new p;!(u=h.call(d)).done;b++)f=_?o(d,y,[u.value,b],!0):u.value,c(n,b,f);return n.length=b,n}},e671:function(t,e,n){"use strict";var i=n("5a9e"),r=n("d88d"),o=n("7aeb"),a=n("3553"),s=n("efe2"),c=i.aTypedArray,l=i.exportTypedArrayMethod,u=s((function(){new Int8Array(1).set({})}));l("set",(function(t){c(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=a(t),s=r(i.length),l=0;if(s+e>n)throw RangeError("Wrong length");while(l<s)this[e+l]=i[l++]}),u)},ea69:function(t,e,n){"use strict";var i=n("1c8b"),r=n("e1d6"),o=n("3da3"),a=n("d88d"),s=n("3553"),c=n("1ca1"),l=n("1bbd"),u=n("1ea7"),d=n("ff9c"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h||!f},{splice:function(t,e){var n,i,u,d,h,f,_=s(this),m=a(_.length),b=r(t,m),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=m-b):(n=x-2,i=p(g(o(e),0),m-b)),m+n-i>v)throw TypeError(y);for(u=c(_,i),d=0;d<i;d++)h=b+d,h in _&&l(u,d,_[h]);if(u.length=i,n<i){for(d=b;d<m-i;d++)h=d+i,f=d+n,h in _?_[f]=_[h]:delete _[f];for(d=m;d>m-i+n;d--)delete _[d-1]}else if(n>i)for(d=m-i;d>b;d--)h=d+i-1,f=d+n-1,h in _?_[f]=_[h]:delete _[f];for(d=0;d<n;d++)_[d+b]=arguments[d+2];return _.length=m-i+n,u}})},f1ac:function(t,e){},f221:function(t,e,n){var i=n("efe2"),r=n("fc8c"),o="​᠎";t.exports=function(t){return i((function(){return!!r[t]()||o[t]()!=o||r[t].name!==t}))}},f28e:function(t,e,n){"use strict";var i=n("d9cf"),r=n.n(i);r.a},f30b:function(t,e,n){"use strict";var i=n("5a9e"),r=n("45af").includes,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("includes",(function(t){return r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},f3dd:function(t,e,n){"use strict";var i=n("1c8b"),r=n("d890"),o=n("6d7a"),a=n("9b9d"),s=n("1e2c"),c=n("c54b"),l=n("74cb"),u=n("efe2"),d=n("faa8"),h=n("74e7"),f=n("a719"),g=n("857c"),p=n("3553"),v=n("da10"),y=n("9f67"),_=n("38b9"),m=n("6d60"),b=n("cbab"),x=n("b338"),w=n("c051"),I=n("0a60"),S=n("aa6b"),T=n("d910"),C=n("ef71"),M=n("0fc1"),D=n("1944"),E=n("6d28"),P=n("7db2"),O=n("d5a8"),A=n("7e8b"),k=n("90fb"),R=n("4350"),z=n("6d51"),N=n("27b5"),V=n("b702"),L=n("5dfd").forEach,B=P("hidden"),G="Symbol",F="prototype",j=k("toPrimitive"),H=V.set,U=V.getterFor(G),Z=Object[F],W=r.Symbol,q=o("JSON","stringify"),X=S.f,Y=T.f,$=w.f,Q=C.f,J=E("symbols"),K=E("op-symbols"),tt=E("string-to-symbol-registry"),et=E("symbol-to-string-registry"),nt=E("wks"),it=r.QObject,rt=!it||!it[F]||!it[F].findChild,ot=s&&u((function(){return 7!=m(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=X(Z,e);i&&delete Z[e],Y(t,e,n),i&&t!==Z&&Y(Z,e,i)}:Y,at=function(t,e){var n=J[t]=m(W[F]);return H(n,{type:G,tag:t,description:e}),s||(n.description=e),n},st=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ct=function(t,e,n){t===Z&&ct(K,e,n),g(t);var i=y(e,!0);return g(n),d(J,i)?(n.enumerable?(d(t,B)&&t[B][i]&&(t[B][i]=!1),n=m(n,{enumerable:_(0,!1)})):(d(t,B)||Y(t,B,_(1,{})),t[B][i]=!0),ot(t,i,n)):Y(t,i,n)},lt=function(t,e){g(t);var n=v(e),i=b(n).concat(gt(n));return L(i,(function(e){s&&!dt.call(n,e)||ct(t,e,n[e])})),t},ut=function(t,e){return void 0===e?m(t):lt(m(t),e)},dt=function(t){var e=y(t,!0),n=Q.call(this,e);return!(this===Z&&d(J,e)&&!d(K,e))&&(!(n||!d(this,e)||!d(J,e)||d(this,B)&&this[B][e])||n)},ht=function(t,e){var n=v(t),i=y(e,!0);if(n!==Z||!d(J,i)||d(K,i)){var r=X(n,i);return!r||!d(J,i)||d(n,B)&&n[B][i]||(r.enumerable=!0),r}},ft=function(t){var e=$(v(t)),n=[];return L(e,(function(t){d(J,t)||d(O,t)||n.push(t)})),n},gt=function(t){var e=t===Z,n=$(e?K:v(t)),i=[];return L(n,(function(t){!d(J,t)||e&&!d(Z,t)||i.push(J[t])})),i};if(c||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===Z&&n.call(K,t),d(this,B)&&d(this[B],e)&&(this[B][e]=!1),ot(this,e,_(1,t))};return s&&rt&&ot(Z,e,{configurable:!0,set:n}),at(e,t)},D(W[F],"toString",(function(){return U(this).tag})),D(W,"withoutSetter",(function(t){return at(A(t),t)})),C.f=dt,T.f=ct,S.f=ht,x.f=w.f=ft,I.f=gt,R.f=function(t){return at(k(t),t)},s&&(Y(W[F],"description",{configurable:!0,get:function(){return U(this).description}}),a||D(Z,"propertyIsEnumerable",dt,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),L(b(nt),(function(t){z(t)})),i({target:G,stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var n=W(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!s},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ht}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ft,getOwnPropertySymbols:gt}),i({target:"Object",stat:!0,forced:u((function(){I.f(1)}))},{getOwnPropertySymbols:function(t){return I.f(p(t))}}),q){var pt=!c||u((function(){var t=W();return"[null]"!=q([t])||"{}"!=q({a:t})||"{}"!=q(Object(t))}));i({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,n){var i,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(i=e,(f(e)||void 0!==t)&&!st(t))return h(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!st(e))return e}),r[1]=e,q.apply(null,r)}})}W[F][j]||M(W[F],j,W[F].valueOf),N(W,G),O[B]=!0},f657:function(t,e,n){var i=n("1c8b"),r=n("74e7");i({target:"Array",stat:!0},{isArray:r})},f6e9:function(t,e,n){(function(t){n("ecb4"),n("086d"),n("08d5"),function(t){"use strict";var e="ht",n=t[e],i=Math,r=i.max,o=i.min,a=i.abs,s=i.atan2,c=(i.cos,i.sin,i.ceil),l=n.Default,u=l.getInternal(),d=n.List,h=u.Mat,f=u.getNodeRect,g=u.intersectionLineRect,p=l.getDistance,v=l.setEdgeType,y="left",_="right",m="top",b="bottom",x="edge.type",w="edge.gap",I="edge.center",S="edge.extend",T=function(t,e){return f(t,e).width},C=function(t,e){return f(t,e).height},M=function(t,e){return u.getEdgeAgentPosition(t,e._40I,e.s("edge.source.position"),e.s("edge.source.offset.x"),e.s("edge.source.offset.y"),e.s("edge.source.anchor.x"),e.s("edge.source.anchor.y"))},D=function(t,e){return u.getEdgeAgentPosition(t,e._41I,e.s("edge.target.position"),e.s("edge.target.offset.x"),e.s("edge.target.offset.y"),e.s("edge.target.anchor.x"),e.s("edge.target.anchor.y"))},E=function(t,e){var n=t.s(x),i=t.getEdgeGroup();if(i){var r=0;if(i.eachSiblingEdge((function(t){e.isVisible(t)&&t.s(x)==n&&r++})),r>1)return t.s(w)*(r-1)/2}return 0},P=function(t,e){var n=t.s(x),i=t.isLooped();if(!t.getEdgeGroup())return i?t.s(w):0;var r,o=0,a=0,s=0;return t.getEdgeGroup().getSiblings().each((function(i){i.each((function(i){if(i._40I===t._40I&&i.s(x)==n&&e.isVisible(i)){var c=i.s(w);r?(a+=s/2+c/2,s=c):(r=i,s=c),i===t&&(o=a)}}))})),i?a-o+s:o-a/2},O=function(t,e){var n=e.s("edge.corner.radius");return l.toRoundedCorner(t,n)};u.addMethod(n.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),v("boundary",(function(t,e,n,i){i||(e=-e);var r,o=M(n,t),a=D(n,t),c=f(n,t._40I),l=f(n,t._41I),u=new h(s(a.y-o.y,a.x-o.x)),v=p(o,a),y=o.x,_=o.y;return r=u.tf(0,e),o={x:r.x+y,y:r.y+_},r=u.tf(v,e),a={x:r.x+y,y:r.y+_},r=g(o,a,c),r&&(o={x:r[0],y:r[1]}),r=g(o,a,l),r&&(a={x:r[0],y:r[1]}),{points:new d([o,a])}})),v("ripple",(function(t,e,n,i){i||(e=-e);var r=M(n,t),a=D(n,t),l=p(r,a),u=o(t.s("edge.offset"),l/2),f=t.s("edge.ripple.size"),g=t.s("edge.ripple.length"),v=t.s("edge.ripple.both"),y=t.s(I),_=t.s("edge.ripple.elevation"),m=new d,b=t.s("edge.ripple.straight")?null:new d,x=new h(s(a.y-r.y,a.x-r.x));i||(_=-_),l-=2*u,g>0&&(f=c(l/g));var w=l/f;b&&b.add(1);for(var S=0;f>S;S++)b&&b.add(3),0===S?m.add({x:u+w*S,y:y?0:e}):m.add({x:u+w*S,y:e}),m.add({x:u+w*S+w/2,y:_+e}),v&&(_=-_);for(m.add({x:u+l,y:y?0:e}),S=0;S<m.size();S++){var T=x.tf(m.get(S));T.x+=r.x,T.y+=r.y,m.set(S,T)}return{points:m,segments:b}})),v("h.v",(function(t,e,n){e=P(t,n);var i=new d,r=t.s(I),o=M(n,t),a=o.x,s=o.y,c=D(n,t),l=c.x,u=c.y,h=0,f=0,g=l-a,p=u-s;return r||(h=T(n,t._40I)/2,f=C(n,t._41I)/2),g>=0&&0>=p?(i.add({x:a+h,y:s+e}),i.add({x:l+e,y:s+e}),i.add({x:l+e,y:u+f})):0>=g&&p>=0?(i.add({x:a-h,y:s+e}),i.add({x:l+e,y:s+e}),i.add({x:l+e,y:u-f})):g>=0&&p>=0?(i.add({x:a+h,y:s+e}),i.add({x:l-e,y:s+e}),i.add({x:l-e,y:u-f})):(i.add({x:a-h,y:s+e}),i.add({x:l-e,y:s+e}),i.add({x:l-e,y:u+f})),O(i,t)})),v("v.h",(function(t,e,n){e=P(t,n);var i=new d,r=t.s(I),o=M(n,t),a=o.x,s=o.y,c=D(n,t),l=c.x,u=c.y,h=0,f=0,g=l-a,p=u-s;return r||(h=T(n,t._41I)/2,f=C(n,t._40I)/2),g>=0&&0>=p?(i.add({x:a+e,y:s-f}),i.add({x:a+e,y:u+e}),i.add({x:l-h,y:u+e})):0>=g&&p>=0?(i.add({x:a+e,y:s+f}),i.add({x:a+e,y:u+e}),i.add({x:l+h,y:u+e})):g>=0&&p>=0?(i.add({x:a-e,y:s+f}),i.add({x:a-e,y:u+e}),i.add({x:l-h,y:u+e})):(i.add({x:a-e,y:s-f}),i.add({x:a-e,y:u+e}),i.add({x:l+h,y:u+e})),O(i,t)})),v("ortho",(function(t,e,n){var i=new d,r=t.s(I),o=t.s("edge.ortho"),s=t._40I,c=t._41I,l=M(n,t),u=l.x,h=l.y,f=D(n,t),g=f.x,p=f.y,v=g-u,y=p-h,_=r?0:T(n,s)/2,m=r?0:C(n,s)/2,b=r?0:T(n,c)/2,x=r?0:C(n,c)/2,w=(v-(_+b)*(v>0?1:-1))*o,S=(y-(m+x)*(y>0?1:-1))*o;return a(v)<a(y)?v>=0&&0>=y?(i.add({x:u+e,y:h-m}),i.add({x:u+e,y:h+S+e-m}),i.add({x:g+e,y:h+S+e-m}),i.add({x:g+e,y:p+x})):0>=v&&y>=0?(i.add({x:u+e,y:h+m}),i.add({x:u+e,y:h+S+e+m}),i.add({x:g+e,y:h+S+e+m}),i.add({x:g+e,y:p-x})):v>=0&&y>=0?(i.add({x:u+e,y:h+m}),i.add({x:u+e,y:h+S-e+m}),i.add({x:g+e,y:h+S-e+m}),i.add({x:g+e,y:p-x})):(i.add({x:u+e,y:h-m}),i.add({x:u+e,y:h+S-e-m}),i.add({x:g+e,y:h+S-e-m}),i.add({x:g+e,y:p+x})):v>=0&&0>=y?(i.add({x:u+_,y:h+e}),i.add({x:u+w+e+_,y:h+e}),i.add({x:u+w+e+_,y:p+e}),i.add({x:g-b,y:p+e})):0>=v&&y>=0?(i.add({x:u-_,y:h+e}),i.add({x:u+w+e-_,y:h+e}),i.add({x:u+w+e-_,y:p+e}),i.add({x:g+b,y:p+e})):v>=0&&y>=0?(i.add({x:u+_,y:h+e}),i.add({x:u+w-e+_,y:h+e}),i.add({x:u+w-e+_,y:p+e}),i.add({x:g-b,y:p+e})):(i.add({x:u-_,y:h+e}),i.add({x:u+w-e-_,y:h+e}),i.add({x:u+w-e-_,y:p+e}),i.add({x:g+b,y:p+e})),O(i,t)})),v("flex",(function(t,e,n){var i=new d,r=t.s("edge.flex")+E(t,n),o=t.s(I),s=t._40I,c=t._41I,l=M(n,t),u=l.x,h=l.y,f=D(n,t),g=f.x,p=f.y,v=g-u,y=p-h,_=o?0:T(n,s)/2,m=o?0:C(n,s)/2,b=o?0:T(n,c)/2,x=o?0:C(n,c)/2,w=v>0?r:-r,S=y>0?r:-r;return a(v)<a(y)?v>=0&&0>=y?(i.add({x:u+e,y:h-m}),i.add({x:u+e,y:h+S+e-m}),i.add({x:g+e,y:p-S+e+x}),i.add({x:g+e,y:p+x})):0>=v&&y>=0?(i.add({x:u+e,y:h+m}),i.add({x:u+e,y:h+S+e+m}),i.add({x:g+e,y:p-S+e-x}),i.add({x:g+e,y:p-x})):v>=0&&y>=0?(i.add({x:u+e,y:h+m}),i.add({x:u+e,y:h+S-e+m}),i.add({x:g+e,y:p-S-e-x}),i.add({x:g+e,y:p-x})):(i.add({x:u+e,y:h-m}),i.add({x:u+e,y:h+S-e-m}),i.add({x:g+e,y:p-S-e+x}),i.add({x:g+e,y:p+x})):v>=0&&0>=y?(i.add({x:u+_,y:h+e}),i.add({x:u+w+e+_,y:h+e}),i.add({x:g-w+e-b,y:p+e}),i.add({x:g-b,y:p+e})):0>=v&&y>=0?(i.add({x:u-_,y:h+e}),i.add({x:u+w+e-_,y:h+e}),i.add({x:g-w+e+b,y:p+e}),i.add({x:g+b,y:p+e})):v>=0&&y>=0?(i.add({x:u+_,y:h+e}),i.add({x:u+w-e+_,y:h+e}),i.add({x:g-w-e-b,y:p+e}),i.add({x:g-b,y:p+e})):(i.add({x:u-_,y:h+e}),i.add({x:u+w-e-_,y:h+e}),i.add({x:g-w-e+b,y:p+e}),i.add({x:g+b,y:p+e})),O(i,t)})),v("extend.east",(function(t,e,n){var i=new d,o=t.s(S)+E(t,n),a=t.s(I),s=M(n,t),c=s.x+(a?0:T(n,t._40I)/2),l=s.y,u=D(n,t),h=u.x+(a?0:T(n,t._41I)/2),f=u.y,g=r(c,h)+o;return l>f?(i.add({x:c,y:l+e}),i.add({x:g+e,y:l+e}),i.add({x:g+e,y:f-e}),i.add({x:h,y:f-e})):(i.add({x:c,y:l-e}),i.add({x:g+e,y:l-e}),i.add({x:g+e,y:f+e}),i.add({x:h,y:f+e})),O(i,t)})),v("extend.west",(function(t,e,n){var i=new d,r=t.s(S)+E(t,n),a=t.s(I),s=M(n,t),c=s.x-(a?0:T(n,t._40I)/2),l=s.y,u=D(n,t),h=u.x-(a?0:T(n,t._41I)/2),f=u.y,g=o(c,h)-r;return l>f?(i.add({x:c,y:l+e}),i.add({x:g-e,y:l+e}),i.add({x:g-e,y:f-e}),i.add({x:h,y:f-e})):(i.add({x:c,y:l-e}),i.add({x:g-e,y:l-e}),i.add({x:g-e,y:f+e}),i.add({x:h,y:f+e})),O(i,t)})),v("extend.north",(function(t,e,n){var i=new d,r=t.s(S)+E(t,n),a=t.s(I),s=M(n,t),c=s.x,l=s.y-(a?0:C(n,t._40I)/2),u=D(n,t),h=u.x,f=u.y-(a?0:C(n,t._41I)/2),g=o(l,f)-r;return c>h?(i.add({y:l,x:c+e}),i.add({y:g-e,x:c+e}),i.add({y:g-e,x:h-e}),i.add({y:f,x:h-e})):(i.add({y:l,x:c-e}),i.add({y:g-e,x:c-e}),i.add({y:g-e,x:h+e}),i.add({y:f,x:h+e})),O(i,t)})),v("extend.south",(function(t,e,n){var i=new d,o=t.s(S)+E(t,n),a=t.s(I),s=M(n,t),c=s.x,l=s.y+(a?0:C(n,t._40I)/2),u=D(n,t),h=u.x,f=u.y+(a?0:C(n,t._41I)/2),g=r(l,f)+o;return c>h?(i.add({y:l,x:c+e}),i.add({y:g+e,x:c+e}),i.add({y:g+e,x:h-e}),i.add({y:f,x:h-e})):(i.add({y:l,x:c-e}),i.add({y:g+e,x:c-e}),i.add({y:g+e,x:h+e}),i.add({y:f,x:h+e})),O(i,t)}));var A=function(t,e,n,i,r){if(i.sort((function(t,i){var r=t.getSourceAgent()===e?t.getTargetAgent():t.getSourceAgent(),o=i.getSourceAgent()===e?i.getTargetAgent():i.getSourceAgent(),a=r.p(),s=o.p();if(n===y||n===_){if(a.y>s.y)return 1;if(a.y<s.y)return-1}else{if(a.x>s.x)return 1;if(a.x<s.x)return-1}return l.sortFunc(t.getId(),i.getId())})),r){for(var o,a,s,c=t.getSourceAgent(),u=t.getTargetAgent(),h=0;h<i.size();h++){var f=i.get(h);f.getSourceAgent()===c&&f.getTargetAgent()===u||f.getTargetAgent()===c&&f.getSourceAgent()===u?(a||(a=new d),a.add(f,0)):a?(s||(s=new d),s.add(f)):(o||(o=new d),o.add(f))}i.clear(),o&&i.addAll(o),a&&i.addAll(a),s&&i.addAll(s)}var g=i.indexOf(t),p=i.size(),v=t.s(w);return{side:n,index:g,size:p,offset:-v*(p-1)/2+v*g}},k=function(t,e,n,i,r){var o=e.s(x);return A(e,n,i,n.getAgentEdges().toList((function(e){return t.isVisible(e)&&e.s(x)===o})),r)},R=function(t,e){var n=t.getSourceAgent()===e?t.getTargetAgent():t.getSourceAgent(),i=e.p(),r=n.p(),o=r.x-i.x,s=r.y-i.y;return o>0&&a(s)<=o?_:0>o&&a(s)<=-o?y:s>0&&a(o)<=s?b:m},z=function(t,e,n){var i=e.s(x),r=R(e,n);return A(e,n,r,n.getAgentEdges().toList((function(e){return t.isVisible(e)&&e.s(x)===i&&R(e,n)===r})))},N=function(t,e){var n=t.getSourceAgent()===e,i=n?t.getTargetAgent():t.getSourceAgent(),r=e.p(),o=i.p();return n?r.y>o.y?m:b:r.x<o.x?_:y},V=function(t,e,n){var i=e.s(x),r=N(e,n);return A(e,n,r,n.getAgentEdges().toList((function(e){return t.isVisible(e)&&e.s(x)===i&&N(e,n)===r})),r===_||r===b)},L=function(t,e){var n=t.getSourceAgent()===e,i=n?t.getTargetAgent():t.getSourceAgent(),r=e.p(),o=i.p();return n?r.x<o.x?_:y:r.y>o.y?m:b},B=function(t,e,n){var i=e.s(x),r=L(e,n);return A(e,n,r,n.getAgentEdges().toList((function(e){return t.isVisible(e)&&e.s(x)===i&&L(e,n)===r})),r===_||r===b)},G=function(t,e,n){var i=t.getSourceAgent(),r=t.getTargetAgent(),o=i.getId()>r.getId(),a=o?r:i,s=o?i:r,c=a.p(),l=s.p(),u=n(e,t,a),h=n(e,t,s),f=t.s(I),g=f?0:T(e,a)/2,p=f?0:T(e,s)/2,v=f?0:C(e,a)/2,x=f?0:C(e,s)/2,w=u.offset,S=h.offset,M=u.side,D=h.side,E=new d;return M===m?(E.add({x:c.x+w,y:c.y-v}),E.add({x:c.x+w,y:l.y+S}),D===y?E.add({x:l.x-p,y:l.y+S}):E.add({x:l.x+p,y:l.y+S})):M===b?(E.add({x:c.x+w,y:c.y+v}),E.add({x:c.x+w,y:l.y+S}),D===y?E.add({x:l.x-p,y:l.y+S}):E.add({x:l.x+p,y:l.y+S})):M===y?(E.add({x:c.x-g,y:c.y+w}),E.add({x:l.x+S,y:c.y+w}),D===b?E.add({x:l.x+S,y:l.y+x}):E.add({x:l.x+S,y:l.y-x})):M===_&&(E.add({x:c.x+g,y:c.y+w}),E.add({x:l.x+S,y:c.y+w}),D===b?E.add({x:l.x+S,y:l.y+x}):E.add({x:l.x+S,y:l.y-x})),o&&E.reverse(),O(E,t)};v("ortho2",(function(t,e,n){var i,r,o=t.s(I),a=t.s("edge.ortho"),s=t.getSourceAgent(),c=t.getTargetAgent(),l=s.getId()>c.getId(),u=l?c:s,h=l?s:c,f=u.p(),g=h.p(),p=z(n,t,u),v=z(n,t,h),x=o?0:T(n,u)/2,w=o?0:C(n,u)/2,S=o?0:T(n,h)/2,M=o?0:C(n,h)/2,D=new d,E=p.offset,P=v.offset,A=p.side;return A===_?(i=g.y>f.y?-E:E,r=f.x+x+(g.x-S-f.x-x)*a,D.add({x:f.x+x,y:f.y+E}),D.add({x:r+i,y:f.y+E}),D.add({x:r+i,y:g.y+P}),D.add({x:g.x-S,y:g.y+P})):A===y?(i=g.y>f.y?-E:E,r=f.x-x-(f.x-x-g.x-S)*a,D.add({x:f.x-x,y:f.y+E}),D.add({x:r-i,y:f.y+E}),D.add({x:r-i,y:g.y+P}),D.add({x:g.x+S,y:g.y+P})):A===b?(i=g.x>f.x?-E:E,r=f.y+w+(g.y-M-f.y-w)*a,D.add({x:f.x+E,y:f.y+w}),D.add({x:f.x+E,y:r+i}),D.add({x:g.x+P,y:r+i}),D.add({x:g.x+P,y:g.y-M})):A===m&&(i=g.x>f.x?-E:E,r=f.y-w-(f.y-w-g.y-M)*a,D.add({x:f.x+E,y:f.y-w}),D.add({x:f.x+E,y:r-i}),D.add({x:g.x+P,y:r-i}),D.add({x:g.x+P,y:g.y+M})),l&&D.reverse(),O(D,t)}),!0),v("flex2",(function(t,e,n){var i,r=t.getSourceAgent(),o=t.getTargetAgent(),a=r.getId()>o.getId(),s=a?o:r,c=a?r:o,l=s.p(),u=c.p(),h=z(n,t,s),f=z(n,t,c),g=t.s(I),p=t.s("edge.flex")+(h.size-1)/2*t.s(w),v=g?0:T(n,s)/2,x=g?0:C(n,s)/2,S=g?0:T(n,c)/2,M=g?0:C(n,c)/2,D=new d,E=h.offset,P=f.offset,A=h.side;return A===_?(i=u.y>l.y?-E:E,D.add({x:l.x+v,y:l.y+E}),D.add({x:l.x+v+p+i,y:l.y+E}),D.add({x:u.x-S-p+i,y:u.y+P}),D.add({x:u.x-S,y:u.y+P})):A===y?(i=u.y>l.y?-E:E,D.add({x:l.x-v,y:l.y+E}),D.add({x:l.x-v-p-i,y:l.y+E}),D.add({x:u.x+S+p-i,y:u.y+P}),D.add({x:u.x+S,y:u.y+P})):A===b?(i=u.x>l.x?-E:E,D.add({x:l.x+E,y:l.y+x}),D.add({x:l.x+E,y:l.y+x+p+i}),D.add({x:u.x+P,y:u.y-M-p+i}),D.add({x:u.x+P,y:u.y-M})):A===m&&(i=u.x>l.x?-E:E,D.add({x:l.x+E,y:l.y-x}),D.add({x:l.x+E,y:l.y-x-p-i}),D.add({x:u.x+P,y:u.y+M+p-i}),D.add({x:u.x+P,y:u.y+M})),a&&D.reverse(),O(D,t)}),!0),v("extend.north2",(function(t,e,n){var i=t.getSourceAgent(),r=t.getTargetAgent(),a=i.getId()>r.getId(),s=a?r:i,c=a?i:r,l=s.p(),u=c.p(),h=k(n,t,s,m),f=k(n,t,c,m,!0),g=t.s(I),p=g?0:C(n,s)/2,v=g?0:C(n,c)/2,y=h.offset,_=f.offset,b=t.s(S)+(h.size-1)/2*t.s(w),x=o(l.y-p,u.y-v)-b+(l.x<u.x?y:-y),T=new d;return T.add({x:l.x+y,y:l.y-p}),T.add({x:l.x+y,y:x}),T.add({x:u.x+_,y:x}),T.add({x:u.x+_,y:u.y-v}),a&&T.reverse(),O(T,t)}),!0),v("extend.south2",(function(t,e,n){var i=t.getSourceAgent(),o=t.getTargetAgent(),a=i.getId()>o.getId(),s=a?o:i,c=a?i:o,l=s.p(),u=c.p(),h=k(n,t,s,b),f=k(n,t,c,b,!0),g=t.s(I),p=g?0:C(n,s)/2,v=g?0:C(n,c)/2,y=h.offset,_=f.offset,m=t.s(S)+(h.size-1)/2*t.s(w),x=r(l.y+p,u.y+v)+m+(l.x>u.x?y:-y),T=new d;return T.add({x:l.x+y,y:l.y+p}),T.add({x:l.x+y,y:x}),T.add({x:u.x+_,y:x}),T.add({x:u.x+_,y:u.y+v}),a&&T.reverse(),O(T,t)}),!0),v("extend.west2",(function(t,e,n){var i=t.getSourceAgent(),r=t.getTargetAgent(),a=i.getId()>r.getId(),s=a?r:i,c=a?i:r,l=s.p(),u=c.p(),h=k(n,t,s,m),f=k(n,t,c,m,!0),g=t.s(I),p=g?0:T(n,s)/2,v=g?0:T(n,c)/2,y=h.offset,_=f.offset,b=t.s(S)+(h.size-1)/2*t.s(w),x=o(l.x-p,u.x-v)-b+(l.y<u.y?y:-y),C=new d;return C.add({x:l.x-p,y:l.y+y}),C.add({x:x,y:l.y+y}),C.add({x:x,y:u.y+_}),C.add({x:u.x-v,y:u.y+_}),a&&C.reverse(),O(C,t)}),!0),v("extend.east2",(function(t,e,n){var i=t.getSourceAgent(),o=t.getTargetAgent(),a=i.getId()>o.getId(),s=a?o:i,c=a?i:o,l=s.p(),u=c.p(),h=k(n,t,s,m),f=k(n,t,c,m,!0),g=t.s(I),p=g?0:T(n,s)/2,v=g?0:T(n,c)/2,y=h.offset,_=f.offset,b=t.s(S)+(h.size-1)/2*t.s(w),x=r(l.x+p,u.x+v)+b+(l.y>u.y?y:-y),C=new d;return C.add({x:l.x+p,y:l.y+y}),C.add({x:x,y:l.y+y}),C.add({x:x,y:u.y+_}),C.add({x:u.x+v,y:u.y+_}),a&&C.reverse(),O(C,t)}),!0),v("v.h2",(function(t,e,n){return G(t,n,V)}),!0),v("h.v2",(function(t,e,n){return G(t,n,B)}),!0)}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"))}).call(this,n("9edd"))},f74a:function(t,e,n){"use strict";var i=n("5a9e"),r=i.aTypedArray,o=i.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(r(this),arguments)}))},f80d:function(t,e,n){t.exports=n.p+"static/img/fire.611d9410.svg"},fa41:function(t,e,n){"use strict";var i=n("3553"),r=n("e1d6"),o=n("d88d");t.exports=function(t){var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);while(l>s)e[s++]=t;return e}},faa3:function(t){t.exports=JSON.parse('{"stationData":[{"sortId":"3-02","inNum":5},{"sortId":"6-32","inNum":2},{"sortId":"1-08","inNum":2},{"sortId":"4-09","inNum":3},{"sortId":"7-06","inNum":2},{"sortId":"13-05","inNum":4},{"sortId":"4-23","inNum":2},{"sortId":"7-07","inNum":2},{"sortId":"1-09","inNum":4},{"sortId":"2-12","inNum":5},{"sortId":"6-11","inNum":1},{"sortId":"5-07","inNum":3},{"sortId":"1-15","inNum":2},{"sortId":"21-19","inNum":2},{"sortId":"3-12","inNum":5},{"sortId":"APM-02","inNum":5},{"sortId":"6-04","inNum":5},{"sortId":"GF-22","inNum":3},{"sortId":"3-23","inNum":5},{"sortId":"9-01","inNum":4},{"sortId":"APM-05","inNum":2},{"sortId":"6-03","inNum":3},{"sortId":"6-29","inNum":5},{"sortId":"7-03","inNum":3},{"sortId":"4-03","inNum":4},{"sortId":"4-02","inNum":4},{"sortId":"1-07","inNum":4},{"sortId":"GF-11","inNum":4},{"sortId":"6-02","inNum":5},{"sortId":"21-18","inNum":1},{"sortId":"3-30","inNum":2},{"sortId":"2-19","inNum":3},{"sortId":"3-20","inNum":5},{"sortId":"5-17","inNum":2},{"sortId":"4-13","inNum":3},{"sortId":"6-06","inNum":4},{"sortId":"4-14","inNum":3},{"sortId":"GF-02","inNum":1},{"sortId":"5-08","inNum":2},{"sortId":"1-04","inNum":2},{"sortId":"GF-05","inNum":3},{"sortId":"8-15","inNum":2},{"sortId":"4-04","inNum":2},{"sortId":"9-07","inNum":3},{"sortId":"2-09","inNum":2},{"sortId":"6-26","inNum":2},{"sortId":"8-21","inNum":4},{"sortId":"6-18","inNum":3},{"sortId":"21-17","inNum":5},{"sortId":"GF-04","inNum":2},{"sortId":"2-10","inNum":4},{"sortId":"2-18","inNum":4},{"sortId":"5-01","inNum":2},{"sortId":"13-06","inNum":2},{"sortId":"8-20","inNum":4},{"sortId":"3-06","inNum":2},{"sortId":"6-08","inNum":2},{"sortId":"4-07","inNum":5},{"sortId":"3-26","inNum":3},{"sortId":"GF-07","inNum":2},{"sortId":"GF-09","inNum":5},{"sortId":"5-15","inNum":3},{"sortId":"4-17","inNum":3},{"sortId":"5-20","inNum":4},{"sortId":"6-22","inNum":4},{"sortId":"3-27","inNum":2},{"sortId":"21-10","inNum":2},{"sortId":"5-22","inNum":2},{"sortId":"3-01","inNum":1},{"sortId":"14-05","inNum":4},{"sortId":"GF-15","inNum":3},{"sortId":"14-16","inNum":5},{"sortId":"6-13","inNum":2},{"sortId":"6-19","inNum":2},{"sortId":"2-02","inNum":5},{"sortId":"2-04","inNum":5},{"sortId":"8-26","inNum":4},{"sortId":"13-09","inNum":5},{"sortId":"21-12","inNum":3},{"sortId":"4-10","inNum":2},{"sortId":"21-20","inNum":1},{"sortId":"4-05","inNum":1},{"sortId":"3-03","inNum":2},{"sortId":"2-23","inNum":2},{"sortId":"14-02","inNum":2},{"sortId":"6-27","inNum":3},{"sortId":"3-15","inNum":1},{"sortId":"13-08","inNum":5},{"sortId":"14-20","inNum":2},{"sortId":"2-21","inNum":2},{"sortId":"8-22","inNum":4},{"sortId":"5-14","inNum":5},{"sortId":"GF-19","inNum":3},{"sortId":"13-11","inNum":4},{"sortId":"4-21","inNum":3},{"sortId":"14-17","inNum":2},{"sortId":"6-31","inNum":3},{"sortId":"4-20","inNum":5},{"sortId":"6-12","inNum":4},{"sortId":"21-15","inNum":4}],"trainDataArr":[{"percent":65,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1010","code":"GZDT-0000","lineId":"1","location":30,"direction":2},{"percent":85,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0100","code":"GZDT-0011","lineId":"1","location":14,"direction":1},{"percent":72,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-1100","lineId":"1","location":0,"direction":1},{"percent":37,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1011","code":"GZDT-0001","lineId":"1","location":77,"direction":1},{"percent":10,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0001","code":"GZDT-0001","lineId":"1","location":70,"direction":1},{"percent":48,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1101","id":"GZDT-0000","code":"GZDT-0000","lineId":"2","location":39,"direction":1},{"percent":71,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0001","code":"GZDT-0011","lineId":"2","location":59,"direction":2},{"percent":91,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0010","code":"GZDT-0000","lineId":"2","location":34,"direction":2},{"percent":73,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1011","id":"GZDT-0101","code":"GZDT-0000","lineId":"2","location":19,"direction":2},{"percent":54,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0011","code":"GZDT-0001","lineId":"2","location":15,"direction":2},{"percent":55,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0010","code":"GZDT-1100","lineId":"2","location":13,"direction":1},{"percent":18,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"3","location":90,"direction":1},{"percent":46,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0010","code":"GZDT-1100","lineId":"3","location":38,"direction":1},{"percent":31,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-1000","code":"GZDT-0100","lineId":"3","location":21,"direction":1},{"percent":87,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0000","code":"GZDT-0110","lineId":"3","location":69,"direction":1},{"percent":73,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0011","code":"GZDT-1000","lineId":"3","location":96,"direction":1},{"percent":72,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0000","lineId":"3B","location":6,"direction":2},{"percent":87,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0010","code":"GZDT-0000","lineId":"3B","location":7,"direction":2},{"percent":38,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0101","code":"GZDT-1000","lineId":"3B","location":76,"direction":1},{"percent":8,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1110","code":"GZDT-1010","lineId":"3B","location":26,"direction":1},{"percent":94,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-1000","code":"GZDT-0000","lineId":"3B","location":21,"direction":2},{"percent":13,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0000","code":"GZDT-0000","lineId":"4","location":89,"direction":1},{"percent":37,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1110","id":"GZDT-0000","code":"GZDT-0000","lineId":"4","location":60,"direction":2},{"percent":96,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0100","code":"GZDT-1100","lineId":"4","location":90,"direction":1},{"percent":69,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-1010","code":"GZDT-0000","lineId":"4","location":3,"direction":2},{"percent":12,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-1101","code":"GZDT-0000","lineId":"4","location":98,"direction":2},{"percent":4,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0000","code":"GZDT-0010","lineId":"4","location":29,"direction":1},{"percent":17,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0111","lineId":"5","location":91,"direction":2},{"percent":11,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0000","code":"GZDT-0010","lineId":"5","location":60,"direction":2},{"percent":68,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0010","lineId":"5","location":64,"direction":1},{"percent":22,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-0010","lineId":"5","location":72,"direction":1},{"percent":40,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0000","code":"GZDT-1100","lineId":"5","location":4,"direction":2},{"percent":48,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1001","code":"GZDT-0100","lineId":"6","location":73,"direction":1},{"percent":36,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0100","lineId":"6","location":0,"direction":1},{"percent":73,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-1000","lineId":"6","location":46,"direction":1},{"percent":19,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1010","lineId":"6","location":26,"direction":2},{"percent":93,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0100","code":"GZDT-1010","lineId":"6","location":22,"direction":1},{"percent":27,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1000","lineId":"7","location":82,"direction":1},{"percent":4,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0100","code":"GZDT-0110","lineId":"7","location":86,"direction":1},{"percent":99,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0100","code":"GZDT-0000","lineId":"7","location":81,"direction":1},{"percent":25,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0000","code":"GZDT-1000","lineId":"7","location":58,"direction":2},{"percent":96,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0010","code":"GZDT-0010","lineId":"8","location":32,"direction":1},{"percent":72,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-1010","lineId":"8","location":20,"direction":1},{"percent":44,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0000","code":"GZDT-1000","lineId":"8","location":98,"direction":2},{"percent":33,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0111","lineId":"8","location":72,"direction":2},{"percent":95,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0100","code":"GZDT-0000","lineId":"8","location":70,"direction":2},{"percent":99,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0100","code":"GZDT-0000","lineId":"9","location":88,"direction":1},{"percent":25,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-0000","lineId":"9","location":60,"direction":1},{"percent":49,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-1000","lineId":"9","location":72,"direction":1},{"percent":54,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1000","code":"GZDT-0000","lineId":"9","location":51,"direction":1},{"percent":88,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0000","lineId":"9","location":17,"direction":1},{"percent":82,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0100","code":"GZDT-0001","lineId":"9","location":13,"direction":1},{"percent":48,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0110","id":"GZDT-0100","code":"GZDT-0101","lineId":"13","location":22,"direction":2},{"percent":68,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0101","code":"GZDT-0000","lineId":"13","location":53,"direction":2},{"percent":53,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0010","code":"GZDT-0111","lineId":"13","location":98,"direction":2},{"percent":12,"reverse":true,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0000","code":"GZDT-0010","lineId":"13","location":13,"direction":1},{"percent":4,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0000","lineId":"14","location":37,"direction":2},{"percent":11,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0100","lineId":"14","location":32,"direction":1},{"percent":50,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"14","location":48,"direction":1},{"percent":80,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0000","code":"GZDT-0100","lineId":"14","location":10,"direction":2},{"percent":76,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0100","code":"GZDT-0001","lineId":"14","location":87,"direction":2},{"percent":17,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-0000","lineId":"ZSC","location":84,"direction":2},{"percent":86,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0010","code":"GZDT-0010","lineId":"ZSC","location":84,"direction":1},{"percent":62,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-1100","code":"GZDT-0000","lineId":"ZSC","location":42,"direction":1},{"percent":88,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-1011","code":"GZDT-0001","lineId":"ZSC","location":35,"direction":2},{"percent":32,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1100","code":"GZDT-0000","lineId":"ZSC","location":23,"direction":1},{"percent":75,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0001","code":"GZDT-1100","lineId":"APM","location":82,"direction":2},{"percent":45,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"APM","location":96,"direction":1},{"percent":79,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0001","lineId":"APM","location":9,"direction":2},{"percent":83,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-1100","lineId":"APM","location":15,"direction":1},{"percent":77,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1001","code":"GZDT-1001","lineId":"APM","location":59,"direction":1},{"percent":19,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-0100","lineId":"APM","location":56,"direction":2},{"percent":92,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0001","code":"GZDT-1000","lineId":"GF","location":3,"direction":1},{"percent":84,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0100","lineId":"GF","location":23,"direction":2},{"percent":55,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1110","id":"GZDT-0010","code":"GZDT-0000","lineId":"GF","location":44,"direction":1},{"percent":55,"reverse":true,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0101","code":"GZDT-0110","lineId":"GF","location":100,"direction":2},{"percent":96,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1001","code":"GZDT-0000","lineId":"GF","location":40,"direction":2},{"percent":40,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0110","id":"GZDT-0010","code":"GZDT-1000","lineId":"GF","location":19,"direction":1},{"percent":62,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0100","lineId":"21","location":84,"direction":1},{"percent":90,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0100","code":"GZDT-0100","lineId":"21","location":0,"direction":2},{"percent":68,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0001","code":"GZDT-0110","lineId":"21","location":27,"direction":2},{"percent":66,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1011","lineId":"21","location":68,"direction":2},{"percent":22,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0101","code":"GZDT-1000","lineId":"21","location":75,"direction":1},{"percent":63,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0010","code":"GZDT-1010","lineId":"21","location":58,"direction":2}],"trainData":{"line1":{"carsOptions":[{"percent":65,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1010","code":"GZDT-0000","lineId":"1","location":30,"direction":2},{"percent":85,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0100","code":"GZDT-0011","lineId":"1","location":14,"direction":1},{"percent":72,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-1100","lineId":"1","location":0,"direction":1},{"percent":37,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1011","code":"GZDT-0001","lineId":"1","location":77,"direction":1},{"percent":10,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0001","code":"GZDT-0001","lineId":"1","location":70,"direction":1}]},"line2":{"carsOptions":[{"percent":48,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1101","id":"GZDT-0000","code":"GZDT-0000","lineId":"2","location":39,"direction":1},{"percent":71,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0001","code":"GZDT-0011","lineId":"2","location":59,"direction":2},{"percent":91,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0010","code":"GZDT-0000","lineId":"2","location":34,"direction":2},{"percent":73,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1011","id":"GZDT-0101","code":"GZDT-0000","lineId":"2","location":19,"direction":2},{"percent":54,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0011","code":"GZDT-0001","lineId":"2","location":15,"direction":2},{"percent":55,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0010","code":"GZDT-1100","lineId":"2","location":13,"direction":1}]},"line3":{"carsOptions":[{"percent":18,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"3","location":90,"direction":1},{"percent":46,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0010","code":"GZDT-1100","lineId":"3","location":38,"direction":1},{"percent":31,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-1000","code":"GZDT-0100","lineId":"3","location":21,"direction":1},{"percent":87,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0000","code":"GZDT-0110","lineId":"3","location":69,"direction":1},{"percent":73,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0011","code":"GZDT-1000","lineId":"3","location":96,"direction":1}]},"line3B":{"carsOptions":[{"percent":72,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0000","lineId":"3B","location":6,"direction":2},{"percent":87,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0010","code":"GZDT-0000","lineId":"3B","location":7,"direction":2},{"percent":38,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0101","code":"GZDT-1000","lineId":"3B","location":76,"direction":1},{"percent":8,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1110","code":"GZDT-1010","lineId":"3B","location":26,"direction":1},{"percent":94,"reverse":true,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-1000","code":"GZDT-0000","lineId":"3B","location":21,"direction":2}]},"line4":{"carsOptions":[{"percent":13,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0000","code":"GZDT-0000","lineId":"4","location":89,"direction":1},{"percent":37,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1110","id":"GZDT-0000","code":"GZDT-0000","lineId":"4","location":60,"direction":2},{"percent":96,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0100","code":"GZDT-1100","lineId":"4","location":90,"direction":1},{"percent":69,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-1010","code":"GZDT-0000","lineId":"4","location":3,"direction":2},{"percent":12,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-1101","code":"GZDT-0000","lineId":"4","location":98,"direction":2},{"percent":4,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0000","code":"GZDT-0010","lineId":"4","location":29,"direction":1}]},"line5":{"carsOptions":[{"percent":17,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0111","lineId":"5","location":91,"direction":2},{"percent":11,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0000","code":"GZDT-0010","lineId":"5","location":60,"direction":2},{"percent":68,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0010","lineId":"5","location":64,"direction":1},{"percent":22,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-0010","lineId":"5","location":72,"direction":1},{"percent":40,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0000","code":"GZDT-1100","lineId":"5","location":4,"direction":2}]},"line6":{"carsOptions":[{"percent":48,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1001","code":"GZDT-0100","lineId":"6","location":73,"direction":1},{"percent":36,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0100","lineId":"6","location":0,"direction":1},{"percent":73,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-1000","lineId":"6","location":46,"direction":1},{"percent":19,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1010","lineId":"6","location":26,"direction":2},{"percent":93,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0100","code":"GZDT-1010","lineId":"6","location":22,"direction":1}]},"line7":{"carsOptions":[{"percent":27,"reverse":false,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1000","lineId":"7","location":82,"direction":1},{"percent":4,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0100","code":"GZDT-0110","lineId":"7","location":86,"direction":1},{"percent":99,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0100","code":"GZDT-0000","lineId":"7","location":81,"direction":1},{"percent":25,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0000","code":"GZDT-1000","lineId":"7","location":58,"direction":2}]},"line8":{"carsOptions":[{"percent":96,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0010","code":"GZDT-0010","lineId":"8","location":32,"direction":1},{"percent":72,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-1010","lineId":"8","location":20,"direction":1},{"percent":44,"reverse":false,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0000","code":"GZDT-1000","lineId":"8","location":98,"direction":2},{"percent":33,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0111","lineId":"8","location":72,"direction":2},{"percent":95,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0100","code":"GZDT-0000","lineId":"8","location":70,"direction":2}]},"line9":{"carsOptions":[{"percent":99,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-0100","code":"GZDT-0000","lineId":"9","location":88,"direction":1},{"percent":25,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-0000","lineId":"9","location":60,"direction":1},{"percent":49,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-1000","lineId":"9","location":72,"direction":1},{"percent":54,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1000","code":"GZDT-0000","lineId":"9","location":51,"direction":1},{"percent":88,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0000","lineId":"9","location":17,"direction":1},{"percent":82,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0100","code":"GZDT-0001","lineId":"9","location":13,"direction":1}]},"line13":{"carsOptions":[{"percent":48,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0110","id":"GZDT-0100","code":"GZDT-0101","lineId":"13","location":22,"direction":2},{"percent":68,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0101","code":"GZDT-0000","lineId":"13","location":53,"direction":2},{"percent":53,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0010","code":"GZDT-0111","lineId":"13","location":98,"direction":2},{"percent":12,"reverse":true,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0000","code":"GZDT-0010","lineId":"13","location":13,"direction":1}]},"line14":{"carsOptions":[{"percent":4,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0000","lineId":"14","location":37,"direction":2},{"percent":11,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0100","lineId":"14","location":32,"direction":1},{"percent":50,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"14","location":48,"direction":1},{"percent":80,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1010","id":"GZDT-0000","code":"GZDT-0100","lineId":"14","location":10,"direction":2},{"percent":76,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0100","code":"GZDT-0001","lineId":"14","location":87,"direction":2}]},"lineZSC":{"carsOptions":[{"percent":17,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-0000","code":"GZDT-0000","lineId":"ZSC","location":84,"direction":2},{"percent":86,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0010","code":"GZDT-0010","lineId":"ZSC","location":84,"direction":1},{"percent":62,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0011","id":"GZDT-1100","code":"GZDT-0000","lineId":"ZSC","location":42,"direction":1},{"percent":88,"reverse":true,"isStop":true,"type":"toobusy","speed":0.05,"metroName":"GZDT-0100","id":"GZDT-1011","code":"GZDT-0001","lineId":"ZSC","location":35,"direction":2},{"percent":32,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1100","code":"GZDT-0000","lineId":"ZSC","location":23,"direction":1}]},"lineAPM":{"carsOptions":[{"percent":75,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1001","id":"GZDT-0001","code":"GZDT-1100","lineId":"APM","location":82,"direction":2},{"percent":45,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0010","lineId":"APM","location":96,"direction":1},{"percent":79,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-0001","lineId":"APM","location":9,"direction":2},{"percent":83,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-1100","id":"GZDT-0000","code":"GZDT-1100","lineId":"APM","location":15,"direction":1},{"percent":77,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-1001","code":"GZDT-1001","lineId":"APM","location":59,"direction":1},{"percent":19,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-1000","code":"GZDT-0100","lineId":"APM","location":56,"direction":2}]},"lineGF":{"carsOptions":[{"percent":92,"reverse":false,"isStop":true,"type":"normal","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-0001","code":"GZDT-1000","lineId":"GF","location":3,"direction":1},{"percent":84,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0000","code":"GZDT-0100","lineId":"GF","location":23,"direction":2},{"percent":55,"reverse":false,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-1110","id":"GZDT-0010","code":"GZDT-0000","lineId":"GF","location":44,"direction":1},{"percent":55,"reverse":true,"isStop":false,"type":"toobusy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0101","code":"GZDT-0110","lineId":"GF","location":100,"direction":2},{"percent":96,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-1000","id":"GZDT-1001","code":"GZDT-0000","lineId":"GF","location":40,"direction":2},{"percent":40,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0110","id":"GZDT-0010","code":"GZDT-1000","lineId":"GF","location":19,"direction":1}]},"line21":{"carsOptions":[{"percent":62,"reverse":false,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0001","code":"GZDT-0100","lineId":"21","location":84,"direction":1},{"percent":90,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0101","id":"GZDT-0100","code":"GZDT-0100","lineId":"21","location":0,"direction":2},{"percent":68,"reverse":true,"isStop":false,"type":"normal","speed":0.05,"metroName":"GZDT-0001","id":"GZDT-0001","code":"GZDT-0110","lineId":"21","location":27,"direction":2},{"percent":66,"reverse":false,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0000","code":"GZDT-1011","lineId":"21","location":68,"direction":2},{"percent":22,"reverse":true,"isStop":false,"type":"busy","speed":0.05,"metroName":"GZDT-0010","id":"GZDT-0101","code":"GZDT-1000","lineId":"21","location":75,"direction":1},{"percent":63,"reverse":true,"isStop":true,"type":"busy","speed":0.05,"metroName":"GZDT-0000","id":"GZDT-0010","code":"GZDT-1010","lineId":"21","location":58,"direction":2}]}}}')},fc6e:function(t,e,n){"use strict";var i=n("5a9e"),r=n("5dfd").forEach,o=i.aTypedArray,a=i.exportTypedArrayMethod;a("forEach",(function(t){r(o(this),t,arguments.length>1?arguments[1]:void 0)}))},fc8c:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},fe59:function(t,e,n){"use strict";var i=n("1c8b"),r=n("3c10");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},fe8a:function(t,e,n){var i=n("1c8b"),r=n("3553"),o=n("cbab"),a=n("efe2"),s=a((function(){o(1)}));i({target:"Object",stat:!0,forced:s},{keys:function(t){return o(r(t))}})}}]);